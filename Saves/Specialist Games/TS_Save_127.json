{
  "SaveName": "Areonautica Imperialis",
  "GameMode": "Areonautica Imperialis Base Map",
  "Gravity": 0.5000001,
  "PlayArea": 1.0,
  "Date": "3/22/2020 3:38:06 PM",
  "Table": "Table_None",
  "Sky": "Sky_Museum",
  "Note": "\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nCome join us on the TTS Warhammer 40k discord!                           \n\ndiscord.gg/XkBbs5M                ",
  "Rules": "",
  "XmlUI": "<!-- Xml UI. See documentation: https://api.tabletopsimulator.com/ui/introUI/ -->\r\n<Defaults>\r\n  <Button width=\"550\" height=\"150\" fontSize=\"40\" onClick=\"\" fontStyle=\"Bold\"/>\r\n  <Text fontSize=\"100\" color=\"#000000\" fontStyle=\"Bold\"/>\r\n</Defaults>\r\n\r\n<Panel id=\"manoeuvre\" active=\"false\" position=\"0 400 0\" scale=\"0.5 0.5 0.5\" offsetXY=\"0 0\" color=\"#99999900\" visibility=\"None|Hearts|Spades\">\r\n  <Text offsetXY=\"0 100\" color=\"#888888\" fontSize=\"80\">Give manoeuvre to selected Base</Text>\r\n  <Button id=\"manoeuvre1Btn\" offsetXY=\"-1400 0\" color=\"Gray\"  onClick=\"giveManoeuvre1\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">1 LEVEL FLIGHT</Button>\r\n   <Button id=\"overridemanoeuvre1Btn\" offsetXY=\"-1400 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre1\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">1 OVERRIDE</Button>\r\n  <Button id=\"manoeuvre2Btn\" offsetXY=\"-1000 0\" color=\"Gray\"  onClick=\"giveManoeuvre2\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">2 SWOOP</Button>\r\n   <Button id=\"overridemanoeuvre2Btn\" offsetXY=\"-1000 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre2\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">2 OVERRIDE</Button>\r\n  <Button id=\"manoeuvre3Btn\" offsetXY=\"-600 0\" color=\"Gray\"  onClick=\"giveManoeuvre3\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">3 TURN</Button>\r\n  <Button id=\"overridemanoeuvre3Btn\" offsetXY=\"-600 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre3\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">3 OVERRIDE</Button>\r\n  <Button id=\"manoeuvre4Btn\" offsetXY=\"-200 0\" color=\"Gray\"  onClick=\"giveManoeuvre4\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">4 SNAP TURN</Button>\r\n   <Button id=\"overridemanoeuvre4Btn\" offsetXY=\"-200 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre4\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">4 OVERRIDE</Button>\r\n  <Button id=\"manoeuvre5Btn\" offsetXY=\"200 0\" color=\"Gray\"  onClick=\"giveManoeuvre5\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">5 STALL TURN</Button>\r\n   <Button id=\"overridemanoeuvre5Btn\" offsetXY=\"200 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre5\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">5 OVERRIDE</Button>\r\n  <Button id=\"manoeuvre5Btn\" offsetXY=\"600 0\" color=\"Gray\"  onClick=\"giveManoeuvre6\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">6 STOOP </Button>\r\n   <Button id=\"overridemanoeuvre6Btn\" offsetXY=\"600 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre6\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">6 OVERRIDE</Button>\r\n  <Button id=\"manoeuvre5Btn\" offsetXY=\"1000 0\" color=\"Gray\"  onClick=\"giveManoeuvre7\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">7 BANK </Button>\r\n   <Button id=\"overridemanoeuvre7Btn\" offsetXY=\"1000 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre7\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">7 OVERRIDE</Button>\r\n  <Button id=\"manoeuvre5Btn\" offsetXY=\"1400 0\" color=\"Gray\"  onClick=\"giveManoeuvre8\" width=\"300\" height=\"100\" fontSize=\"30\"  fontStyle=\"Bold\">8 WING OVER </Button>\r\n   <Button id=\"overridemanoeuvre8Btn\" offsetXY=\"1400 -120\" color=\"Gray\"  onClick=\"overrideManoeuvre8\" width=\"250\" height=\"70\" fontSize=\"30\"  fontStyle=\"Bold\">8 OVERRIDE</Button>\r\n   <Image id=\"manoeuvresSheet\" active=\"true\" offsetXY=\"1310 -950\" color=\"White\" width=\"860\" height=\"1200\" image=\"ManoeuvresSheet\"></Image>\r\n</Panel>\r\n\r\n<Panel id=\"manoeuvresSheetPanel\" active=\"false\" position=\"0 400 0\" scale=\"0.5 0.5 0.5\" offsetXY=\"0 0\" color=\"#99999900\" visibility=\"None|Hearts|Spades\">\r\n     <Image id=\"manoeuvresSheet2\" active=\"true\" offsetXY=\"1310 -950\" color=\"White\" width=\"860\" height=\"1200\" image=\"ManoeuvresSheet\"></Image>\r\n</Panel>\r\n\r\n\r\n<Panel id=\"rollDice\" active=\"false\" position=\"0 -500 0\" scale=\"0.5 0.5 0.5\" offsetXY=\"0 0\" color=\"#99999900\" visibility=\"None|Hearts|Spades\">\r\n<Text fontSize=\"50\" color=\"Grey\" offsetXY=\"0 100\" >SELECT A BASE FIRST</Text>\r\n  <Button id=\"toDiceRoller\" offsetXY=\"-500 0\" color=\"Black\" textColor=\"Green\" onClick=\"goToDiceRoller\" width=\"600\" height=\"100\" fontSize=\"40\"  fontStyle=\"Bold\">TO DICE ROLL</Button>\r\n  <Button id=\"toSquad\" offsetXY=\"500 0\" color=\"Black\" textColor=\"Red\"  onClick=\"goToSquad\"  width=\"600\" height=\"100\" fontSize=\"40\"  fontStyle=\"Bold\">BACK TO SQUAD</Button>\r\n\r\n</Panel>\r\n\r\n<Panel id=\"main\" active=\"false\" position=\"0 0 0\" scale=\"0.5 0.5 0.5\" offsetXY=\"0 0\" color=\"#999999\" visibility=\"Diamonds\">\r\n  <Text offsetXY=\"0 400\">CHOOSE YOUR SEAT</Text>\r\n  <Button id=\"redBtn\" offsetXY=\"-300 200\" color=\"#bb0000\"  onClick=\"placeToRed\">Red Player</Button>\r\n  <Button id=\"orangeBtn\" offsetXY=\"-300 0\" color=\"Orange\"  onClick=\"placeToOrange\">Orange Player</Button>\r\n  <Button id=\"blueBtn\" offsetXY=\"300 200\" color=\"#0033bb\" textColor=\"#aaaaaa\" onClick=\"placeToBlue\">Blue Player</Button>\r\n  <Button id=\"tealBtn\" offsetXY=\"300 0\" color=\"Teal\"  onClick=\"placeToTeal\">Teal Player</Button>\r\n  <Button id=\"greyBtn\" offsetXY=\"0 -250\"  color=\"#666666\" width=\"1150\" height=\"200\"  onClick=\"placeToGray\">Spectator</Button>\r\n  <Button id=\"closeBtn\" offsetXY=\"0 -475\"  color=\"#000000\" textColor=\"#aaaaaa\" width=\"500\" height=\"80\"  fontSize=\"30\" onClick=\"closeMenu\">CLOSE MENU</Button>\r\n</Panel>\r\n\r\n<Panel id=\"terrainInfo\" active=\"false\" position=\"0 0 0\" scale=\"1 1 1\" offsetXY=\"0 0\" color=\"#999999\">\r\n <Text fontSize=\"50\" offsetXY=\"0 500\">BASES AND CHARACTER SHEET INSTRUCTIONS</Text>\r\n   <Text fontSize=\"16\" fontStyle=\"Bold\">\r\n\r\n\r\n       HOW TO SET UP BASES\r\n\r\n       - Spawn and CLAIM a base. Now you are  the owner of the base. Only the owner and the BLACK Player are allowed to manipulate it. Other players can only inspect it.\r\n       - Set the type of Aircraft by writing it in the first line of the desciption (REQUIRED). You can add upgades, weapons, pilot and crew by writing their names in the other lines, one upgrade per line.\r\n       Available names are listed near each \"Hangar\".\r\n       (You can have it done automatically later if you are using a Character sheet).\r\n       - Choose a name for the plane. You are free to use the one that you want.\r\n       - Place a model of your choice for the plane above the base and LINK it. If the plane is facing the wrong way, select the base and press the Numpad 0 to rotate it.\r\n       You can spawn some plane models by right clicking the relative button in the \"Hangar\".\r\n\r\n\r\n       HOW TO SET UP AND USE CHARACTER SHEETS\r\n\r\n       - Spawn and CLAIM a Character sheet. Now you are  the owner of the sheet. Only The owner and the BLACK Player are allowed to manipulate it. Other players can only inspect it.\r\n       - Select the base that you want to link and press the LINK button on the Character Sheet.\r\n       - Place the datasheet of the plane and the datacards of the upgrades, weapons, pilot and crew on the sheet to automatically update the stats of the linked base.\r\n       You can spawn the datasheets and datacards by left clicking the relative button in the \"Hangar\".\r\n       - You can use the GO TO PLANE button to move the camera on the base.\r\n       - Click OPTIONS to be able to link another base or to reset the owner.\r\n\r\n\r\n       HOW TO USE BASES\r\n       (LMB= left click, RMB= right click)\r\n\r\n       ALTITUDE and SPEED: LMB increase, RMB decrease. If the aircraft type is properly set the color of the button will change if the value goes outside the min/max bounds.\r\n\r\n       FIRING ARCS: LMB to higlight the hexes partially inside the firing arc, RMB to highligth the ones fully inside.\r\n       The colors are for Short, Medium and Long range.\r\n\r\n       AUTO TAIL: it will highligth the aircrafts eligibles for tailing.\r\n\r\n       DATA and LOADOUT: LMB opens a window showing the type and the upgrades of the aircraft, RMB moves the camera on the Character Sheet if present.\r\n\r\n       HP and FUEL: RMB to decrease.\r\n\r\n       NUMPAD KEYS: 4,6,2,8 change the X and Z orientation of the model, for coolness.\r\n       5 resets the orientation.\r\n       0 rotates the plane on Y axis by 90. USE ONLY FOR DEBUG if the model is not facing the forward direction of the base.\r\n\r\n\r\n       OPT: opens the Options menu.\r\n\r\n       ADD HP: LMB increase the hp (in case you made a mistake or the aircraft is repaired)\r\n\r\n       REFRESH STATS: in case you are  not using a Character Sheet, it will update the plane type and upgrades after you change the base description.\r\n\r\n       UNLINK PLANE: unlinks the plane model so you are free to change it.\r\n\r\n       RESET OWNER: resets the owner of the base so it can be claimed by another color.\r\n\r\n\r\nHave fun!</Text>\r\n  <Button id=\"closeBtnT\" offsetXY=\"0 -500\"  color=\"#000000\" textColor=\"#aaaaaa\" width=\"180\" height=\"60\"  fontSize=\"30\" onClick=\"closeTerrain\">CLOSE</Button>\r\n</Panel>\r\n\r\n<Panel id=\"gameInfo\" active=\"false\" position=\"0 0 0\" scale=\"1 1 1\" offsetXY=\"0 0\" color=\"#999999\">\r\n    <Text fontSize=\"50\" offsetXY=\"0 500\">GAMING INSTRUCTIONS</Text>\r\n    <Text fontSize=\"16\" fontStyle=\"Bold\">The area of engagement mat is a modified \"Flex Table\" (by MrStump) with fixed dimensions. You can change the background of the mat by clicking on the white button on one of the legs and paste the URL of the image.\r\n   You can store URLs in memory by adding them individually so you can recall them easily if you want to make a local version with stored images.\r\n\r\n   To roll dice simply drop them into the small cardboard box, it will roll them and place them in order on the rolling mat. It supports both d6 and d12.\r\n   The rolling mat will display the results along with the total dice rolled.\r\n   Use the description of the small box to change your preferences and the behavior of the tool.\r\n\r\n\r\n   The counters are self explanatory, the players turn and the game turn ones are automatic, you don't need to update the manually.\r\n\r\n   Added infinite bags of d3, d6 and d12.\r\n\r\n   When loading a save file of a started game, the players will be automatically placed in the seats they had when started to play.\r\n\r\n\r\n   SETTING UP THE GAME\r\n\r\n   When loading or connecting choose your seat in the shown menu.\r\n\r\n   Spawn your bases, models, datacards and Character sheets using the buttons near each \"Hangar\". They are the same even if have a different look.\r\n\r\n\r\n   STARTING THE GAME\r\n\r\n   Deploy the aircrafts as per the rules for the mission you are playing.\r\n\r\n   In the Choose Maoeuvres phase you can use the menu buttons to spawn Scripted Ace Manoeuvres tokens easily (see page 2).\r\n   In the Tailing Fire and Firing phases you can use the menu buttons to move to and from your dice mat.\r\n\r\n\r\n   MANOEUVRES TOKENS\r\n\r\n   Left Click to toggle between hidden and visible. All players see the same image (i.e. when you see a hidden token it's hidden to everyone).\r\n\r\n   Right Click peeks at the token and prints a chat message to you so you can look at it without revealing it to the opponent.\r\n\r\n   If an opponent (presumably accidentally :P) tries to peek or flip a token that belongs to someone else, a message will be displayed in the chat.\r\n\r\n\r\n\r\n\r\n   You can save and load your game at any point of the game or setup.\r\n   In case of bugs simply let [BCS]Phubar know and it will be dealt with as soon as possible</Text>\r\n   <Button id=\"closeBtnT\" offsetXY=\"0 -500\"  color=\"#000000\" textColor=\"#aaaaaa\" width=\"180\" height=\"60\"  fontSize=\"30\" onClick=\"closeGame\">CLOSE</Button>\r\n        <!--\r\n   <Button id=\"nextBtnT1\" offsetXY=\"200 -500\"  color=\"#000000\" textColor=\"#aaaaaa\" width=\"180\" height=\"60\"  fontSize=\"30\" onClick=\"pagePT1\">NEXT</Button>\r\n        -->\r\n</Panel>\r\n\r\n<Panel id=\"gameInfo2\" active=\"false\" position=\"0 0 0\" scale=\"1 1 1\" offsetXY=\"0 0\" color=\"#999999\">\r\n    <Text fontSize=\"50\" offsetXY=\"0 500\">GAMING INSTRUCTIONS AND IMPROVEMENTS</Text>\r\n    <Text fontSize=\"16\" fontStyle=\"Bold\">MANOEUVRES TOKENS\r\n\r\n    Fully Scripted Manoeuvres Tokens:\r\n\r\n    Left Click to toggle between hidden and visible. All players see the same image (i.e. when you see a hidden token it's hidden to everyone).\r\n\r\n    Right Click peeks at the token and prints a chat message to you so you can look at it without revealing it to the opponent.\r\n\r\n    If an opponent (presumably accidentally :P) tries to peek or flip a token that belongs to someone else, a message will be displayed in the chat.\r\n\r\n\r\n    Partially Scripted Order Tokens:\r\n\r\n    These tokens need to be physically flipped, as in the real world. Each side has a different image.\r\n\r\n    Clicking the button allows you to peek as above.\r\n\r\n\r\n    </Text>\r\n   <Button id=\"closeBtnT2\" offsetXY=\"0 -500\"  color=\"#000000\" textColor=\"#aaaaaa\" width=\"180\" height=\"60\"  fontSize=\"30\" onClick=\"closeGame\">CLOSE</Button>\r\n\r\n   <Button id=\"prevBtnT2\" offsetXY=\"-200 -500\"  color=\"#000000\" textColor=\"#aaaaaa\" width=\"180\" height=\"60\"  fontSize=\"30\" onClick=\"pageMT2\">PREV</Button>\r\n</Panel>",
  "CustomUIAssets": [
    {
      "Name": "ManoeuvresSheet",
      "URL": "http://cloud-3.steamusercontent.com/ugc/780734108269481848/D7729E0A9B92D6E9B2B2F9CA9EAC0004F1176328/"
    }
  ],
  "LuaScript": "--[[ Lua code. See documentation: https://api.tabletopsimulator.com/ --]]\n\nturnOrder={}\nnonPlaying={\"White\", \"Brown\",\"Yellow\",\"Green\",\"Purple\",\"Pink\" }\nallowMenu=true\nallowAutoSeat=false\nredPlayerID=\"\"\norangePlayerID=\"\"\nbluePlayerID=\"\"\ntealPlayerID=\"\"\norderType=2\nloadedFromWorkshop=true\n\nuniversalTokenBagGUID2=\"0a38e2\" -- OLD ONE, MUST DELETE THE RELATIVE OBJECT\nuniversalTokenBagGUID=\"8fc951\"\nassaultTokenBagGUID=\"b93e54\"\nadvanceTokenBagGUID=\"e5cd85\"\ntakeAimTokenBagGUID=\"bba1af\"\n\n\nfunction showCommandPanel()\n    self.UI.setAttribute(\"command\", \"active\", true)\nend\n\nfunction hideCommandPanel()\n    self.UI.setAttribute(\"command\", \"active\", false)\nend\nfunction giveOrder2(tokenBag, player)\n    local commander=player.getSelectedObjects()\n    if #commander == 0 then\n        printToColor(\"Must select a base !\", player.color)\n        return\n    end\n    if #commander > 1  then\n        printToColor(\"Must select only ONE base !\", player.color)\n        return\n    end\n    local commanderBounds=commander[1].getBoundsNormalized()\n    local orderPos=commander[1].positionToWorld({0,commanderBounds[\"size\"].y+4,0})\n    local order= tokenBag.takeObject({\n        position          = orderPos,\n        rotation          = {0,commander[1].getRotation().y+180,180},\n        smooth            = false,\n        flip              = false,\n    })\n    order.setLock(true)\nend\n\nfunction giveOrder(manoeuvreType, player, override)\n\n    local selected=Player[player].getSelectedObjects()\n    local base=nil\n    local baseCount=0\n    for i, item in ipairs(selected) do\n        if item.getVar(\"whatIam\")==\"AircraftBase\" then base=item baseCount=baseCount+1 end\n    end\n    if baseCount == 0 then printToColor(\"Must select a base !\", player) return end\n    if baseCount > 1 then printToColor(\"Must select only ONE base !\", player) return end\n    --[[\n    if #selected == 0 then\n        --printToColor(\"Must select a base !\", player.color)\n        printToColor(\"Must select a base !\", player)\n        return\n    end\n    if #selected > 1  then\n        printToColor(\"Must select only ONE base !\", player)\n        return\n    end\n    if selected[1].getVar(\"whatIam\") ~= \"AircraftBase\"  then\n        printToColor(\"Must select a base !\", player)\n        return\n    end\n    local base=selected[1]\n    ]]\n    local baseBounds=base.getBoundsNormalized()\n    local availables=base.getTable(\"planeStats\").manoeuvres\n    local allowed=false\n    for i, man in ipairs(availables) do\n        if man == manoeuvreType then\n            allowed=true\n            break\n        end\n    end\n    if override then\n        allowed=true\n    end\n    if not allowed then\n        printToColor(\"Manoeuvre not allowed!\\nUse override button\", player, \"Red\")\n        return\n    end\n    local orderPos=base.positionToWorld({0,baseBounds[\"size\"].y+1,0})\n    orderPos=base.positionToWorld({0,0.5,0})\n    local order= universalTokenBag.takeObject({\n        position          = orderPos,\n        rotation          = {0,base.getRotation().y+180,0},\n        smooth            = false,\n        callback_function = function(obj) setOrderVars(obj, manoeuvreType, player) end,\n    })\n\nend\n\nfunction giveManoeuvre1(player, value, id)\n    giveOrder(1, player.color, false)\nend\nfunction overrideManoeuvre1(player, value, id)\n    giveOrder(1, player.color, true)\nend\n\nfunction giveManoeuvre2(player, value, id)\n    giveOrder(2, player.color, false)\nend\nfunction overrideManoeuvre2(player, value, id)\n    giveOrder(2, player.color, true)\nend\n\nfunction giveManoeuvre3(player, value, id)\n    giveOrder(3, player.color, false)\nend\nfunction overrideManoeuvre3(player, value, id)\n    giveOrder(3, player.color, true)\nend\n\nfunction giveManoeuvre4(player, value, id)\n    giveOrder(4, player.color, false)\nend\nfunction overrideManoeuvre4(player, value, id)\n    giveOrder(4, player.color, true)\nend\n\nfunction giveManoeuvre5(player, value, id)\n    giveOrder(5, player.color, false)\nend\nfunction overrideManoeuvre5(player, value, id)\n    giveOrder(5, player.color, true)\nend\n\nfunction giveManoeuvre6(player, value, id)\n    giveOrder(6, player.color, false)\nend\nfunction overrideManoeuvre6(player, value, id)\n    giveOrder(6, player.color, true)\nend\n\nfunction giveManoeuvre7(player, value, id)\n    giveOrder(7, player.color, false)\nend\nfunction overrideManoeuvre7(player, value, id)\n    giveOrder(7, player.color, true)\nend\n\nfunction giveManoeuvre8(player, value, id)\n    giveOrder(8, player.color, false)\nend\nfunction overrideManoeuvre8(player, value, id)\n    giveOrder(8, player.color, true)\nend\n\nfunction setOrderVars(_token, orderType, owner)\n    _token.setName(\"\")\n    _token.setVar(\"owner\", owner)\n    _token.setVar(\"orderType\", orderType)\n    _token.setColorTint(owner)\n    _token.script_state=JSON.encode( {svorderType=orderType, svowner=owner})\nend\nfunction onSave()\n    recordPlayers()\n    saved_data = JSON.encode({\n                                svredPlayerID=redPlayerID,\n                                svorangePlayerID=orangePlayerID,\n                                svbluePlayerID=bluePlayerID,\n                                svtealPlayerID=tealPlayerID\n                            })\n    --saved_data = \"\"\n    return saved_data\nend\n\nfunction onLoad(saved_data)\n -- log(saved_data)\n hideMasterModels()\n\n    if getObjectFromGUID(universalTokenBagGUID2) ~= nil then\n        getObjectFromGUID(universalTokenBagGUID2).destroy()\n        print(\"old bag killed\")\n    end\n    universalTokenBag=getObjectFromGUID(universalTokenBagGUID)\n    assaultTokenBag=getObjectFromGUID(assaultTokenBagGUID)\n    advanceTokenBag=getObjectFromGUID(advanceTokenBagGUID)\n    takeAimTokenBag=getObjectFromGUID(takeAimTokenBagGUID)\n    Turns.enable=false\n    --- load vars from saved\n    if saved_data ~= \"\" then\n         local loaded_data = JSON.decode(saved_data)\n         redPlayerID = loaded_data.svredPlayerID\n         orangePlayerID=loaded_data.svorangePlayerID\n         bluePlayerID = loaded_data.svbluePlayerID\n         tealPlayerID= loaded_data.svtealPlayerID\n    else\n        redPlayerID=\"\"\n        orangePlayerID=\"\"\n        bluePlayerID=\"\"\n        tealPlayerID=\"\"\n    end\n    ---- end loading\n\n    if allowMenu then\n        --if allowAutoSeat and redPlayerID ~= \"\" and bluePlayerID ~= \"\" then --  if the game is not started dont autoseat\n        if allowAutoSeat then\n                autoSeatAll()\n        else\n            Global.UI.setAttribute(\"main\", \"active\", \"true\")\n            local presentPersons= Player.getPlayers()\n            for i, person in ipairs(presentPersons) do\n                person.team=\"Diamonds\"\n            end\n            presentPersons= Player.getSpectators()\n            for i, person in ipairs(presentPersons) do\n                person.team=\"Diamonds\"\n            end\n            showHideRedBlueBtn()\n        end\n    else\n        Global.UI.setAttribute(\"main\", \"active\", \"false\")\n    end\n    ---\nend\n\nfunction autoSeatPerson(_person)\n    if _person.steam_id == redPlayerID then\n        if Player.Red.seated then\n            Player.Red.changeColor(\"Grey\")\n        end\n        _person.changeColor(\"Red\")\n        _person.team=\"None\"\n        return\n    end\n    if _person.steam_id == orangePlayerID then\n        if Player.Orange.seated then\n            Player.Orange.changeColor(\"Grey\")\n        end\n        _person.changeColor(\"Orange\")\n        _person.team=\"None\"\n        return\n    end\n    if _person.steam_id == bluePlayerID then\n        if Player.Blue.seated then\n            Player.Blue.changeColor(\"Grey\")\n        end\n        _person.changeColor(\"Blue\")\n        _person.team=\"None\"\n        return\n    end\n    if _person.steam_id == tealPlayerID then\n        if Player.Teal.seated then\n            Player.Teal.changeColor(\"Grey\")\n        end\n        _person.changeColor(\"Teal\")\n        _person.team=\"None\"\n        return\n    end\n    _person.changeColor(\"Grey\")\n    _person.team=\"None\"\nend\n\nfunction autoSeatGroup(persons)\n    for i, person in ipairs(persons) do\n        autoSeatPerson(person)\n    end\nend\n\n\nfunction autoSeatAll()\n    if redPlayerID==\"\" or bluePlayerID==\"\" then --  if the game is not started dont autoseat\n        --return\n    end\n    local presents = Player.getPlayers()\n    autoSeatGroup(presents)\n    --presents = Player.getSpectators()\n    --autoSeatGroup(presents)\nend\n\nfunction recordPlayers()\n    redPlayerID= Player.Red.steam_id\n    orangePlayerID= Player.Orange.steam_id\n    bluePlayerID= Player.Blue.steam_id\n    tealPlayerID= Player.Teal.steam_id\nend\n\nfunction onPlayerChangeColor(player_color)\n    promotePlayers()\n    --demotePlayers()  -- RIC\n    showHideRedBlueBtn()\nend\n\nfunction onPlayerConnect(player_id)\n    if allowMenu then\n        if allowAutoSeat and redPlayerID ~= \"\" and bluePlayerID ~= \"\" then --  if the game is not started dont autoseat\n                autoSeatPerson(player_id)\n        else\n        player_id.team=\"Diamonds\"\n        end\n    end\nend\n\nfunction promotePlayers()\n    if Player.Red.seated and Player.Red.host == false then\n        Player.Red.promote(true)\n    end\n    if Player.Orange.seated  and Player.Orange.host == false then\n        Player.Orenge.promote(true)\n    end\n    if Player.Blue.seated  and Player.Blue.host == false then\n        Player.Blue.promote(true)\n    end\n    if Player.Teal.seated and Player.Teal.host == false then\n        Player.Teal.promote(true)\n    end\nend\n\nfunction demotePlayers()\n    for i, color in ipairs(nonPlaying) do\n        if Player[color].seated  and Player[color].host == false then\n            Player[color].promote(false)\n        end\n    end\n    local spectators=Player.getSpectators()\n    for i, person in ipairs(spectators) do\n        if person.host == false then\n            person.promote(false)\n        end\n    end\nend\n\nfunction showHideRedBlueBtn()\n    if allowMenu then\n        if Player.Red.seated == true then\n            Global.UI.setAttribute(\"redBtn\", \"active\", \"false\")\n        else\n            Global.UI.setAttribute(\"redBtn\", \"active\", \"true\")\n        end\n        if Player.Orange.seated == true then\n            Global.UI.setAttribute(\"orangeBtn\", \"active\", \"false\")\n        else\n            Global.UI.setAttribute(\"orangeBtn\", \"active\", \"true\")\n        end\n        if Player.Blue.seated == true then\n            Global.UI.setAttribute(\"blueBtn\", \"active\", \"false\")\n        else\n            Global.UI.setAttribute(\"blueBtn\", \"active\", \"true\")\n        end\n        if Player.Teal.seated == true then\n            Global.UI.setAttribute(\"tealBtn\", \"active\", \"false\")\n        else\n            Global.UI.setAttribute(\"tealBtn\", \"active\", \"true\")\n        end\n    end\nend\n\nfunction placeToRed(player, value, id)\n    player.changeColor(\"Red\")\n    player.team=\"None\"\nend\n\nfunction placeToOrange(player, value, id)\n    player.changeColor(\"Orange\")\n    player.team=\"None\"\nend\n\nfunction placeToBlue(player, value, id)\n    player.changeColor(\"Blue\")\n    player.team=\"None\"\nend\n\nfunction placeToTeal(player, value, id)\n    player.changeColor(\"Teal\")\n    player.team=\"None\"\nend\n\nfunction placeToGray(player, value, id)\n    player.changeColor(\"Grey\")\n    player.team=\"None\"\nend\nfunction openTerrain()\n    Global.UI.setAttribute(\"terrainInfo\", \"active\", \"true\")\nend\nfunction closeTerrain()\n    Global.UI.setAttribute(\"terrainInfo\", \"active\", \"false\")\nend\nfunction openGame()\n    Global.UI.setAttribute(\"gameInfo\", \"active\", \"true\")\nend\nfunction closeGame()\n    Global.UI.setAttribute(\"gameInfo\", \"active\", \"false\")\n    Global.UI.setAttribute(\"gameInfo2\", \"active\", \"false\")\nend\nfunction closeMenu(player, value, id)\n    player.team=\"None\"\nend\nfunction pagePT1()\n    Global.UI.setAttribute(\"gameInfo\", \"active\", \"false\")\n    Global.UI.setAttribute(\"gameInfo2\", \"active\", \"true\")\nend\nfunction pageMT2()\n    Global.UI.setAttribute(\"gameInfo\", \"active\", \"true\")\n    Global.UI.setAttribute(\"gameInfo2\", \"active\", \"false\")\nend\n\n\n\nfunction showRollPanel()\n    self.UI.setAttribute(\"rollDice\", \"active\", true)\nend\n\nfunction hideRollPanel()\n    self.UI.setAttribute(\"rollDice\", \"active\", false)\nend\nbackPosition={{0,0,0},{0,0,0},{0,0,0},{0,0,0}}\nfunction goToDiceRoller(player, value, id)\n    local color=player.color\n    local diceMatGUID=\"b14cd6\"\n    local i=1\n    if color == \"Red\" then\n        diceMatGUID=\"b14cd6\"\n        i=1\n    end\n    if color == \"Orange\" then\n        diceMatGUID=\"e45f80\"\n        i=2\n    end\n    if color == \"Blue\" then\n        diceMatGUID=\"b7cd39\"\n        i=3\n    end\n    if color == \"Teal\" then\n        diceMatGUID=\"8aba04\"\n        i=4\n    end\n    if Player[color].getSelectedObjects()[1] ~= nil then\n        backPosition[i]=Player[color].getSelectedObjects()[1].getPosition()\n    else\n        local pointerPos=Player[color].getPointerPosition()\n        local pointerRot=Player[color].getPointerRotation()\n        --print(pointerRot)\n        local offsetX= 30\n        local offsetZ= 30\n        if pointerRot >= 0 and pointerRot< 0+45 then\n            --\n            offsetX=0\n            offsetZ=-offsetZ\n        end\n        if pointerRot >= 90-45 and pointerRot< 90+45 then\n            offsetX= -offsetX\n            offsetZ=0\n        end\n        if pointerRot >= 180-45 and pointerRot< 180+45 then\n            offsetX= 0\n        --\n        end\n        if pointerRot >= 270-45 and pointerRot< 270+45 then\n            offsetX=offsetX\n            offsetZ=0\n        end\n        if pointerRot >= 270+45 and pointerRot< 360 then\n            --\n            offsetX=0\n            offsetZ=-offsetZ\n        end\n        --print(\"X \"..offsetX)\n        --    print(\"Z \"..offsetZ)\n        backPosition[i]={pointerPos.x+offsetX,pointerPos.y,pointerPos.z+offsetZ}\n    end\n    moveCameraTo(getObjectFromGUID(diceMatGUID).getPosition(),30,color)\nend\n\nfunction goToSquad(player, value, id)\n    local i = 1\n    local color=player.color\n    if color == \"Red\" then\n        i=1\n    end\n    if color == \"Orange\" then\n        i=2\n    end\n    if color == \"Blue\" then\n        i=3\n    end\n    if color == \"Teal\" then\n        i=4\n    end\n    moveCameraTo(backPosition[i], 50, color)\nend\n\nfunction moveCameraTo(pos, dist, color)\n    local rot={0,0,0}\n    if color == \"Red\" then\n        rot = {0,180,0}\n    end\n    if color == \"Orange\" then\n        rot = {0,180,0}\n    end\n    if color == \"Blue\" then\n        rot = {0,0,0}\n    end\n    if color == \"Teal\" then\n        rot = {0,0,0}\n    end\n    Player[color].lookAt({position=pos, pitch=90, yaw=rot[2], distance=dist})\nend\n\nfunction none()\nend\n-- SPAWNING ITEMS DATA\nbackImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\ndefaultImage=backImage\nclonedYRot=0\n\n\nAvailableFactions={ {name=\"Imperial Navy\", tag=\"IN\", fan=false},{name=\"Orks\", tag=\"Orks\", fan=false},{name=\"T'au Empire\\n(coming soon)\", tag=\"Tau\", fan=false},\n                    {name=\"Chaos Raiders\", tag=\"CSM\", fan=true},{name=\"Asuryani Sky Host\", tag=\"Asuryani\", fan=true},\n                    {name=\"Astartes Air Force\", tag=\"SM\", fan=true}, {name=\"Necron Aircraft\", tag=\"Necron\", fan=true},\n                    {name=\"Tyranid Swarm\", tag=\"Tyranid\", fan=true},\n                }\nAvailablePlanes={\n    {type=\"defaultPlaneStats\", cat=\"plane\", cost=25, structure=8, transport=-1, fuel=-1, throttle=10, manoeuvres={1,2,3,4,5,6,7,8}, handling=1,  minSpeed=0, maxSpeed=10, maxAlt=10,\n            image=defaultImage},\n    {type=\"Blank Plane\", cat=\"fighter\", cost=0, structure=10, transport=-1, fuel=-1, throttle=10, manoeuvres={1,2,3,4,5,6,7,8}, handling=1,  minSpeed=0, maxSpeed=10, maxAlt=10 ,\n            image=defaultImage},\n    --{type=\"IMPERIAL NAVY\", cat=\"title\", faction=\"IN\"},\n    {type=\"Thunderbolt\", cat=\"fighter\", cost=25, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3,  minSpeed=2, maxSpeed=6, maxAlt=5,\n            guid=\"36e749\", faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/779608208368330011/743D81CA9D4BC46172B07B4911CBB19A64D7131C/\"},\n    {type=\"Thunderbolt Fury\", cat=\"fighter\", cost=25, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3,  minSpeed=2, maxSpeed=6, maxAlt=5,\n            guid=\"36e749\", faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/777357589157352731/3352FB4DB7F352E3B050771E1B764B445CED2EF2/\"},\n    {type=\"Executioner\", cat=\"fighter\", cost=23, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3,  minSpeed=2, maxSpeed=7, maxAlt=5,\n            guid=\"a13cf0\", faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107281998/671E06F39C00F95518EE96444F645AB367821878/\"},\n    {type=\"Marauder\", cat=\"bomber\", cost=23, structure=5, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=4,  minSpeed=2, maxSpeed=5, maxAlt=5,\n            guid=\"1e2250\", faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/779608208368454033/B74AE35CCAAE4010D89F6309F840AD664785E35D/\"},\n    {type=\"Marauder Destroyer\", cat=\"bomber\", cost=27, structure=5, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=4,  minSpeed=2, maxSpeed=5, maxAlt=5,\n            guid=\"d4bd42\", faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/777357589157235021/8B5C64123FAA1401B8C87D673C5590C4BEA5EB93/\"},\n    {type=\"Blue Devil\", cat=\"bomber\", cost=26, structure=5, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=4,  minSpeed=2, maxSpeed=5, maxAlt=5,\n            guid=\"bf8c96\", faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107493846/28BDC4698D6A8E46EFC492A4D3BAA20BA077554C/\"},\n\n    --{type=\"ORKS\", cat=\"title\", faction=\"Orks\"  },\n    {type=\"Dakkajet\", cat=\"fighter\", cost=16, structure=2, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5}, handling=4,  minSpeed=4, maxSpeed=8, maxAlt=4,\n            guid=\"a8daed\", faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107567472/195D0D180BE4E1455EEC15F3FBE1269B7911DFAF/\"},\n    {type=\"Vulture\", cat=\"fighter\", cost=23, structure=2, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5}, handling=3,  minSpeed=3, maxSpeed=8, maxAlt=4,\n            guid=\"162a26\", faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107918695/4F3ABA1022455670FA9817F19387D6CA28C470BB/\"},\n    {type=\"Fighta Bommer\", cat=\"bomber\", cost=20, structure=3, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3,4}, handling=4,  minSpeed=3, maxSpeed=7, maxAlt=4,\n            guid=\"bc8951\", faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107655644/075EC5BE665AFA6EF3708801E72CBB177862943B/\"},\n    {type=\"Big Burna\", cat=\"bomber\", cost=22, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4}, handling=4,  minSpeed=3, maxSpeed=7, maxAlt=4,\n            guid=\"fb514f\", faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107993093/9BD4AA9CF5103D2BA7C188FA283591CA0C1044CA/\"},\n    {type=\"Eavy Bommer\", cat=\"bomber\", cost=28, structure=6, transport=2, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=5,  minSpeed=2, maxSpeed=4, maxAlt=4,\n            guid=\"f8f75c\", faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107723270/56142D4579E7BE91A01817D1C550470193BD45B9/\"},\n    {type=\"Grot Bommer\", cat=\"bomber\", cost=28, structure=6, transport=3, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=5,  minSpeed=2, maxSpeed=4, maxAlt=4,\n            guid=\"6cd42b\", faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107778303/D0508CD0911A11A81BC3B3BF7A2DA1DDA197CC45/\"},\n    --{type=\"TAU EMPIRE\", cat=\"title\", faction=\"Tau\"  },\n    --{type=\"CHAOS SPACE MARINES\", cat=\"title\", faction=\"CSM\"  }, --FANMADE\n    {type=\"Hell Blade\", cat=\"fighter\", cost=13, structure=1, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6,7,8}, handling=3,  minSpeed=3, maxSpeed=9, maxAlt=5,\n            guid=\"99b2ff\", faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696143526/D1D1307E4D1003B2FC3295A8DA118E8D565A8611/\"},\n    {type=\"Hell Talon\", cat=\"bomber\", cost=24, structure=3, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6}, handling=3,  minSpeed=3, maxSpeed=9, maxAlt=5,\n            guid=\"c207ad\", faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696144305/DB8A574426EBC311D1C416ED0AFC7062C2FDE58E/\"},\n    {type=\"Harbinger\", cat=\"bomber\", cost=72, structure=13, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3}, handling=5,  minSpeed=1, maxSpeed=5, maxAlt=5,\n            guid=\"e072aa\", faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696143054/4F66911CFEEEC2FC107FCCE30F9E14E29549FDB9/\"},\n    --{type=\"ASURYANI\", cat=\"title\", faction=\"Asuryani\"  },       --FANMADE\n    {type=\"Night Wing\", cat=\"fighter\", cost=32, structure=2, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6,7,8}, handling=2, minSpeed=2, maxSpeed=9, maxAlt=5,\n            guid=\"3acd62\", faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696040130/C2AEFB03E3DF4937A37A25F64FE21A961150D9D6/\"},\n    {type=\"Crimson Hunter\", cat=\"fighter\", cost=32, structure=2, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6,7,8}, handling=2, minSpeed=2, maxSpeed=9, maxAlt=5,\n            guid=\"549e98\", faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696142100/7E456AEB2E181A58ADB9249F9808873F769434A8/\"},\n    {type=\"Phoenix\", cat=\"fighter\", cost=33, structure=3, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6,7,8}, handling=3, minSpeed=2, maxSpeed=7, maxAlt=5,\n            guid=\"779565\", faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696139295/E42FA908F5FB8971DBFE21F35C35A33AED5D2EE7/\"},\n    {type=\"Vampire Raider\", cat=\"bomber\", cost=35, structure=5, transport=5, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3, minSpeed=2, maxSpeed=7, maxAlt=5,\n            guid=\"e19d01\", faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696141372/CCB44BD93B41E79D95DD064E23A4F89C41DD4940/\"},\n    {type=\"Vampire Hunter\", cat=\"bomber\", cost=38, structure=5, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3, minSpeed=2, maxSpeed=7, maxAlt=5,\n            guid=\"d627b1\", faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696140720/8FB13CDA5FCDA0EF01BC7BEB431C86128091E020/\"},\n    --{type=\"ASTARTES\", cat=\"title\", faction=\"SM\"  },       --FANMADE\n    {type=\"Stormtalon\", cat=\"fighter\", cost=20, structure=2, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3, minSpeed=0, maxSpeed=7, maxAlt=5,\n            guid=\"2f2f72\", faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169107073/2E4CDBF7733586345669E5E0186FD338B3D600E5/\"},\n    {type=\"Storhawk\", cat=\"fighter\", cost=21, structure=2, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3, minSpeed=2, maxSpeed=8, maxAlt=5,\n            guid=\"cc4fc0\", faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169101821/9CFCE0EA3197D8DA38BC9AB8BAEB9776B525F1B3/\"},\n    {type=\"Stormraven\", cat=\"bomber\", cost=25, structure=3, transport=3, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5}, handling=4, minSpeed=0, maxSpeed=6, maxAlt=5,\n            guid=\"a69b32\", faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169097234/70D007B2FC8F3A30D1D10EE189B198D351ECD500/\"},\n    {type=\"Thunderhawk Gunship\", cat=\"bomber\", cost=29, structure=7, transport=6, fuel=-1, throttle=2, manoeuvres={1,2,3}, handling=5, minSpeed=2, maxSpeed=6, maxAlt=5,\n            guid=\"d34b66\", faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169085169/5A0A479D9FF703FB8C7332B552B940EA6C20A24E/\"},\n    {type=\"Thunderhawk Transporter\", cat=\"bomber\", cost=25, structure=7, transport=4, fuel=-1, throttle=2, manoeuvres={1,2,3}, handling=5, minSpeed=2, maxSpeed=6, maxAlt=5,\n            guid=\"8d38a0\", faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169089232/3641D706F1069537C63040C14BA6DBC2ABA1EEEE/\"},\n    --{type=\"NECRON AIRCRAFT\", cat=\"title\", faction=\"Necron\"  },       --FANMADE\n    {type=\"Night Schyte\", cat=\"fighter\", cost=29, structure=2, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6,7,8}, handling=2, minSpeed=1, maxSpeed=7, maxAlt=5,\n            guid=\"0221a6\", faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752422306/B40FC26AC4876E6D7DB7515E6D42F490F7D93AEC/\"},\n    {type=\"Doom Schyte\", cat=\"fighter\", cost=32, structure=2, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6,7,8}, handling=2, minSpeed=1, maxSpeed=7, maxAlt=5,\n            guid=\"f3b47b\", faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752421808/079D7A380FB36B1F29BA9C85D99C9C82A44B4EE2/\"},\n    {type=\"Night Shroud\", cat=\"bomber\", cost=32, structure=3, transport=-1, fuel=-1, throttle=3, manoeuvres={1,2,3,4,5,6,7,8}, handling=2, minSpeed=1, maxSpeed=7, maxAlt=5,\n            guid=\"a7bc32\", faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752422733/CF45BB0012193E74C893655FB4ED1FB6BE5CDDD2/\"},\n    --{type=\"TYRANID SWARM\", cat=\"title\", faction=\"Tyranid\"  },       --FANMADE\n    {type=\"Hive Crone\", cat=\"fighter\", cost=20, structure=2, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3,4,5,6,7,8}, handling=2, minSpeed=0, maxSpeed=4, maxAlt=4,\n            guid=\"44a01c\", faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553137054/1C70CFC3FB870BF5DD60C29235E810ED11B8E8E0/\"},\n    {type=\"Harpy\", cat=\"fighter\", cost=16, structure=2, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3,4,5,6,7,8}, handling=2, minSpeed=0, maxSpeed=4, maxAlt=4,\n            guid=\"dcb1bc\", faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553137605/623B35E62CF58FDB37835352C57F08F95CC2410C/\"},\n    {type=\"Harridan\", cat=\"bomber\", cost=33, structure=6, transport=4, fuel=-1, throttle=1, manoeuvres={1,2,3,4,5,6,7}, handling=3, minSpeed=1, maxSpeed=4, maxAlt=5,\n            guid=\"2859e9\", faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553138195/A1DC66944387D00236D41B1DF46BBE9F97DE7B14/\"},\n\n\n}\n\nAvailableUpgrades={ -- This includes PILOTS, WEAPONS and UPGRADES\n    {type=\"Blank Upgrade\", cat=\"upgrade\", cost=0, desc=\"None\",\n            faction=\"Blank\", image=defaultImage},\n    {type=\"Custom Blank\\nUpgrade\", cat=\"upgrade\", cost=0, desc=\"None\",\n            faction=\"Blank\", image=defaultImage},\n    {type=\" \", cat=\"title\", faction=\"Blank\", cost=0},\n    -- IMPERIAL NAVY\n    {type=\"Hellstrike Missiles\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={2,2,2}, dmg=3, ammo=1, special={\"Ground Attack\", \"Extra damage(6+)\"}, desc=\"\",\n             faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949536502/F1B7BD763A494F15BD4C69B1E4362E757F9A1AEC/\"},\n    {type=\"Skystrike Missiles\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={0,2,2}, dmg=3, ammo=1, special={\"Aerial Attack\", \"Extra damage(6+)\"}, desc=\"\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949538537/895FBD20C60D85FA03FD3B1BCD5AFCEE0E698229/\"},\n    {type=\"Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={4,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540980/ABA8D14C30F81095DB8C5DBB89A3E1A296CE8DC4/\"},\n    {type=\"Armoured Cockpit\", cat=\"upgrade\", cost=3, desc=\"When taking damage roll a D6, on a 6+ ignore that damage and dont loose hp\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108278093/A6DB0CAB01AF893DEE345B949DBEBD63FFC2A848/\"},\n    {type=\"Ejector Seats\", cat=\"upgrade\", cost=2, desc=\"When the aircraft is destroyed rolla D6, on a 5+ the aircraft is woth 75% of VP instead of 100%\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108211351/ADF5A7312FE59D0FAF6CAD7882CFBE568F3A458D/\"},\n    {type=\"Flares or Chaff\\nLaunchers\", cat=\"upgrade\", cost=1, desc=\"Once per game if the aircraft is hit by a weapon with AMMO caracteristic of 1,2 or 3 roll a D6. On 6+ the hit becames a miss.\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108222571/D7AE00B3221EEFEE96096A81C16322AE859A48B9/\"},\n    {type=\"Imperial Ace\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108262070/E92693364F8F9720D9FD7B26671B0320E1F1044D/\"},\n    {type=\"Infra-red Targetting\", cat=\"upgrade\", cost=2, desc=\"If Night Fight or Bad Weather rules are in use, this aircraft does not reduce the FPR at Medium range.\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108243713/9C7F8BF167F502528F515D87C4255BC0C6F08720/\"},\n    {type=\"Dagor-Jarni\", cat=\"pilot\", cost=0, desc=\"Once per game, when targetting an aircraft at lower altitude with Air-to-Air fire add a +1 to each FPW dice rolled.\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107326783/44A413C383C62E7E74109A17D16E6B2A3BD01612/\"},\n    {type=\"Gallus Barret\", cat=\"pilot\", cost=0, desc=\"When making a Bombing Run you may reroll any roll of 1s made with wing bombs.\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107524090/7A6CC785FB598BDB951773B52C5C998A6ABAC705/\"},\n    {type=\"Expert Gunner\", cat=\"crew\", cost=3, desc=\"Once per game, when making a Strafing Run, you may add a +1 modifier to each FPR dice when rolling to hit.\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105953851263510/0D95A6EFBB05D770A7EFDD45F40981D1216F286A/\"},\n    {type=\"Lightning Reactions\", cat=\"crew\", cost=3, desc=\"Once per game, when when this aircraft is activated you may discard the Ace Manoeuvre that was chosen during the Choose Manoeuvre phase and immediately choose anothe Ace Manoeuvre.\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105953851238390/E3EFBFA9ABEBFE7247A5BBC45BBA532B76EC727A/\"},\n    {type=\"Master Navigator\", cat=\"crew\", cost=2, desc=\"Once per game, after completing its movement, youmay move this aircraft in any direction, effectively allowing you to adjustits final position (but not its facing).\",\n            faction=\"IN\", image=\"http://cloud-3.steamusercontent.com/ugc/775105953851276001/F7B26C7F3C8573C026453A0BE1C7DDFF958D3B2A/\"},\n\n    --{type=\"ORKS\", cat=\"title\", faction=\"Orks\"},\n    {type=\"Rokkits\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={3,2,1}, dmg=3, ammo=1, special={\"\"}, desc=\"\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949537617/3FDC30CEEDE9826E734922B612EBF40D53568396/\"},\n    {type=\"Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={4,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540980/ABA8D14C30F81095DB8C5DBB89A3E1A296CE8DC4/\"},\n    {type=\"Big Bombs\", cat=\"weapon\", cost=4, arc=\"Rear\", fpr={6,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(4+)\"}, desc=\"\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949542873/4D43E2B3AE28E1A45584F02E5370A11092CAFAB7/\"},\n    {type=\"Grot Bomms\", cat=\"weapon\", cost=8, arc=\"Front, L-F, R-F\", fpr={0,0,0}, dmg=2, ammo=2, special={\"Autonomous Weapon\", \"Extra damage(4+)\"}, desc=\"\",\n            faction=\"Orks\", guid=\"d33149\",    image=\"http://cloud-3.steamusercontent.com/ugc/773980053955404576/ADA7428FD099FFBDD2A74D59E2E5437CBE39560E/\"},\n    {type=\"Big Shootas\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={2,2,0}, dmg=5, ammo=0, special={\"\"}, desc=\"\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540233/E32BF5DA9C975A896605E887EA8C22AD7CA07174/\"},\n    {type=\"Belching Smoke\", cat=\"upgrade\", cost=1, desc=\"Once per game if the aircraft is hit by a weapon with AMMO caracteristic of 1,2 or 3 roll a D6. On 6+ the hit becames a miss.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108048766/BEEBF83BDF177CF6C0A400DF743B0A17CE685961/\"},\n    {type=\"Extra Armour\", cat=\"upgrade\", cost=2, mod={maxSpeed=-1}, desc=\"Reduce the Max Speed by 1. If ht by enemy rolla  D6, on a 6 the damage is not taken.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108087827/38B9E33E3CDF1561E4A1D408C5137F078AB284B2/\"},\n    {type=\"Fly Boss\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108262070/E92693364F8F9720D9FD7B26671B0320E1F1044D/\"},\n    {type=\"Kustom Big Shootas\", cat=\"upgrade\", cost=3, desc=\"Add the Big Shootas as Primary weapon, reduce the number of additional weapons that you can take by 1.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108102609/241C34E6A5C63AD5DD9502DFCA3566FED4D7ECD5/\"},\n    {type=\"Wazmek Speshul\", cat=\"upgrade\", cost=2, mod={minSpeed=1, maxSpeed=1}, desc=\"Increase both Min and Max Speed by 1, to a maximum of 9.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108076044/0C01E313B64E4816817A5C39B08E3538869594A9/\"},\n    {type=\"Da Black Barun\", cat=\"pilot\", cost=0, desc=\"When targetting an aircraft with Air-to-Air fire you may reroll any 1 rolled by FPR dice.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107940521/DB6ABCEBC22C4F89F59DDE92778EE6A88B02044C/\"},\n    {type=\"Toofkraker\", cat=\"pilot\", cost=0, desc=\"Once per game, when making a Bombing Run you may add a +1 modifier to each FPR dice when rolling to hit.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876108014367/15E50B1201DE4376DDF4A6F62E44E11872B173F0/\"},\n    {type=\"Ace Gunna\", cat=\"crew\", cost=3, desc=\"Once per game, when targetting an aircraft with Air-to-Air fire you may reroll any 1 rolled by FPR dice.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105953851313305/8D03B82F584E8CB2DD9AC504812D2E7AC4E537A8/\"},\n    {type=\"Lightning Reactions\", cat=\"crew\", cost=3, desc=\"Once per game, when when this aircraft is activated you may discard the Ace Manoeuvre that was chosen during the Choose Manoeuvre phase and immediately choose anothe Ace Manoeuvre.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105953851292297/030DBF934F7C8904BA32BE939B177F146E65504B/\"},\n    {type=\"Strategic Bommer\", cat=\"crew\", cost=2, desc=\"Once per game, when making a Bombing Run you may add a +1 modifier to each FPR dice when rolling to hit.\",\n            faction=\"Orks\", image=\"http://cloud-3.steamusercontent.com/ugc/775105953851327766/564496D8251814CD41FAFB319549E869638B670B/\"},\n    --{type=\"TAU EMPIRE\", cat=\"title\", faction=\"Tau\"  },\n    --{type=\"CHAOS SPACE MARINES\", cat=\"title\", faction=\"CSM\"  }, --FANMADE\n    {type=\"Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={4,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540980/ABA8D14C30F81095DB8C5DBB89A3E1A296CE8DC4/\"},\n    {type=\"Harbinger Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={8,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841697101648/964903148B01D1B91B4B2B272822C186D452F8A4/\"},\n    {type=\"Shatter Charges\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={4,2,0}, dmg=\"*\", ammo=1, special={\"Ground Attack\", \"* Destroy target (4+) regardless structure pts\"}, desc=\"\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841697127990/10FFFE4354585B9D119BF34AC01D68EFCBECFD10/\"},\n    {type=\"Exalted Malefic Cogitator\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696154375/FEAA1DB6DD0DD674D25D5B117AA8424992261DBA/\"},\n    {type=\"Demonic Possession\", cat=\"upgrade\", cost=3, desc=\"A possessed aircraft gains a 6+ save against each hit it takes\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696156369/95940C08F216C152A3EAD52D14BA9E5B72F4A0A1/\"},\n    {type=\"Abyssal Shells\", cat=\"upgrade\", cost=2, desc=\"Select an Autocannon or Quad Autocannon. It gains Extra Damage(6+) special rule.\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696157344/219BF484197502AF95686E0B67474DBD32AC8FC3/\"},\n    {type=\"Warp Rift\", cat=\"upgrade\", cost=3, desc=\"Count as a weapon with profile\\n ARC Rear - FPR 2/1/0 - DMG 5+ - AMMO UL - Aerial attack\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696152228/8E4F6A43F047F6E44E3DE8796B91E5E7FAA64C18/\"},\n    {type=\"Blight Bombs\", cat=\"upgrade\", cost=3, desc=\"Bombers Only. Count as a weapon with profile\\n ARC Rear - FPR 2/0/0 - DMG * - AMMO 1 - Ground attack\\n* Destroys the target on 5+\",\n            faction=\"CSM\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696156926/2259DAA353043E7A298AC98573501C7E18FC991B/\"},\n    --{type=\"ASURYANI\", cat=\"title\", faction=\"Asuryani\"  },       --FANMADE\n    {type=\"Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={4,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540980/ABA8D14C30F81095DB8C5DBB89A3E1A296CE8DC4/\"},\n    {type=\"Phoenix Pulse Laser\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={1,1,1}, dmg=3, ammo=-1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841697239378/CF878C3EA958AFB3EB49DE7D421F35D7C2234E72/\"},\n    {type=\"Twin Brightlance\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={0,2,1}, dmg=2, ammo=-1, special={\"Extra damage(6+)\"}, desc=\"\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841697222791/CBA18C966A72E6ECD7BFDAFE67FFBD2191387DE2/\"},\n    {type=\"Twin Starcannon\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={4,2,0}, dmg=4, ammo=-1, special={\"\"}, desc=\"\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841697221133/3ADD170220271D92A19E3B09411A4A207ED0CBA4/\"},\n    {type=\"Eagle Pilot\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696155875/6B88CE29B11ACEF9FB869A89A3B69F627CE647C1/\"},\n    {type=\"Pan-spectral Sights\", cat=\"upgrade\", cost=2, desc=\"If Night Fight or Bad Weather rules are in use, this aircraft does not reduce the FPR at Medium range.\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696153746/F21983FCB7CB5E1B82D55CB3B75CF4A3805D7128/\"},\n    {type=\"Spirit Stone\", cat=\"upgrade\", cost=3, desc=\"Once per game the aircraft can reroll a Holo Field dice roll of 1. The second roll is accepted, even if is another 1.\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696152871/575CAAA5E0CD597CF33A56044D5259BDD58B3518/\"},\n    {type=\"Escape Capsule\", cat=\"upgrade\", cost=2, desc=\"When the aircraft is destroyed rolla D6, on a 5+ the aircraft is woth 75% of VP instead of 100%\",\n            faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696154924/01576889CF7927B71CB1A3438774B71854895676/\"},\n    {type=\"Exarch\", cat=\"crew\", cost=10, desc=\"Crimson Hunter only.\\nIncrease the firepower of the aircraft's weapons it each range band, that is not a 0, by 1.\",\n        faction=\"Asuryani\", image=\"http://cloud-3.steamusercontent.com/ugc/772868399794953601/42B75701892417D2D43ACDE8A89EEA81C930BC18/\"},\n    --{type=\"ASTARTES\", cat=\"title\", faction=\"SM\"  },       --FANMADE\n    {type=\"Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={6,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169279815/42B34A74CAE811B1BFA0011555DE00B5E96BB26E/\"},\n    {type=\"Hellstrike Missiles\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={2,2,2}, dmg=3, ammo=1, special={\"Ground Attack\", \"Extra damage(6+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/773980053949536502/F1B7BD763A494F15BD4C69B1E4362E757F9A1AEC/\"},\n    {type=\"Skyhammer Missiles\", cat=\"weapon\", cost=3, arc=\"Front\", fpr={0,2,2}, dmg=3, ammo=3, special={\"Aerial Attack\", \"Extra damage(6+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169260186/6C8DFBA0C8EC2B97319489A5EA4CA8857C40B481/\"},\n    {type=\"Las Talon\", cat=\"weapon\", cost=0, arc=\"Front\", fpr={2,1,0}, dmg=2, ammo=-1, special={\"Extra damage(6+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169259534/8981928BD7565094D23456D3FD434EACD95F9F87/\"},\n    {type=\"Stormtalon Twin Lascannon\", cat=\"weapon\", cost=1, arc=\"Front\", fpr={0,2,1}, dmg=2, ammo=-1, special={\"Extra damage(6+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169263176/C50406F3970EE72805693959B81D042C713679B9/\"},\n    {type=\"Twin Plasma Cannon\", cat=\"weapon\", cost=2, arc=\"Front, Right, Left, Up\", fpr={4,2,0}, dmg=3, ammo=-1, special={\"\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169264674/FF3FB7870036B83094BEFA2A9EA9C94F8AF56824/\"},\n    {type=\"Twin Multi-Melta\", cat=\"weapon\", cost=3, arc=\"Front\", fpr={2,0,0}, dmg=2, ammo=-1, special={\"Extra damage(5+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169263889/DA6322B848E5AAC0232677C283841CDB6700D5E5/\"},\n    {type=\"Stormraven Twin Lascannon\", cat=\"weapon\", cost=0, arc=\"Front, Right, Left, Up\", fpr={0,2,1}, dmg=2, ammo=-1, special={\"Extra damage(6+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169261319/A98407E6920962D702D8A4B7899036602831F281/\"},\n    {type=\"Typhoon Missiles\", cat=\"weapon\", cost=3, arc=\"Front\", fpr={2,2,0}, dmg=3, ammo=3, special={\"Extra damage(6+)\"}, desc=\"\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169260785/E770A47F1334501413B5DDB30727705A858721B2/\"},\n    {type=\"Terminal Targetting\", cat=\"upgrade\", cost=2, desc=\"If Night Fight or Bad Weather rules are in use, this aircraft does not reduce the FPR at Medium range.\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169128397/1C4EE9DCC6EC33C1E60F048EC2AF49525A55E4BC/\"},\n    {type=\"Infernum Halo\\nLaunchers\", cat=\"upgrade\", cost=1, desc=\"Once per game if the aircraft is hit by a weapon with AMMO caracteristic of 1,2 or 3 roll a D6. On 6+ the hit becames a miss.\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169127795/FB3D6C56B607979113531D371FA4DD8D475353B8/\"},\n    {type=\"Extra Armour Plating\", cat=\"upgrade\", cost=3, desc=\"When taking damage roll a D6, on a 6+ ignore that damage and dont loose hp\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169126549/07810343DB373F31DCABF069E1DEB7EF9359A6CC/\"},\n    {type=\"Ace Pilot\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169125512/5C928635D2444805C3E8D06D4F2C484C3735658C/\"},\n    {type=\"Auxiliary Drive System\", cat=\"upgrade\", cost=2, desc=\"When rolling to recover from a stall or spin you can reroll the dice for this aircraft.\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169126118/7B44D9ECD2703B6B1E8E231B8AAF72047B81E4A3/\"},\n    {type=\"Expanded Ammunitions\", cat=\"upgrade\", cost=2, desc=\"CANNOT BE TAKEN BY THINDERHAWKS. Increase the number of AMMO of one weapon equipped by 1.\",\n            faction=\"SM\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169127229/C2D62B34C4DCFB01FF991DAE4A0E057934C7AC27/\"},\n    --{type=\"NECRON AIRCRAFT\", cat=\"title\", faction=\"Necron\"  },       --FANMADE\n    {type=\"Harbinger\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\n            faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752425759/163FDE722E7C1A58CA1DDF4F081E08FDE4AE7460/\"},\n    {type=\"Nebuloscope\", cat=\"upgrade\", cost=2, desc=\"If Night Fight or Bad Weather rules are in use, this aircraft does not reduce the FPR at Medium range.\",\n            faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752426135/8929E6E8A40BFDCC033E3E2F67A029B82F364879/\"},\n    {type=\"Canoptek Leech\", cat=\"upgrade\", cost=3, desc=\"The aircraft may reroll a 'Living Metal' dice roll of 1. The second roll is accepted, even if is another 1.\",\n            faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752425384/7AC1EE4D3B5477A469D2FE835EB0C236D7FF6B21/\"},\n    {type=\"Quantum Shielding\", cat=\"upgrade\", cost=2, desc=\"If the aircraft suffers extra damage form a weapon with 'Extra Damage', roll a D6, on a 3+ the extra damage is ignored\",\n            faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752426637/772416BCC78CB2294CF61687EF7DC50B288903F4/\"},\n    {type=\"Shield Vanes\", cat=\"upgrade\", cost=5, desc=\"Once per game, when this aircraft suffers a damage from enemy fire the damage is ignored and no Structure points are lost.\",\n            faction=\"Necron\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752427136/68D00364B55DA45F6B58BD725F6351F97AAAE447/\"},\n    --{type=\"TYRANID SWARM\", cat=\"title\", faction=\"Tyranid\"  },       --FANMADE\n    {type=\"Heavy Venom Cannon\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={2,2,0}, dmg=2, ammo=-1, special={\"Extra damage(6+)\"}, desc=\"\",\n            faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553156858/37420C00450B62AD2BDB1988D475B02E25AA17AB/\"},\n    {type=\"Tentaclid\", cat=\"weapon\", cost=0, arc=\"Front, L-F, R-F\", fpr={0,0,0}, dmg=4, ammo=-1, special={\"Aerial Attack\",\"Autonomous\",\"Extra damage(6+)\"}, desc=\"\",\n            faction=\"Tyranid\", guid=\"75ca9d\",image=\"\"},\n    {type=\"Dermic Symbiosis\", cat=\"upgrade\", cost=5, desc=\"When taking damage roll a D6, on a 5+ ignore that damage and dont loose hp.\",\n            faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553107456/AB73665949C44250301B8E537669DE7C06944A5D/\"},\n    {type=\"Dynamic Camoufage\", cat=\"upgrade\", cost=4, desc=\"Agains this bioform the number of Firepower dice at medium and long range are halved, rounding up.\",\n            faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553107887/34C2CD3FFC96E3A317F9495DC91B1101EE4C71B7/\"},\n    {type=\"Arachnacyte Gland\", cat=\"upgrade\", cost=3, mod={maxSpeed=1}, desc=\"Increase the maximum speed by 1.\",\n            faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553108312/3100F70CF412A3890E868E0754B76EB53B0502C4/\"},\n    {type=\"Hypermetabolic Acceleration\", cat=\"upgrade\", cost=1, desc=\"Increase the throttle by 1.\",\n            faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553108712/DC98157E7C2AECB7F8C38986415447605E74D502/\"},\n    {type=\"Progeny of the Hive\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\n            faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553109104/C4FBDC6C50753911770E19F2171D621AAEEB4143/\"},\n    {type=\"Voracious Ammonuition\", cat=\"upgrade\", cost=3, desc=\"Select one weapon with the Front Arc firing arc that is not Autonomous. That weapon gains 'Extra Damage(6+)' or improves it by 1.\",\n            faction=\"Tyranid\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553109438/83A621B155632E08BCB7B0FDD5A777136EDD7D1A/\"},\n\n\n}\n\nAvailableGroundDefences={\n--[[\n    {type=\"Blank Ground Defence\", cat=\"upgrade\", cost=0, desc=\"None\",\n            image=defaultImage},\n    {type=\"Custom Blank Ground Defence\", cat=\"upgrade\", cost=0, desc=\"None\",\n            image=defaultImage},\n    {type=\"defaultGroundDefence\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={2,1,1}, dmg=4, ammo=0, special={\"Effective Altitude (5)\",\"Ground-To-Air Fire\", \"Extra damage(5+)\"}, desc=\"\",\n                    image=defaultImage},\n]]\n    {type=\"defaultGroundDefence\", cat=\"weapon\", cost=7, structure=3, arc=\"All\", fpr={2,1,1}, dmg=4, ammo=0, special={\"Effective Altitude (5)\",\"Ground-To-Air Fire\", \"Extra damage(5+)\"}, desc=\"\",\n                image=defaultImage},\n    --{type=\"IMPERIAL NAVY\", cat=\"title\",  faction=\"IN\"},\n    {type=\"Hydra Flak Battery\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={6,4,2}, dmg=5, ammo=0, special={\"Effective Altitude (2)\",\"Ground-To-Air Fire\"}, desc=\"\",\n             faction=\"IN\", guid=\"1dbe8c\", image=\"http://cloud-3.steamusercontent.com/ugc/777357589157422806/A7370E8D655A43253704E94F83E4A064CE853205/\"},\n    {type=\"Manticore Missile Battery\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={2,1,1}, dmg=4, ammo=0, special={\"Effective Altitude (5)\",\"Ground-To-Air Fire\", \"Extra damage(5+)\"}, desc=\"\",\n             faction=\"IN\", guid=\"852b47\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107226285/FB75EE29C73FE78C5F7B4ECD03A7DE206E66444D/\"},\n\n    --{type=\"ORKS\", cat=\"title\", faction=\"Orks\"},\n    {type=\"Flak Platform\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={8,4,2}, dmg=5, ammo=0, special={\"Effective Altitude (2)\",\"Ground-To-Air Fire\"}, desc=\"\",\n            faction=\"Orks\", guid=\"ddf175\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107859364/EEB3FAB00BF204F20039B9ACD7F77E888C77A623/\"},\n    {type=\"Eavy Flak Kannon\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={2,1,1}, dmg=4, ammo=0, special={\"Effective Altitude (4)\",\"Ground-To-Air Fire\", \"Extra damage(6+)\"}, desc=\"\",\n            faction=\"Orks\", guid=\"ad3d14\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107881156/9FB91012AA6DC3914F9916FCEC7ED4BAAD954B0F/\"},\n    --{type=\"TAU EMPIRE\", cat=\"title\", faction=\"Tau\"  },\n    --{type=\"CHAOS SPACE MARINES\", cat=\"title\", faction=\"CSM\"  }, --FANMADE\n    --{type=\"ASURYANI\", cat=\"title\", faction=\"Asuryani\"  },       --FANMADE\n    {type=\"Firestorm\", cat=\"weapon\", cost=10, structure=2, arc=\"All\", fpr={9,6,3}, dmg=5, ammo=0, special={\"Effective Altitude (2)\",\"Ground-To-Air Fire\"}, desc=\"\",\n            faction=\"Asuryani\", guid=\"177010\", image=\"http://cloud-3.steamusercontent.com/ugc/772867841696145012/2AA63754970ED37380E7FC2C0C765259C910A664/\"},\n    --{type=\"ASTARTES\", cat=\"title\", faction=\"SM\"  },       --FANMADE\n    {type=\"Hyperios battery\", cat=\"weapon\", cost=8, structure=2, arc=\"All\", fpr={3,2,1}, dmg=4, ammo=0, special={\"Effective Altitude (3)\",\"Ground-To-Air Fire\", \"Extra damage(6+)\"}, desc=\"\",\n            faction=\"SM\", guid=\"5bda86\", image=\"http://cloud-3.steamusercontent.com/ugc/772868855169297939/C878E6FEFDE1D9290F0DB29368C1A28B4C118CBD/\"},\n    --{type=\"NECRON AIRCRAFT\", cat=\"title\", faction=\"Necron\"  },       --FANMADE\n    {type=\"Sentry Pilon\", cat=\"weapon\", cost=11, structure=2, arc=\"All\", fpr={2,2,1}, dmg=3, ammo=0, special={\"Effective Altitude (5)\",\"Ground-To-Air Fire\", \"Extra damage(5+)\"}, desc=\"\",\n            faction=\"Necron\", guid=\"071519\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752424945/3EC5EFDC06E939BB78EB99AC2018A180876F65FF/\"},\n    {type=\"Gauss Pilon\", cat=\"weapon\", cost=23, structure=5, arc=\"All\", fpr={3,2,3}, dmg=2, ammo=0, special={\"Effective Altitude (5)\",\"Ground-To-Air Fire\", \"Extra damage(3+)\"}, desc=\"\",\n            faction=\"Necron\", guid=\"04aea9\", image=\"http://cloud-3.steamusercontent.com/ugc/773995410752424532/B869AB33912E506959C89EBF2217DBA3312B582E/\"},\n    --{type=\"TYRANID SWARM\", cat=\"title\", faction=\"Tyranid\"  },       --FANMADE\n    {type=\"Mucolid Spore\", cat=\"weapon\", cost=16, structure=1, arc=\"All\", fpr={1,1,1}, dmg=2, ammo=0, special={\"Aerial attack\", \"Extra damage(3+)\"}, desc=\"\",\n            faction=\"Tyranid\", guid=\"63059b\", image=\"http://cloud-3.steamusercontent.com/ugc/773996018553135900/41BCB9F04BD97B0D57F5BEF8F886A09478193365/\"},\n}\n\n\nblankBase_GUID=\"530aa8\"\nblankAutonomous_GUID=\"34f590\"\nblankCharacter_GUID=\"48ad0a\"\nblankDataCard_GUID=\"93ba66\"\n\navailableBtnHeight=650\navailableBtnWidth=3000\nXoffset=0\nYoffset=4\nXoffsetSecondary=8\nZoffset=5\n\nspawnMenuPosition={88.5, -2.95, 51.1}\n--click_function=\"spawnBase\",\n\nspawnBaseBtn = {\n    label=\"SPAWN HEX BASE\\n\", click_function=\"spawnBase\", func_param={card=\"\"}, function_owner=self,\n    position={(-XoffsetSecondary/1.5)+Xoffset,Yoffset,Zoffset-4}, rotation={0,0,0}, height=1500, width=4500,\n    font_size=400, color=\"Black\", font_color=\"White\", tooltip=\"LMB Aircraft\\nRMB Autonomous weapon\"\n}\n--function spawnBase() print(\"NOT MEEEE!!!!\") end\n\nspawnBaseSubtitleBtn = {\n    label=\"\\n\\n\\nAIRCRAFT - Left Click                           \\nAUTONOMOUS WEAPON - Right Click\", click_function=\"spawnBase\", func_param={card=\"\"}, function_owner=self,\n    position={(-XoffsetSecondary/1.5)+Xoffset,Yoffset,Zoffset-4}, rotation={0,0,0}, height=1500, width=4500,\n    font_size=200, color=\"Black\", font_color=\"White\", tooltip=\"LMB Aircraft\\nRMB Autonomous weapon\"\n}\n\nspawnCharacterBtn = {\n    label=\"SPAWN\\nCHARACTER SHEET\", click_function=\"spawnCharacter\", func_param={card=\"\"}, function_owner=self,\n    position={(XoffsetSecondary/1.5)+Xoffset,Yoffset,Zoffset-4}, rotation={0,0,0}, height=1500, width=4500,\n    font_size=400, color=\"Black\", font_color=\"White\"\n}\n\nmainTitleBtn = {\n      label=\"D A T A S H E E T      A N D         D A T A C A R D S    -   Left Click\\nM O D E L S    -   Right Click                                                           \\n\\n▼     ▼     ▼     ▼     ▼\", click_function=\"none1\",func_param={card=\"\"}, function_owner=self,\n--    label=\"D A T A S H E E T      A N D         D A T A C A R D S    -   Left Click\\nD A T A S H E E T      A N D         D A T A C A R D S    -   Left Click\"\n    position={0+Xoffset,Yoffset,Zoffset-0.5}, rotation={0,0,0}, height=0, width=00, -- 900 12000\n    font_size=350, color=\"Black\", font_color=\"White\"\n}\n\nmainTitle2Btn = {\n    label=\"GAMING TOOLS\", click_function=\"none1\",func_param={card=\"\"}, function_owner=self,\n    position={-15+Xoffset,Yoffset,Zoffset}, rotation={0,0,0}, height=500, width=4000,\n    font_size=400, color=\"Black\", font_color=\"White\"\n}\n\n\nmainTitleAvailableBtn = {\n    label=\"UPGRADES\", click_function=\"none2\", func_param={card=\"\"}, function_owner=self,\n    position={0+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=1000, width=3000,\n    font_size=400, color=\"Black\", font_color=\"White\"\n}\navailableBtn = {\n    label=\"NONE\", click_function=\"none4\", func_param={card=\"\"}, function_owner=self,\n    position={XoffsetSecondary+Xoffset,Yoffset,0}, rotation={0,0,0}, height=200*1, width=2000*1,\n    font_size=250, color=\"Black\", font_color=\"White\"\n}\n\nfactionBtn = {\n    label=\"For listing factions\", click_function=\"none2\", func_param={card=\"\"}, function_owner=self,\n    position={0+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=1600, width=7000,\n    font_size=600, color=\"White\", font_color=\"Black\"\n}\n\nsubtitleBtn = {\n    label=\"\\n\\n\\nFanmade - NOT OFFICIAL\", click_function=\"none2\", func_param={card=\"\"}, function_owner=self,\n    position={0+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=0, width=0,\n    font_size=300, color=\"White\", font_color=\"Red\"\n}\n\nbackBtn = {\n    label=\"UPGRADES\", click_function=\"none2\", func_param={card=\"\"}, function_owner=self,\n    position={0+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=1000, width=6000,\n    font_size=600, color=\"Black\", font_color=\"White\"\n}\n\n\nspawningPosition={-18,10,12.11}\nspawningPosition2={spawningPosition[1],spawningPosition[2],-spawningPosition[3]}\n\n\nfunction hideMasterModels()\n    local startPos={90,-5,50}\n    local counterX=0\n    local counterZ=0\n    local stepX=10\n    local stepZ=6\n    local items={}\n    for i, plane in ipairs(AvailablePlanes) do\n        table.insert(items, plane)\n    end\n    for i, upgrade in ipairs(AvailableUpgrades) do\n        table.insert(items, upgrade)\n    end\n    for i, defence in ipairs(AvailableGroundDefences) do\n        table.insert(items, defence)\n    end\n    for i, available in ipairs(items) do\n        local master=getObjectFromGUID(available.guid)\n        if master ~= nil then\n\n            master.setPosition({startPos[1]-counterX*stepX,startPos[2],startPos[3]-counterZ*stepZ})\n            master.setLock(true)\n            master.interactable=false\n            master.script_state=\"\"\n            counterZ=counterZ+1\n            if counterZ>16 then\n                counterZ=1\n                counterX=counterX+1\n            end\n\n        end\n    end\nend\n-- END SPAWING ITEMS DATA",
  "LuaScriptState": "[]",
  "MusicPlayer": {
    "RepeatSong": false,
    "PlaylistEntry": 0,
    "CurrentAudioTitle": "Simian zoo",
    "CurrentAudioURL": "http://cloud-3.steamusercontent.com/ugc/775104608736311614/429CE83CDC52DA1CD47C8B0BF098AA7DF853B20C/",
    "AudioLibrary": [
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/775104608736311614/429CE83CDC52DA1CD47C8B0BF098AA7DF853B20C/",
        "Item2": "Simian zoo"
      },
      {
        "Item1": "http://cloud-3.steamusercontent.com/ugc/775104608736933501/B218119400AE0694B5152325F224465F40992012/",
        "Item2": "Deadpool dmx"
      }
    ]
  },
  "Grid": {
    "Type": 1,
    "Lines": true,
    "Color": {
      "r": 0.20200257,
      "g": 0.454703867,
      "b": 0.4180805
    },
    "Opacity": 0.75,
    "ThickLines": false,
    "Snapping": false,
    "Offset": true,
    "BothSnapping": false,
    "xSize": 2.0,
    "ySize": 2.0,
    "PosOffset": {
      "x": 0.0,
      "y": 1.0,
      "z": 0.0
    }
  },
  "Lighting": {
    "LightIntensity": 0.54,
    "LightColor": {
      "r": 1.0,
      "g": 0.9804,
      "b": 0.8902
    },
    "AmbientIntensity": 1.3,
    "AmbientType": 0,
    "AmbientSkyColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientEquatorColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "AmbientGroundColor": {
      "r": 0.5,
      "g": 0.5,
      "b": 0.5
    },
    "ReflectionIntensity": 1.0,
    "LutIndex": 0,
    "LutContribution": 1.0
  },
  "Hands": {
    "Enable": true,
    "DisableUnused": true,
    "Hiding": 0,
    "HandTransforms": [
      {
        "Color": "Red",
        "Transform": {
          "posX": 36.0,
          "posY": 3.50000024,
          "posZ": 49.5,
          "rotX": 0.0,
          "rotY": 180.0,
          "rotZ": 0.0,
          "scaleX": 39.45,
          "scaleY": 3.890258,
          "scaleZ": 7.8216
        }
      },
      {
        "Color": "Blue",
        "Transform": {
          "posX": 36.0,
          "posY": 1.00000048,
          "posZ": -49.5,
          "rotX": 0.0,
          "rotY": -4.00605277E-05,
          "rotZ": 0.0,
          "scaleX": 39.45,
          "scaleY": 9.077269,
          "scaleZ": 7.8216
        }
      },
      {
        "Color": "Orange",
        "Transform": {
          "posX": -36.0,
          "posY": 3.50000024,
          "posZ": 49.5,
          "rotX": 0.0,
          "rotY": 180.0,
          "rotZ": 0.0,
          "scaleX": 39.45,
          "scaleY": 3.890258,
          "scaleZ": 7.82159662
        }
      },
      {
        "Color": "Teal",
        "Transform": {
          "posX": -36.0,
          "posY": 1.00000048,
          "posZ": -49.5,
          "rotX": 0.0,
          "rotY": -4.00605277E-05,
          "rotZ": 0.0,
          "scaleX": 39.45,
          "scaleY": 9.077269,
          "scaleZ": 7.8216
        }
      }
    ]
  },
  "Turns": {
    "Enable": false,
    "Type": 1,
    "TurnOrder": [
      "Red",
      "Blue"
    ],
    "Reverse": false,
    "SkipEmpty": false,
    "DisableInteractions": false,
    "PassTurns": true,
    "TurnColor": ""
  },
  "ObjectStates": [
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -16.0,
        "rotX": 1.6414026E-06,
        "rotY": 0.00313524529,
        "rotZ": -6.53874849E-07,
        "scaleX": 0.4250004,
        "scaleY": 0.4250004,
        "scaleZ": 0.4250004
      },
      "Nickname": "Grot Bommer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921616,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776232414282996087/252D650B4207CF24A01DA9749BF3087CB4FF2F26/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/776232414283031661/3C6675B7D678F11214133A127A15B496C2CD23C8/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "6cd42b"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -40.0,
        "rotX": 4.887851E-07,
        "rotY": 300.0002,
        "rotZ": -2.18153127E-06,
        "scaleX": 0.450000376,
        "scaleY": 0.450000376,
        "scaleZ": 0.450000376
      },
      "Nickname": "Grot Bomb",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167056,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776232414283069187/43919E4CDF6453C25690A0A0B96113E598F69265/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/776232414283073210/CBE720288D4A7E7B3460FEB9C5E9B11391E9165C/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689447/151C0C2E002904F1B7C92B96B9CBD5930808F86A/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d33149"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -10.0,
        "rotX": -1.61414607E-06,
        "rotY": 180.000031,
        "rotZ": 6.503541E-07,
        "scaleX": 0.250000119,
        "scaleY": 0.250000119,
        "scaleZ": 0.250000119
      },
      "Nickname": "'Eavy Bommer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/776232414283110700/3A78AF07CFACE5B974F7AC09E2E0200C7467573E/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/776232414283119342/D3B241C893BEA3E5364D803CACD2BB233AAE93BB/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f8f75c"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 20.0,
        "rotX": 0.004459573,
        "rotY": 180.252426,
        "rotZ": 359.651,
        "scaleX": 0.95,
        "scaleY": 1.0,
        "scaleZ": 0.95
      },
      "Nickname": "Blank Base",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/779608208358821962/C2EC1BA9BB242383D6DF19D180F542765F01FBCA/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 1,
          "Thickness": 0.2,
          "Stackable": false,
          "Stretch": false
        }
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        },
        {
          "Name": "UpgradeCard1",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        },
        {
          "Name": "UpgradeCard2",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        },
        {
          "Name": "UpgradeCard3",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        },
        {
          "Name": "UpgradeCard4",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        },
        {
          "Name": "UpgradeCard5",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        },
        {
          "Name": "UpgradeCard6",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.2\r\nZbuttonOffset=0\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=5, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nfaction=\"\"\r\nhangar=nil\r\nhangar_GUID=\"5a7404\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=8, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=true\r\nshowLoadoutImages=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\naltitudeBtn = {\r\n    label=flight.alt, click_function=\"onClickAltitude\", function_owner=self,\r\n    position={0.48+XbuttonOffset,0+YbuttonOffset,0.56}, rotation={0,0,0}, height=120, width=120,\r\n    font_size=100, color=\"Green\", font_color={1,1,1}, tooltip=\"ALTITUDE\\nLMB increase\\nRMB decrease\"\r\n}\r\n\r\nspeedBtn = {\r\n    label=flight.speed, click_function=\"onClickSpeed\", function_owner=self,\r\n    position={-0.48+XbuttonOffset,0+YbuttonOffset,0.56}, rotation={0,0,0}, height=120, width=120,\r\n    font_size=100, color=\"Green\", font_color={1,1,1}, tooltip=\"SPEED\\nLMB increase\\nRMB decrease\"\r\n}\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", font_color={1,1,1}\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", font_color={1,1,1}, tooltip=\"LMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowFrontArcBtn = {\r\n    label=arcLbl, click_function=\"toggleFrontArc\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.75}, rotation={0,0,0}, height=80, width=100,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"FRONT ARC\\n\"..arcTooltip\r\n}\r\nshowLeftArcBtn = {\r\n    label=arcLbl, click_function=\"toggleLeftArc\", function_owner=self,\r\n    position={-0.65,0+YbuttonOffset,-0.35}, rotation={0,-60,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"FRONT-LEFT ARC\\n\"..arcTooltip\r\n}\r\nshowRightArcBtn = {\r\n    label=arcLbl, click_function=\"toggleRightArc\", function_owner=self,\r\n    position={0.65,0+YbuttonOffset,-0.35}, rotation={0,60,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"FRONT-RIGHT ARC\\n\"..arcTooltip\r\n}\r\n\r\nshowLeftArc2Btn = {\r\n    label=arcLbl, click_function=\"toggleLeftArc2\", function_owner=self,\r\n    position={-0.75,0+YbuttonOffset,0.25}, rotation={0,-120,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"REAR-LEFT ARC\\n\"..arcTooltip\r\n}\r\nshowRightArc2Btn = {\r\n    label=arcLbl, click_function=\"toggleRightArc2\", function_owner=self,\r\n    position={0.75,0+YbuttonOffset,0.25}, rotation={0,120,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"REAR-RIGHT ARC\\n\"..arcTooltip\r\n}\r\n\r\nshowRearArcBtn = {\r\n    label=arcLbl, click_function=\"toggleRearArc\", function_owner=self,\r\n    position={0,0+YbuttonOffset,0.75}, rotation={0,180,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"REAR ARC\\n\"..arcTooltip\r\n}\r\n\r\nshowTailingBtn = {\r\n    label=\"AUTO\\nTAIL\", click_function=\"toggleTailing\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.45}, rotation={0,0,0}, height=100, width=125,\r\n    font_size=30, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\nfuelBtn = {\r\n    label=\"«\", click_function=\"onClickFuel\", function_owner=self,\r\n    position={0,3,0}, rotation={0,90,0}, height=100, width=100,\r\n    font_size=100, color=\"Blue\", font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.45}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nlinkPlaneBtn = {\r\n    label=\"REFRESH\\nSTATS\", click_function=\"linkPlaneRemote\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.15}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=40, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nlinkPlaneBtn2 = {\r\n    label=\"LINK PLANE\", click_function=\"linkPlaneRemote\", function_owner=self,\r\n    position={0,1.5+YbuttonOffset,-0.15}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=100, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nunlinkPlaneBtn = {\r\n    label=\"UNLINK\\nPLANE\", click_function=\"unlinkPlane\", function_owner=self,\r\n    position={0,0+YbuttonOffset,0.15}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,0+YbuttonOffset,0.45}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"C L A I M\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,1.5+YbuttonOffset,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\n\r\n\r\n\r\nfunction onSave()\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats, svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    --print(rgbToHex({r=1, g=0, b=0.45}))\r\n    self.mass=100\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        planeStats=loaded_data.svplaneStats\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n    end\r\n\r\n    plane=getObjectFromGUID(plane_GUID)\r\n    if self.getPosition().y>0.3 then\r\n        linkPlane(self, planeLocalStats.owner, false, false)\r\n    end\r\n    if plane == nil then\r\n        --linkPlane(self, self.getColorTint(), false)\r\n    else\r\n        plane.interactable=true --Ric\r\n    end\r\n    getPlaneStats()\r\n    --[[\r\n    if planeStats ~= nil then\r\n            for i, val in pairs(planeLocalStats) do\r\n            --    print(i..\"  \"..val)\r\n            end\r\n    else\r\n        --print(\"No stats\")\r\n    end\r\n    --planeLocalStats={hp=5, rotOffset=180, owner=\"White\", fuel=2}\r\n    ]]\r\n    characterSheet=getObjectFromGUID(planeLocalStats.characterSheet_GUID)\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    writeMenu()\r\n\r\n\r\nend\r\n\r\nfunction getUpgradeStats()\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            table.insert(splitted, #splitted+1, line)\r\n        end\r\n        --planeType=splitted[1]\r\n        --planeType=string.gsub(planeType, \" \", \" \")\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    if hangar ~= nil then\r\n        availables=Global.getTable(\"AvailablePlanes\")\r\n        for i, stats in ipairs(availables) do\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                for k, upgrade in ipairs(upgrades) do\r\n                    if upgrade.mod ~= nil then\r\n                        if upgrade.mod.maxSpeed ~= nil then\r\n                            planeStats.maxSpeed=planeStats.maxSpeed+upgrade.mod.maxSpeed\r\n                        end\r\n\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction getPlaneStats()\r\n    local defaultImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    local imageUpgrades={defaultImage,defaultImage,defaultImage,defaultImage,defaultImage,defaultImage}\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"defaultPlaneStats\"\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            table.insert(splitted, #splitted+1, line)\r\n        end\r\n        planeType=splitted[1]\r\n        --planeType=string.gsub(planeType, \" \", \" \")\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --if hangar ~= nil then\r\n    if true then\r\n        availables=Global.getTable(\"AvailablePlanes\")\r\n        for i, stats in ipairs(availables) do\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                faction=stats.faction\r\n                found=true\r\n                local upgradeAvailables=Global.getTable(\"AvailableUpgrades\")\r\n                for k, upgrade in ipairs(upgradeAvailables) do\r\n                    for j, myUpgrade in ipairs(upgrades) do\r\n                        if myUpgrade==upgrade.type then\r\n                            if upgrade.image ~= nil then\r\n                                imageUpgrades[j]=upgrade.image\r\n                                --print(\"Set imageUpgrades[\"..j..\"]    val: \"..upgrade.image)\r\n                            end\r\n                            if upgrade.mod ~= nil then\r\n                                if upgrade.mod.maxSpeed ~= nil then\r\n                                    planeStats.maxSpeed=planeStats.maxSpeed+upgrade.mod.maxSpeed\r\n                                    --printToAll(\"MAX SPEED CHANGE: \"..upgrade.mod.maxSpeed..\"   \"..upgrade.type, \"Orange\")\r\n                                end\r\n                                if upgrade.mod.minSpeed ~= nil then\r\n                                    planeStats.minSpeed=planeStats.minSpeed+upgrade.mod.minSpeed\r\n                                    --printToAll(\"MIN SPEED CHANGE: \"..upgrade.mod.minSpeed..\"   \"..upgrade.type, \"Orange\")\r\n                                end\r\n                                if upgrade.mod.maxAlt ~= nil then\r\n                                    planeStats.maxAlt=planeStats.maxAlt+upgrade.mod.maxAlt\r\n                                    --printToAll(\"MAX ALT CHANGE: \"..upgrade.mod.maxAlt..\"   \"..upgrade.type, \"Orange\")\r\n                                end\r\n                            end\r\n                        end\r\n                    end\r\n                end\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultPlaneStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        planeStats= defaultPlaneStats\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local imagePlane=defaultImage\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        imagePlane=planeStats.image\r\n    end\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = imagePlane\r\n    },\r\n    {\r\n        name = \"UpgradeCard1\",\r\n        url  = imageUpgrades[1]\r\n    },\r\n    {\r\n        name = \"UpgradeCard2\",\r\n        url  = imageUpgrades[2]\r\n    },\r\n    {\r\n        name = \"UpgradeCard3\",\r\n        url  = imageUpgrades[3]\r\n    },\r\n    {\r\n        name = \"UpgradeCard4\",\r\n        url  = imageUpgrades[4]\r\n    },\r\n    {\r\n        name = \"UpgradeCard5\",\r\n        url  = imageUpgrades[5]\r\n    },\r\n    {\r\n        name = \"UpgradeCard6\",\r\n        url  = imageUpgrades[6]\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n    if plane== nil then\r\n        self.createButton(linkPlaneBtn)\r\n        self.createButton(linkPlaneBtn2)\r\n        self.setName(\"Unknown Flying Object\")\r\n        return\r\n    end\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0,0+YbuttonOffset,0}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,flight.alt*0.35+1.1,0}\r\n    self.createButton(stats2Btn)\r\n    altitudeBtn.label=flight.alt\r\n    altitudeBtn.color=\"Green\"\r\n    if planeStats.maxAlt ~= nil and planeStats.maxSpeed~= nil and planeStats.minSpeed~= nil then\r\n    --    print(\"Flight A/S: \"..flight.alt..\"    \"..flight.speed)\r\n    --    print(\"MAlt: \"..planeStats.maxAlt..\"   mSpd: \"..planeStats.minSpeed..\"   MSpd: \"..planeStats.maxSpeed)\r\n    --    print(\"--------------------------\")\r\n    end\r\n    if planeStats.maxAlt ~= nil and flight.alt > planeStats.maxAlt then\r\n        altitudeBtn.color=\"Orange\"\r\n    end\r\n    if flight.alt <= 0  then\r\n        altitudeBtn.color=\"Red\"\r\n    end\r\n    self.createButton(altitudeBtn)\r\n    speedBtn.label=flight.speed\r\n    speedBtn.color=\"Green\"\r\n    if planeStats.maxSpeed~= nil and planeStats.minSpeed~= nil then\r\n        if flight.speed > planeStats.maxSpeed or flight.speed < planeStats.minSpeed then\r\n            speedBtn.color=\"Orange\"\r\n        end\r\n    end\r\n\r\n    self.createButton(speedBtn)\r\n    self.createButton(showFrontArcBtn)\r\n    self.createButton(showLeftArcBtn)\r\n    self.createButton(showRightArcBtn)\r\n    self.createButton(showLeftArc2Btn)\r\n    self.createButton(showRightArc2Btn)\r\n    self.createButton(showRearArcBtn)\r\n    self.createButton(showTailingBtn)\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={0.12*(-planeLocalStats.hp+1)+(i-1)*0.24, flight.alt*0.35+0.2, 0} --flight.alt-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n    if planeStats.fuel ~= nil then\r\n        for i=1, planeLocalStats.fuel do\r\n            fuelBtn.position={0.12*(-planeLocalStats.fuel+1)+(i-1)*0.24, flight.alt*0.35+0.2, -0.3}\r\n            self.createButton(fuelBtn)\r\n        end\r\n    end\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n    optionsBtn.position={0.45,0+YbuttonOffset,-0.45}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(linkPlaneBtn)\r\n    self.createButton(linkPlaneBtn2)\r\n    self.createButton(unlinkPlaneBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showFrontArcBtn.color=\"Grey\"\r\n    showRightArcBtn.color=\"Grey\"\r\n    showLeftArcBtn.color=\"Grey\"\r\n    showRearArcBtn.color=\"Grey\"\r\n    showLeftArc2Btn.color=\"Grey\"\r\n    showRightArc2Btn.color=\"Grey\"\r\n    showTailingBtn.color=\"Grey\"\r\n    showTailing=false\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 1 then\r\n        showFrontArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeFrontArcHex(_skipHex)\r\n    end\r\n    if showArcType == 2 then\r\n        showLeftArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeLeftArcHex(_skipHex)\r\n    end\r\n    if showArcType == 3 then\r\n        showRightArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeRightArcHex(_skipHex)\r\n    end\r\n    if showArcType == 4 then\r\n        showLeftArc2Btn.color=\"Green\"\r\n        writeMenu()\r\n        writeLeftArc2Hex(_skipHex)\r\n    end\r\n    if showArcType == 5 then\r\n        showRightArc2Btn.color=\"Green\"\r\n        writeMenu()\r\n        writeRightArc2Hex(_skipHex)\r\n    end\r\n    if showArcType == 6 then\r\n        showRearArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeRearArcHex(_skipHex)\r\n    end\r\nend\r\n\r\nfunction toggleFrontArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(1, skipHex)\r\n\r\nend\r\n\r\nfunction toggleLeftArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(2, skipHex)\r\n\r\nend\r\n\r\nfunction toggleRightArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(3, skipHex)\r\n\r\nend\r\n\r\nfunction toggleLeftArc2(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(4, skipHex)\r\nend\r\n\r\nfunction toggleRightArc2(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(5, skipHex)\r\nend\r\n\r\nfunction toggleRearArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(6, skipHex)\r\nend\r\n\r\nfunction toggleTailing(obj, player, alt)\r\n    if flight.alt ==0 then\r\n        printToColor(\"YOU ARE LANDED!\", player, \"Yellow\")\r\n        return\r\n    end\r\n    showFrontArcBtn.color=\"Grey\"\r\n    showRightArcBtn.color=\"Grey\"\r\n    showLeftArcBtn.color=\"Grey\"\r\n    showRightArc2Btn.color=\"Grey\"\r\n    showLeftArc2Btn.color=\"Grey\"\r\n    showRearArcBtn.color=\"Grey\"\r\n    showTailingBtn.color=\"Grey\"\r\n    showArcType=0\r\n    showTailing = not showTailing\r\n    if showTailing then\r\n        showTailingBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeTailingHex(player)\r\n    else\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\nend\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    if alt then\r\n        characterSheet=getObjectFromGUID(planeLocalStats.characterSheet_GUID)\r\n        if characterSheet ~= nil then -- go to Character sheet\r\n            Player[player].lookAt({position = characterSheet.getPosition(), pitch = 90, yaw = characterSheet.getRotation().y, distance = 13,})\r\n        end\r\n        return\r\n    end\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({ -- window OPEN\r\n        position = self.positionToWorld({0,0,0.5}),\r\n        pitch    = 90,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({ -- window CLOSE\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n    if plane ~= nil then\r\n        createUI(player)\r\n    end\r\nend\r\n\r\nfunction deleteXml()\r\n    if plane ~= nil then\r\n        self.UI.setXml(\"\")\r\n    end\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    if plane ~= nil then\r\n        self.UI.setXml(\"\")\r\n    end\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableB4='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0 200\" cellSpacing=\"0\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-220-50*flight.alt\r\n    panelB='<Panel position=\"0 -220 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"0.65 0.65 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for plane image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the plane image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    local availableUpgrades= Global.getTable(\"AvailableUpgrades\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n\r\n\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade and available.faction==faction  then -- upgrade found\r\n                    --- START IF showLoadoutImages\r\n                    if showLoadoutImages then -- show upgrades as images\r\n                        preferred_Height=\"200\" -- upgrade card\r\n                        if available.cat==\"pilot\" or available.cat==\"crew\" then\r\n                            preferred_Height=\"400\"\r\n                        end\r\n                        if available.cat==\"weapon\" or available.cat==\"upgrade\" then\r\n                            preferred_Height=\"200\"\r\n                        end\r\n                        --preferred_Height=\"200\" -- upgrade card\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                            stringXml=stringXml..tableB4\r\n                            --    preferred_Height=\"200\" -- upgrade card\r\n                                rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                                stringXml=stringXml..rowB\r\n                                    cell= '<Cell><Text>'..'</Text></Cell>'\r\n                                    stringXml=stringXml..cell\r\n                                    cell= '<Cell>'\r\n                                    stringXml=stringXml..cell\r\n                                    id_element=\"upgradeCard\"..i\r\n                                    isActive=\"true\"\r\n                                    image_asset=\"UpgradeCard\"..i\r\n                                    color=\"#ffffff\"\r\n                                    for k, asset in ipairs(self.UI.getCustomAssets()) do\r\n                                    --    print(\"Check \"..asset.name..\"    Wanted: \"..image_asset)\r\n                                        if asset.name==image_asset and asset.url ~= \" \" then\r\n                                            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n                                            stringXml=stringXml..image\r\n                                        break\r\n                                    end\r\n                                end\r\n                                cell= '</Cell>'\r\n                                stringXml=stringXml..cell\r\n                                cell= '<Cell><Text>'..'</Text></Cell>'\r\n                                stringXml=stringXml..cell\r\n                                stringXml=stringXml..rowE\r\n                            stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    else  -- Writes upgrades as text\r\n                        if available.cat==\"weapon\" then\r\n                            local prefH=30*(#available.special)\r\n                            if prefH<=30 then\r\n                                prefH=45\r\n                            end\r\n                            preferred_Height=tostring(prefH)\r\n                            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                            stringXml=stringXml..rowB\r\n                            stringXml=stringXml..tableB2\r\n\r\n                            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                            stringXml=stringXml..rowB\r\n\r\n                            cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                            stringXml=stringXml..cell\r\n                            cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                            stringXml=stringXml..cell\r\n                            local fprString=\"FPR\\n\"\r\n                            for k, dice in ipairs(available.fpr) do\r\n                                if k == 1 then\r\n                                    fprString=fprString..tostring(dice)\r\n                                else\r\n                                    fprString=fprString..\" / \"..tostring(dice)\r\n                                end\r\n                            end\r\n                            cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                            stringXml=stringXml..cell\r\n                            cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                            stringXml=stringXml..cell\r\n                            if available.ammo > 0 then\r\n                                cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                            else\r\n                                cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                            end\r\n                            stringXml=stringXml..cell\r\n                            local specialString=\"SPECIAL\\n\"\r\n                            for k, special in ipairs(available.special) do\r\n                                if k == 1 then\r\n                                    specialString=specialString..special..\"\\n\"\r\n                                else\r\n                                    specialString=specialString..special\r\n                                end\r\n                            end\r\n                            cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                            stringXml=stringXml..cell\r\n                            stringXml=stringXml..rowE\r\n                            stringXml=stringXml..tableE\r\n                            stringXml=stringXml..rowE\r\n                        end\r\n                        if available.cat==\"upgrade\"  or available.cat==\"pilot\" or available.cat==\"crew\" then\r\n                            local prefH=75\r\n                            preferred_Height=tostring(prefH)\r\n                            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                            stringXml=stringXml..rowB\r\n                            stringXml=stringXml..tableB3\r\n\r\n                            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                            stringXml=stringXml..rowB\r\n                            local cellTitle=\"\\n\"\r\n                            if available.cat==\"upgrade\" then\r\n                                cellTitle=\"UPGRADE\\n\"\r\n                            end\r\n                            if available.cat==\"pilot\" then\r\n                                cellTitle=\"PILOT\\n\"\r\n                            end\r\n                            if available.cat==\"crew\" then\r\n                                cellTitle=\"CREW\\n\"\r\n                            end\r\n                            cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                            stringXml=stringXml..cell\r\n                            cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                            stringXml=stringXml..cell\r\n                            stringXml=stringXml..rowE\r\n                            stringXml=stringXml..tableE\r\n                            stringXml=stringXml..rowE\r\n                        end\r\n                    end\r\n                    -- END showLoadoutImages\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Yellow\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                button.rotation={0, degrees,0}\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFrontArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\nfunction writeLeftArcHex(_skipHex)\r\n     writeFiringArc(-60,_skipHex)\r\nend\r\n\r\nfunction writeLeftArc2Hex(_skipHex)\r\n     writeFiringArc(-120,_skipHex)\r\nend\r\n\r\nfunction writeRightArcHex(_skipHex)\r\n     writeFiringArc(60,_skipHex)\r\nend\r\n\r\nfunction writeRightArc2Hex(_skipHex)\r\n     writeFiringArc(120,_skipHex)\r\nend\r\n\r\nfunction writeRearArcHex(_skipHex)\r\n     writeFiringArc(180,_skipHex)\r\nend\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    hexBtn.label=\"S\"\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n              hexBtn.label=\"M\"\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n              hexBtn.label=\"L\"\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n--[[\r\nfunction writeStraightHexBis(startPos , degrees ,  startI)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.cos(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.sin(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        self.createButton(hexBtn)\r\n    end\r\nend\r\n\r\nfunction writeStraightHexUp(startPos , rot ,  startI)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1],0.25,startPos[2]-fullHex*i}\r\n        self.createButton(hexBtn)\r\n    end\r\nend\r\n]]\r\n\r\nfunction writeTailingHex(player)\r\n    deleteRangeHex()\r\n    if flight.alt ==0 then\r\n        printToColor(\"YOU ARE LANDED!\", player, \"Yellow\")\r\n        return\r\n    end\r\n    local frontObjectsUnique={}\r\n    frontObjectsUnique=Physics.cast({\r\n        origin       = self.positionToWorld({0,0,-3.8-0.8*4}),\r\n        orientation  = {0,self.getRotation().y+120,0},\r\n        direction    = {0,1,0},\r\n        type         = 2,\r\n        size         = {10,10,10},\r\n        max_distance = 2,\r\n        debug        = false,\r\n    })\r\n    local foundPlanes= false\r\n    for i, hitInfo in pairs(frontObjectsUnique) do\r\n        local foundObject=hitInfo.hit_object\r\n        if foundObject.getTable(\"flight\") == nil or foundObject == self then\r\n            -- do nothing\r\n        else --it is a plane\r\n            local data = foundObject.getTable(\"flight\")\r\n            local diffAlt=  math.abs(data.alt-flight.alt)\r\n            local diffRot= math.abs(foundObject.getRotation().y-self.getRotation().y)\r\n            local objectPos = self.getPosition()\r\n            local targetPos = foundObject.getPosition()\r\n            local xDistance = math.abs(targetPos.x - objectPos.x)\r\n            local zDistance = math.abs(targetPos.z - objectPos.z)\r\n            local distance = xDistance^2 + zDistance^2\r\n\r\n            local relX = self.positionToLocal(foundObject.getPosition()).x\r\n            relX=math.abs(relX)\r\n            local relZ = self.positionToLocal(foundObject.getPosition()).z\r\n            local relAngle=math.deg(math.atan(relX/relZ))\r\n            relAngle=math.abs(relAngle)\r\n\r\n            if data.alt>0 and flight.alt>0 and diffAlt <= 1 and relAngle<32 and foundObject.getColorTint() ~= self.getColorTint() then\r\n\r\n               -- check if self is in rear arc of foundObject\r\n               local isInTargetRear=false\r\n               local relX2 = foundObject.positionToLocal(self.getPosition()).x\r\n               relX2=math.abs(relX2)\r\n               local relZ2 = foundObject.positionToLocal(self.getPosition()).z\r\n               local relAngle2=math.deg(math.atan(relX2/relZ2))\r\n               --relAngle2=math.abs(relAngle2)\r\n             --print(foundObject.getName()..\" RX: \"..relX2..\"  RZ:\"..relZ2..\"   REL A2: \"..relAngle2)\r\n               if relZ2>0 and relAngle2<28 then\r\n                   isInTargetRear=true\r\n               end\r\n               -- end check\r\n\r\n               if isInTargetRear then\r\n                   hexBtn.color=shortRangeColor\r\n                   hexBtn.label=\"S\"\r\n                    if math.abs(math.sqrt(distance)) > 7.5 then\r\n                        hexBtn.color=mediumRangeColor\r\n                        hexBtn.label=\"M\"\r\n                    end\r\n                    hexBtn.position={-self.positionToLocal(foundObject.getPosition()).x,0.25,self.positionToLocal(foundObject.getPosition()).z}\r\n                    self.createButton(hexBtn)\r\n                    foundPlanes=true\r\n                end\r\n            end\r\n        end\r\n    end\r\n       --print(\"------------------\")\r\n    if foundPlanes == false then\r\n        printToColor(\"NO VALID TARGETS!\", player, \"Yellow\")\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt) -- reset\r\n    self.setColorTint(\"White\")\r\n    planeLocalStats.owner=\"\"\r\n    showOptions=false\r\n    writeMenu()\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)  -- set\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    writeMenu()\r\nend\r\n\r\nfunction linkPlaneRemote()\r\n    linkPlane(self, planeLocalStats.owner, false, true)\r\nend\r\n\r\nfunction linkPlane(obj, player, alt, refreshStats)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    plane=nil\r\n    local planes= Physics.cast({\r\n        origin       = self.getPosition(),\r\n        orientation  = self.getRotation(),\r\n        direction    = {0,1,0},\r\n        type         = 3,\r\n        size         = {0.1,0.3,1},\r\n        max_distance = 20,\r\n        debug        = false,\r\n    })\r\n    for i, obj in pairs(planes) do\r\n        if obj.hit_object.getPosition().y > self.getPosition().y then\r\n            if obj.hit_object.getVar(\"orderType\") == nil and obj.hit_object.getVar(\"whatIam\") ~= \"AircraftBase\" and  obj.hit_object.getVar(\"whatIam\") ~= \"AutonomousBase\" then\r\n                plane=obj.hit_object\r\n                break\r\n            end\r\n        end\r\n    end\r\n    if plane == nil then\r\n        if player == nil or player == \"\" then\r\n            return\r\n        end\r\n        if Player[player].seated == true then\r\n            printToColor(\"No plane found\", player, \"Yellow\")\r\n        end\r\n        return\r\n    end\r\n    plane_GUID=plane.getGUID()\r\n    plane.mass=0\r\n    plane.tooltip=false\r\n    setPlaneModelHeight()\r\n    setPlaneModelRotation()\r\n    plane.jointTo()\r\n    jointPlane()\r\n    plane.setLock(false)\r\n    plane.interactable=true -- Ric\r\n    showOptions=false\r\n    self.UI.setXml(\"\")\r\n    getPlaneStats()\r\n    if refreshStats then\r\n        planeLocalStats.hp=planeStats.structure\r\n        planeLocalStats.fuel=planeStats.fuel\r\n        if characterSheet ~= nil then\r\n            characterSheet.call(\"writeMenu\")\r\n        end\r\n    end\r\n\r\n    --self.setName(\"* \"..plane.getName()..\" *\")\r\n    --self.setName(plane.getName())\r\n    writeMenu()\r\nend\r\n\r\nfunction unlinkPlane(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    plane.jointTo()\r\n    self.UI.setXml(\"\")\r\n    plane.interactable=true\r\n    plane=nil\r\n    plane_GUID=\"\"\r\n    showOptions=false\r\n    self.setName(\"Unknown Flying Object\")\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickSpeed(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeSpeed(-1)\r\n    else\r\n        changeSpeed(1)\r\n    end\r\nend\r\n\r\nfunction onClickAltitude(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeAltitude(-1)\r\n    else\r\n        changeAltitude(1)\r\n    end\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction onClickFuel(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeFuel(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\n\r\nfunction changeSpeed(increment)\r\n    flight.speed=flight.speed + increment\r\n    if flight.speed < 0 then\r\n        flight.speed=0\r\n    end\r\n    if flight.speed > 9 then\r\n        flight.speed=9\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n    printToAll(\"[\"..rgbToHex(stringColorToRGB(planeLocalStats.owner))..\"]\"..self.getName()..\"[-] was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction changeFuel(increment)\r\n    planeLocalStats.fuel=planeLocalStats.fuel+ increment\r\n    if planeLocalStats.fuel > planeStats.fuel then\r\n        planeLocalStats.fuel=planeStats.fuel\r\n    end\r\n    if planeLocalStats.fuel < 0 then\r\n        planeLocalStats.fuel=0\r\n    end\r\n    if planeLocalStats.fuel == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(\"[\"..rgbToHex(stringColorToRGB(planeLocalStats.owner))..\"]\"..self.getName()..\"[-] ran out of fuel!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    writeMenu()\r\nend\r\n\r\n\r\nfunction changeAltitude(increment)\r\n    flight.alt=flight.alt + increment\r\n    if flight.alt < 0 then\r\n        flight.alt=0\r\n    end\r\n    if flight.alt > 5 then\r\n        flight.alt=5\r\n    end\r\n    if dynamicAltitude then\r\n        plane.jointTo()\r\n        if flight.alt> 0 then\r\n            setPlaneModelHeight()\r\n        else\r\n            plane.setPosition(self.positionToWorld({0,0.5,0}))\r\n            printToAll(\"TOO LOW! PULL UP! [\"..rgbToHex(stringColorToRGB(planeLocalStats.owner))..\"]\"..self.getName()..\"[-] reached ground!\", \"Yellow\")\r\n            --planeLocalStats.hp=0\r\n        end\r\n        jointPlane()\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction setPlaneModelHeight()\r\n    if plane == nil then return end\r\n    plane.setPosition(self.positionToWorld({0,flight.alt*0.35+0.9,0}))\r\nend\r\n\r\nfunction setPlaneModelRotation()\r\n    if plane == nil then return end\r\n    plane.jointTo()\r\n    plane.setRotation({plane.getRotation().x,self.getRotation().y+planeLocalStats.rotOffset+180, plane.getRotation().z})\r\n    jointPlane()\r\nend\r\n\r\nfunction jointPlane()\r\nplane.jointTo(self, {\r\n    [\"type\"]        = \"Fixed\",\r\n    [\"collision\"]   = false,\r\n    [\"break_force\"]  = 10000.0,\r\n    [\"break_torgue\"] = 10000.0,\r\n    })\r\nend\r\n\r\nfunction onScriptingButtonDown(index, player) -- turns plane NOT on Y\r\n    if player ~= planeLocalStats.owner then  return end\r\n    if #Player[player].getSelectedObjects()==0 or #Player[player].getSelectedObjects()>2 then\r\n        return\r\n    end\r\n    local allow1 = false\r\n    local allow2 = false\r\n    for i, obj in pairs(Player[player].getSelectedObjects()) do\r\n        if obj== self then\r\n            allow1=true\r\n        end\r\n        if obj== plane then\r\n            allow2=true\r\n        end\r\n    end\r\n    if #Player[player].getSelectedObjects()==1 then\r\n        if not allow1 and not allow2 then -- one selected, none is base or plane\r\n            return\r\n        end\r\n    end\r\n    if #Player[player].getSelectedObjects()==2 then\r\n        if not allow1 or not allow2 then -- two selected, they are not both\r\n            return\r\n        end\r\n    end\r\n\r\n\r\n    if #Player[player].getSelectedObjects() ~= 1 or Player[player].getSelectedObjects()[1] ~= self then\r\n    --    return\r\n    end\r\n    if plane == nil then\r\n        return\r\n    end\r\n    local maxDegrees = 360\r\n    local step=5\r\n    local Xdegrees= plane.getRotation().x\r\n    local Ydegrees= plane.getRotation().y\r\n    local Zdegrees= plane.getRotation().z\r\n\r\n    if index== 10 then  -- Rotation Offset\r\n        planeLocalStats.rotOffset=planeLocalStats.rotOffset+90\r\n        if planeLocalStats.rotOffset > 270 then\r\n            planeLocalStats.rotOffset = 0\r\n        end\r\n        Ydegrees=self.getRotation().y+planeLocalStats.rotOffset\r\n    end\r\n\r\n    if index== 4 then  -- Z + left\r\n        Zdegrees=Zdegrees+step\r\n        if Zdegrees > maxDegrees and Zdegrees < 180 then\r\n            --Zdegrees = maxDegrees\r\n        end\r\n        if Zdegrees>359 then\r\n            Zdegrees=0\r\n        end\r\n    end\r\n    if index== 6 then -- Z -  right\r\n        Zdegrees=Zdegrees-step\r\n        if Zdegrees < 360-maxDegrees and Zdegrees > 180+maxDegrees then\r\n            --Zdegrees = 360-maxDegrees\r\n        end\r\n        if Zdegrees<0 then\r\n            --Zdegrees=0\r\n        end\r\n    end\r\n    if index== 8 then -- X + down\r\n        Xdegrees=Xdegrees+step\r\n        if Xdegrees > maxDegrees and Xdegrees < 180 then\r\n            --Xdegrees = maxDegrees\r\n        end\r\n        if Xdegrees>359 then\r\n        --    Xdegrees=0\r\n        end\r\n\r\n    end\r\n    if index== 2 then -- X - up\r\n        Xdegrees=Xdegrees-step\r\n        if Xdegrees < 360-maxDegrees and Xdegrees > 180+maxDegrees then\r\n            --Xdegrees = 360-maxDegrees\r\n        end\r\n        if Xdegrees<0 then\r\n            --Xdegrees=0\r\n        end\r\n\r\n    end\r\n    if index == 5 then\r\n        Xdegrees=0\r\n        Zdegrees=0\r\n    end\r\n    plane.jointTo()\r\n    plane.setRotation({Xdegrees, Ydegrees, Zdegrees})\r\n    jointPlane()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction decToHexNumber(IN)\r\n    local stringNumber=tostring(IN)\r\n    local A= math.floor(IN/16)\r\n    local B= IN%16\r\n    local symbols=\"0123456789ABCDEF\"\r\n    local Ah=string.sub(symbols, A+1, A+1)\r\n    local Bh=string.sub(symbols, B+1, B+1)\r\n    return Ah..Bh\r\nend\r\n\r\nfunction string_tohex(str)\r\n    return (str:gsub('.', function (c)\r\n        return string.format('%02X', string.byte(c))\r\n    end))\r\nend\r\n\r\nfunction rgbToHex(rgb)\r\n    local rHex=decToHexNumber((rgb.r*255))\r\n    local gHex=decToHexNumber((rgb.g*255))\r\n    local bHex=decToHexNumber((rgb.b*255))\r\n    return rHex..gHex..bHex\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"28865a\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":5,\"owner\":\"\",\"rotOffset\":0},\"svplaneStats\":{\"cat\":\"plane\",\"cost\":25,\"fuel\":-1,\"handling\":1,\"image\":\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\",\"manoeuvres\":[1,2,3,4,5,6,7,8],\"maxAlt\":10,\"maxSpeed\":10,\"minSpeed\":0,\"structure\":8,\"throttle\":10,\"transport\":-1,\"type\":\"defaultPlaneStats\"},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "530aa8"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 0.0,
        "rotX": -0.000234269071,
        "rotY": 0.02380871,
        "rotZ": 0.3497707,
        "scaleX": 10.0,
        "scaleY": 0.1,
        "scaleZ": 12.0
      },
      "Nickname": "Blank Character Sheet",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.309996873,
        "g": 0.4099969,
        "b": 0.4099969
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "<Panel active=\"false\" position=\"0 0 -100\" rotation=\"-15 0 0\" width=\"100\" height=\"104\">\r\n        <Image id=\"sheetImg\" active=\"true\" offsetXY=\"0 0\"  width=\"100%\" height=\"100%\" image=\"PowerArmour\" ></Image>\r\n</Panel>",
      "CustomUIAssets": [
        {
          "Name": "PowerArmour",
          "URL": "http://cloud-3.steamusercontent.com/ugc/784110538862068819/3F274A4C820A358B0467D4784FCC64CC2A2C742F/"
        }
      ],
      "LuaScript": "mini=nil\r\nminiGUID=\"\"\r\nminiCam=nil\r\nminiCamGUID=\"\"\r\nscreen=nil\r\nscreenGUID=\"\"\r\nminiCamEnabled=false\r\nowner=\"Black\"\r\nloadoutUI=false\r\ncameraPitch=75\r\ncameraDist=5\r\ntypeDisplay=1\r\n\r\ninventoryZone_GUID=\"\"\r\ninventoryZone=nil\r\n\r\nisBackpackPresent=false\r\nisKnifePresent=false\r\nitemsNumber=0\r\nitemsHeight={}\r\nlocalAssets ={}\r\nduplicatedAssets={}\r\n\r\nhasHp=true\r\nmaxHp=5\r\nhp=5\r\nhasMorale=true\r\nmaxMorale=2\r\nmorale=2\r\n\r\nshowOptions=false\r\nmodifyName=false\r\npointCost=0\r\n\r\ntextColor={1,1,1}\r\n\r\nmyBtn = {\r\n    label=\"CCC\", click_function=\"none\", function_owner=self,\r\n    position={0,2,0}, rotation={0,180,0}, height=450, width=3000,\r\n    font_size=300, color=\"Black\", font_color=\"White\"\r\n}\r\noptionsBtn = {\r\n    label=\"OPTIONS\", click_function=\"toggleOptions\", function_owner=self,\r\n    position={-0.40,1,0.45}, rotation={0,180,0}, height=430, width=500,\r\n    font_size=100, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nchangeMiniLbl=\"Link Base\"\r\nchangeMiniBtn = {\r\n    label=changeMiniLbl, click_function=\"changeMini\", function_owner=self,\r\n    position={0.32,1,0.45}, rotation={0,180,0}, height=400, width=1600,\r\n    font_size=200, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nresetOwnerBtn = {\r\n    label=\"Reset owner\", click_function=\"resetOwner\", function_owner=self,\r\n    position={0,1,0.45}, rotation={0,180,0}, height=430, width=1400,\r\n    font_size=200, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nchangeOwnerBtn = {\r\n    label=\"C L A I M\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,3,0}, rotation={0,180,0}, height=5000, width=4700,\r\n    font_size=1200, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\npointsBtn = {\r\n    label=\"POINTS - 0\", click_function=\"none\", function_owner=self,\r\n    position={0,1,0.45}, rotation={0,180,0}, height=0, width=00,\r\n    font_size=250, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nnameBtn = {\r\n    label=\"NOME\", click_function=\"none\", function_owner=self,\r\n    position={0,1,0.37}, rotation={0,180,0}, height=0, width=0,\r\n    font_size=300, color=\"Black\", font_color=textColor, scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nnameIn = {\r\n    input_function = \"none\", function_owner = self, label = \"\",\r\n    position = {0,1,0.37}, rotation={0,180,0}, height = 300, width = 3000,\r\n    font_size = 250, alignment = 3, validation = 4 , scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\n\r\nchangeNameBtn = {\r\n    label=\"CHANGE\\nNAME\", click_function=\"changeName\", function_owner=self,\r\n    position={-0.40,1,0.37}, rotation={0,180,0}, height=430, width=500,\r\n    font_size=100, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nstatsBtn  = {\r\n    label=\"\", click_function=\"none\", function_owner=self,\r\n    position={0,1,0.3}, rotation={0,180,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=textColor, scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\ngoToMiniBtn = {\r\n    label=\"Go to Plane\", click_function=\"goToMini\", function_owner=self,\r\n    position={0.32,1,0.45}, rotation={0,180,0}, height=430, width=1200,\r\n    font_size=200, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nupdatePlaneBtn = {\r\n    label=\"Manual refresh\", click_function=\"updatePlane\", function_owner=self,\r\n    position={0,1,-0.47}, rotation={0,180,0}, height=300, width=3000,\r\n    font_size=200, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\nminiCamBtn = {\r\n    label=\"Mini Cam - OFF\", click_function=\"toggleMiniCam\", function_owner=self,\r\n    position={-2.5/self.getScale().x,1,-8/self.getScale().z}, rotation={0,180,0}, height=430, width=2000,\r\n    font_size=200, color=\"Black\", font_color=\"White\", scale={1/self.getScale().x,1,1/self.getScale().z}\r\n}\r\n\r\nloadoutBtn = {\r\n    label=\"\", click_function=\"displayLoadout\", function_owner=self,\r\n    position={0, 2.5,0}, rotation={0,180,0}, height=75, width=75,\r\n    font_size=100, color={1,1,1,1}, font_color=\"White\"\r\n}\r\nitemBtn={\r\n    label=\"WEAPON\", click_function=\"none\", function_owner=self,\r\n    position={5,2,0}, rotation={90-cameraPitch,180,0}, height=500, width=1500,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onSave()\r\n    saved_data = JSON.encode({svminiGUID=miniGUID,\r\n                                svminiCamGUID=miniCamGUID,\r\n                                svscreenGUID=screenGUID,\r\n                                svowner=owner,\r\n                                svmaxHp=maxHp,\r\n                                svhp=hp,\r\n                                svmaxMorale=maxMorale,\r\n                                svmorale=morale,\r\n                                svinventoryZone_GUID=inventoryZone_GUID,\r\n                                svpointCost=pointCost\r\n                            })\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    --createSnapPoints()\r\n    if saved_data ~= \"\" then\r\n         local loaded_data = JSON.decode(saved_data)\r\n         miniGUID = loaded_data.svminiGUID\r\n         miniCamGUID = loaded_data.svminiCamGUID\r\n         screenGUID = loaded_data.svscreenGUID\r\n         owner = loaded_data.svowner\r\n         maxHp = loaded_data.svmaxHp\r\n         hp = loaded_data.svhp\r\n         maxMorale = loaded_data.svmaxMorale\r\n         morale = loaded_data.svmorale\r\n         inventoryZone_GUID = loaded_data.svinventoryZone_GUID\r\n         pointCost=loaded_data.svpointCost\r\n         if pointCost == nil then pointCost=0 end\r\n    end\r\n    if miniGUID ~= \"\" then\r\n        mini=getObjectFromGUID(miniGUID)\r\n        if mini == nil then\r\n            miniGUID=\"\"\r\n        end\r\n    end\r\n    miniCam=getObjectFromGUID(miniCamGUID)\r\n    if miniCam == nil then\r\n        registerCam()\r\n    end\r\n    screen=getObjectFromGUID(screenGUID)\r\n    if screen == nil then\r\n        registerScreen()\r\n    end\r\n    if miniCam ~= nil then\r\n        miniCam.setInvisibleTo(Player.getColors())\r\n    end\r\n    if screen ~= nil then\r\n        screen.setScale{1.5,1,1.5}\r\n    end\r\n    inventoryZone=getObjectFromGUID(inventoryZone_GUID)\r\n    if inventoryZone == nil then\r\n        createInventoryZone()\r\n    end\r\n\r\n\r\n    hideLoadout()\r\n    writeMenu()\r\n    if mini ~= nil then\r\n        if owner == \"\" then\r\n            loadoutBtn.color=\"Grey\"\r\n        else\r\n            loadoutBtn.color=owner\r\n        end\r\n        loadoutBtn.label=mini.getName()..\"\\n\\n\"..hp..\" - \"..morale\r\n        --mini.createButton(loadoutBtn)\r\n    end\r\n    if owner ~= \"\" then\r\n    --    Player[owner].lookAt({position = self.getPosition(), pitch = 75, yaw = self.getRotation().y, distance = 28,})\r\n    end\r\n\r\nend\r\n\r\nfunction writeMenu()\r\n    --createInventoryZone()\r\n    self.clearButtons()\r\n    self.clearInputs()\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n\r\n    if owner==\"\" then\r\n        self.createButton(changeOwnerBtn)\r\n        return\r\n    end\r\n    optionsBtn.label=\"OPTIONS\"\r\n    self.createButton(optionsBtn)\r\n    if mini ~= nil then\r\n        goToMiniBtn.color=owner\r\n        self.createButton(goToMiniBtn)\r\n    else\r\n        self.createButton(changeMiniBtn)\r\n    end\r\n    if miniCam ~= nil then\r\n        self.createButton(miniCamBtn)\r\n    end\r\n    if mini == nil then\r\n        nameBtn.label=\"NO BASE LINKED - \"..owner\r\n        nameBtn.label=\"NO BASE LINKED\"\r\n    else\r\n        --mini.clearButtons()\r\n        if owner == \"\" then\r\n            loadoutBtn.color=\"Grey\"\r\n        else\r\n            loadoutBtn.color=owner\r\n        end\r\n        --mini.createButton(loadoutBtn)\r\n        nameBtn.label=mini.getName()..\" - \"..owner\r\n        nameBtn.label=mini.getName()\r\n        nameIn.label=mini.getName()\r\n        pointsBtn.label = \"POINTS - \"..tostring(pointCost)\r\n    end\r\n    local tmpVar= {}\r\n    if mini ~= nil then\r\n        tmpVar= mini.getTable(\"planeLocalStats\")\r\n    end\r\n\r\n    local fuelDisplay=\" \"\r\n    local hpDisplay=\" \"\r\n    if tmpVar.fuel ~= nil then\r\n        if tmpVar.fuel<0 then\r\n            fuelDisplay=\"              FUEL  n/a\"\r\n            fuelDisplay=\"\"\r\n        else\r\n            fuelDisplay=\"              FUEL  \"..tostring(tmpVar.fuel)\r\n        end\r\n    end\r\n    if tmpVar.hp ~= nil then\r\n        hpDisplay=tmpVar.hp\r\n    else\r\n        hpDisplay=\"n/a\"\r\n    end\r\n\r\n\r\n    statsBtn.position[3]=0.15\r\n    statsBtn.label= \"STRUCTURE:  \"..hpDisplay..fuelDisplay..\"\\nAircraft\\n\\n\\n\\n\\n\\n\\n\\n\\nUpgrades\"\r\n    if owner ~= \"\" then\r\n        nameBtn.font_color=owner\r\n    else\r\n        nameBtn.font_color=\"White\"\r\n    end\r\n    if not modifyName then -- THIS IS DISPLAY NAME\r\n        self.createButton(nameBtn)\r\n        changeNameBtn.label=\"CHANGE\\nNAME\"\r\n    else -- THIS IS EDIT NAME\r\n        self.createInput(nameIn)\r\n        changeNameBtn.label=\"SUBMIT\\nNAME\"\r\n    end\r\n    if mini then\r\n        self.createButton(changeNameBtn)\r\n    end\r\n    self.createButton(pointsBtn)\r\n    self.createButton(statsBtn)\r\n    self.createButton(updatePlaneBtn)\r\n    local snapNames={\"•\", \"Upgrade\", \"Upgrade\", \"Pilot\",\"Upgrade\", \"Upgrade\", \"Crew\"}\r\n    for i, snap in ipairs(self.getSnapPoints()) do -- create snap points name\r\n        local snapNameBtn={}\r\n        snapNameBtn.height=0\r\n        snapNameBtn.width=0\r\n        snapNameBtn.label=\"•\"\r\n        --snapNameBtn.label=snapNames[i]\r\n        snapNameBtn.click_function=\"none\"\r\n        local namePos=self.positionToLocal(self.positionToWorld(snap.position))\r\n        --snap.position={snap.position.x,1,snap.position.z}\r\n        --namePos={x=snap.position.x, y=snap.position.y,z=-snap.position.z}\r\n        snapNameBtn.position={-namePos.x/self.getScale().x,1,-namePos.z/self.getScale().z}\r\n        snapNameBtn.function_owner=self\r\n        snapNameBtn.font_size=200\r\n        snapNameBtn.font_color=\"Black\"\r\n        snapNameBtn.rotation={0,180,0}\r\n        snapNameBtn.scale={1/self.getScale().x,1/self.getScale().y,1/self.getScale().z}\r\n        --self.createButton(snapNameBtn)\r\n    end\r\n\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n    self.clearButtons()\r\n    self.createButton(changeMiniBtn)\r\n    resetOwnerBtn.color=owner\r\n    if owner==\"White\" then\r\n        resetOwnerBtn.font_color=\"Black\"\r\n    else\r\n        resetOwnerBtn.font_color=\"White\"\r\n    end\r\n    self.createButton(resetOwnerBtn)\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n\r\nend\r\n\r\nfunction createInventoryZone()\r\n    if inventoryZone == nil then\r\n        inventoryZone=spawnObject({\r\n            type = \"ScriptingTrigger\",\r\n            position          = self.getPosition(),\r\n            rotation          = self.getRotation(),\r\n            scale             = {self.getScale().x,self.getScale().y*50,self.getScale().z},\r\n            sound             = false,\r\n            snap_to_grid      = false,\r\n            callback_function = registerInventoryZone\r\n        })\r\n    end\r\nend\r\n\r\nfunction registerInventoryZone()\r\n    inventoryZone_GUID=inventoryZone.getGUID()\r\n--    print(\"GUID \"..inventoryZone_GUID)\r\n    inventoryZone.jointTo(self, {\r\n    [\"type\"]        = \"Fixed\",\r\n    [\"collision\"]   = false,\r\n    [\"break_force\"]  = 10000.0,\r\n    [\"break_torgue\"] = 10000.0,\r\n    })\r\n    inventoryZone.jointTo()\r\nend\r\n\r\nfunction onDrop(player_color)\r\n    if inventoryZone ~= nil then\r\n        inventoryZone.setPosition(self.getPosition())\r\n        inventoryZone.setRotation(self.getRotation())\r\n    end\r\nend\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\n-- Wht Blk Red Pur Blu Grn Ylw Orn Brw Pnk Tea Gry\r\ncamCodes={White= \"Wht\" , Black= \"Blk\" , Red= \"Red\" , Purple= \"Pur\" , Blue= \"Blu\",\r\n                Green= \"Grn\" ,Yellow= \"Ylw\" , Orange= \"Orn\" , Brown= \"Brw\" , Pink= \"Pnk\" ,\r\n                Teal= \"Tea\" , Grey= \"Gry\"\r\n                }\r\nfunction registerCam()\r\n    if owner ~= \"\" then\r\n        for i, obj in ipairs(getAllObjects()) do\r\n            if obj.getName() == \"Ch\"..camCodes[owner]..\" Camera\" then\r\n                miniCam = obj\r\n                miniCam.setInvisibleTo(Player.getColors())\r\n            end\r\n        end\r\n    else\r\n        return\r\n    end\r\n    if miniCam ~= nil then\r\n        miniCamGUID=miniCam.getGUID()\r\n        miniCam.setInvisibleTo(Player.getColors())\r\n    end\r\n    if miniCam == nil then\r\n        if Player[owner].seated then\r\n            --printToColor(\"NO CAMERA!\", owner, \"Red\")\r\n        end\r\n    else\r\n        --print(\"Registered \"..miniCam.getName())\r\n    end\r\nend\r\n\r\nfunction registerScreen()\r\n    if owner ~= \"\" then\r\n        for i, obj in ipairs(getAllObjects()) do\r\n            if obj.getName() == \"Ch\"..camCodes[owner]..\" ScreenH\" then\r\n                screen = obj\r\n            end\r\n        end\r\n    else\r\n        return\r\n    end\r\n    if screen ~= nil then\r\n        screenGUID=screen.getGUID()\r\n    end\r\n    if screen == nil then\r\n        if Player[owner].seated then\r\n            --printToColor(\"NO SCREEN!\", owner, \"Red\")\r\n        end\r\n    else\r\n        --print(\"Registered \"..screen.getName())\r\n    end\r\n    --miniCam.setName(\"ChWht Camera\")\r\nend\r\n\r\nfunction changeMini(obj, player, alt)\r\n    if player ~= owner then\r\n        printToColor(\"You are not the owner\", player, \"Yellow\")\r\n        return\r\n    end\r\n\r\n    ---\r\n        local selected=Player[player].getSelectedObjects()\r\n        local base=nil\r\n        local baseCount=0\r\n        for i, item in ipairs(selected) do\r\n            if item.getVar(\"whatIam\")==\"AircraftBase\" then base=item baseCount=baseCount+1 end\r\n        end\r\n        if baseCount == 0 then printToColor(\"Must select a base !\", player) return end\r\n        if baseCount > 1 then printToColor(\"Must select only ONE base !\", player) return end\r\n\r\n    ---\r\n\r\n\r\n    if #Player[owner].getSelectedObjects() ~= 1 then\r\n        --printToColor(\"Must select ONLY the base\", owner, \"Red\")\r\n        --return\r\n    end\r\n    mini=Player[owner].getSelectedObjects()[1]\r\n    mini=base\r\n    if mini ~= nil then\r\n\r\n        local tmpVar= mini.getTable(\"planeLocalStats\")\r\n        --print(\"CHAR \"..tmpVar.owner)\r\n        if tmpVar== nil then\r\n            printToColor(\"Only bases can be linked!\", owner, \"Yellow\")\r\n            return\r\n        end\r\n        if tmpVar.owner ~= owner then\r\n            printToColor(\"You dont own the base!\", owner, \"Yellow\")\r\n            return\r\n        end\r\n        tmpVar.characterSheet_GUID=self.getGUID()\r\n        mini.setTable(\"planeLocalStats\", tmpVar)\r\n        mini.setVar(\"characterSheet\", self)\r\n        --mini.setLuaScript(\"\")\r\n        --mini.clearButtons()\r\n    end\r\n\r\n    hideLoadout()\r\n    --mini=Player[owner].getSelectedObjects()[1]\r\n    miniGUID=mini.getGUID()\r\n    loadoutBtn.label=mini.getName()..\"\\n\\n\"..hp..\" - \"..morale\r\n    --mini.createButton(loadoutBtn)\r\n    if miniCamEnabled then\r\n        cameraFollow()\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    owner=player\r\n    miniCam=nil\r\n    screen=nil\r\n    registerCam()\r\n    registerScreen()\r\n    writeMenu()\r\n    --self.setColorTint(owner)\r\nend\r\n\r\nfunction onObjectEnterScriptingZone(zone, enter_object)\r\n    if zone == inventoryZone then\r\n        updatePlane(self, owner, false)\r\n    end\r\nend\r\n\r\nfunction onObjectLeaveScriptingZone(zone, leave_object)\r\n    if zone == inventoryZone then\r\n        updatePlane(self, owner, false)\r\n    end\r\nend\r\n\r\n\r\nfunction updatePlane(obj, player, alt)\r\n    if player ~= owner then\r\n        printToColor(\"You are not the owner\", player, \"Yellow\")\r\n        return\r\n    end\r\n    if owner == \"\" or mini==nil then\r\n        return\r\n    end\r\n\r\n    local descPlane=\"Unknown Plane\"\r\n    local descUpgrades=\"\"\r\n    local plane= mini.getVar(\"plane\")\r\n    if plane== nil then\r\n        printToColor(\"No plane model\", player, \"Red\")\r\n        return\r\n    end\r\n    local prevPlane=\"\"\r\n    local thisIsFirstLine=true\r\n    for line in string.gmatch(mini.getDescription(), \"[^\\n]+\") do\r\n        if thisIsFirstLine then\r\n            prevPlane=line\r\n            thisIsFirstLine=false\r\n            break\r\n        end\r\n    end\r\n    local cards=getInventoryItems()\r\n    pointCost=0\r\n    local faction=mini.getVar(\"faction\")\r\n    for i, card in ipairs(cards) do\r\n        -- Calculate cost\r\n\r\n        -- END calculate cost\r\n        local parsedDescription={}\r\n        for word in string.gmatch(card.getName(), \"[^ ]+\") do\r\n            table.insert(parsedDescription, #parsedDescription+1, word)\r\n        end\r\n        if parsedDescription[#parsedDescription] == \"Datasheet\" then\r\n\r\n\r\n            descPlane=\"\"\r\n            for i=1, #parsedDescription-2 do\r\n                descPlane=descPlane..parsedDescription[i]..\" \"\r\n            end\r\n            descPlane=descPlane..parsedDescription[#parsedDescription-1]\r\n            for k, data in ipairs(Global.getTable(\"AvailablePlanes\")) do\r\n                if data.type..\" Datasheet\" == card.getName() then\r\n                    pointCost = pointCost + data.cost\r\n                end\r\n            end\r\n        end\r\n        if parsedDescription[#parsedDescription] == \"Datacard\" then\r\n\r\n            descUpgrades=descUpgrades..\"\\n\"\r\n            for i=1, #parsedDescription-2 do\r\n                descUpgrades=descUpgrades..parsedDescription[i]..\" \"\r\n            end\r\n            descUpgrades=descUpgrades..parsedDescription[#parsedDescription-1]\r\n            for k, data in ipairs(Global.getTable(\"AvailableUpgrades\")) do\r\n                if data.type..\" Datacard\" == card.getName() and data.faction == faction then\r\n                    pointCost=pointCost+data.cost\r\n                end\r\n            end\r\n            for k, data in ipairs(Global.getTable(\"AvailableGroundDefences\")) do\r\n                if data.type..\" Datacard\" == card.getName() and data.faction == faction then\r\n                    pointCost=pointCost+data.cost\r\n                end\r\n            end\r\n        end\r\n    end\r\n    plane.setDescription(descPlane..descUpgrades)\r\n    mini.setDescription(descPlane..descUpgrades)\r\n\r\n    mini.call(\"getPlaneStats\")\r\n    if prevPlane ~= descPlane then\r\n        mini.call(\"linkPlaneRemote\")\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction resetOwner(obj, player, alt)\r\n    if player ~= \"Black\" then\r\n        --printToColor(\"DM only\", player, \"Red\")\r\n        --return\r\n    end\r\n    owner=\"\"\r\n    showOptions=false\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleMiniCam(obj, player, alt)\r\n    if player ~= owner then\r\n        printToColor(\"You are not the owner\", player, \"Yellow\")\r\n        return\r\n    end\r\n    if mini == nil then\r\n        return\r\n    end\r\n    miniCamEnabled = not miniCamEnabled\r\n    if miniCamEnabled then\r\n        screen.setLock(true)\r\n        screen.setPosition(self.positionToWorld({0,0,-0.75}))\r\n        screen.setScale{1.5,1,1.5}\r\n        cameraFollow()\r\n    else\r\n        screen.setLock(true)\r\n        screen.setPosition({-20,0,0})\r\n        cameraUnfollow()\r\n    end\r\nend\r\n\r\nfunction cameraFollow()\r\n    miniCam.jointTo()\r\n    miniCamBtn.label=\"Mini Cam - ON\"\r\n    miniCam.setPosition(mini.positionToWorld({0,1.4,0.5}))\r\n    miniCam.setRotation(mini.getRotation())\r\n    miniCam.jointTo(mini, {\r\n        [\"type\"]        = \"Fixed\",\r\n        [\"collision\"]   = false,\r\n        [\"break_force\"]  = 10000.0,\r\n        [\"break_torgue\"] = 10000.0,\r\n        })\r\n        miniCam.setLock(false)\r\n        writeMenu()\r\nend\r\n\r\nfunction cameraUnfollow()\r\n    miniCam.setLock(true)\r\n    miniCamBtn.label=\"Mini Cam - OFF\"\r\n    miniCam.jointTo()\r\n    miniCam.setPosition({0,-13,0})\r\n    miniCam.setRotation({90,90,0})\r\n    writeMenu()\r\nend\r\n\r\n\r\nfunction onObjectPickUp(player, picked)\r\n    if mini == nil then\r\n        return\r\n    end\r\n    if player ~= owner and picked == mini then\r\n        --printToColor(\"You are not the owner\", player, \"Yellow\")\r\n        mini.drop()\r\n        return\r\n    end\r\n    if player == owner and picked == mini then\r\n        loadoutUI= not loadoutUI\r\n        if loadoutUI then\r\n            displayLoadoutBtn()\r\n        else\r\n            hideLoadoutBtn()\r\n        end\r\n    end\r\n    if player == owner and picked ~= mini then\r\n        loadoutUI=false\r\n        hideLoadoutBtn()\r\n    end\r\nend\r\n\r\nfunction xxx(obj, player, alt)\r\n    if player ~= owner then\r\n        printToColor(\"You are not the owner\", player, \"Yellow\")\r\n        return\r\n    end\r\n    if owner == \"\" or mini==nil then\r\n        return\r\n    end\r\n    Player[owner].lookAt({\r\n    position = mini.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = mini.getRotation().y+180,\r\n    distance = 11.5,\r\n    })\r\n    --mini.UI.setXml(\"\")\r\n    loadoutUI=false\r\nend\r\n\r\nfunction changeName()\r\n    if not modifyName then -- switch to input\r\n        modifyName=true\r\n\r\n    else -- switch to display\r\n        if mini == nil then\r\n\r\n        else\r\n            if self.getInputs()[1].value ~= \"\" and self.getInputs()[1].value ~= nil then\r\n                mini.setName(self.getInputs()[1].value)\r\n            end\r\n        end\r\n        modifyName=false\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction displayLoadoutBtn()\r\n    --mini.clearButtons()\r\n    --displayLoadout()\r\n    --mini.createButton(loadoutBtn)\r\nend\r\n\r\nfunction hideLoadoutBtn()\r\n    --mini.clearButtons()\r\n    --hideLoadout()\r\nend\r\n\r\nfunction displayLoadout(obj, player, alt)\r\n    if true then return end\r\n    --if alt== false then return end\r\n    if player ~= owner then\r\n        --print(\"Not owner (display)\")\r\n        return\r\n    end\r\n    if alt== false then -- display UI\r\n        loadoutUI= not loadoutUI\r\n        if loadoutUI then\r\n            Wait.frames(displayLoadout2, 2)\r\n        else\r\n            hideLoadout()\r\n        end\r\n    else -- going to character sheet\r\n        Player[owner].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 90,\r\n        yaw      = self.getRotation().y,\r\n        distance = 15,\r\n        })\r\n        mini.UI.setXml(\"\")\r\n    end\r\n    --if true then return end\r\n    --Global.UI.show(\"loadout\"..owner)\r\n\r\nend\r\n\r\nfunction displayLoadout2()\r\n    if true then return end\r\n    if typeDisplay==1 then\r\n        Player[owner].lookAt({\r\n        position = mini.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = mini.getRotation().y,\r\n        distance = 11.5,\r\n        })\r\n        local inventoryItems=orderByLocalPos(getInventoryItems())\r\n        createAssestImages(inventoryItems)\r\n        createUI()\r\n    end\r\n    if typeDisplay==2 then\r\n        Player[owner].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 90,\r\n        yaw      = self.getRotation().y,\r\n        distance = 15,\r\n        })\r\n    end\r\nend\r\n\r\nfunction createUI()\r\n    if true then return end\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"400 -100 -300\" rotation=\"-15 0 0\" scale=\"0.06 0.08 0.1\" offsetXY=\"0 0\" color=\"Gray\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB='<TableLayout autoCalculateHeight=\"true\" cellSpacing=\"20\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n\r\n-- UI PG\r\n--[[\r\n    stringXml=stringXml..panelB2\r\n    font_Size= \"20\"\r\n    text_Value=mini.getName()..\"\\n\"..hp..\" - \"..morale\r\n    --text_Value=\"CIAO\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..panelE\r\n]]\r\n\r\n\r\n\r\n-- UI LOADOUT\r\n\r\n    visibility=owner\r\n    panelB='<Panel position=\"400 -100 -300\" rotation=\"-15 0 0\" scale=\"0.06 0.08 0.1\" offsetXY=\"0 0\" color=\"Gray\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB\r\n\r\n    preferred_Height=\"40\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"400\"\r\n    text_Value=\"L O A D O U T\"\r\n    text_Value=mini.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"B a c k p a c k\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Backpack\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isBackpackPresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"backpack\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"BackPack\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    mini.UI.setXml(stringXml)\r\nend\r\n\r\nfunction goToMini(obj, player, alt)\r\n    if player ~= owner then\r\n        printToColor(\"You are not the owner\", player, \"Yellow\")\r\n        return\r\n    end\r\n    if owner == \"\" or mini==nil then\r\n        return\r\n    end\r\n    Player[owner].lookAt({\r\n    position = mini.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = mini.getRotation().y+180,\r\n    distance = 11.5,\r\n    })\r\n    --mini.UI.setXml(\"\")\r\n    loadoutUI=false\r\nend\r\n\r\nfunction hideLoadout()\r\n    if mini == nil then\r\n        return\r\n    end\r\n    if typeDisplay == 2 then\r\n        goToMini()\r\n    end\r\n    Global.UI.hide(\"loadout\"..owner)\r\n    mini.UI.setXml(\"\")\r\nend\r\n\r\nfunction getInventoryItems()\r\n    local boxScale={self.getScale().x,self.getScale().y+1,self.getScale().z}\r\n    local hits= Physics.cast({\r\n        origin       = self.getPosition(),\r\n        direction    = {0,1,0},\r\n        type         = 3,\r\n        size         = boxScale,\r\n        debug= false\r\n    })\r\n    local items={}\r\n    for i, hit in ipairs(hits) do\r\n        local obj= hit.hit_object\r\n        if obj.getPosition().y > self.getPosition().y then\r\n            local lastWord=\"\"\r\n            local parsedDescription={}\r\n            for word in string.gmatch(obj.getName(), \"[^ ]+\") do\r\n                table.insert(parsedDescription, #parsedDescription+1, word)\r\n            end\r\n            if parsedDescription[#parsedDescription]==\"Datasheet\" or parsedDescription[#parsedDescription]==\"Datacard\" then\r\n                table.insert(items, #items+1, obj)\r\n            end\r\n        end\r\n    end\r\n    return items\r\nend\r\n\r\nfunction orderByLocalPos(myTable)\r\n    local sort_f= function(a,b) return self.positionToLocal(a.getPosition()).z > self.positionToLocal(b.getPosition()).z end\r\n    table.sort(myTable, sort_f)\r\n    return myTable\r\nend\r\n\r\nfunction hideAllImg()\r\n    Global.UI.setAttribute(\"knife\"..owner,\"offsetXY\",\"0 -2000 \")\r\n    Global.UI.setAttribute(\"item1\"..owner,\"offsetXY\",\"0 -2000 \")\r\n    Global.UI.setAttribute(\"item2\"..owner,\"offsetXY\",\"0 -2000 \")\r\n    Global.UI.setAttribute(\"item3\"..owner,\"offsetXY\",\"0 -2000 \")\r\n    Global.UI.setAttribute(\"item4\"..owner,\"offsetXY\",\"0 -2000 \")\r\n    --[[\r\n    Global.UI.setAttribute(\"knife\"..owner,\"width\",\"1\")\r\n    Global.UI.setAttribute(\"item1\"..owner,\"width\",\"1\")\r\n    Global.UI.setAttribute(\"item2\"..owner,\"width\",\"1\")\r\n    Global.UI.setAttribute(\"item3\"..owner,\"width\",\"1\")\r\n    Global.UI.setAttribute(\"item4\"..owner,\"width\",\"1\")\r\n\r\n    Global.UI.hide(\"backpack\"..owner)\r\n    Global.UI.hide(\"knife\"..owner)\r\n    Global.UI.hide(\"item1\"..owner)\r\n    Global.UI.hide(\"item2\"..owner)\r\n    Global.UI.hide(\"item3\"..owner)\r\n    Global.UI.hide(\"item4\"..owner)\r\n    ]]\r\nend\r\n\r\nfunction showImg(img)\r\n    --Global.UI.show(img)\r\n    --Global.UI.setAttribute(img,\"width\",\"1720\")\r\n\r\nend\r\n\r\nfunction createAssestImages(itemsTable)\r\n    localAssets ={}\r\n    hideAllImg()\r\n    isBackpackPresent=false\r\n    isKnifePresent=false\r\n    itemsNumber=0\r\n    itemsPos=0\r\n    itemsHeight={}\r\n    duplicatedAssets={}\r\n    itemOptions={}\r\n    for i, item in ipairs(itemsTable) do\r\n        if item.getVar(\"itemType\") == \"Backpack\" then\r\n            --showImg(\"backpack\"..owner)\r\n            --Global.UI.setAttribute(\"item\"..j..owner,\"offsetXY\",\"0 450\")\r\n            itemOptions[i]=\"White\"\r\n            if item.getVar(\"hasEnergy\")== true and item.getVar(\"energy\") < item.getVar(\"maxEnergy\")  then\r\n                itemOptions[i]=\"Yellow\"\r\n            end\r\n            if item.getVar(\"hasAmmo\")== true and item.getVar(\"ammo\") <= 0 then\r\n                itemOptions[i]=\"Red\"\r\n            end\r\n            if item.getVar(\"hasSetup\")== true and item.getVar(\"setup\") == false then\r\n                itemOptions[i]= \"Red\"\r\n            end\r\n            local thisAsset={name = \"BackPack\"..owner, url  = item.getCustomObject().image}\r\n            table.insert(localAssets, #localAssets+1, thisAsset)\r\n            isBackpackPresent=true\r\n        end\r\n        if item.getVar(\"itemType\") == \"Knife\" then\r\n            --showImg(\"knife\"..owner)\r\n            --Global.UI.setAttribute(\"item\"..j..owner,\"offsetXY\",\"0 300\")\r\n            itemOptions[i]=\"White\"\r\n            if item.getVar(\"hasEnergy\")== true and item.getVar(\"energy\") < item.getVar(\"maxEnergy\")  then\r\n                itemOptions[i]=\"Yellow\"\r\n            end\r\n            if item.getVar(\"hasAmmo\")== true and item.getVar(\"ammo\") <= 0 then\r\n                itemOptions[i]=\"Red\"\r\n            end\r\n            if item.getVar(\"hasSetup\")== true and item.getVar(\"setup\") == false then\r\n                itemOptions[i]= \"Red\"\r\n            end\r\n            local thisAsset={name = \"Knife\"..owner, url  = item.getCustomObject().image}\r\n            table.insert(localAssets, #localAssets+1, thisAsset)\r\n            isKnifePresent=true\r\n        end\r\n        if item.getVar(\"itemType\") == \"Weapon\" or item.getVar(\"itemType\") == \"Tool\" then\r\n            itemsNumber=itemsNumber+1\r\n            itemsPos=i\r\n            itemsHeight[itemsNumber]=item.GetVar(\"slotSize\")\r\n            local actualSetup=false\r\n            if item.getVar(\"actualSetup\") == true then\r\n                actualSetup= true\r\n            else\r\n                actualSetup= false\r\n            end\r\n            itemOptions[itemsPos]=\"White\"\r\n            if item.getVar(\"hasEnergy\")== true and item.getVar(\"energy\") < item.getVar(\"maxEnergy\")  then\r\n                itemOptions[itemsPos]=\"Yellow\"\r\n            end\r\n            if item.getVar(\"hasAmmo\")== true and item.getVar(\"ammo\") <= 0 then\r\n                itemOptions[itemsPos]=\"Red\"\r\n            end\r\n            if item.getVar(\"hasSetup\")== true and item.getVar(\"setup\") == false then\r\n                itemOptions[itemsPos]= \"Red\"\r\n            end\r\n\r\n            local thisAsset={name = \"Item\"..itemsNumber..owner, url  = item.getCustomObject().image}\r\n            table.insert(localAssets, #localAssets+1, thisAsset)\r\n            for j, asset in pairs(localAssets) do -- setting duplicates\r\n                if asset.url == item.getCustomObject().image then\r\n                    localAssets[i].name=asset.name\r\n                end\r\n            end\r\n        end\r\n    end\r\n    local globalAssets=Global.UI.getCustomAssets()\r\n    for i, assetG in ipairs(globalAssets) do\r\n        for j, assetL in ipairs(localAssets) do\r\n            if assetG.name == assetL.name then\r\n                assetG.url = assetL.url\r\n            end\r\n        end\r\n    end\r\n    mini.UI.setCustomAssets(localAssets)\r\n    --Global.UI.setCustomAssets(globalAssets)\r\nend\r\n\r\nfunction createSnapPoints()\r\n    local snapY=0.2\r\n    self.setSnapPoints({\r\n    { --Aircraft\r\n        position = {0,snapY,0.14},   -- 0.1\r\n        rotation = {0,180,0},\r\n        rotation_snap = true\r\n    },\r\n    {\r\n        position = {-0.25,snapY,-0.14},   --  -0.15\r\n        rotation = {0,180,0},\r\n        rotation_snap = true\r\n    },\r\n    {\r\n        position = {0,snapY,-0.14},\r\n        rotation = {0,180,0},\r\n        rotation_snap = true\r\n    },\r\n    {\r\n        position = {0.25,snapY,-0.14},\r\n        rotation = {0,180,0},\r\n        rotation_snap = true\r\n    },\r\n    {\r\n        position = {-0.25,snapY,-0.34},   --   -0.3\r\n        rotation = {0,180,0},\r\n        rotation_snap = true\r\n    },\r\n    {\r\n        position = {0,snapY,-0.34},\r\n        rotation = {0,180,0},\r\n        rotation_snap = true\r\n    },\r\n    {\r\n        position = {0.25,snapY,-0.34},\r\n        rotation = {0,180,0},\r\n        rotation_snap = true\r\n    },\r\n})\r\nend\r\n\r\nfunction resetSheet()\r\n    mini=nil\r\n    miniGUID=\"\"\r\n    owner=\"\"\r\n    miniCam=nil\r\n    miniCamGUID=\"\"\r\n    screen=nil\r\n    screenGUID=\"\"\r\n    hp=maxHp\r\n    morale=maxMorale\r\n    self.script_state=\"\"\r\n    onLoad(\"\")\r\nend\r\n\r\nfunction onDestroy()\r\n    if inventoryZone then\r\n        inventoryZone.destroy()\r\n    end\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svhp\":5,\"svinventoryZone_GUID\":\"038935\",\"svmaxHp\":5,\"svmaxMorale\":2,\"svminiCamGUID\":\"\",\"svminiGUID\":\"\",\"svmorale\":2,\"svowner\":\"\",\"svpointCost\":0,\"svscreenGUID\":\"\"}",
      "GUID": "48ad0a",
      "AttachedSnapPoints": [
        {
          "Position": {
            "x": 0.0,
            "y": 0.2,
            "z": 0.14
          },
          "Rotation": {
            "x": 0.0,
            "y": 180.0,
            "z": 0.0
          }
        },
        {
          "Position": {
            "x": -0.25,
            "y": 0.2,
            "z": -0.14
          },
          "Rotation": {
            "x": 0.0,
            "y": 180.0,
            "z": 0.0
          }
        },
        {
          "Position": {
            "x": 0.0,
            "y": 0.2,
            "z": -0.14
          },
          "Rotation": {
            "x": 0.0,
            "y": 180.0,
            "z": 0.0
          }
        },
        {
          "Position": {
            "x": 0.25,
            "y": 0.2,
            "z": -0.14
          },
          "Rotation": {
            "x": 0.0,
            "y": 180.0,
            "z": 0.0
          }
        },
        {
          "Position": {
            "x": -0.25,
            "y": 0.2,
            "z": -0.34
          },
          "Rotation": {
            "x": 0.0,
            "y": 180.0,
            "z": 0.0
          }
        },
        {
          "Position": {
            "x": 0.0,
            "y": 0.2,
            "z": -0.34
          },
          "Rotation": {
            "x": 0.0,
            "y": 180.0,
            "z": 0.0
          }
        },
        {
          "Position": {
            "x": 0.25,
            "y": 0.2,
            "z": -0.34
          },
          "Rotation": {
            "x": 0.0,
            "y": 180.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -20.0,
        "rotX": 0.00369895762,
        "rotY": 180.6243,
        "rotZ": 359.65036,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Blank TILE",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.2,
          "Stackable": false,
          "Stretch": false
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "93ba66"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 4.29812928E-07,
        "posY": 0.8999994,
        "posZ": 62.35383,
        "rotX": 1.61392347E-06,
        "rotY": 359.991547,
        "rotZ": -5.03498256E-07,
        "scaleX": 6.01513433,
        "scaleY": 1.0,
        "scaleZ": 6.01513433
      },
      "Nickname": "Movement Diagrams",
      "Description": "1.  Level Flight\n2.  Swoop\n3.  Turn\n4.  Snap Turn\n5.  Stall Turn\n6.  Stoop\n7.  Bank\n8.  Wing Over",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734108269481848/D7729E0A9B92D6E9B2B2F9CA9EAC0004F1176328/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734108269481848/D7729E0A9B92D6E9B2B2F9CA9EAC0004F1176328/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4e916f"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 4.5,
        "posY": 0.899999738,
        "posZ": 49.3634453,
        "rotX": 1.62466063E-06,
        "rotY": 0.0118545508,
        "rotZ": -4.85463261E-07,
        "scaleX": 6.01513433,
        "scaleY": 1.0,
        "scaleZ": 6.01513433
      },
      "Nickname": "Quick Reference 1/2",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496173267/07B673B6E2B4E31D92A8CE572A17AD6C2909D284/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496173267/07B673B6E2B4E31D92A8CE572A17AD6C2909D284/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d2f843"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -4.5,
        "posY": 0.8999998,
        "posZ": 49.3634453,
        "rotX": 1.60235618E-06,
        "rotY": 359.991241,
        "rotZ": -5.026529E-07,
        "scaleX": 6.01513433,
        "scaleY": 1.0,
        "scaleZ": 6.01513433
      },
      "Nickname": "Quick Reference 2/2",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254189344/D406C27EE14E106934C1D58B641AC3BDCB47CBA6/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254189344/D406C27EE14E106934C1D58B641AC3BDCB47CBA6/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e984d3"
    },
    {
      "Name": "PlayerPawn",
      "Transform": {
        "posX": -56.5,
        "posY": -5.0,
        "posZ": 3.50701157E-09,
        "rotX": 359.919769,
        "rotY": 269.991577,
        "rotZ": 0.0170058627,
        "scaleX": 1.5,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "Mission Generator",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.154411763,
        "g": 0.154411763,
        "b": 0.154411763
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 8,
      "XmlUI": "",
      "LuaScript": "function onLoad()\n  self.interactable=false\n  self.setPosition({-56.5,-5,0})\n  self.clearButtons()\n  genButten={\n    index=1, label=\"Generate Mission\", click_function=\"missionGen\", function_owner=self,\n    position={0,1.3,-0.5}, rotation={0,0,0}, height=800, width=5900,\n    font_size=500, color={0,0,0}, font_color={1,1,1},tooltip = \"Left Click for no Sudden Death\\nRight Click for Sudden Death\"\n  }\n  self.createButton(genButten)\nend\n\nfunction missionGen(obj, player_clicker_color, alt_click)\n  self.clearButtons()\n  self.createButton(genButten)\n  math.randomseed(tonumber(tostring(os.time()):reverse():sub(1,7))+tonumber(tostring(os.clock()):reverse():sub(1,7)))\n  rng={}\n  rng[1]=math.random(6)\n  rng[2]=math.random(12)\n  rng[3]=math.random(12)\n  rng[4]=math.random(6)\n  rng[5]=math.random(6)\n  rng1lookup={\"Spearhead Assault\",\"Dawn of War\",\"Search and Destroy\",\"Hammer and Anvil\",\"Front-Line Assault\",\"Vanguard Strike\"}\n  rng2lookup={\"Field of Glory\",\"Invasion\",\"War of Attrition\",\"The Prize\",\"Drawn and Quartered\",\"Burn and Pillage\",\"Show of Force\",\"Take and Hold\",\"Glory Seeker\",\"Starfall\",\"Kingslayer\",\"Supply Cache\"}\n  rng3lookup={\"Dead of Night\",\"Witch Hunter\",\"Orbital Debris\",\"Acid Rain\",\"Surprise Attack\",\"Slay the Warlords\",\"Grudge Match\",\"Battle Frenzy\",\"Set Piece Battle\",\"Many Paths to Victory\",\"Double or Nothing\",\"Strategic Escalation\"}\n  rng4lookup={\"Ambush\",\"Dug In\",\"The Blood of Martyrs\",\"Inspired Tactician\",\"Brilliant Strategist\",\"Tactical Reserves\"}\n  rng5lookup={\"Kill Order\",\"Blunt\",\"Endure\",\"Vital Ground\",\"Vendetta\",\"Hold the Line\"}\n\n  if alt_click == false then\n    Butten0={\n      index=1, label=\"Mission ID# \"..string.format(\"%x\",rng[1])..string.format(\"%x\",rng[2])..string.format(\"%x\",rng[3])..string.format(\"%x\",rng[4]), click_function=\"none\", function_owner=self,\n      position={0,1.3,1}, rotation={0,0,0}, height=400, width=5900,\n      font_size=250, color={0,0,0}, font_color={1,1,1}\n    }\n  else\n    Butten0={\n      index=1, label=\"Mission ID# \"..string.format(\"%x\",rng[1])..string.format(\"%x\",rng[2])..string.format(\"%x\",rng[3])..string.format(\"%x\",rng[4])..string.format(\"%x\",rng[5]), click_function=\"none\", function_owner=self,\n      position={0,1.3,1}, rotation={0,0,0}, height=400, width=5900,\n      font_size=250, color={0,0,0}, font_color={1,1,1}\n    }\n  end\n      Butten1={\n        index=1, label=\"Deployment Zone: #\"..rng[1]..\" \"..rng1lookup[rng[1]], click_function=\"none\", function_owner=self,\n        position={0,1.3,2}, rotation={0,0,0}, height=400, width=5900,\n        font_size=250, color={0,0,0}, font_color={1,1,1}\n      }\n  Butten2={\n    index=2, label=\"Objective: #\"..rng[2]..\" \"..rng2lookup[rng[2]], click_function=\"none\", function_owner=self,\n    position={0,1.3,3}, rotation={0,0,0}, height=400, width=5900,\n    font_size=250, color={0,0,0}, font_color={1,1,1}\n  }\n  Butten3={\n    index=3, label=\"Twist: #\"..rng[3]..\" \"..rng3lookup[rng[3]], click_function=\"none\", function_owner=self,\n    position={0,1.3,4}, rotation={0,0,0}, height=400, width=5900,\n    font_size=250, color={0,0,0}, font_color={1,1,1}\n  }\n  Butten4={\n    index=4, label=\"Ruse: #\"..rng[4]..\" \"..rng4lookup[rng[4]], click_function=\"none\", function_owner=self,\n    position={0,1.3,5}, rotation={0,0,0}, height=400, width=5900,\n    font_size=250, color={0,0,0}, font_color={1,1,1}\n  }\n  Butten5={\n    index=5, label=\"Sudden Death: #\"..rng[5]..\" \"..rng5lookup[rng[5]], click_function=\"none\", function_owner=self,\n    position={0,1.3,6}, rotation={0,0,0}, height=400, width=5900,\n    font_size=250, color={0,0,0}, font_color={1,1,1}\n  }\n\n  self.createButton(Butten0)\n  self.createButton(Butten1)\n  self.createButton(Butten2)\n  self.createButton(Butten3)\n  self.createButton(Butten4)\n\n  if alt_click == true then self.createButton(Butten5) end\nend\n\nfunction none()\nend",
      "LuaScriptState": "",
      "GUID": "b67773"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.50016,
        "posY": -3.0,
        "posZ": -78.98323,
        "rotX": -1.70148251E-05,
        "rotY": 89.9967957,
        "rotZ": 3.731842E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "ITC 1: Seize Ground",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7058823,
        "g": 0.366520882,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"183e8b\":{\"lock\":true,\"pos\":{\"x\":8,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"1e7bff\":{\"lock\":true,\"pos\":{\"x\":18,\"y\":1,\"z\":12},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"232f77\":{\"lock\":true,\"pos\":{\"x\":-8,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":269.9954,\"z\":0}},\"a0814d\":{\"lock\":true,\"pos\":{\"x\":18,\"y\":1,\"z\":-12},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"d4d565\":{\"lock\":true,\"pos\":{\"x\":-18,\"y\":1,\"z\":12},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"e094d1\":{\"lock\":true,\"pos\":{\"x\":-18,\"y\":1,\"z\":-12},\"rot\":{\"x\":0,\"y\":270,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 8.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "183e8b",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 8.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "74338a"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "1e7bff",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "28a2a2"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -8.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 269.995361,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314983/B5C262252AE58FBBCBDF330157C19BD8937B2452/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "232f77",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -8.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 269.995361,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=6\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "aa2cd7"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "a0814d",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "f0652b"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "d4d565",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "cdf9c4"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314661/D52D33F1840F8DB3A19344F7E6A8F8A9110D5B3E/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "e094d1",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=5\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "6376b7"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 8.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "183e8b",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 8.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "74338a"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "1e7bff",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "28a2a2"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -8.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 269.995361,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314983/B5C262252AE58FBBCBDF330157C19BD8937B2452/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "232f77",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -8.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 269.995361,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=6\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "aa2cd7"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "a0814d",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "f0652b"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "d4d565",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "cdf9c4"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314661/D52D33F1840F8DB3A19344F7E6A8F8A9110D5B3E/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "e094d1",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=5\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "6376b7"
            }
          }
        }
      ],
      "GUID": "0ec042"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.50016,
        "posY": -3.0,
        "posZ": -82.98324,
        "rotX": 1.74813431E-05,
        "rotY": 89.99319,
        "rotZ": -2.44760176E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "ITC 2: Cut to the Heart",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7058823,
        "g": 0.366520882,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"a24708\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"f5b131\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":-24},\"rot\":{\"x\":0,\"y\":270.0101,\"z\":0}},\"f8ef6a\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":24},\"rot\":{\"x\":0,\"y\":270.0091,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "a24708",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "094c99"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0101,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "f5b131",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": -24.0,
                "rotX": 0.0,
                "rotY": 270.0101,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "a488cb"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 24.0,
            "rotX": 0.0,
            "rotY": 270.0091,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "f8ef6a",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 24.0,
                "rotX": 0.0,
                "rotY": 270.0091,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "86adf0"
            }
          }
        }
      ],
      "GUID": "f68f0e"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.50016,
        "posY": -3.0,
        "posZ": -86.98324,
        "rotX": 6.83719327E-06,
        "rotY": 89.9967346,
        "rotZ": -1.82164076E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "ITC 3: Nexus Control",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7058823,
        "g": 0.366520882,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"00b961\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":12},\"rot\":{\"x\":0,\"y\":270.0091,\"z\":0}},\"23df58\":{\"lock\":true,\"pos\":{\"x\":18,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"749b1e\":{\"lock\":true,\"pos\":{\"x\":-18,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0109,\"z\":0}},\"d76668\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":-12},\"rot\":{\"x\":0,\"y\":270.0101,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0091,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "00b961",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0091,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "86adf0"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "23df58",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "094c99"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0109,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "749b1e",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0109,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "3f75bd"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0101,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "d76668",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0101,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "a488cb"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0091,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "00b961",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0091,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "86adf0"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "23df58",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "094c99"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0109,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "749b1e",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0109,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "3f75bd"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0101,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "d76668",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0101,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "a488cb"
            }
          }
        }
      ],
      "GUID": "a41f35"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.50016,
        "posY": -3.0,
        "posZ": -90.983284,
        "rotX": -1.692995E-05,
        "rotY": 89.99052,
        "rotZ": -1.83566681E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "ITC 4: What’s Yours Is Mine",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7058823,
        "g": 0.366520882,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"1dc718\":{\"lock\":true,\"pos\":{\"x\":4,\"y\":1,\"z\":24},\"rot\":{\"x\":0,\"y\":270.0091,\"z\":0}},\"47732d\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"76f31c\":{\"lock\":true,\"pos\":{\"x\":4,\"y\":1,\"z\":-24},\"rot\":{\"x\":0,\"y\":270.0101,\"z\":0}},\"ec011a\":{\"lock\":true,\"pos\":{\"x\":-4,\"y\":1,\"z\":24},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"f7a20c\":{\"lock\":true,\"pos\":{\"x\":-4,\"y\":1,\"z\":-24},\"rot\":{\"x\":0,\"y\":270.0109,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 4.0,
            "posY": 1.0,
            "posZ": 24.0,
            "rotX": 0.0,
            "rotY": 270.0091,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "1dc718",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 4.0,
                "posY": 1.0,
                "posZ": 24.0,
                "rotX": 0.0,
                "rotY": 270.0091,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "86adf0"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314661/D52D33F1840F8DB3A19344F7E6A8F8A9110D5B3E/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "47732d",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=5\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "7dd9e7"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 4.0,
            "posY": 1.0,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0101,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "76f31c",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 4.0,
                "posY": 1.0,
                "posZ": -24.0,
                "rotX": 0.0,
                "rotY": 270.0101,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "a488cb"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -4.0,
            "posY": 1.0,
            "posZ": 24.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "ec011a",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -4.0,
                "posY": 1.0,
                "posZ": 24.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "094c99"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -4.0,
            "posY": 1.0,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0109,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "f7a20c",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -4.0,
                "posY": 1.0,
                "posZ": -24.0,
                "rotX": 0.0,
                "rotY": 270.0109,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "3f75bd"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 4.0,
            "posY": 1.0,
            "posZ": 24.0,
            "rotX": 0.0,
            "rotY": 270.0091,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "1dc718",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 4.0,
                "posY": 1.0,
                "posZ": 24.0,
                "rotX": 0.0,
                "rotY": 270.0091,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "86adf0"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314661/D52D33F1840F8DB3A19344F7E6A8F8A9110D5B3E/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "47732d",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=5\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "7dd9e7"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 4.0,
            "posY": 1.0,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0101,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "76f31c",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 4.0,
                "posY": 1.0,
                "posZ": -24.0,
                "rotX": 0.0,
                "rotY": 270.0101,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "a488cb"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -4.0,
            "posY": 1.0,
            "posZ": 24.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "ec011a",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -4.0,
                "posY": 1.0,
                "posZ": 24.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "094c99"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -4.0,
            "posY": 1.0,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0109,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "f7a20c",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -4.0,
                "posY": 1.0,
                "posZ": -24.0,
                "rotX": 0.0,
                "rotY": 270.0109,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "3f75bd"
            }
          }
        }
      ],
      "GUID": "adcb48"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.500084,
        "posY": -3.0,
        "posZ": -82.98325,
        "rotX": 2.58327273E-05,
        "rotY": 89.98533,
        "rotZ": 1.3753478E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "ITC 5: Precious Cargo",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7058823,
        "g": 0.366520882,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"325d54\":{\"lock\":true,\"pos\":{\"x\":18,\"y\":1,\"z\":12},\"rot\":{\"x\":0,\"y\":270.0091,\"z\":0}},\"9b3593\":{\"lock\":true,\"pos\":{\"x\":18,\"y\":1,\"z\":-12},\"rot\":{\"x\":0,\"y\":270.0101,\"z\":0}},\"eced11\":{\"lock\":true,\"pos\":{\"x\":-18,\"y\":1,\"z\":12},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"f45313\":{\"lock\":true,\"pos\":{\"x\":-18,\"y\":1,\"z\":-12},\"rot\":{\"x\":0,\"y\":270.0109,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0091,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "325d54",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0091,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend",
              "LuaScriptState": "",
              "GUID": "86adf0"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 18.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0101,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "9b3593",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 18.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0101,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "a488cb"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "eced11",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": 12.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "094c99"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -18.0,
            "posY": 1.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 270.0109,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "f45313",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -18.0,
                "posY": 1.0,
                "posZ": -12.0,
                "rotX": 0.0,
                "rotY": 270.0109,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "3f75bd"
            }
          }
        }
      ],
      "GUID": "e3f247"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.50016,
        "posY": -3.0,
        "posZ": -86.98324,
        "rotX": 4.84082266E-05,
        "rotY": 89.9967041,
        "rotZ": 2.33522387E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "ITC 6: Crucible of Champions",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.7058823,
        "g": 0.366520882,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"0b6945\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"621048\":{\"lock\":true,\"pos\":{\"x\":24,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0094,\"z\":0}},\"743021\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":-18},\"rot\":{\"x\":0,\"y\":270.0101,\"z\":0}},\"9ccb64\":{\"lock\":true,\"pos\":{\"x\":-24,\"y\":1,\"z\":0},\"rot\":{\"x\":0,\"y\":270.0109,\"z\":0}},\"efa3f2\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":1,\"z\":18},\"rot\":{\"x\":0,\"y\":270.0091,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314661/D52D33F1840F8DB3A19344F7E6A8F8A9110D5B3E/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "0b6945",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=5\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "7dd9e7"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 24.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0094,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313874/ECF016C27A2471C16013396BB4D97893DE4F5B4B/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "621048",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 24.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0094,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=3\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "094c99"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 270.0101,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940313470/15585C097BA4309CB2981F273CAC56E3AF0F7F7D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "743021",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": -18.0,
                "rotX": 0.0,
                "rotY": 270.0101,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=2\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "a488cb"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -24.0,
            "posY": 1.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 270.0109,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940314265/CB39DB70E8C1BA0506D139BBFFE08E9D593FF1C2/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "function onLoad()\r\n    self.clearButtons()\r\nend",
          "LuaScriptState": "",
          "GUID": "9ccb64",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": -24.0,
                "posY": 1.0,
                "posZ": 0.0,
                "rotX": 0.0,
                "rotY": 270.0109,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=4\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "3f75bd"
            }
          }
        },
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.0,
            "posY": 1.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 270.0091,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310430/FCC68A22CEA5301DB1B24A1C96181B82416193DB/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2439138553940310637/858AB58AD64C775A13B7FB16B4246756A858D603/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.25,
              "Stackable": false,
              "Stretch": false
            }
          },
          "XmlUI": "",
          "LuaScript": "\r\ntitle={\r\n    index=1, label=\"1\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=350, width=350,\r\n    font_size=500, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --self.createButton(title)\r\nend\r\n\r\n\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "GUID": "efa3f2",
          "States": {
            "2": {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 0.0,
                "posY": 1.0,
                "posZ": 18.0,
                "rotX": 0.0,
                "rotY": 270.0091,
                "rotZ": 0.0,
                "scaleX": 1.2,
                "scaleY": 1.2,
                "scaleZ": 1.2
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": true,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311994734165202/2AB29B919B23025575BE7FE1265B4923C043C4F0/",
                "DiffuseURL": "",
                "NormalURL": "",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/930436309163292903/DE623BD66F73B5BAEA303E463D9ECB77B0FB1687/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "title={\r\n    index=1, label=\"1\", click_function=\"backToToken\", function_owner=self,\r\n    position={0,0.3,0}, rotation={0,0,0}, height=400, width=400,\r\n    font_size=500, color={1,1,1}, font_color={0,0,0}\r\n}\r\n\r\nnumber=1\r\n\r\nfunction onLoad()\r\n    self.clearButtons()\r\n    --local number=string.sub(self.getName(), 1, 1)\r\n    title.label=number\r\n    self.createButton(title)\r\nend\r\n\r\nfunction backToToken()\r\n    self.setState(1)\r\nend\r\n\r\nfunction none()\r\nend\r\n",
              "LuaScriptState": "",
              "GUID": "86adf0"
            }
          }
        }
      ],
      "GUID": "49bc0d"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -2.0,
        "posY": 0.99934715,
        "posZ": -27.0,
        "rotX": 359.983124,
        "rotY": -3.06866641E-05,
        "rotZ": 359.92,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Black",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249978542,
        "g": 0.249978542,
        "b": 0.249978542
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -32.9640923,
            "posY": 3.43630242,
            "posZ": -27.1130848,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.249999881,
            "g": 0.249999881,
            "b": 0.249999881
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2aa13f",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "0ddfb6"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 0.0,
        "posY": 0.913001657,
        "posZ": -27.0,
        "rotX": -3.75665422E-06,
        "rotY": 179.980057,
        "rotZ": 3.76756816E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Grey",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -30.88594,
            "posY": 3.367253,
            "posZ": -26.8725643,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.5,
            "g": 0.5,
            "b": 0.5
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b2c6d9",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "0e6250"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 0.0,
        "posY": 0.9130012,
        "posZ": -29.0,
        "rotX": -1.57000659E-06,
        "rotY": 179.980057,
        "rotZ": -6.2295976E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Green",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0548861623,
        "g": 0.7764706,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -30.8924828,
            "posY": 3.355491,
            "posZ": -28.8725719,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.191999942,
            "g": 0.701,
            "b": 0.167999923
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4a8817",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "99582c"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -2.0,
        "posY": 0.9130021,
        "posZ": -29.0,
        "rotX": -2.44660532E-06,
        "rotY": 180.273682,
        "rotZ": 3.149221E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Blue",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3058885,
        "g": 0.372555166,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -32.86468,
            "posY": 3.35622954,
            "posZ": -28.9150181,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.117999949,
            "g": 0.53,
            "b": 1.0
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7338ad",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "8ad6b4"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 2.0,
        "posY": 0.913001239,
        "posZ": -27.0,
        "rotX": -1.2927336E-07,
        "rotY": 179.980057,
        "rotZ": 3.21366883E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-White",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -28.6795883,
            "posY": 3.33315635,
            "posZ": -27.1268845,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "eaee5c",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "176bc4"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 2.0,
        "posY": 0.9130012,
        "posZ": -29.0,
        "rotX": 8.39406141E-07,
        "rotY": 179.980057,
        "rotZ": -1.49834477E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Yellow",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 0.9893046,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -28.8874168,
            "posY": 3.360194,
            "posZ": -29.0054188,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.905,
            "g": 0.898,
            "b": 0.171999782
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "62635e",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "7a3612"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.99999988,
        "posY": 0.913001359,
        "posZ": -31.0,
        "rotX": -3.10165063E-07,
        "rotY": 180.246689,
        "rotZ": -2.71941826E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Purple",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.627,
        "g": 0.124978609,
        "b": 0.941
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -32.7894821,
            "posY": 3.33793235,
            "posZ": -30.8072815,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.627,
            "g": 0.124999948,
            "b": 0.941
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "76ca80",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "fc7feb"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 0.0,
        "posY": 0.9130014,
        "posZ": -31.0,
        "rotX": -2.36672531E-06,
        "rotY": 179.980057,
        "rotZ": 3.58376428E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Red",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09997945,
        "b": 0.09397941
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -31.0987282,
            "posY": 3.36100745,
            "posZ": -31.0177078,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999994,
            "b": 0.09399993
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b7e1ea",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "31b11f"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 2.0,
        "posY": 0.913001,
        "posZ": -31.0,
        "rotX": 4.062319E-06,
        "rotY": 179.980057,
        "rotZ": -2.36758046E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Orange",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9529411,
        "g": 0.5882353,
        "b": 0.109784432
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -29.09013,
            "posY": 3.36130953,
            "posZ": -31.0309086,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.9529411,
            "g": 0.5882353,
            "b": 0.109803729
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f0619a",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "a65625"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": 63.5,
        "posY": -1.32,
        "posZ": 16.5,
        "rotX": -8.33763336E-10,
        "rotY": 89.99997,
        "rotZ": 0.0,
        "scaleX": 3.59999728,
        "scaleY": 3.59999728,
        "scaleZ": 3.59999728
      },
      "Nickname": "Victory Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.0999917,
        "b": 0.09399169
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "8b0541"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": 63.5,
        "posY": -1.32,
        "posZ": -16.5,
        "rotX": 0.0,
        "rotY": 89.99998,
        "rotZ": 0.0,
        "scaleX": 3.59999728,
        "scaleY": 3.59999728,
        "scaleZ": 3.59999728
      },
      "Nickname": "Victory Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117991365,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a77a54"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": 63.5,
        "posY": -1.32,
        "posZ": 2.95657833E-06,
        "rotX": -3.86806761E-07,
        "rotY": 90.0,
        "rotZ": -3.461906E-07,
        "scaleX": 4.0,
        "scaleY": 3.6,
        "scaleZ": 3.6
      },
      "Nickname": "Game Rounds",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0823529139,
        "g": 0.0823529139,
        "b": 0.0823529139
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "titleBtn={\r\n    index=1, label=\"Game rounds\", click_function=\"none\", function_owner=self,\r\n    position={0,0.3,0.23}, rotation={0,180,0}, height=0, width=00,\r\n    font_size=40, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nbtnHeight=300\r\nbtnWidth=550\r\nbtnXPos=0.7\r\nbtnYPos=0.22\r\nbtnZPos=-0.68\r\nendLbl=\"Disengagement\\nturn\"\r\ncontinueLbl=\"Normal\\nturn\"\r\nlastTurn=false\r\nteamOnLbl=\"-> Team <-\"\r\nteamOffLbl=\"<- Solo ->\"\r\nteamState={false,false}\r\nteamBtn={}\r\nendBtn={\r\n    index=1, label=endLbl, click_function=\"setDisengagement\", function_owner=self,\r\n    position={-btnXPos,btnYPos,btnZPos}, rotation={0,180,0}, height=btnHeight, width=btnWidth,\r\n    font_size=70, color={1,0,0}, font_color={1,1,1}\r\n}\r\ncontinueBtn={\r\n    index=1, label=continueLbl, click_function=\"gameContinues\", function_owner=self,\r\n    position={btnXPos,btnYPos,btnZPos}, rotation={0,180,0}, height=btnHeight, width=btnWidth,\r\n    font_size=70, color={0,0.6,0}, font_color={1,1,1}\r\n}\r\n\r\nteamBtn[1]={\r\n    label=teamOffLbl, click_function=\"toggleTeam1\", function_owner=self,\r\n    position={2.19,btnYPos,0}, rotation={0,180,0}, height=250, width=350,\r\n    font_size=70, color=\"Red\", font_color={1,1,1}\r\n}\r\nteamBtn[2]={\r\n    label=teamOffLbl, click_function=\"toggleTeam2\", function_owner=self,\r\n    position={-2.19,btnYPos,0}, rotation={0,180,0}, height=250, width=350,\r\n    font_size=70, color=\"Red\", font_color={1,1,1}\r\n}\r\nfunction onSave()\r\n    saved_data = JSON.encode({\r\n                                svteamState=teamState\r\n                            })\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n         local loaded_data = JSON.decode(saved_data)\r\n         teamState = loaded_data.svteamState\r\n    end\r\n    counterA=getObjectFromGUID(\"8b0541\")\r\n    counterC=getObjectFromGUID(\"055302\")\r\n    counterB=getObjectFromGUID(\"a77a54\")\r\n    counterD=getObjectFromGUID(\"7e4111\")\r\n    startObject=getObjectFromGUID(\"738804\")\r\n    createTeamBtn()\r\n    Wait.frames(assignTeams,5)\r\n\r\nend\r\n\r\n\r\nfunction assignTeams()\r\n    if teamState[1]== true then\r\n        Player[\"Red\"].team=\"Hearts\"\r\n        Player[\"Orange\"].team=\"Hearts\"\r\n    else\r\n        Player[\"Red\"].team=\"None\"\r\n        Player[\"Orange\"].team=\"None\"\r\n    end\r\n\r\n    if teamState[2]== true then\r\n        Player[\"Blue\"].team=\"Spades\"\r\n        Player[\"Teal\"].team=\"Spades\"\r\n    else\r\n        Player[\"Blue\"].team=\"None\"\r\n        Player[\"Teal\"].team=\"None\"\r\n    end\r\nend\r\n\r\n\r\nfunction writeButtons()\r\n    self.clearButtons()\r\n    self.createButton(continueBtn)\r\n    self.createButton(endBtn)\r\n    createTeamBtn()\r\n    startObject.setVar(\"checkEnd\", true)\r\n    startObject.call(\"writeMenus\")\r\nend\r\n\r\nfunction createTeamBtn()\r\n    for i=1,2 do\r\n    if teamState[i] == true then\r\n        teamBtn[i].label=teamOnLbl..\"\\n\"..i\r\n        teamBtn[i].color=\"Green\"\r\n    else\r\n        teamBtn[i].label=teamOffLbl\r\n        teamBtn[i].color=\"Red\"\r\n    end\r\nend\r\n    self.createButton(teamBtn[1])\r\n    self.createButton(teamBtn[2])\r\nend\r\n\r\nfunction toggleTeam(i)\r\n    if teamState[i] == false then\r\n        teamState[i] = true\r\n        teamBtn[i].label=teamOnLbl..\"\\n\"..i\r\n        teamBtn[i].color=\"Green\"\r\n    else\r\n        teamState[i] = false\r\n        teamBtn[i].label=teamOffLbl\r\n        teamBtn[i].color=\"Red\"\r\n    end\r\n    selfButtons=self.getButtons()\r\n    for j, btn in ipairs(selfButtons) do\r\n        if btn.click_function==\"toggleTeam1\" then\r\n            self.editButton({index=btn.index, label=teamBtn[1].label, color=teamBtn[1].color})\r\n        end\r\n        if btn.click_function==\"toggleTeam2\" then\r\n            self.editButton({index=btn.index, label=teamBtn[2].label, color=teamBtn[2].color})\r\n        end\r\n    end\r\nassignTeams()\r\nend\r\n\r\nfunction toggleTeam1(obj, player_clicker_color, alt_click)\r\n    if player_clicker_color == \"Red\" or player_clicker_color == \"Orange\" then\r\n        toggleTeam(1)\r\n    end\r\nend\r\n\r\nfunction toggleTeam2(obj, player_clicker_color, alt_click)\r\n    if player_clicker_color == \"Blue\" or player_clicker_color == \"Teal\" then\r\n        toggleTeam(2)\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction checkGameEnd() -- called by startObject\r\n    --[[\r\n    if self.Counter.getValue() > 5 then\r\n        startObject.setVar(\"checkEnd\", true)\r\n        startObject.call(\"writeMenus\")\r\n    end\r\n    if self.Counter.getValue() == 6 then\r\n        broadcastToAll(\"Check if game ends now\", \"Yellow\")\r\n        continueBtn.label=\"Continue\\n3+\"\r\n        writeButtons()\r\n    end\r\n    if self.Counter.getValue() == 7 then\r\n        broadcastToAll(\"Check if game ends now\", \"Yellow\")\r\n        continueBtn.label=\"Continue\\n4+\"\r\n        writeButtons()\r\n    end\r\n    ]]\r\n\r\n    if  self.Counter.getValue() < 12 and self.Counter.getValue() > 1  then\r\n        writeButtons()\r\n        --return\r\n    end\r\n    if self.Counter.getValue() == 12 then\r\n        lastTurn=true\r\n        broadcastToAll(\"Disengagement turn!\", \"Orange\")\r\n        continueBtn.label=\"\"\r\n        return\r\n    end\r\n    if self.Counter.getValue() > 12 or lastTurn then\r\n        broadcastToAll(\"GAME OVER\", \"Red\")\r\n        gameOver()\r\n        --return\r\n    end\r\nend\r\n\r\nfunction setDisengagement()\r\n    self.clearButtons()\r\n    createTeamBtn()\r\n    lastTurn=true\r\n    --self.Counter.setValue(12)\r\n    startObject.setVar(\"checkEnd\", false)\r\n    startObject.call(\"writeMenus\")\r\n    broadcastToAll(\"Disengagement turn!\", \"Orange\")\r\nend\r\n\r\nfunction gameOver()\r\n    self.clearButtons()\r\n    self.Counter.setValue(self.Counter.getValue()-1)\r\n    createTeamBtn()\r\n    startObject.setVar(\"checkEnd\", true)\r\n    startObject.call(\"writeMenus\")\r\n    local pointsA = counterA.Counter.getValue()\r\n    local pointsC = counterC.Counter.getValue()\r\n    local pointsB = counterB.Counter.getValue()\r\n    local pointsD = counterD.Counter.getValue()\r\n    local points1 = pointsA + pointsC\r\n    local points2 = pointsB + pointsD\r\n    local victoryPoints={}\r\n    victoryPoints = {{name=\"Red Player\", score = pointsA, color=\"Red\"}, {name=\"Orange Player\", score = pointsC,  color=\"Orange\"}, {name=\"Blue Player\" , score= pointsB,  color=\"Blue\"}, {name=\"Teal Player\", score = pointsD,  color=\"Teal\"}, {name=\"Team 1\", score  = points1,  color=\"Red\"}, {name=\"Team 2\", score= points2,  color=\"Blue\"}}\r\n--[[\r\nprint(\"Team 1 is \".. tostring(teamState[1]))\r\nprint(\"Team 2 is \".. tostring(teamState[1]))\r\nprint(\"---------- \")\r\n]]\r\n    if teamState[1]== true then -- dont know why is opposite\r\n        victoryPoints[1].score=0\r\n        victoryPoints[2].score=0\r\n    else\r\n        victoryPoints[5].score=0\r\n    end\r\n    if teamState[2]== true then -- dont know why is opposite\r\n        victoryPoints[3].score=0\r\n        victoryPoints[4].score=0\r\n    else\r\n        victoryPoints[6].score=0\r\n    end\r\n    --victoryPoints = {RedPlayer = pointsA, OrangePlayer = pointsC, BluePlayer = pointsB, TealPlayer = pointsD, Team1 = points1, Team2 = points2}\r\n    local sort_func= function(a,b) return b.score < a.score end\r\n    victoryPoints=table.sort(victoryPoints, sort_func)\r\n    for h, player in ipairs(victoryPoints) do\r\n    --    print(player.name..\"  \"..player.score)\r\n    end\r\n    if victoryPoints[1].score == victoryPoints[2].score then\r\n        broadcastToAll(\"Game ends in a DRAW !\", \"Green\")\r\n    else\r\n        broadcastToAll(victoryPoints[1].name..\" WINS !\", victoryPoints[1].color)\r\n    end\r\n\r\nend\r\n\r\nfunction gameContinues()\r\n    self.clearButtons()\r\n    createTeamBtn()\r\n    startObject.setVar(\"checkEnd\", false)\r\n    startObject.call(\"writeMenus\")\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svteamState\":[false,false]}",
      "GUID": "ee92cf"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": 63.5,
        "posY": -1.32,
        "posZ": 36.0,
        "rotX": 8.338829E-10,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 3.6,
        "scaleY": 3.6,
        "scaleZ": 3.6
      },
      "Nickname": "Red Turns",
      "Description": "ee92cf",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391991347,
        "b": 0.11299134
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "-- Description contains the guid of game turn counter\n\nfunction increaseSelf()\n        self.Counter.increment()\n        gameUpdate()\n\nend\n\nfunction gameUpdate()\n    guidGC=self.getDescription()\r\n    gameTurn=getObjectFromGUID(guidGC)\n    if gameTurn == nil then\n\n    else\n        if self.Counter.getValue() > gameTurn.Counter.getValue() then\n            gameTurn.Counter.setValue(self.Counter.getValue())\n            gameTurn.call(\"checkGameEnd\")\n        end\n    end\nend",
      "LuaScriptState": "",
      "GUID": "055302"
    },
    {
      "Name": "Counter",
      "Transform": {
        "posX": 63.5,
        "posY": -1.32,
        "posZ": -36.0,
        "rotX": 8.338829E-10,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 3.6,
        "scaleY": 3.6,
        "scaleZ": 3.6
      },
      "Nickname": "Blue Turns",
      "Description": "ee92cf",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128991783,
        "g": 0.694,
        "b": 0.606999934
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Counter": {
        "value": 0
      },
      "XmlUI": "",
      "LuaScript": "-- Description contains the guid of game turn counter\n\n\nfunction increaseSelf()\n        self.Counter.increment()\n        gameUpdate()\n\nend\n\nfunction gameUpdate()\n    guidGC=self.getDescription()\r\n    gameTurn=getObjectFromGUID(guidGC)\n    if gameTurn == nil then\n    else\n        if self.Counter.getValue() > gameTurn.Counter.getValue() then\n            gameTurn.Counter.setValue(self.Counter.getValue())\n            gameTurn.call(\"checkGameEnd\")\n        end\n    end\nend",
      "LuaScriptState": "",
      "GUID": "7e4111"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": -53.9,
        "posY": -9.53,
        "posZ": -120.0,
        "rotX": 6.536436E-07,
        "rotY": -2.39176334E-05,
        "rotZ": -3.84849864E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978795929/723C50F43FAB3DE3DC12CB8460536E8CB34B60A3/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 2,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "afc863"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": -53.9,
        "posY": -9.53,
        "posZ": 120.0,
        "rotX": 6.536436E-07,
        "rotY": 90.0,
        "rotZ": -3.84849864E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978795929/723C50F43FAB3DE3DC12CB8460536E8CB34B60A3/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 2,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "c8edca"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": 93.0,
        "posY": -9.53,
        "posZ": 120.0,
        "rotX": 6.536436E-07,
        "rotY": 180.0,
        "rotZ": -3.84849864E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978795929/723C50F43FAB3DE3DC12CB8460536E8CB34B60A3/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 2,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "393bf7"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": 93.0,
        "posY": -9.53,
        "posZ": -120.0,
        "rotX": 6.536436E-07,
        "rotY": 270.0,
        "rotZ": -3.84849864E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978795929/723C50F43FAB3DE3DC12CB8460536E8CB34B60A3/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 2,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "12c65e"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": 20.0,
        "posY": -9.53,
        "posZ": -120.0,
        "rotX": -1.01777751E-13,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 5.2,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978796471/14ED0DBD593370733A0309B0950004F33EB9FACA/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 1,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f938a2"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": -53.9,
        "posY": -9.53,
        "posZ": -2.8556567E-06,
        "rotX": 0.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 7.8,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978796471/14ED0DBD593370733A0309B0950004F33EB9FACA/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 1,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "9f95fd"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": 20.0,
        "posY": -9.53,
        "posZ": 120.0,
        "rotX": -1.01777751E-13,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 5.2,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978796471/14ED0DBD593370733A0309B0950004F33EB9FACA/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 1,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "35b95f"
    },
    {
      "Name": "Custom_Assetbundle",
      "Transform": {
        "posX": 93.0,
        "posY": -9.53,
        "posZ": -2.53116639E-07,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 7.8,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomAssetbundle": {
        "AssetbundleURL": "http://cloud-3.steamusercontent.com/ugc/879750610978796471/14ED0DBD593370733A0309B0950004F33EB9FACA/",
        "AssetbundleSecondaryURL": "",
        "MaterialIndex": 1,
        "TypeIndex": 4,
        "LoopingEffectIndex": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "5af8f2"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 66.501976,
        "posY": 1.23973632,
        "posZ": -35.9997864,
        "rotX": 90.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "TEAL Victory Points",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "7f971a"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 66.50229,
        "posY": 1.23967338,
        "posZ": 16.5028725,
        "rotX": 90.0,
        "rotY": 89.96369,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "RED Victory Points",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a82365"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 66.5021057,
        "posY": 1.23972988,
        "posZ": -16.4994411,
        "rotX": 90.0,
        "rotY": 90.46347,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "BLUE Victory Points ",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 68
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "cf826c"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -4.0,
        "posY": 0.9,
        "posZ": 31.0,
        "rotX": 1.2922319E-06,
        "rotY": 0.0,
        "rotZ": -9.417203E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117979638,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388566/87B13181F561B928287CBED80F17BB230E88476B/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388618/944A2C2AA6D39072A128760B0B8052A974D49C32/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a343bc"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 4.0,
        "posY": 1.00000453,
        "posZ": -29.0,
        "rotX": -1.23211009E-06,
        "rotY": 180.0,
        "rotZ": 180.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117979638,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388566/87B13181F561B928287CBED80F17BB230E88476B/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388618/944A2C2AA6D39072A128760B0B8052A974D49C32/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "995df0"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -4.0,
        "posY": 1.0,
        "posZ": 29.0,
        "rotX": -1.515424E-06,
        "rotY": 0.0,
        "rotZ": 180.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117979638,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388566/87B13181F561B928287CBED80F17BB230E88476B/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388618/944A2C2AA6D39072A128760B0B8052A974D49C32/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a68804"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.501541,
        "posY": -3.0,
        "posZ": -70.00324,
        "rotX": 1.86961133E-05,
        "rotY": 90.00072,
        "rotZ": -1.874909E-08,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Area Denial Range Checker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.96,
        "g": 0.4389887,
        "b": 0.807
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"0bec5b\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":0},\"rot\":{\"x\":0.0799,\"y\":90,\"z\":0}},\"18001c\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":0},\"rot\":{\"x\":0.0799,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.07987452,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 12.0,
            "scaleY": 2.0,
            "scaleZ": 12.0
          },
          "Nickname": "Area Denial Range Checker",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0bec5b"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.07987452,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 6.0,
            "scaleY": 2.5,
            "scaleZ": 6.0
          },
          "Nickname": "Area Denial Range Checker",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "18001c"
        }
      ],
      "GUID": "9ddefb"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 56.0,
        "posY": -4.0,
        "posZ": 0.0,
        "rotX": -5.00896749E-06,
        "rotY": 90.0,
        "rotZ": 180.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Start Menu",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.201567829,
        "b": 0.8235294
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "KTitemsGUID=\"d6cb38\"\r\n_40KitemsGUID=\"5549a7\"\r\nsimulation = false -- is used to test in single player\r\nshowBagsForModify=false -- to modify deploy\r\nredFirstLbl=\"R  e  d    p l a y e r    f i r s t\\n(click to toggle)\"\r\nblueFirstLbl=\"B l u e    p l a y e r    f i r s t\\n(click to toggle)\"\r\ninGame=false\r\ngameTurnCounter=nil\r\ncheckEnd=false  -- used to display or not the ingame labels of deployment and itc\r\narmyMover=\"\"\r\n\r\nloadedFromWorkshop=true\r\n\r\ncurrentPhase=0\r\nstartBtn={\r\n    index=1, label=\"S T A R T  G A M E\", click_function=\"startGame\", function_owner=self,\r\n    position={0,5,0}, rotation={0,0,0}, height=1500, width=5000,\r\n    font_size=500, color={0,0.6,0}, font_color={1,1,1}\r\n}\r\nphaseNameBtn={\r\n    index=1, label=\"\", click_function=\"none\", function_owner=self,\r\n    position={0,5,-1}, rotation={0,0,0}, height=750, width=5000,\r\n    font_size=300, color={1,1,0}, font_color={0,0,0}\r\n}\r\nphaseNumber=0\r\nphaseName={\"C H O O S E   M A N O E U V R E S\",\r\n\"I N I T I A T I V E\",\r\n\"T A I L I N G   F I R E \",\r\n\"M O V E M E N T \",\r\n\"F I R I N G \",\r\n\"E N D   P H A S E\\nStall - Spin - Tailing\",\r\n\"E N D   P H A S E\\nCheck Disengagement turn\",\r\n}\r\nlastTurnEndPhaseName=\"E N D   P H A S E\\nCheck Victory\"\r\npassPhaseLbl=\"N E X T    P H A S E\"\r\npassPhaseBtn={\r\n    index=1, label=passPhaseLbl, click_function=\"passPhase\", function_owner=self,\r\n    position={0,5,1}, rotation={0,0,0}, height=750, width=5000,\r\n    font_size=500, color={0,0.7,0}, font_color={1,1,1}\r\n}\r\n--\r\nmenuX=15\r\nmenuZ=1.05\r\narrowOffset=7.5\r\n-- DEPLOY ZONES VARIABLES\r\ndeployBagGUIDList={\r\n\r\n                {\"a9c405\",\"734a7b\",\"86ddab\",\"5745a4\",\"765e69\",\"761243\",\"866850\"}, -- 6x6\r\n                {\"157d9e\",\"5ba086\",\"a2379d\",\"fc0284\",\"8936fa\",\"8206e4\",\"866850\"}, -- 8x6\r\n                {\"cd1f51\",\"e9c66c\",\"1a0733\",\"884c38\",\"460394\",\"d9697a\",\"866850\"}, -- 10x6\r\n                {\"1e49ac\",\"646141\",\"d14543\",\"c6e179\",\"64d649\",\"4eb25a\",\"866850\"} -- 12x6\r\n            }\r\notherBagsGUID={\"9ddefb\",\"5549a7\",\"d6cb38\"}\r\n--deployBagGUID={}\r\n\r\ndeploymentIngamePlaced=false\r\ndeploymentPregamePlaced=false\r\ndeployMenu=true -- if the menu is open or not\r\ndeployLblOpen=\"H i d e   d e p l o y m e n t  m e n u\"\r\ndeployLblOpen=\"S e l e c t   d e p l o y m e n t   z o n e s\"\r\ndeployLblClosed=\"S h o w   d e p l o y m e n t   z o n e s\"\r\ndeployIngameLblOpen=\"H i d e\\nd e p l o  y m e n t\\nz o n e s\"\r\ndeployIngameLblClosed=\"S h o w\\nd e p l o y m e n t\\nz o n e s\"\r\nnumberDeployZones=6\r\n\r\ndeployMenuBtn={\r\n    index=1, label=deployLblClosed, click_function=\"hideShowDeployMenu\", function_owner=self,\r\n    position={-12.5,5,1.4}, rotation={0,0,0}, height=450, width=8000,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\ndeployBtn={\r\n    index= i, label=\"Zone\", click_function=\"togglePregameDeploy\", function_owner=self,\r\n    position={-menuX,5,menuZ}, rotation={0,0,0}, height=450, width=6000,\r\n    font_size=300, color={1,1,1}, font_color={0,0,0}\r\n}\r\ndeployUpBtn={\r\n    index=1, label=\"->\", click_function=\"deployUp\", function_owner=self,\r\n    position={-menuX+arrowOffset,5,menuZ}, rotation={0,0,0}, height=450, width=800,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\ndeployDownBtn={\r\n    index=1, label=\"<-\", click_function=\"deployDown\", function_owner=self,\r\n    position={-menuX-arrowOffset,5,menuZ}, rotation={0,0,0}, height=450, width=800,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\ndeployIngameBtn={\r\n    index=1, label=deployIngameLblClosed, click_function=\"showHideIngameDeployment\", function_owner=self,\r\n    position={-menuX-6,5,menuZ-1}, rotation={0,0,0}, height=1500, width=2600,\r\n    font_size=300, color={1,1,1}, font_color={0,0,0}\r\n}\r\n-- ITC OBJECTIVES VARIABLES\r\nitcObjMenu=true -- if the menu is open or not\r\nitcObjLblOpen = \"H i d e   I T C   m e n u\"\r\nitcObjLblOpen = \"S e l e c t    I T C   o b j e c t i v e s\"\r\nitcObjLblClosed = \"S h o w   I T C   o b j e c t i v e s\"\r\nnumberItcZones=6\r\nitcSelected=numberItcZones+1\r\nitcObjMenuBtn={\r\n    index=1, label=itcObjLblClosed, click_function=\"hideShowITCMenu\", function_owner=self,\r\n    position={menuX,5,1.4}, rotation={0,0,0}, height=450, width=8000,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\nitcObjBtn={\r\n    index= i, label=\" W  I  P\", click_function=\"recallAllItc\", function_owner=self,\r\n    position={menuX-1.8,5,menuZ}, rotation={0,0,0}, height=450, width=4200,\r\n    font_size=300, color={1,1,1}, font_color={0,0,0}\r\n}\r\nitcObjUpBtn={\r\n    index=1, label=\"->\", click_function=\"itcUp\", function_owner=self,\r\n    position={menuX-3.5+arrowOffset,5,menuZ}, rotation={0,0,0}, height=450, width=800,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\nitcObjDownBtn={\r\n    index=1, label=\"<-\", click_function=\"itcDown\", function_owner=self,\r\n    position={menuX-arrowOffset,5,menuZ}, rotation={0,0,0}, height=450, width=800,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\nsheetEnableLbl=\"Place one\\nITC Sheet\"\r\nsheetEnable2Lbl=\"Place two\\nITC Sheet\"\r\nsheetDisableLbl=\"Hide\\nITC Sheets\"\r\nitcSheetBtn={\r\n    index=1, label=sheetEnableLbl, click_function=\"toggleSheet\", function_owner=self,\r\n    position={menuX+6.6,5,menuZ}, rotation={0,0,0}, height=600, width=1500,\r\n    font_size=250, color={0,0,0}, font_color={1,1,1}\r\n}\r\n-- ITC SHEET VARIABLES\r\nallowITCSheets=false\r\nnumberOfSheet=0  -- 0 closed, 1 sheet in common, 2 one sheet per player\r\nsheetOpen=false\r\n-- AREA DENIAL\r\nareaPlaced=false\r\nareaLblOpen=\"H i d e\\nc e n t e r   a r e a\\nd e n i a  l   z o n e\"\r\nareaLblClosed=\"S h o w\\nc e n t e r   a r e a\\nd e n i a  l   z o n e\"\r\nareaBtn={\r\n    index=1, label=areaLblClosed, click_function=\"showHideAreaDeny\", function_owner=self,\r\n    position={menuX+6,5,menuZ-1}, rotation={0,0,0}, height=1500, width=2600,\r\n    font_size=300, color={1,1,1}, font_color={0,0,0}\r\n}\r\nposition={menuX,5,menuZ}\r\n--\r\nbtnALbl=\"Deployment selected\\n\\n\"\r\nbtnA={\r\n    index=1, label=btnALbl, click_function=\"none\", function_owner=self,\r\n    position={-menuX+3,5,menuZ-1}, rotation={0,0,0}, height=00, width=00,\r\n    font_size=400, color={0,0,0}, font_color={1,1,1}\r\n}\r\nbtnBLbl=\"ITC Scenario selected\\n\\n\"\r\nbtnB={\r\n    index=1, label=btnBLbl, click_function=\"none\", function_owner=self,\r\n    position={menuX-3,5,menuZ-1}, rotation={0,0,0}, height=00, width=00,\r\n    font_size=400, color={0,0,0}, font_color={1,1,1}\r\n}\r\n--- SIZE VARIABLES\r\n\r\nmatSize=2\r\n---\r\nfunction onSave()\r\n    saved_data = JSON.encode({\r\n                                svinGame=inGame,\r\n                                svphaseNumber=phaseNumber,\r\n                                svcheckEnd=checkEnd,\r\n                                svdeploySelected=deploySelected,\r\n                                svareaPlaced=areaPlaced,\r\n                                svdeploymentPregamePlaced=deploymentPregamePlaced,\r\n                                svdeploymentIngamePlaced=deploymentIngamePlaced,\r\n                                svitcSelected=itcSelected,\r\n                                svmatSize=matSize,\r\n                                svloadedFromWorkshop=loadedFromWorkshop,\r\n                            })\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    self.setPosition({56,-4,0})\r\n    --self.setRotation({180,270,0})\r\n    -- load from saved\r\n    if saved_data ~= \"\" then\r\n         local loaded_data = JSON.decode(saved_data)\r\n         inGame = loaded_data.svinGame\r\n         checkEnd= loaded_data.svcheckEnd\r\n         phaseNumber=loaded_data.svphaseNumber\r\n         deploySelected = loaded_data.svdeploySelected\r\n         areaPlaced= loaded_data.svareaPlaced\r\n         deploymentPregamePlaced= loaded_data.svdeploymentPregamePlaced\r\n         deploymentIngamePlaced= loaded_data.svdeploymentIngamePlaced\r\n         itcSelected = loaded_data.svitcSelected\r\n         matSize=loaded_data.svmatSize\r\n         loadedFromWorkshop=loaded_data.svloadedFromWorkshop\r\n         --itcSelected = numberItcZones+1\r\n    else\r\n        inGame = false\r\n        phaseNumber=0\r\n        checkEnd= false\r\n        deploySelected = numberDeployZones+1\r\n        areaPlaced= false\r\n        deploymentPregamePlaced= false\r\n        deploymentIngamePlaced= false\r\n        itcSelected = numberItcZones+1\r\n        matSize= 2\r\n    end\r\n    --loadedFromWorkshop=true\r\n    if loadedFromWorkshop or true then\r\n        broadcastToAll(\"The game will keep track of how many times a game is started.\\nNo other data will be saved!\", \"Red\")\r\n        makeAnnouncements()\r\n        --print(Player.getPlayers()[1].steam_id)\r\n        if #Player.getPlayers()==1 and Player.getPlayers()[1].steam_id==\"76561198008273131\" then\r\n            -- print(\"no stats\") -- no record\r\n            --printToAll(\"No Load recorded\")\r\n        else\r\n            --WebRequest.get(\"http://campaign40k.altervista.org/campaign/statistics.php?name=AILoad\", none) -- to know how much the map is used\r\n\r\n        end\r\n        loadedFromWorkshop=false\r\n    end\r\n    --loadedFromWorkshop=true\r\n    --if simulation then print(\"THIS IS \"..currentPhase..\" TURN\") end\r\n    -- DEPLOY MENU VARIABLES\r\n    deployBag={}\r\n    assignDeployBags()\r\n    tableSide = getObjectFromGUID(\"35b95f\")\r\n    tablePos=tableSide.getPosition()\r\n    manageUI()\r\n\r\n    -- ITC OBJECTIVES MENU VARIABLES\r\n    itcBag={}\r\n    itcBag[1]=getObjectFromGUID(\"0ec042\")\r\n    itcBag[2]=getObjectFromGUID(\"f68f0e\")\r\n    itcBag[3]=getObjectFromGUID(\"a41f35\")\r\n    itcBag[4]=getObjectFromGUID(\"adcb48\")\r\n    itcBag[5]=getObjectFromGUID(\"e3f247\")\r\n    itcBag[6]=getObjectFromGUID(\"49bc0d\")\r\n    itcBag[numberItcZones+1]=getObjectFromGUID(\"866850\") -- same as the deploy one\r\n    -- ITC SHEET VARIABLES\r\n    sheetBag={}\r\n    sheetBag[1]=getObjectFromGUID(\"b31d38\")\r\n    sheetBag[2]=getObjectFromGUID(\"122137\")\r\n    areaBag=getObjectFromGUID(\"9ddefb\")\r\n    if allowITCSheets == false then\r\n        itcObjBtn.position={menuX,5,menuZ}\r\n        itcObjBtn.width=6000\r\n        itcObjUpBtn.position={menuX+arrowOffset,5,menuZ}\r\n    end\r\n    -- REST OF CODE\r\n    redTurnCounter=getObjectFromGUID(\"055302\")\r\n    blueTurnCounter=getObjectFromGUID(\"7e4111\")\r\n    gameTurnCounter=getObjectFromGUID(\"ee92cf\")\r\n    if inGame == false then\r\n        --gameTurnCounter.setPosition({47.5,-3.32,0})\r\n    else\r\n        --gameTurnCounter.setPosition({40,-1.32,0})\r\n    end\r\n    if deploymentIngamePlaced == true then\r\n        deployIngameBtn.label=deployIngameLblOpen\r\n    else\r\n        deployIngameBtn.label=deployIngameLblClosed\r\n    end\r\n    if areaPlaced == true then\r\n        areaBtn.label=areaLblOpen\r\n    else\r\n        areaBtn.label=areaLblClosed\r\n    end\r\n    if showBagsForModify then\r\n        showBags()\r\n    else\r\n        Wait.frames(hideBags, 2)\r\n    end\r\n    gameTurnCounter.call(\"checkGameEnd\")\r\n    writeMenus()\r\n--KTitems.call(\"buttonClick_recall\")\r\nend\r\n\r\n\r\nfunction makeAnnouncements()\r\n    local ann=\"LATEST NEWS\\n- Reworked the spawning menu\\n- Added CHAOS, ASURYANI, ASTARTES, TYRANIDS and NECRON fanmade factions\\n- Added point cost display and aircraft name change on the 'Character sheet'\\n- Better  automatic manoeuvre token giving (now it works even if you select both base and aircraft)\"\r\n    printToAll(ann, \"Yellow\")\r\nend\r\n\r\n\r\nfunction resetWorkshop()\r\n\r\n    loadedFromWorkshop=true\r\n    print(\"Workshop reset to \"..tostring(loadedFromWorkshop))\r\nend\r\n-- /execute getObjectFromGUID(\"738804\").call(\"resetWorkshop\")\r\n\r\n\r\nfunction makeWebRequest()\r\n    WebRequest.get(\"http://campaign40k.altervista.org/campaign/statistics.php?name=AIGame\", none) -- to know how much the map is used\r\nend\r\n\r\nfunction assignDeployBags()\r\n\r\n    deployBagGUID = deployBagGUIDList[2]\r\n    if matSize == 1 then\r\n        deployBagGUID = deployBagGUIDList[1]\r\n        numberDeployZones=6\r\n\r\n    end\r\n    if matSize == 2 then\r\n        deployBagGUID = deployBagGUIDList[2]\r\n        numberDeployZones=6\r\n\r\n    end\r\n    if matSize == 3 then\r\n        deployBagGUID = deployBagGUIDList[3]\r\n        numberDeployZones=6\r\n\r\n    end\r\n    if matSize == 4 then\r\n        deployBagGUID = deployBagGUIDList[4]\r\n        numberDeployZones=6\r\n\r\n    end\r\n    deploySelected=numberDeployZones+1\r\n    --[[\r\n\r\n    ]]--\r\n    deployBag[1]=getObjectFromGUID(deployBagGUID[1])\r\n    deployBag[2]=getObjectFromGUID(deployBagGUID[2])\r\n    deployBag[3]=getObjectFromGUID(deployBagGUID[3])\r\n    deployBag[4]=getObjectFromGUID(deployBagGUID[4])\r\n    deployBag[5]=getObjectFromGUID(deployBagGUID[5])\r\n    deployBag[6]=getObjectFromGUID(deployBagGUID[6])\r\n    deployBag[7]=getObjectFromGUID(deployBagGUID[7])\r\n    deployBag[numberDeployZones+1]=getObjectFromGUID(\"866850\") -- none label\r\n    deployBag[numberDeployZones+1].interactable=false\r\nend\r\n\r\nfunction showBags()\r\n    showHideBags(true)\r\nend\r\nfunction hideBags()\r\n    showHideBags(false)\r\nend\r\n\r\n\r\nfunction showHideBags(show)\r\n    local deployBag2= {}\r\n    local deployBagGUID2={}\r\n    if show then\r\n        newY=3\r\n        --newY=-3 --RIC\r\n        tablePos=tableSide.getPosition()\r\n        --tableSide.setPosition({tablePos.x,-19.53,tablePos.z})\r\n    else\r\n        newY=-3\r\n\r\n        --tableSide.setPosition({tablePos.x,-19.53,tablePos.z})\r\n\r\n    end\r\n    local oldPos={}\r\n    for j=1, #deployBagGUIDList do\r\n        deployBagGUID2=deployBagGUIDList[j]\r\n        for i=1, 7 do\r\n            --if deployBag2[i]~= nil then\r\n                deployBag2[i]= getObjectFromGUID(deployBagGUID2[i])\r\n                oldPos=deployBag2[i].getPosition()\r\n                deployBag2[i].setPosition{oldPos.x,newY,oldPos.z}\r\n                deployBag2[i].interactable=show\r\n                if show == false then\r\n                    deployBag2[i].clearButtons()\r\n                end\r\n            --end\r\n        end\r\n    end\r\n    --[[\r\n    for i=1, numberDeployZones do\r\n        oldPos=deployBag[i].getPosition()\r\n        deployBag[i].setPosition{oldPos.x,newY,oldPos.z}\r\n        deployBag[i].interactable=true\r\n    end\r\n    ]]--\r\n    for i=1, numberItcZones do\r\n        oldPos=itcBag[i].getPosition()\r\n        itcBag[i].setPosition{oldPos.x,newY,oldPos.z}\r\n        itcBag[i].interactable=show\r\n        if show == false then\r\n            itcBag[i].clearButtons()\r\n        end\r\n    end\r\n\r\n    for i, guid in ipairs(otherBagsGUID) do\r\n        bag=getObjectFromGUID(guid)\r\n        oldPos=bag.getPosition()\r\n        bag.setPosition{oldPos.x,newY,oldPos.z}\r\n        bag.interactable=show\r\n        if show== false then\r\n            bag.clearButtons()\r\n        end\r\n    end\r\n\r\nend\r\n\r\n\r\nfunction writeMenus()\r\n    self.clearButtons()\r\n    if checkEnd then return end\r\n    if inGame == false then\r\n        writeStartMenu()\r\n        --writeDeployMenu()\r\n        --writeITCObjMenu()\r\n    else\r\n        writeIngameMenu()\r\n    end\r\nend\r\n\r\nfunction writeStartMenu()\r\n    self.createButton(startBtn)\r\n    --self.createButton(phaseNameBtn)\r\nend\r\n\r\nfunction writeDeployMenu()\r\n    if deployMenu == false then\r\n        deployMenuBtn.position={-menuX,5,1.4}\r\n        deployMenuBtn.label=deployLblClosed\r\n    end\r\n    if deployMenu == true then\r\n        deployMenuBtn.position={-menuX,5,menuZ-1.4}\r\n        deployMenuBtn.label=deployLblOpen\r\n        deployBtn.label=deployBag[deploySelected].getName()\r\n        self.createButton(deployBtn)\r\n        self.createButton(deployUpBtn)\r\n        self.createButton(deployDownBtn)\r\n\r\n    end\r\n    self.createButton(deployMenuBtn)\r\nend\r\n\r\nfunction writeITCObjMenu()\r\n    if true or matSize ~= 2 then\r\n        return\r\n    end\r\n    if itcObjMenu == false then\r\n        itcObjMenuBtn.position={menuX,5,1.4}\r\n        itcObjMenuBtn.label=itcObjLblClosed\r\n    end\r\n    if itcObjMenu == true then\r\n        itcObjMenuBtn.position={menuX,5,menuZ-1.4}\r\n        itcObjMenuBtn.label=itcObjLblOpen\r\n        itcObjBtn.label=itcBag[itcSelected].getName()\r\n        self.createButton(itcObjBtn)\r\n        self.createButton(itcObjUpBtn)\r\n        self.createButton(itcObjDownBtn)\r\n        if allowITCSheets then\r\n            self.createButton(itcSheetBtn)\r\n        end\r\n    end\r\n    self.createButton(itcObjMenuBtn)\r\nend\r\n\r\nfunction manageUI()\r\n    if phaseNumber==1 then\r\n        Global.UI.setAttribute(\"manoeuvre\", \"active\", true)\r\n        broadcastToAll(phaseName[phaseNumber], \"Yellow\")\r\n    else\r\n        Global.UI.setAttribute(\"manoeuvre\", \"active\", false)\r\n    end\r\n    if phaseNumber==4 then\r\n        Global.UI.setAttribute(\"manoeuvresSheetPanel\", \"active\", true)\r\n    else\r\n        Global.UI.setAttribute(\"manoeuvresSheetPanel\", \"active\", false)\r\n    end\r\n    if phaseNumber==3 or phaseNumber==5 then\r\n        Global.UI.setAttribute(\"rollDice\", \"active\", true)\r\n    else\r\n        Global.UI.setAttribute(\"rollDice\", \"active\", false)\r\n    end\r\nend\r\n\r\nfunction writeIngameMenu()\r\n    --self.createButton(deployIngameBtn)\r\n--    self.createButton(areaBtn)\r\n    btnA.label=btnALbl..deployBag[deploySelected].getName()\r\n    btnB.label=btnBLbl..itcBag[itcSelected].getName()\r\n    if checkEnd == false then\r\n        --self.createButton(btnA)\r\n        --self.createButton(btnB)\r\n        self.createButton(passPhaseBtn)\r\n        if phaseNumber>0 then\r\n            if gameTurnCounter.getVar(\"lastTurn\") and phaseNumber== #phaseName then\r\n                phaseNameBtn.label=lastTurnEndPhaseName\r\n            else\r\n                phaseNameBtn.label=phaseName[phaseNumber]\r\n            end\r\n\r\n            self.createButton(phaseNameBtn)\r\n            manageUI()\r\n        end\r\n    end\r\nend\r\n\r\nfunction startGame(obj, player, alt)\r\n    if alt then\r\n        simulation=true\r\n    end\r\n    WebRequest.get(\"http://campaign40k.altervista.org/campaign/statistics.php?name=AIGame\", none) -- to know how much the map is used\r\n    local playerList=Player.getPlayers()\r\n    local numberOfPlayers=0\r\n    for i, p in ipairs(playerList) do\r\n        numberOfPlayers=numberOfPlayers+1\r\n    end\r\n\r\n    if Player[\"Red\"].seated == false or Player[\"Blue\"].seated == false then\r\n\r\n        if simulation == false then\r\n            broadcastToAll(\"Must have both players seated\\n(Right click to override)\", {1,0,0})\r\n            return\r\n        end\r\n    end\r\n    Global.call(\"recordPlayers\")\r\n    inGame=true\r\n    startCustomTurns()\r\n\r\n    recallAllDeploy()\r\n    deploymentIngamePlaced=false\r\n    areaPlaced = false\r\n    --gameTurnCounter.setPosition({40,-1.32,0})\r\n    btnA.label=btnALbl..deployBag[deploySelected].getName()\r\n    btnB.label=btnBLbl..itcBag[itcSelected].getName()\r\n    writeMenus()\r\nend\r\n\r\nfunction passPhase()\r\n    phaseNumber = phaseNumber + 1\r\n    -- 1 INITIATIVE , 2 COMMAND Reinforcementes, 3 COMMAND Assets, 4 COMMAND Orders, 5 ACTION, 6 DAMAGE Damage, 7 DAMAGE Morale\r\n    if phaseNumber > #phaseName then\r\n        phaseNumber = 1\r\n    end\r\n    if phaseNumber == 1 then\r\n        gameTurnCounter.Counter.increment()\r\n        gameTurnCounter.call(\"checkGameEnd\")\r\n\r\n    else\r\n        writeMenus()\r\n    end\r\n    if gameTurnCounter.Counter.getValue()<13 then\r\n        if gameTurnCounter.getVar(\"lastTurn\") and phaseNumber== #phaseName then\r\n            broadcastToAll(lastTurnEndPhaseName, \"Yellow\")\r\n        else\r\n            if phaseNumber ~= 1 then\r\n                broadcastToAll(phaseName[phaseNumber], \"Yellow\")\r\n            end\r\n        end\r\n\r\n    end\r\n\r\n    --print(phaseName[currenPhase])\r\n\r\n\r\n    --\r\nend\r\n\r\nfunction startCustomTurns()\r\n    passPhase()\r\nend\r\n\r\n\r\n\r\n\r\n\r\nfunction hideShowDeployMenu()\r\n    if deployMenu==false then\r\n        deployMenu=true\r\n    else\r\n        deployMenu=false\r\n        deployMenu=true -- for always open menu\r\n    end\r\n    writeMenus()\r\nend\r\n\r\nfunction hideShowITCMenu()\r\n    if itcObjMenu==false then\r\n        itcObjMenu=true\r\n    else\r\n        itcObjMenu=false\r\n        itcObjMenu=true -- for always open menu\r\n    end\r\n    writeMenus()\r\nend\r\n\r\nfunction recallAllDeploy()\r\n    for i=1,numberDeployZones do\r\n        deployBag[i].call(\"buttonClick_recall\")\r\n    end\r\nend\r\n\r\nfunction placeDeploy()\r\n    recallAllDeploy()\r\n    if deploySelected <=  numberDeployZones then\r\n        deployBag[deploySelected].call(\"buttonClick_place\")\r\n    end\r\n\r\nend\r\n\r\nfunction togglePregameDeploy()\r\n    if deploymentPregamePlaced == false then -- place\r\n\r\n        if deploySelected <=  numberDeployZones then\r\n            deployBag[deploySelected].call(\"buttonClick_place\")\r\n        end\r\n        deploymentPregamePlaced= true\r\n    else                                    -- recall\r\n\r\n        if deploySelected <=  numberDeployZones then\r\n            deployBag[deploySelected].call(\"buttonClick_recall\")\r\n        end\r\n        deploymentPregamePlaced= false\r\n    end\r\nend\r\n\r\nfunction deployUp()\r\n    deploymentPregamePlaced=true\r\n    deploySelected=deploySelected+1\r\n    if deploySelected > numberDeployZones+1 then\r\n        deploySelected=1\r\n    end\r\n    if deploySelected == numberDeployZones+1 then\r\n        deploymentPregamePlaced=false\r\n    end\r\n    writeMenus()\r\n    placeDeploy()\r\nend\r\n\r\nfunction deployDown()\r\n    deploymentPregamePlaced=true\r\n    deploySelected=deploySelected-1\r\n    if deploySelected < 1 then\r\n        deploySelected=numberDeployZones+1\r\n    end\r\n    if deploySelected == numberDeployZones+1 then\r\n        deploymentPregamePlaced=false\r\n    end\r\n    writeMenus()\r\n    placeDeploy()\r\nend\r\n\r\nfunction recallAllItc()\r\n    for i=1,numberItcZones do\r\n        itcBag[i].call(\"buttonClick_recall\")\r\n    end\r\nend\r\n\r\nfunction placeItc()\r\n    recallAllItc()\r\n    if itcSelected <=  numberItcZones then\r\n        itcBag[itcSelected].call(\"buttonClick_place\")\r\n    end\r\n\r\nend\r\n\r\nfunction itcUp()\r\n    itcSelected=itcSelected+1\r\n    if itcSelected > numberItcZones+1 then\r\n        itcSelected=1\r\n    end\r\n    writeMenus()\r\n    placeItc()\r\nend\r\n\r\nfunction itcDown()\r\n    itcSelected=itcSelected-1\r\n    if itcSelected < 1 then\r\n        itcSelected=numberItcZones+1\r\n    end\r\n    writeMenus()\r\n    placeItc()\r\nend\r\n\r\nfunction toggleSheet()\r\n    numberOfSheet=numberOfSheet+1\r\n    if numberOfSheet>2 then\r\n        numberOfSheet=0\r\n    end\r\n    if numberOfSheet==0 then\r\n\r\n        sheetBag[1].call(\"buttonClick_recall\")\r\n        sheetBag[2].call(\"buttonClick_recall\")\r\n        itcSheetBtn.label=sheetEnableLbl\r\n        --sheetBag.call(\"buttonClick_place\")\r\n    end\r\n    if numberOfSheet==1 then\r\n        sheetBag[1].call(\"buttonClick_place\")\r\n        sheetBag[2].call(\"buttonClick_recall\")\r\n        itcSheetBtn.label=sheetEnable2Lbl\r\n    end\r\n    if numberOfSheet==2 then\r\n        sheetBag[1].call(\"buttonClick_recall\")\r\n        sheetBag[2].call(\"buttonClick_place\")\r\n        itcSheetBtn.label=sheetDisableLbl\r\n    end\r\n    writeMenus()\r\nend\r\n\r\nfunction showHideIngameDeployment()\r\n    if deploymentIngamePlaced == false then -- place\r\n        deployIngameBtn.label=deployIngameLblOpen\r\n        if deploySelected <=  numberDeployZones then\r\n            deployBag[deploySelected].call(\"buttonClick_place\")\r\n        end\r\n        deploymentIngamePlaced= true\r\n    else                                    -- recall\r\n        deployIngameBtn.label=deployIngameLblClosed\r\n        if deploySelected <=  numberDeployZones then\r\n            deployBag[deploySelected].call(\"buttonClick_recall\")\r\n        end\r\n        deploymentIngamePlaced= false\r\n    end\r\n    writeMenus()\r\nend\r\n\r\nfunction showHideAreaDeny()\r\n    if areaPlaced == false then -- place\r\n        areaBtn.label=areaLblOpen\r\n        areaBag.call(\"buttonClick_place\")\r\n        areaPlaced= true\r\n    else                                    -- recall\r\n        areaBtn.label=areaLblClosed\r\n        areaBag.call(\"buttonClick_recall\")\r\n        areaPlaced= false\r\n    end\r\n    writeMenus()\r\nend\r\n\r\nfunction recallAll()\r\n    recallAllItc()\r\n    recallAllDeploy()\r\n    KTitems.call(\"buttonClick_recall\")\r\n    areaBag.call(\"buttonClick_recall\")\r\nend\r\n\r\nfunction none()\r\nend\r\n",
      "LuaScriptState": "{\"svareaPlaced\":false,\"svcheckEnd\":false,\"svdeploymentIngamePlaced\":false,\"svdeploymentPregamePlaced\":false,\"svdeploySelected\":7,\"svinGame\":false,\"svitcSelected\":7,\"svloadedFromWorkshop\":false,\"svmatSize\":2,\"svphaseNumber\":0}",
      "GUID": "738804"
    },
    {
      "Name": "BlockTriangle",
      "Transform": {
        "posX": 111.808151,
        "posY": -3.0,
        "posZ": 141.054413,
        "rotX": 1.36459039E-05,
        "rotY": 0.0513234138,
        "rotZ": -8.28729441E-08,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "None",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.00539905,
        "g": 0.772058845,
        "b": 0.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "866850"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 4.0,
        "posY": 0.900004864,
        "posZ": -31.0,
        "rotX": 1.2922319E-06,
        "rotY": 180.0,
        "rotZ": -9.417203E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117979638,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388566/87B13181F561B928287CBED80F17BB230E88476B/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/2441390788352388618/944A2C2AA6D39072A128760B0B8052A974D49C32/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 2,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "ce169c"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 20.0,
        "posY": 0.700000465,
        "posZ": 0.0,
        "rotX": -1.60191644E-06,
        "rotY": 180.0,
        "rotZ": 5.057635E-07,
        "scaleX": 92.0,
        "scaleY": 1.0,
        "scaleZ": 138.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.119629286,
        "g": 0.409388751,
        "b": 0.106255837
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://i.imgur.com/eHXDjyy.jpg",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.2,
          "Stackable": false,
          "Stretch": false
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "28865a"
    },
    {
      "Name": "Digital_Clock",
      "Transform": {
        "posX": 51.0,
        "posY": 0.85,
        "posZ": 27.0,
        "rotX": 90.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 3.0,
        "scaleY": 3.0,
        "scaleZ": 0.2
      },
      "Nickname": "Timer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Clock": {
        "ClockState": 3,
        "SecondsPassed": 0,
        "Paused": true
      },
      "XmlUI": "",
      "LuaScript": "titleBtn={\r\n    index=1, label=\"Timer\", click_function=\"none\", function_owner=self,\r\n    position={0,0.32,-0.40}, rotation={90,180,0}, height=0, width=00, scale={0.3,0.3,0.3},\r\n    font_size=200, color={0,0,0}, font_color={0,0,0}\r\n}\r\n\r\n\r\nfunction onLoad()\r\n\r\n    self.Clock.setValue(0)\r\n    self.createButton(titleBtn)\r\n    --Wait.time(sblocca, 2)\r\nend\r\n\r\nfunction sblocca()\r\n    for i, obj in ipairs(getAllObjects()) do\r\n        obj.interactable=true\r\n    end\r\n    print(\"Sbloccato\")\r\nend",
      "LuaScriptState": "",
      "GUID": "2671c8"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 113.0,
        "posY": -2.0,
        "posZ": -1.26982841E-05,
        "rotX": -3.48013828E-06,
        "rotY": 270.0,
        "rotZ": 2.94919141E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Army Placer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9264706,
        "g": 0.0,
        "b": 0.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "\r\nbtnHeight=1200\r\nbtnWidth=btnHeight*2\r\nbtnX=-42\r\nbtnZ=168+47\r\nYoffset=-2\r\narmyPlaced=false\r\nscaleBtn={5,5,5}\r\n\r\nallowChangeMat=true\r\ngrayMat={\r\n    \"http://cloud-3.steamusercontent.com/ugc/793114598929939610/347698F046B6A1325A9AA11BB955B2818AC2B9F5/\", -- 9 Detachments\r\n    \"http://cloud-3.steamusercontent.com/ugc/791987574359085043/6274EB286C6B059C46E84F2FE6466B554A8507F4/\", -- 3 Detachments\r\n\r\n        }\r\nredMat={\r\n    \"http://cloud-3.steamusercontent.com/ugc/793114598929940337/4EE91F0A3F7188DAD5BD1C9FEDBAC5A27FD40813/\",\r\n    \"http://cloud-3.steamusercontent.com/ugc/791987574359086047/2081B669AC9057289CDDD4D9CD9E0810AD39A1C6/\",\r\n        }\r\nblueMat={\r\n    \"http://cloud-3.steamusercontent.com/ugc/793114598929939193/4F6FB447B9B95B1D11FB5BC4DFBCEC32A8130DF7/\",\r\n    \"http://cloud-3.steamusercontent.com/ugc/791987574359085549/78768AC47BD0FC8753CEA7EF2E7AF33DD11B37DB/\",\r\n        }\r\norangeMat={\r\n    \"http://cloud-3.steamusercontent.com/ugc/793114598929939951/8471D448CC69961405DCB1DBC316FADBFE5895AB/\",\r\n    \"http://cloud-3.steamusercontent.com/ugc/791987574359085043/6274EB286C6B059C46E84F2FE6466B554A8507F4/\",\r\n        }\r\ntealMat={\r\n    \"http://cloud-3.steamusercontent.com/ugc/793114598929940839/4298D3538094E9D1A848CDC3FDABC3197287EE24/\",\r\n    \"http://cloud-3.steamusercontent.com/ugc/791987574359085043/6274EB286C6B059C46E84F2FE6466B554A8507F4/\",\r\n        }\r\n\r\n\r\nredBtn={\r\n    index=1, label=\"Place for\\nRED\", click_function=\"click_Red\", function_owner=self,\r\n    position={btnX,-Yoffset,btnZ-10}, rotation={0,0,0}, height=btnHeight, width=btnWidth, scale=scaleBtn,\r\n    font_size=btnHeight*0.4, color=\"Red\", font_color={0,0,0}\r\n}\r\norangeBtn={\r\n    index=1, label=\"Place for\\nORANGE\", click_function=\"click_Orange\", function_owner=self,\r\n    position={btnX,-Yoffset,btnZ+10}, rotation={0,0,0}, height=btnHeight, width=btnWidth, scale=scaleBtn,\r\n    font_size=btnHeight*0.4, color=\"Orange\", font_color={0,0,0}\r\n}\r\n\r\nblueBtn={\r\n    index=1, label=\"Place for\\nBLUE\", click_function=\"click_Blue\", function_owner=self,\r\n    position={-btnX,-Yoffset,btnZ-10}, rotation={0,0,0}, height=btnHeight, width=btnWidth, scale=scaleBtn,\r\n    font_size=btnHeight*0.4, color=\"Blue\", font_color={1,1,1}\r\n}\r\ntealBtn={\r\n    index=1, label=\"Place for\\nTEAL\", click_function=\"click_Teal\", function_owner=self,\r\n    position={-btnX,-Yoffset,btnZ+10}, rotation={0,0,0}, height=btnHeight, width=btnWidth, scale=scaleBtn,\r\n    font_size=btnHeight*0.4, color=\"Teal\", font_color={0,0,0}\r\n}\r\n\r\ndeleteBtn={\r\n    index=1, label=\"Delete\\nARMY\", click_function=\"click_Delete\", function_owner=self,\r\n    position={0,-Yoffset,btnZ+83}, rotation={0,0,0}, height=btnHeight, width=btnWidth, scale=scaleBtn,\r\n    font_size=btnHeight*0.4, color=\"Grey\", font_color={0.8,0,0}\r\n}\r\n\r\narmyZoneData={\r\n        type = \"ScriptingTrigger\",\r\n        position          = {x=-126, y=5, z=0},\r\n        rotation          = {x=0, y=0, z=0},\r\n        scale             = {x=48+48, y=40, z=53.5},\r\n        sound             = false,\r\n        snap_to_grid      = false,\r\n    }\r\n\r\ndestinationZone={}\r\ndestinationZone[1]={}\r\ndestinationZone[2]={}\r\n\r\n\r\n\r\nfunction onLoad(saved_data)\r\n    --self.setPosition({83.00, 0.00, 0.00})\r\n    --self.setPosition({77.00, Yoffset, 0.00})\r\n    --self.interactable=false\r\n    --writeMenu()\r\nend\r\n\r\nfunction armyLoaded()\r\n    writeMenu()\r\nend\r\n\r\nfunction writeMenu()\r\n    self.createButton(redBtn)\r\n    self.createButton(orangeBtn)\r\n    self.createButton(blueBtn)\r\n    self.createButton(tealBtn)\r\n    self.createButton(deleteBtn)\r\nend\r\n\r\nfunction click_Red(obj, color, alt)\r\n    if color ~= \"Red\" then\r\n        return\r\n    end\r\n    armyZone=spawnObject(armyZoneData)\r\n    Wait.frames(placeToRed, 3)\r\nend\r\n\r\nfunction click_Orange(obj, color, alt)\r\n    if color ~= \"Orange\" then\r\n        return\r\n    end\r\n    armyZone=spawnObject(armyZoneData)\r\n    Wait.frames(placeToOrange, 3)\r\nend\r\n\r\nfunction click_Blue(obj, color, alt)\r\n    if color ~= \"Blue\" then\r\n        return\r\n    end\r\n    armyZone=spawnObject(armyZoneData)\r\n    Wait.frames(placeToBlue, 3)\r\nend\r\n\r\n\r\nfunction click_Teal(obj, color, alt)\r\n    if color ~= \"Teal\" then\r\n        return\r\n    end\r\n    armyZone=spawnObject(armyZoneData)\r\n    Wait.frames(placeToTeal, 3)\r\nend\r\n\r\nfunction placeToRed()\r\n    placeTo(-1, 36, 90, redMat)\r\nend\r\n\r\nfunction placeToOrange()\r\n    placeTo(-1,-36, 90, orangeMat)\r\nend\r\n\r\nfunction placeToBlue()\r\n    placeTo(1, 36,-90, blueMat)\r\nend\r\n\r\nfunction placeToTeal()\r\n    placeTo(1, -36, -90, tealMat)\r\nend\r\n\r\nfunction placeTo(zPos, xPos, rot, newImgTable )\r\n    local mat=nil\r\n    --local newImg=redArmyMat\r\n    local armyMinis=armyZone.getObjects()\r\n    local newPos={}\r\n    local newRot={}\r\n    for i, mini in ipairs(armyMinis) do\r\n        if mini ~= self then\r\n\r\n        newPos={-zPos*mini.getPosition().z+xPos, mini.getPosition().y, zPos *mini.getPosition().x+(24*zPos)}\r\n        if mini.getVar(\"BCBtype\") == \"CommandAssetDeck\" then\r\n            if zPos<0 and xPos>0 then --red\r\n                newPos={60,2,49.5}\r\n                mini.setRotation({0,180,180})\r\n            end\r\n            if zPos<0 and xPos<0 then --orange\r\n                newPos={-12,2,49.5}\r\n                mini.setRotation({0,180,180})\r\n            end\r\n            if zPos>0 and xPos>0 then --blue\r\n                newPos={12,2,-49.5}\r\n                mini.setRotation({0,180,180})\r\n            end\r\n            if zPos>0 and xPos<0 then --teal\r\n                newPos={-60,2,-49.5}\r\n                mini.setRotation({0,180,180})\r\n            end\r\n\r\n        end\r\n        mini.setPosition(newPos)\r\n        mini.setLock(false)\r\n        if mini.getVar(\"BCBtype\") == \"armyMat\" then\r\n            mat=mini\r\n            mini.setLock(true)\r\n        end\r\n        end\r\n    end\r\n    for i, mini in ipairs(armyMinis) do\r\n        if mini ~= self then\r\n            newRot={mini.getRotation().x, mini.getRotation().y+rot, mini.getRotation().z}\r\n            mini.setRotation(newRot)\r\n        end\r\n    end\r\n    armyZone.destroy()\r\n    if mat ~= nil and allowChangeMat then\r\n        local custom= mat.getCustomObject()\r\n        local change=false\r\n        for i=1,#grayMat do\r\n            if custom.image == grayMat[i] then\r\n                custom.image=newImgTable[i]\r\n                --[[\r\n                if zPos== -1 then --red\r\n                    custom.image=redMat[i]\r\n\r\n                end\r\n                if zPos== 1 then --blue\r\n                    custom.image=blueMat[i]\r\n                end\r\n                ]]\r\n                change=true\r\n            end\r\n            if change then\r\n                break\r\n            end\r\n        end\r\n        if change then\r\n            mat.setCustomObject(custom)\r\n            mat.reload()\r\n        end\r\n    end\r\n    self.clearButtons()\r\nend\r\n\r\n\r\n\r\nfunction click_Delete()\r\n    armyZone=spawnObject(armyZoneData)\r\n    Wait.frames(deleteArmy, 3)\r\nend\r\n\r\nfunction deleteArmy()\r\n    local armyMinis=armyZone.getObjects()\r\n    for i, mini in ipairs(armyMinis) do\r\n            mini.destroy()\r\n    end\r\n    armyZone.destroy()\r\n    self.clearButtons()\r\nend",
      "LuaScriptState": "",
      "GUID": "8b7aa6"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 4.0,
        "posY": 0.909999967,
        "posZ": -27.0,
        "rotX": -1.2927336E-07,
        "rotY": 179.980057,
        "rotZ": 3.21366883E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D3",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": -26.8049335,
            "posY": 3.32526255,
            "posZ": -26.9928856,
            "rotX": 90.0,
            "rotY": 180.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "BCB-D3",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/837016417750285932/5D8654504536CD97FEA40F29B6446E43556B2432/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 1
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "PhysicsMaterial": {
            "StaticFriction": 0.6,
            "DynamicFriction": 0.6,
            "Bounciness": 0.0,
            "FrictionCombine": 0,
            "BounceCombine": 0
          },
          "Rigidbody": {
            "Mass": 1.0,
            "Drag": 0.1,
            "AngularDrag": 0.1,
            "UseGravity": true
          },
          "GUID": "022eaa",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "2d9705"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 2.0,
        "posY": 0.903704345,
        "posZ": 30.9944077,
        "rotX": 359.9671,
        "rotY": 0.3659608,
        "rotZ": 359.8398,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Purple",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.627,
        "g": 0.124978565,
        "b": 0.941
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -32.73676,
            "posY": 3.34226632,
            "posZ": -31.0856133,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.627,
            "g": 0.124999978,
            "b": 0.941
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "76ca80",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "a8cbbb"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.62981451E-07,
        "posY": 0.909288943,
        "posZ": 30.9985733,
        "rotX": 359.96637,
        "rotY": 0.09930793,
        "rotZ": 359.84,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Red",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09997942,
        "b": 0.09397938
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -30.9930515,
            "posY": 3.36147642,
            "posZ": -31.09223,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999997,
            "b": 0.09399996
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b7e1ea",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "14d612"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -2.0,
        "posY": 0.914874434,
        "posZ": 31.0027161,
        "rotX": 359.96637,
        "rotY": 0.0993079543,
        "rotZ": 359.84,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Orange",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9529411,
        "g": 0.5882353,
        "b": 0.1097844
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -28.7778225,
            "posY": 3.33120418,
            "posZ": -30.7269287,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.9529411,
            "g": 0.5882353,
            "b": 0.109803759
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f0619a",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "2ff2db"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -2.0,
        "posY": 0.9137021,
        "posZ": 29.002739,
        "rotX": 359.96637,
        "rotY": 0.09930796,
        "rotZ": 359.84,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Yellow",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 0.9893046,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -28.7497482,
            "posY": 3.34589863,
            "posZ": -28.9829369,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.905,
            "g": 0.898,
            "b": 0.171999812
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "62635e",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "34366b"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -4.0,
        "posY": 0.918749,
        "posZ": 27.0072517,
        "rotX": 359.96637,
        "rotY": 0.0,
        "rotZ": 359.84,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D3",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": 27.0230675,
            "posY": 3.33475518,
            "posZ": 26.9663067,
            "rotX": 270.0,
            "rotY": 180.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "BCB-D3",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/837016417750285932/5D8654504536CD97FEA40F29B6446E43556B2432/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 1
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "PhysicsMaterial": {
            "StaticFriction": 0.6,
            "DynamicFriction": 0.6,
            "Bounciness": 0.0,
            "FrictionCombine": 0,
            "BounceCombine": 0
          },
          "Rigidbody": {
            "Mass": 1.0,
            "Drag": 0.1,
            "AngularDrag": 0.1,
            "UseGravity": true
          },
          "GUID": "022eaa",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "4c054e"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -2.0,
        "posY": 0.9125298,
        "posZ": 27.0027161,
        "rotX": 0.0,
        "rotY": -9.939235E-17,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-White",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -28.6412468,
            "posY": 3.32665229,
            "posZ": -27.1558266,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "eaee5c",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "791e47"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.62981451E-07,
        "posY": 0.9081171,
        "posZ": 28.9985657,
        "rotX": 359.96637,
        "rotY": 0.09930796,
        "rotZ": 359.84,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Green",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.05488614,
        "g": 0.7764706,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -30.8936119,
            "posY": 3.335301,
            "posZ": -29.3101215,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.191999972,
            "g": 0.701,
            "b": 0.167999953
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4a8817",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "21569d"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 0.0,
        "posY": 0.906944931,
        "posZ": 26.9985733,
        "rotX": 359.96637,
        "rotY": 0.09930797,
        "rotZ": 359.84,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Grey",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -30.9029541,
            "posY": 3.33001375,
            "posZ": -27.3560562,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.5,
            "g": 0.5,
            "b": 0.5
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "b2c6d9",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "4433bb"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 2.0,
        "posY": 0.901359,
        "posZ": 26.9944077,
        "rotX": 0.0167078748,
        "rotY": 180.1192,
        "rotZ": 0.0800200552,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Black",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249978513,
        "g": 0.249978513,
        "b": 0.249978513
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -32.7456665,
            "posY": 3.42035532,
            "posZ": -27.1872044,
            "rotX": 90.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.24999994,
            "g": 0.24999994,
            "b": 0.24999994
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2aa13f",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "771c41"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 2.0,
        "posY": 0.9025312,
        "posZ": 29.0,
        "rotX": 359.9672,
        "rotY": 0.392934561,
        "rotZ": 359.8398,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D6-Blue",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3058885,
        "g": 0.372555166,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Die_6",
          "Transform": {
            "posX": -32.68154,
            "posY": 3.31344724,
            "posZ": -29.3981628,
            "rotX": 270.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0999999,
            "scaleY": 1.0999999,
            "scaleZ": 1.0999999
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.117999978,
            "g": 0.53,
            "b": 1.0
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": false,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": 0,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7338ad",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": -90.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -90.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": 90.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 0.0,
                "y": 0.0,
                "z": -180.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 90.0,
                "y": 0.0,
                "z": 0.0
              }
            }
          ]
        }
      ],
      "GUID": "048595"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 66.50196,
        "posY": 1.23967373,
        "posZ": 0.00120162976,
        "rotX": 90.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "BATTLE ROUND",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 76
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "14e82d"
    },
    {
      "Name": "Digital_Clock",
      "Transform": {
        "posX": 51.0,
        "posY": 0.85,
        "posZ": -27.0,
        "rotX": 90.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 3.0,
        "scaleY": 3.0,
        "scaleZ": 0.2
      },
      "Nickname": "Clock",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.24998787,
        "g": 0.24998787,
        "b": 0.24998787
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Clock": {
        "ClockState": 0,
        "SecondsPassed": 0,
        "Paused": false
      },
      "XmlUI": "",
      "LuaScript": "titleBtn={\r\n    index=1, label=\"Clock\", click_function=\"none\", function_owner=self,\r\n    position={0,0.32,-0.40}, rotation={90,180,0}, height=0, width=00, scale={0.3,0.3,0.3},\r\n    font_size=200, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfunction onLoad()\r\n    self.Clock.showCurrentTime()\r\n    self.createButton(titleBtn)\r\nend",
      "LuaScriptState": "",
      "GUID": "1fcbf0"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 86.0,
        "posY": -4.0,
        "posZ": 0.0,
        "rotX": 4.3916E-07,
        "rotY": 270.0,
        "rotZ": -4.137893E-06,
        "scaleX": 1.3,
        "scaleY": 1.0,
        "scaleZ": 1.3
      },
      "Nickname": "Size Changer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.201567829,
        "b": 0.8235294
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "\r\n\r\nsizeValue={{1,1,1},{1.33,1,1.33},{2.66,1,1.33}}\r\npositionValue2={{-12,-9.52,0},{0,-9.52,0},{12,-9.52,0},{12,-9.52,0}}\r\npositionValue={{0,-9.52,0},{0,-9.52,0},{0,-9.52,0},{0,-9.52,0},{0,-9.52,0},{0,-9.52,0}}\r\nsizeName={\r\n    \"Areonautica   -   3' x 3'\",\r\n    \"Areonautica   -   4' x 4'\",\r\n    \"Areonautica   -   8' x 4'\",\r\n}\r\n\r\n\r\nmenuX=0\r\nmenuZ=32\r\nmenuY=5\r\narrowOffset=7.5\r\n\r\nsizeSelected=2\r\nsizeConfirmed=false\r\n\r\nsizeMenuBtn={\r\n    index=1, label=\"S E L E C T     B A T T L E F I E L D     S I Z E\", click_function=\"none\", function_owner=self,\r\n    position={menuX,menuY,menuZ-1.35}, rotation={0,0,0}, height=450, width=8000,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\n\r\nsizeBtn={\r\n    index= i, label=\"Zone\", click_function=\"none\", function_owner=self,\r\n    position={-menuX,menuY,menuZ}, rotation={0,0,0}, height=450, width=6000,\r\n    font_size=300, color={0.6,0.6,0.6}, font_color={0,0,0}\r\n}\r\nsizeUpBtn={\r\n    index=1, label=\"->\", click_function=\"sizeUp\", function_owner=self,\r\n    position={-menuX+arrowOffset,menuY,menuZ}, rotation={0,0,0}, height=450, width=800,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\nsizeDownBtn={\r\n    index=1, label=\"<-\", click_function=\"sizeDown\", function_owner=self,\r\n    position={-menuX-arrowOffset,menuY,menuZ}, rotation={0,0,0}, height=450, width=800,\r\n    font_size=300, color={0,0,0}, font_color={1,1,1}\r\n}\r\nconfirmBtn={\r\n    index= i, label=\"C O N F I R M\\n(no more changes)\", click_function=\"resizeMat\", function_owner=self,\r\n    position={-menuX,menuY,menuZ+2.3}, rotation={0,0,0}, height=1400, width=4400,\r\n    font_size=500, color={0,0.7,0}, font_color={0,0,0}\r\n}\r\n\r\nfunction refreshMat()\r\n    mat = getObjectFromGUID(\"4ee1f2\")\r\nend\r\n\r\nfunction onSave()\r\n    saved_data = JSON.encode({\r\n                                svsizeSelected=sizeSelected,\r\n                                svsizeConfirmed=sizeConfirmed\r\n                            })\r\n\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n\r\n    self.setPosition({86,-4,0})\r\n    --self.setScale({1,1,1})\r\n    self.setScale({1.3,1,1.3})\r\n    self.interactable=false\r\n    startObject= getObjectFromGUID(\"738804\")\r\n    mat = getObjectFromGUID(\"4ee1f2\")\r\n    mat.setPosition({0,-9.52,0})\r\n\r\n    --mat.setScale({0.5,0.5,0.5})\r\n    if saved_data ~= \"\" then\r\n         local loaded_data = JSON.decode(saved_data)\r\n         sizeSelected = loaded_data.svsizeSelected\r\n         sizeConfirmed = loaded_data.svsizeConfirmed\r\n    end\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if sizeConfirmed then\r\n        return\r\n    end\r\n    self.createButton(sizeMenuBtn)\r\n    sizeBtn.label=sizeName[sizeSelected]\r\n    self.createButton(sizeBtn)\r\n    self.createButton(sizeUpBtn)\r\n    self.createButton(sizeDownBtn)\r\n    self.createButton(confirmBtn)\r\n    mat.setScale(sizeValue[sizeSelected])\r\n    mat.setPosition(positionValue[sizeSelected])\r\nend\r\n\r\nfunction sizeUp()\r\n    sizeSelected=sizeSelected+1\r\n    if sizeSelected > #sizeValue then\r\n        sizeSelected=1\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction sizeDown()\r\n    sizeSelected=sizeSelected-1\r\n    if sizeSelected < 1 then\r\n        sizeSelected=#sizeValue\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction resizeMat(obj, player, alt)\r\n    if alt then return end\r\n    sizeConfirmed=true\r\n    mat.setScale(sizeValue[sizeSelected])\r\n    mat.setPosition(positionValue[sizeSelected])\r\n    startObject.setRotation({0,270,0})\r\n    startObject.setVar(\"matSize\", sizeSelected)\r\n    startObject.call(\"assignDeployBags\")\r\n    startObject.call(\"writeMenus\")\r\n    writeMenu()\r\n    --self.destroy()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svsizeSelected\":1}",
      "GUID": "cff35b"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.498077,
        "posY": -3.0,
        "posZ": 57.629673,
        "rotX": 2.65699709E-05,
        "rotY": 89.99724,
        "rotZ": 3.62278E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#1 12x6 Spearhead Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.1919927,
        "g": 0.701,
        "b": 0.167992681
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"013619\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":225,\"z\":0}},\"2c8d97\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2.0047,\"z\":18},\"rot\":{\"x\":0,\"y\":225,\"z\":0}},\"7a9866\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":135,\"z\":0}},\"9bc03e\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":135,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 30.0,
            "posY": 2.0047,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 224.999985,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 25.5
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998458,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2c8d97"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 30.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 135.000015,
            "rotZ": 0.0,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 25.5
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998458,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7a9866"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -30.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 224.999985,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 25.5
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999911,
            "b": 0.0939990953
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "013619"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -30.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 135.000015,
            "rotZ": 0.0,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 25.5
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999911,
            "b": 0.0939990953
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9bc03e"
        }
      ],
      "GUID": "1e49ac"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.498077,
        "posY": -3.0,
        "posZ": 37.6297722,
        "rotX": 5.467937E-06,
        "rotY": 89.9957657,
        "rotZ": 4.16887378E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#6 12x6 Vanguard Strike",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.1919927,
        "g": 0.701,
        "b": 0.167992681
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"081c36\":{\"lock\":true,\"pos\":{\"x\":-19.6817,\"y\":2,\"z\":-1.2865},\"rot\":{\"x\":0,\"y\":123.69,\"z\":0}},\"ed1bef\":{\"lock\":true,\"pos\":{\"x\":19.68,\"y\":2,\"z\":1.2188},\"rot\":{\"x\":0,\"y\":123.69,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -19.6817,
            "posY": 2.0,
            "posZ": -1.2865,
            "rotX": 0.0,
            "rotY": 123.69,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 62.5
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998756,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "081c36"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 19.68,
            "posY": 2.0,
            "posZ": 1.2188,
            "rotX": 0.0,
            "rotY": 123.69,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 62.5
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999985,
            "b": 0.0939998254
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ed1bef"
        }
      ],
      "GUID": "4eb25a"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.498077,
        "posY": -3.0,
        "posZ": 41.62976,
        "rotX": -1.19150109E-05,
        "rotY": 90.0013046,
        "rotZ": 7.627542E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#5 12x6 Front-Line Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.1919927,
        "g": 0.701,
        "b": 0.167992681
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"658298\":{\"lock\":true,\"pos\":{\"x\":-36,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":260.5,\"z\":0}},\"6e678e\":{\"lock\":true,\"pos\":{\"x\":36,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":260.5,\"z\":0}},\"9d478e\":{\"lock\":true,\"pos\":{\"x\":-36,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":99.5,\"z\":0}},\"d11a30\":{\"lock\":true,\"pos\":{\"x\":36,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":99.5,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 36.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 260.5,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 36.4
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998756,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6e678e"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 36.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 99.5,
            "rotZ": 0.0,
            "scaleX": 1.00002384,
            "scaleY": 1.0,
            "scaleZ": 36.4
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999994054,
            "b": 0.09399941
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d11a30"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -36.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 260.5,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 36.4
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999994054,
            "b": 0.09399941
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "658298"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -36.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 99.5,
            "rotZ": 0.0,
            "scaleX": 1.00002384,
            "scaleY": 1.0,
            "scaleZ": 36.4
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998756,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9d478e"
        }
      ],
      "GUID": "64d649"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.498077,
        "posY": -3.0,
        "posZ": 53.6297379,
        "rotX": 1.48291783E-05,
        "rotY": 89.99745,
        "rotZ": 2.56950389E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#2 12x6 Dawn of War",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.1919927,
        "g": 0.701,
        "b": 0.167992681
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"a44dd1\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":-12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"ee860d\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 72.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998637,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a44dd1"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 72.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999993,
            "b": 0.0939992741
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ee860d"
        }
      ],
      "GUID": "646141"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.498077,
        "posY": -3.0,
        "posZ": 45.6297455,
        "rotX": -1.0261655E-05,
        "rotY": 90.00176,
        "rotZ": -1.4488E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#4 12x6 Hammer and Anvil",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.1919927,
        "g": 0.701,
        "b": 0.167992681
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"2e6473\":{\"lock\":true,\"pos\":{\"x\":-18,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"f454ae\":{\"lock\":true,\"pos\":{\"x\":18,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999993,
            "b": 0.0939992741
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2e6473"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 18.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998637,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f454ae"
        }
      ],
      "GUID": "c6e179"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.498077,
        "posY": -3.0,
        "posZ": 49.6297455,
        "rotX": -1.66051632E-05,
        "rotY": 90.00214,
        "rotZ": -2.02281026E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#3 12x6 Search and Destroy",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.1919927,
        "g": 0.701,
        "b": 0.167992681
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"0e216d\":{\"lock\":true,\"pos\":{\"x\":45,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"3448fe\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"3f60c7\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":-27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"51ee2f\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":0},\"rot\":{\"x\":0.0799,\"y\":89.9897,\"z\":359.9831}},\"580d88\":{\"lock\":true,\"pos\":{\"x\":-45,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0799,
            "rotY": 89.9897,
            "rotZ": 359.9831,
            "scaleX": 18.0,
            "scaleY": 2.0,
            "scaleZ": 18.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.5,
            "g": 0.5,
            "b": 0.5
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "51ee2f"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -45.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 27.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999954,
            "b": 0.09399951
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "580d88"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": -27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289984,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3f60c7"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999954,
            "b": 0.09399951
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3448fe"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 45.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 27.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289984,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0e216d"
        }
      ],
      "GUID": "d14543"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.496742,
        "posY": -3.0,
        "posZ": 83.633606,
        "rotX": 6.53187544E-06,
        "rotY": 89.99671,
        "rotZ": 2.5547788E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#1 10x6 Spearhead Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09998914,
        "b": 0.09398913
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"013619\":{\"lock\":true,\"pos\":{\"x\":-24,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":33.3,\"z\":0}},\"2c8d97\":{\"lock\":true,\"pos\":{\"x\":24,\"y\":2.0047,\"z\":18},\"rot\":{\"x\":0,\"y\":33.3,\"z\":0}},\"7a9866\":{\"lock\":true,\"pos\":{\"x\":24,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":326.7,\"z\":0.3597}},\"9bc03e\":{\"lock\":true,\"pos\":{\"x\":-24,\"y\":1.9998,\"z\":18},\"rot\":{\"x\":0,\"y\":326.7,\"z\":-0.0007}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 24.0,
            "posY": 2.0047,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 33.3000031,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 21.6
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998339,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2c8d97"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 24.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 326.699982,
            "rotZ": 0.359700024,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 21.6
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998339,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7a9866"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -24.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 33.3000031,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 21.6
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.099999,
            "b": 0.0939989761
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "013619"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -24.0,
            "posY": 1.9998,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 326.699982,
            "rotZ": -0.0007,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 21.6
          },
          "Nickname": "#1: Spearhead Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.099999,
            "b": 0.0939989761
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9bc03e"
        }
      ],
      "GUID": "cd1f51"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.496742,
        "posY": -3.0,
        "posZ": 63.63366,
        "rotX": 3.12308766E-05,
        "rotY": 89.99695,
        "rotZ": 2.70033615E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#6 10x6 Vanguard Strike",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09998914,
        "b": 0.09398913
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"081c36\":{\"lock\":true,\"pos\":{\"x\":-13.7399,\"y\":2,\"z\":-5.2734},\"rot\":{\"x\":0,\"y\":123.69,\"z\":0}},\"ed1bef\":{\"lock\":true,\"pos\":{\"x\":13.74,\"y\":2,\"z\":5.27},\"rot\":{\"x\":0,\"y\":123.69,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 13.74,
            "posY": 2.0,
            "posZ": 5.27,
            "rotX": 0.0,
            "rotY": 123.69,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 55.5
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999979,
            "b": 0.0939997658
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ed1bef"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -13.7399,
            "posY": 2.0,
            "posZ": -5.2734,
            "rotX": 0.0,
            "rotY": 123.69,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 55.5
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998637,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "081c36"
        }
      ],
      "GUID": "d9697a"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.496742,
        "posY": -3.0,
        "posZ": 67.63365,
        "rotX": 3.0073827E-06,
        "rotY": 90.00221,
        "rotZ": -3.26120171E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#5 10x6 Front-Line Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09998914,
        "b": 0.09398913
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"658298\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":258.7,\"z\":0}},\"6e678e\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":258.7,\"z\":0}},\"9d478e\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":101.3,\"z\":0}},\"d11a30\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":101.3,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 30.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 258.7,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 30.6
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998041,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6e678e"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -30.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 101.3,
            "rotZ": 0.0,
            "scaleX": 1.00002384,
            "scaleY": 1.0,
            "scaleZ": 30.6
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998041,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9d478e"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -30.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 258.7,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 30.6
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999987051,
            "b": 0.09399868
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "658298"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 30.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 101.3,
            "rotZ": 0.0,
            "scaleX": 1.00002384,
            "scaleY": 1.0,
            "scaleZ": 30.6
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999987051,
            "b": 0.09399868
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d11a30"
        }
      ],
      "GUID": "460394"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.496742,
        "posY": -3.0,
        "posZ": 79.63367,
        "rotX": 3.9305276E-05,
        "rotY": 89.99673,
        "rotZ": 1.787197E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#2 10x6 Dawn of War",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09998914,
        "b": 0.09398913
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"a44dd1\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":-12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"ee860d\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 60.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998637,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a44dd1"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 60.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999993,
            "b": 0.0939992741
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ee860d"
        }
      ],
      "GUID": "e9c66c"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.496742,
        "posY": -3.0,
        "posZ": 71.63362,
        "rotX": 3.1270567E-05,
        "rotY": 90.00213,
        "rotZ": -1.73277567E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#4 10x6 Hammer and Anvil",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09998914,
        "b": 0.09398913
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"2e6473\":{\"lock\":true,\"pos\":{\"x\":-18,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"f454ae\":{\"lock\":true,\"pos\":{\"x\":18,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 18.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998637,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f454ae"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999993,
            "b": 0.0939992741
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2e6473"
        }
      ],
      "GUID": "884c38"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.496742,
        "posY": -3.0,
        "posZ": 75.63364,
        "rotX": 6.04304842E-06,
        "rotY": 90.00297,
        "rotZ": -4.798999E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#3 10x6 Search and Destroy",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09998914,
        "b": 0.09398913
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPosition(entry.pos)\r\n            obj.setRotation(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"0e216d\":{\"lock\":true,\"pos\":{\"x\":39,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"3448fe\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"3f60c7\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":-27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"51ee2f\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":0},\"rot\":{\"x\":0.0799,\"y\":89.9897,\"z\":359.9831}},\"580d88\":{\"lock\":true,\"pos\":{\"x\":-39,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 39.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 21.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289987,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0e216d"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0799,
            "rotY": 89.9897,
            "rotZ": 359.9831,
            "scaleX": 18.0,
            "scaleY": 2.0,
            "scaleZ": 18.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.5,
            "g": 0.5,
            "b": 0.5
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "51ee2f"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": -27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289987,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3f60c7"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -39.0,
            "posY": 2.0,
            "posZ": 2.66730331E-06,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 21.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999991,
            "b": 0.0939999
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "580d88"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.0,
            "posZ": 27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999991,
            "b": 0.0939999
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3448fe"
        }
      ],
      "GUID": "1a0733"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 114.005127,
        "posY": -1.00013661,
        "posZ": -92.98519,
        "rotX": -8.954613E-06,
        "rotY": 270.0,
        "rotZ": -1.72388773E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "--------------------------------  40K ITC  --------------------------------",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a90146"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 114.004791,
        "posY": -1.00065827,
        "posZ": 73.88551,
        "rotX": -8.954613E-06,
        "rotY": 270.0,
        "rotZ": -1.72388773E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "----------------------  10x6 Dep ----------------------",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "dbfb5c"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 114.004875,
        "posY": -1.00045538,
        "posZ": 48.0355263,
        "rotX": -8.954613E-06,
        "rotY": 270.0,
        "rotZ": -1.72388773E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "----------------------  12x6 Dep ----------------------",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "3e4433"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 114.004944,
        "posY": -1.00017107,
        "posZ": -69.9829559,
        "rotX": -8.954613E-06,
        "rotY": 270.0,
        "rotZ": -1.72388773E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "KT items - Area Deny - 40K items",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "835251"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.500191,
        "posY": -3.0,
        "posZ": -74.0032,
        "rotX": 0.08000193,
        "rotY": 89.99818,
        "rotZ": 359.983124,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "KT items",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391989,
        "b": 0.112988986
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot,smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"00ccb7\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2.35,\"z\":-21.5},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"05bc55\":{\"lock\":true,\"pos\":{\"x\":27,\"y\":2.3513,\"z\":21.5},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0168}},\"0bb28b\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2.3513,\"z\":24},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"13b175\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2.35,\"z\":-16.5},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"1424db\":{\"lock\":true,\"pos\":{\"x\":28,\"y\":0.883,\"z\":-7.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"182831\":{\"lock\":false,\"pos\":{\"x\":28,\"y\":0.883,\"z\":-10.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"1cf1e5\":{\"lock\":true,\"pos\":{\"x\":28,\"y\":0.883,\"z\":-4.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"2a0a17\":{\"lock\":true,\"pos\":{\"x\":33,\"y\":2.3513,\"z\":21.5},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"49cf3f\":{\"lock\":true,\"pos\":{\"x\":33,\"y\":2.3513,\"z\":24},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"528157\":{\"lock\":true,\"pos\":{\"x\":-27,\"y\":2.35,\"z\":-24},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"5b6320\":{\"lock\":true,\"pos\":{\"x\":33,\"y\":2.3513,\"z\":19},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"600ebc\":{\"lock\":true,\"pos\":{\"x\":28,\"y\":0.883,\"z\":4.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"649052\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2.3513,\"z\":19},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"77aa53\":{\"lock\":true,\"pos\":{\"x\":28,\"y\":0.883,\"z\":10.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"82bec0\":{\"lock\":true,\"pos\":{\"x\":-33,\"y\":2.35,\"z\":-19},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"8e28d0\":{\"lock\":true,\"pos\":{\"x\":28,\"y\":0.883,\"z\":1.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"944dee\":{\"lock\":true,\"pos\":{\"x\":27,\"y\":2.3513,\"z\":19},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"9b20f4\":{\"lock\":true,\"pos\":{\"x\":28,\"y\":0.883,\"z\":7.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"a2c6ef\":{\"lock\":true,\"pos\":{\"x\":-36,\"y\":2.3607,\"z\":-24},\"rot\":{\"x\":359.9822,\"y\":270,\"z\":359.9201}},\"a674be\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2.35,\"z\":-19},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"a87b4e\":{\"lock\":true,\"pos\":{\"x\":-27,\"y\":2.35,\"z\":-19},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"a9b723\":{\"lock\":true,\"pos\":{\"x\":36,\"y\":2.3092,\"z\":24},\"rot\":{\"x\":0.0169,\"y\":270,\"z\":0.08}},\"c37ac3\":{\"lock\":true,\"pos\":{\"x\":27,\"y\":2.3513,\"z\":24},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"c47027\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2.3513,\"z\":21.5},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}},\"d5f1ec\":{\"lock\":true,\"pos\":{\"x\":28,\"y\":0.883,\"z\":-1.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"dae8ed\":{\"lock\":true,\"pos\":{\"x\":-27,\"y\":2.35,\"z\":-21.5},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"db91e3\":{\"lock\":true,\"pos\":{\"x\":-33,\"y\":2.35,\"z\":-24},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"e33031\":{\"lock\":true,\"pos\":{\"x\":-30,\"y\":2.35,\"z\":-24},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"e3ff83\":{\"lock\":true,\"pos\":{\"x\":-33,\"y\":2.35,\"z\":-21.5},\"rot\":{\"x\":0,\"y\":270,\"z\":0}},\"f3941a\":{\"lock\":true,\"pos\":{\"x\":30,\"y\":2.2634,\"z\":16.5},\"rot\":{\"x\":359.9199,\"y\":270,\"z\":0.0167}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.07,
            "posY": 2.02,
            "posZ": 8.16,
            "rotX": 0.07987648,
            "rotY": 180.0,
            "rotZ": 359.983124,
            "scaleX": 1.0001868,
            "scaleY": 1.0,
            "scaleZ": 2.50265813
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128996372,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "13440b"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -28.53,
            "posY": 2.07,
            "posZ": -0.36,
            "rotX": 0.07987851,
            "rotY": 90.0,
            "rotZ": 359.983124,
            "scaleX": 1.00020492,
            "scaleY": 1.0,
            "scaleZ": 4.496033
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128996372,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7cc8c7"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0195,
            "posY": 2.0446,
            "posZ": -0.34,
            "rotX": 0.07987462,
            "rotY": 90.0,
            "rotZ": 1.00051691E-08,
            "scaleX": 6.0,
            "scaleY": 2.0,
            "scaleZ": 6.0
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "949424"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.07,
            "posY": 2.02,
            "posZ": -8.85,
            "rotX": 0.07987648,
            "rotY": 180.0,
            "rotZ": 359.983124,
            "scaleX": 1.00017941,
            "scaleY": 1.0,
            "scaleZ": 2.5101
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999987051,
            "b": 0.09399868
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d6c5ea"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -7.52,
            "posY": 2.02,
            "posZ": -0.36,
            "rotX": 0.07987845,
            "rotY": 90.0,
            "rotZ": 359.983124,
            "scaleX": 1.00021541,
            "scaleY": 1.0,
            "scaleZ": 4.502505
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999987051,
            "b": 0.09399868
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "e0052f"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.8830006,
            "posZ": -10.5,
            "rotX": 1.28469412E-06,
            "rotY": 3.259643E-08,
            "rotZ": -2.27825989E-08,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Wounds",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Model",
              "Transform": {
                "posX": 28.2914181,
                "posY": 3.0551455,
                "posZ": -10.544055,
                "rotX": 0.4066994,
                "rotY": 90.001915,
                "rotZ": 359.9365,
                "scaleX": 1.5,
                "scaleY": 1.0,
                "scaleZ": 1.5
              },
              "Nickname": "Wounds",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.39199996,
                "b": 0.112999953
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomMesh": {
                "MeshURL": "http://cloud-3.steamusercontent.com/ugc/791986922388898356/18E235C7DCA3BBE07BA46FD5188EC875162A45B8/",
                "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/791986922388898514/1109C832A6B816CDF05584337EE26CCB666737F6/",
                "NormalURL": "http://cloud-3.steamusercontent.com/ugc/791986922388898760/199E9E8719EE194D92AA27B2CC2462DDACA21E1B/",
                "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/791986922388898635/E1AD18AB7FF025A56E40D42A4B2288AF44C200E0/",
                "Convex": true,
                "MaterialIndex": 1,
                "TypeIndex": 0,
                "CustomShader": {
                  "SpecularColor": {
                    "r": 1.0,
                    "g": 1.0,
                    "b": 1.0
                  },
                  "SpecularIntensity": 0.05,
                  "SpecularSharpness": 3.0,
                  "FresnelStrength": 0.1
                },
                "CastShadows": true
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "a0c7b6"
            }
          ],
          "GUID": "182831"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.883,
            "posZ": -7.5,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Shaken",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 29.9696636,
                "posY": 2.96128917,
                "posZ": 12.7027006,
                "rotX": 359.637451,
                "rotY": 270.0068,
                "rotZ": 359.643677,
                "scaleX": 0.433726221,
                "scaleY": 1.0,
                "scaleZ": 0.433726221
              },
              "Nickname": "[b]Shaken[/b]",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.3919962,
                "b": 0.112996213
              },
              "Locked": false,
              "Grid": false,
              "Snap": false,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352463884232374/A197CE998B7AC9EEB2ADF54C56A94458E926A7D7/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173490519293/296216F1439A987B596DD781D828EE975A9D7777/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 0,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "f582db"
            }
          ],
          "GUID": "1424db"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.883,
            "posZ": -4.5,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Shoot",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 26.6836376,
                "posY": 2.97172713,
                "posZ": 9.059066,
                "rotX": 359.36908,
                "rotY": 270.012939,
                "rotZ": 359.96936,
                "scaleX": 0.5458967,
                "scaleY": 1.0,
                "scaleZ": 0.5458967
              },
              "Nickname": "[b]Shoot[/b]",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.391996235,
                "b": 0.112996243
              },
              "Locked": false,
              "Grid": false,
              "Snap": false,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173490722307/B317E8B9AAE84A14F097D65F1A2C707D38284E60/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173490722307/B317E8B9AAE84A14F097D65F1A2C707D38284E60/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "5edab7"
            }
          ],
          "GUID": "1cf1e5"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.883,
            "posZ": -1.5,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Ready",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 29.4219913,
                "posY": 2.96994328,
                "posZ": 8.99793148,
                "rotX": 359.406128,
                "rotY": 270.012543,
                "rotZ": 359.848877,
                "scaleX": 0.5458967,
                "scaleY": 1.0,
                "scaleZ": 0.5458967
              },
              "Nickname": "[b]Ready[/b]",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.39199996,
                "b": 0.112999953
              },
              "Locked": false,
              "Grid": false,
              "Snap": false,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173490690683/354F16A77EF1372CD5B5F5AB42FEFF19CAAE0AEB/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173490722307/B317E8B9AAE84A14F097D65F1A2C707D38284E60/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "57e50b"
            }
          ],
          "GUID": "d5f1ec"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.883,
            "posZ": 1.5,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Fall back",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 32.55013,
                "posY": 2.96963167,
                "posZ": 12.3725147,
                "rotX": 359.4753,
                "rotY": 270.020233,
                "rotZ": 359.760345,
                "scaleX": 0.5458967,
                "scaleY": 1.0,
                "scaleZ": 0.5458967
              },
              "Nickname": "[b]Fall Back[/b]",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.391996235,
                "b": 0.112996243
              },
              "Locked": false,
              "Grid": false,
              "Snap": false,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173490519293/296216F1439A987B596DD781D828EE975A9D7777/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173490519293/296216F1439A987B596DD781D828EE975A9D7777/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "6f6f2f"
            }
          ],
          "GUID": "8e28d0"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.883,
            "posZ": 4.5,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Charge",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 30.5542927,
                "posY": 2.95482278,
                "posZ": 6.34032345,
                "rotX": 359.461182,
                "rotY": 270.028778,
                "rotZ": 359.913422,
                "scaleX": 0.5458967,
                "scaleY": 1.0,
                "scaleZ": 0.5458967
              },
              "Nickname": "[b]Charge[/b]",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.3919972,
                "b": 0.1129972
              },
              "Locked": false,
              "Grid": false,
              "Snap": false,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173490520149/E738D0513F1E6AEE8E9324E8198CF079A39BE267/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173490722307/B317E8B9AAE84A14F097D65F1A2C707D38284E60/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "2b237e"
            }
          ],
          "GUID": "600ebc"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.883,
            "posZ": 7.5,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Advance",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.29662,
                "posY": 2.96789956,
                "posZ": 5.79742765,
                "rotX": 359.253448,
                "rotY": 270.016327,
                "rotZ": 0.232138976,
                "scaleX": 0.5458967,
                "scaleY": 1.0,
                "scaleZ": 0.5458967
              },
              "Nickname": "[b]Advance[/b]",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.39199996,
                "b": 0.112999953
              },
              "Locked": false,
              "Grid": false,
              "Snap": false,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173490566802/FD0DF8D416AD74BBDE72A3B36F0A5A9D873BD407/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173490566802/FD0DF8D416AD74BBDE72A3B36F0A5A9D873BD407/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "73c553"
            }
          ],
          "GUID": "9b20f4"
        },
        {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 28.0,
            "posY": 0.883,
            "posZ": 10.5,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Move",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3058885,
            "g": 0.372555166,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 27.9878235,
                "posY": 2.967303,
                "posZ": 1.83338249,
                "rotX": 359.6962,
                "rotY": 270.0274,
                "rotZ": 0.395875722,
                "scaleX": 0.5458967,
                "scaleY": 1.0,
                "scaleZ": 0.5458967
              },
              "Nickname": "[b]Move [/b]",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.9559999,
                "g": 0.39199996,
                "b": 0.112999953
              },
              "Locked": false,
              "Grid": false,
              "Snap": false,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173490536711/35FBF7D12AF4F0AA49D82A60A79A39C57D6595CA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173490536711/35FBF7D12AF4F0AA49D82A60A79A39C57D6595CA/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "361749"
            }
          ],
          "GUID": "77aa53"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 30.0,
            "posY": 2.263413,
            "posZ": 16.5,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Zealot",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9995117,
                "posY": 6.029299,
                "posZ": 7.000747,
                "rotX": 359.977966,
                "rotY": 180.008865,
                "rotZ": 1.30785453,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Zealot Level 3 - Terrifying Rampage",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487092761/140DF713E87A25FF95CDA876B4A0A16C0FE1E307/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "68c7f2"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9993153,
                "posY": 6.029305,
                "posZ": 7.000091,
                "rotX": -0.000262383866,
                "rotY": 179.998062,
                "rotZ": 1.3081069,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Zealot Level 2 - Martyr",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487092205/6C33039CACE43C938AE6676B8294B4A0A6AC1F7A/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "65df0a"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9996052,
                "posY": 5.99260235,
                "posZ": 7.000294,
                "rotX": 359.984619,
                "rotY": 179.999878,
                "rotZ": 2.706069,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Zealot Level 1 - Killing Frenzy",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487091247/181EFFDD99286C75B387F4A78ECA2398316C039B/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "6fb7f2"
            }
          ],
          "GUID": "f3941a"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 33.0,
            "posY": 2.3513,
            "posZ": 19.0,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Scout",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9993038,
                "posY": 6.02948761,
                "posZ": 1.64852263E-05,
                "rotX": 0.0005891195,
                "rotY": 180.000244,
                "rotZ": 1.30165386,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Scout Level 3 - Move Unseen",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486959756/FA59CE2E517FA6CD9DCB95809FBF98DAD97B0E0D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "b9bf1b"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 27.9967518,
                "posY": 6.046486,
                "posZ": 0.0004364634,
                "rotX": 359.991058,
                "rotY": 179.9978,
                "rotZ": 359.674347,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Scout Level 2 - Marked Positions",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486959138/BD322C600B06A87218628CCB9CA8E7F9393865E7/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "12d1bc"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0008755,
                "posY": 6.05088949,
                "posZ": 0.000231699843,
                "rotX": 0.0200365391,
                "rotY": 180.0099,
                "rotZ": 0.08112973,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Scout Level 1 - Quick March",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486957942/1684695DFCD65A3800C9087903DD2570CBC6D074/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "b2b50c"
            }
          ],
          "GUID": "5b6320"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 30.0,
            "posY": 2.3513,
            "posZ": 19.0,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Sniper",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9972267,
                "posY": 6.05045128,
                "posZ": 7.000129,
                "rotX": 359.990356,
                "rotY": 180.027847,
                "rotZ": 359.651978,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Sniper Level 3 - Quick Shot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486983371/AF82E35E244F6674C721EB2A84F1C49BEB23012E/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "1ef25f"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9974689,
                "posY": 6.05051661,
                "posZ": 5.999643,
                "rotX": 0.00780233741,
                "rotY": 180.00853,
                "rotZ": 359.712524,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Sniper Level 2 - Headshot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486984800/B38E113F31A48BA52E184BF8FDB288A9D9EB0CFC/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "ed14fe"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9974689,
                "posY": 6.050435,
                "posZ": 5.99964142,
                "rotX": 0.008177299,
                "rotY": 180.012161,
                "rotZ": 359.7131,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Sniper Level 1 - Careful Aim",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486981924/76C277A10B6ED848B4DD39171FEF491A81FEA48C/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "09a490"
            }
          ],
          "GUID": "649052"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 27.0,
            "posY": 2.3513,
            "posZ": 19.0,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Veteran",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 23.0000019,
                "posY": 6.052157,
                "posZ": 7.0,
                "rotX": -1.51830482E-05,
                "rotY": 180.0002,
                "rotZ": 0.00155202043,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Veteran Level 3 - Roll with the Hits",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487068095/3F9A2EBEF97BA4103F08259B9E1F295589527862/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "8e88f1"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 23.0,
                "posY": 6.05209732,
                "posZ": 6.99999952,
                "rotX": 0.000207238059,
                "rotY": 180.005508,
                "rotZ": 0.00045336294,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Veteran Level 2 - Well Drilled",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487066979/2CC6634CFC36E85AC389886706A1300686F01791/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "e00a73"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 22.0,
                "posY": 6.0520606,
                "posZ": 6.99999952,
                "rotX": 3.20828485E-06,
                "rotY": 180.008026,
                "rotZ": -3.15802765E-07,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Veteran Level 1 - Adaptive Tactics",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487065531/28CD0C67DFE34A3E4C8EEA4A2711627ADBD303EB/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "db439f"
            }
          ],
          "GUID": "944dee"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 27.0,
            "posY": 2.3513,
            "posZ": 21.5,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0168000255,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Medic",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 21.0019073,
                "posY": 6.041892,
                "posZ": 0.9998572,
                "rotX": -0.0003322745,
                "rotY": 180.006,
                "rotZ": 0.247874558,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Medic Level 3 - Emergency Resuscitation",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486878804/400F01B9DE4B57BE5FF26486484BEF1ADCFA8477/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "a1bfc0"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 22.9999561,
                "posY": 6.04713964,
                "posZ": 1.99977767,
                "rotX": 358.822876,
                "rotY": 179.998459,
                "rotZ": 0.00225909729,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Medic Level 2 - Painkiller",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486878263/164D63604D915DC887853A43F73A5FD9BBBDBAE1/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "cb4fd5"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 42.41449,
                "posY": 4.17996454,
                "posZ": 12.4363165,
                "rotX": 359.191345,
                "rotY": 59.9913826,
                "rotZ": 0.7886539,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Medic Level 1 - Stimm Shot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486877148/2C8E7599F63DA204A83ACBAAEF330A46B41ACFEA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "f04bcf"
            }
          ],
          "GUID": "05bc55"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 30.0,
            "posY": 2.3513,
            "posZ": 21.5,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Heavy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.99747,
                "posY": 6.05053425,
                "posZ": -0.000362946535,
                "rotX": 0.009999505,
                "rotY": 180.030563,
                "rotZ": 359.7133,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Heavy Level 3 - Unkillable",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486850787/47D7D86F8C1DFD0075FB407E319D354107AA76C5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "849003"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9974689,
                "posY": 6.05044,
                "posZ": -0.000358513556,
                "rotX": 0.00807505753,
                "rotY": 180.006317,
                "rotZ": 359.713135,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Heavy Level 2 - Overwhelming Firepower",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486850069/32C552B86CD7B39B5FD3C470F8C5A5CB5E882DC2/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "5814e1"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9748688,
                "posY": 6.0161314,
                "posZ": 1.00459266,
                "rotX": 359.800476,
                "rotY": 180.146851,
                "rotZ": 343.604,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Heavy Level 1 - More Bullets",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486851921/E6B4EB4D82B6222C3EED220A7DDAE1C3DEC7E53D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "cb60f0"
            }
          ],
          "GUID": "c47027"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 33.0,
            "posY": 2.3513,
            "posZ": 21.5,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Demolitions",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0009,
                "posY": 6.06367159,
                "posZ": -4.99983931,
                "rotX": 0.345160365,
                "rotY": 180.039185,
                "rotZ": 0.1044924,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Demolitions Level 3 - High Explosive",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486803004/623121B12D2F11F6E282791EC0218BFFC7DC5DD2/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "134c86"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0009041,
                "posY": 6.02169371,
                "posZ": -7.00629139,
                "rotX": 358.9231,
                "rotY": 180.018814,
                "rotZ": 0.0774986744,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Demolitions Level 2 - Lucky Escape",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486802369/547399353D39EF177BBEB38AF4C63F5C4A7AFB74/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "3bd572"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0008717,
                "posY": 6.05089951,
                "posZ": -5.999768,
                "rotX": 0.01980586,
                "rotY": 180.005569,
                "rotZ": 0.08065213,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Demolitions Level 1 - Custom Ammo",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486801539/9C453F6E58EF9CE9913507671C0AE1CA6F6BE871/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "e2fc8f"
            }
          ],
          "GUID": "2a0a17"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 33.0,
            "posY": 2.3513,
            "posZ": 24.0,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Leader",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 20.162405,
                "posY": 4.22743464,
                "posZ": 24.494524,
                "rotX": 359.970062,
                "rotY": 359.977631,
                "rotZ": 0.2860378,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Leader Level 2 - Fire on my Target",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486454176/C6BC3F59EFC713B2E5D8712CA74572FBD1A83FB5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "0d98d2"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 20.1637268,
                "posY": 4.0444293,
                "posZ": 29.4948864,
                "rotX": 2.863177E-07,
                "rotY": 359.979279,
                "rotZ": 2.32750779E-07,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Leader Level 3 - Force of Will",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486463119/BD45762454A47811F0A5CDDC00DBB6CA3B6E59CA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "1971d2"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 20.1636887,
                "posY": 4.0444293,
                "posZ": 19.49497,
                "rotX": -1.39073933E-07,
                "rotY": 359.985168,
                "rotZ": 2.27099719E-07,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Leader Level 1 - Lead By Example",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486441344/E9C385523B81E16A23AC2E0E938A7E06362739A8/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "3e468a"
            }
          ],
          "GUID": "49cf3f"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 36.0,
            "posY": 2.30919075,
            "posZ": 24.0,
            "rotX": 0.0169000085,
            "rotY": 270.0,
            "rotZ": 0.07999999,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Base",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.905,
            "g": 0.898,
            "b": 0.171999484
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 38.3982964,
                "posY": 5.17836475,
                "posZ": 31.6958351,
                "rotX": 359.98642,
                "rotY": 359.9887,
                "rotZ": 359.9372,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Decisive Move",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486356871/CDEAF080A7B285E5517244350F8B105683BC9706/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "f28117"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 36.0246048,
                "posY": 6.204811,
                "posZ": 30.576643,
                "rotX": 12.9869976,
                "rotY": 10.74539,
                "rotZ": 343.687531,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Gritted Teeth",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486405959/B76DF2F14ECCC20933026050F94935A739172696/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "521ee3"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 35.8008347,
                "posY": 6.42781,
                "posZ": 33.6373024,
                "rotX": 359.641022,
                "rotY": 358.0345,
                "rotZ": 338.308044,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Tactical Re-roll",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486397816/2FF6B1363454BB836C0EB9C21F8355564580C64D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "9fc62b"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 37.5386467,
                "posY": 6.19287539,
                "posZ": 29.4057827,
                "rotX": 7.25167751,
                "rotY": 355.853546,
                "rotZ": 335.840363,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Decisive Shot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486386332/FAB09CFE160E884EC63948601645346883B03143/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "893a37"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 38.5963669,
                "posY": 6.33122253,
                "posZ": 31.1247349,
                "rotX": 352.0045,
                "rotY": 356.103546,
                "rotZ": 337.960175,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Decisive Strike",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486385658/537D4AEB0BB69A711911E3D1B2BB6CD865BCC8AB/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "a78bdf"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 41.1298943,
                "posY": 9.314014,
                "posZ": 34.460186,
                "rotX": 12.9884872,
                "rotY": 357.57373,
                "rotZ": 61.2878952,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Insane Bravery",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486387020/CDA3C4A509641C5DD94D7C11680594A5AC0F58FF/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "a77a68"
            }
          ],
          "GUID": "a9b723"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 30.0,
            "posY": 2.3513,
            "posZ": 24.0,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Combat",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 18.9994831,
                "posY": 6.05299664,
                "posZ": -6.0000906,
                "rotX": 0.0067583276,
                "rotY": 180.007339,
                "rotZ": 359.953552,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Combat Level 3 - Deadly Charge",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486489166/D3FFB0FB62CE2D436FE22F292CFA2A50EE653CF0/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "abdc7e"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.0003338,
                "posY": 6.02940941,
                "posZ": -6.00014353,
                "rotX": -0.000535935047,
                "rotY": 180.00322,
                "rotZ": 358.6923,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Combat Level 2 - Defensive Fighter",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486488387/15A42509C53CC360068498EDFCE18CC2287CA9BD/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "366e17"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.0003777,
                "posY": 6.02935743,
                "posZ": -6.00014448,
                "rotX": -0.0006575683,
                "rotY": 179.977737,
                "rotZ": 358.69104,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Combat Level 1 - Up and at 'Em!",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486487413/62AFC806A162AC3911C5E09E6DC62B6AD83EBA10/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "b38f05"
            }
          ],
          "GUID": "0bb28b"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": 27.0,
            "posY": 2.3513,
            "posZ": 24.0,
            "rotX": 359.9199,
            "rotY": 270.0,
            "rotZ": 0.0167,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Comms",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 22.99891,
                "posY": 6.03302431,
                "posZ": -7.99959946,
                "rotX": 1.59368289,
                "rotY": 180.026321,
                "rotZ": -0.001943476,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Comms Level 3 - New Intelligence",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486545526/C1DE1906770270F9DD25A34654F37F73D1BBB7E1/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "1693fd"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 23.0001278,
                "posY": 6.033418,
                "posZ": -7.99902534,
                "rotX": 1.45825672,
                "rotY": 180.012268,
                "rotZ": -0.00428564753,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Comms Level 2 - Scanner Upload",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486546279/F3C66629A8861707A84DBE379D1233D2904B05B6/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "5f47c9"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 31.7395821,
                "posY": 4.196089,
                "posZ": 36.8682861,
                "rotX": 0.1320162,
                "rotY": 179.993744,
                "rotZ": 0.1925748,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Comms Level 1 - Rousing Transmission",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486544924/50085ACC77982D05F61B22E0A6D7C96D3AC7F8E4/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "712463"
            }
          ],
          "GUID": "c37ac3"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -27.0,
            "posY": 2.35,
            "posZ": -19.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Veteran",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 23.0000019,
                "posY": 6.052157,
                "posZ": 7.0,
                "rotX": -1.51830482E-05,
                "rotY": 180.0002,
                "rotZ": 0.00155202043,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Veteran Level 3 - Roll with the Hits",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487068095/3F9A2EBEF97BA4103F08259B9E1F295589527862/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "8e88f1"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 23.0,
                "posY": 6.05209732,
                "posZ": 6.99999952,
                "rotX": 0.000207238059,
                "rotY": 180.005508,
                "rotZ": 0.00045336294,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Veteran Level 2 - Well Drilled",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487066979/2CC6634CFC36E85AC389886706A1300686F01791/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "e00a73"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 22.0,
                "posY": 6.0520606,
                "posZ": 6.99999952,
                "rotX": 3.20828485E-06,
                "rotY": 180.008026,
                "rotZ": -3.15802765E-07,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Veteran Level 1 - Adaptive Tactics",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487065531/28CD0C67DFE34A3E4C8EEA4A2711627ADBD303EB/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "db439f"
            }
          ],
          "GUID": "a87b4e"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -30.0,
            "posY": 2.35,
            "posZ": -19.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Sniper",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9972267,
                "posY": 6.05045128,
                "posZ": 7.000129,
                "rotX": 359.990356,
                "rotY": 180.027847,
                "rotZ": 359.651978,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Sniper Level 3 - Quick Shot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486983371/AF82E35E244F6674C721EB2A84F1C49BEB23012E/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "1ef25f"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9974689,
                "posY": 6.05051661,
                "posZ": 5.999643,
                "rotX": 0.00780233741,
                "rotY": 180.00853,
                "rotZ": 359.712524,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Sniper Level 2 - Headshot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486984800/B38E113F31A48BA52E184BF8FDB288A9D9EB0CFC/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "ed14fe"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9974689,
                "posY": 6.050435,
                "posZ": 5.99964142,
                "rotX": 0.008177299,
                "rotY": 180.012161,
                "rotZ": 359.7131,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Sniper Level 1 - Careful Aim",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486981924/76C277A10B6ED848B4DD39171FEF491A81FEA48C/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "09a490"
            }
          ],
          "GUID": "a674be"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -33.0,
            "posY": 2.35,
            "posZ": -19.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Scout",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9993038,
                "posY": 6.02948761,
                "posZ": 1.64852263E-05,
                "rotX": 0.0005891195,
                "rotY": 180.000244,
                "rotZ": 1.30165386,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Scout Level 3 - Move Unseen",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486959756/FA59CE2E517FA6CD9DCB95809FBF98DAD97B0E0D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "b9bf1b"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 27.9967518,
                "posY": 6.046486,
                "posZ": 0.0004364634,
                "rotX": 359.991058,
                "rotY": 179.9978,
                "rotZ": 359.674347,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Scout Level 2 - Marked Positions",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486959138/BD322C600B06A87218628CCB9CA8E7F9393865E7/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "12d1bc"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0008755,
                "posY": 6.05088949,
                "posZ": 0.000231699843,
                "rotX": 0.0200365391,
                "rotY": 180.0099,
                "rotZ": 0.08112973,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Scout Level 1 - Quick March",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486957942/1684695DFCD65A3800C9087903DD2570CBC6D074/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "b2b50c"
            }
          ],
          "GUID": "82bec0"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -30.0,
            "posY": 2.35,
            "posZ": -16.5,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Zealot",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9995117,
                "posY": 6.029299,
                "posZ": 7.000747,
                "rotX": 359.977966,
                "rotY": 180.008865,
                "rotZ": 1.30785453,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Zealot Level 3 - Terrifying Rampage",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487092761/140DF713E87A25FF95CDA876B4A0A16C0FE1E307/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "68c7f2"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9993153,
                "posY": 6.029305,
                "posZ": 7.000091,
                "rotX": -0.000262383866,
                "rotY": 179.998062,
                "rotZ": 1.3081069,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Zealot Level 2 - Martyr",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487092205/6C33039CACE43C938AE6676B8294B4A0A6AC1F7A/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "65df0a"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.9996052,
                "posY": 5.99260235,
                "posZ": 7.000294,
                "rotX": 359.984619,
                "rotY": 179.999878,
                "rotZ": 2.706069,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Zealot Level 1 - Killing Frenzy",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173487091247/181EFFDD99286C75B387F4A78ECA2398316C039B/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "6fb7f2"
            }
          ],
          "GUID": "13b175"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -30.0,
            "posY": 2.35,
            "posZ": -21.5,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Heavy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.99747,
                "posY": 6.05053425,
                "posZ": -0.000362946535,
                "rotX": 0.009999505,
                "rotY": 180.030563,
                "rotZ": 359.7133,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Heavy Level 3 - Unkillable",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486850787/47D7D86F8C1DFD0075FB407E319D354107AA76C5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "849003"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9974689,
                "posY": 6.05044,
                "posZ": -0.000358513556,
                "rotX": 0.00807505753,
                "rotY": 180.006317,
                "rotZ": 359.713135,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Heavy Level 2 - Overwhelming Firepower",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486850069/32C552B86CD7B39B5FD3C470F8C5A5CB5E882DC2/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "5814e1"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.9748688,
                "posY": 6.0161314,
                "posZ": 1.00459266,
                "rotX": 359.800476,
                "rotY": 180.146851,
                "rotZ": 343.604,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Heavy Level 1 - More Bullets",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486851921/E6B4EB4D82B6222C3EED220A7DDAE1C3DEC7E53D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "cb60f0"
            }
          ],
          "GUID": "00ccb7"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -27.0,
            "posY": 2.35,
            "posZ": -21.5,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Medic",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 21.0019073,
                "posY": 6.041892,
                "posZ": 0.9998572,
                "rotX": -0.0003322745,
                "rotY": 180.006,
                "rotZ": 0.247874558,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Medic Level 3 - Emergency Resuscitation",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486878804/400F01B9DE4B57BE5FF26486484BEF1ADCFA8477/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "a1bfc0"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 22.9999561,
                "posY": 6.04713964,
                "posZ": 1.99977767,
                "rotX": 358.822876,
                "rotY": 179.998459,
                "rotZ": 0.00225909729,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Medic Level 2 - Painkiller",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486878263/164D63604D915DC887853A43F73A5FD9BBBDBAE1/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "cb4fd5"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 42.41449,
                "posY": 4.17996454,
                "posZ": 12.4363165,
                "rotX": 359.191345,
                "rotY": 59.9913826,
                "rotZ": 0.7886539,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Medic Level 1 - Stimm Shot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486877148/2C8E7599F63DA204A83ACBAAEF330A46B41ACFEA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "f04bcf"
            }
          ],
          "GUID": "dae8ed"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -33.0,
            "posY": 2.35,
            "posZ": -21.5,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Demolitions",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0009,
                "posY": 6.06367159,
                "posZ": -4.99983931,
                "rotX": 0.345160365,
                "rotY": 180.039185,
                "rotZ": 0.1044924,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Demolitions Level 3 - High Explosive",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486803004/623121B12D2F11F6E282791EC0218BFFC7DC5DD2/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "134c86"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0009041,
                "posY": 6.02169371,
                "posZ": -7.00629139,
                "rotX": 358.9231,
                "rotY": 180.018814,
                "rotZ": 0.0774986744,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Demolitions Level 2 - Lucky Escape",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486802369/547399353D39EF177BBEB38AF4C63F5C4A7AFB74/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "3bd572"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 28.0008717,
                "posY": 6.05089951,
                "posZ": -5.999768,
                "rotX": 0.01980586,
                "rotY": 180.005569,
                "rotZ": 0.08065213,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Demolitions Level 1 - Custom Ammo",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486801539/9C453F6E58EF9CE9913507671C0AE1CA6F6BE871/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "e2fc8f"
            }
          ],
          "GUID": "e3ff83"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -33.0,
            "posY": 2.35,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Leader",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 20.162405,
                "posY": 4.22743464,
                "posZ": 24.494524,
                "rotX": 359.970062,
                "rotY": 359.977631,
                "rotZ": 0.2860378,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Leader Level 2 - Fire on my Target",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486454176/C6BC3F59EFC713B2E5D8712CA74572FBD1A83FB5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "0d98d2"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 20.1637268,
                "posY": 4.0444293,
                "posZ": 29.4948864,
                "rotX": 2.863177E-07,
                "rotY": 359.979279,
                "rotZ": 2.32750779E-07,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Leader Level 3 - Force of Will",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486463119/BD45762454A47811F0A5CDDC00DBB6CA3B6E59CA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "1971d2"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 20.1636887,
                "posY": 4.0444293,
                "posZ": 19.49497,
                "rotX": -1.39073933E-07,
                "rotY": 359.985168,
                "rotZ": 2.27099719E-07,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Leader Level 1 - Lead By Example",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486441344/E9C385523B81E16A23AC2E0E938A7E06362739A8/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "3e468a"
            }
          ],
          "GUID": "db91e3"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -36.0,
            "posY": 2.3607,
            "posZ": -24.0,
            "rotX": 359.9822,
            "rotY": 270.0,
            "rotZ": 359.9201,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Base",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.905,
            "g": 0.898,
            "b": 0.171999484
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 38.3982964,
                "posY": 5.17836475,
                "posZ": 31.6958351,
                "rotX": 359.98642,
                "rotY": 359.9887,
                "rotZ": 359.9372,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Decisive Move",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486356871/CDEAF080A7B285E5517244350F8B105683BC9706/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "f28117"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 36.0246048,
                "posY": 6.204811,
                "posZ": 30.576643,
                "rotX": 12.9869976,
                "rotY": 10.74539,
                "rotZ": 343.687531,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Gritted Teeth",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486405959/B76DF2F14ECCC20933026050F94935A739172696/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "521ee3"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 35.8008347,
                "posY": 6.42781,
                "posZ": 33.6373024,
                "rotX": 359.641022,
                "rotY": 358.0345,
                "rotZ": 338.308044,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Tactical Re-roll",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486397816/2FF6B1363454BB836C0EB9C21F8355564580C64D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "9fc62b"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 37.5386467,
                "posY": 6.19287539,
                "posZ": 29.4057827,
                "rotX": 7.25167751,
                "rotY": 355.853546,
                "rotZ": 335.840363,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Decisive Shot",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486386332/FAB09CFE160E884EC63948601645346883B03143/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "893a37"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 38.5963669,
                "posY": 6.33122253,
                "posZ": 31.1247349,
                "rotX": 352.0045,
                "rotY": 356.103546,
                "rotZ": 337.960175,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Decisive Strike",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486385658/537D4AEB0BB69A711911E3D1B2BB6CD865BCC8AB/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "a78bdf"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 41.1298943,
                "posY": 9.314014,
                "posZ": 34.460186,
                "rotX": 12.9884872,
                "rotY": 357.57373,
                "rotZ": 61.2878952,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Insane Bravery",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486387020/CDA3C4A509641C5DD94D7C11680594A5AC0F58FF/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "a77a68"
            }
          ],
          "GUID": "a2c6ef"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -30.0,
            "posY": 2.35,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Combat",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 18.9994831,
                "posY": 6.05299664,
                "posZ": -6.0000906,
                "rotX": 0.0067583276,
                "rotY": 180.007339,
                "rotZ": 359.953552,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Combat Level 3 - Deadly Charge",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486489166/D3FFB0FB62CE2D436FE22F292CFA2A50EE653CF0/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "abdc7e"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.0003338,
                "posY": 6.02940941,
                "posZ": -6.00014353,
                "rotX": -0.000535935047,
                "rotY": 180.00322,
                "rotZ": 358.6923,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Combat Level 2 - Defensive Fighter",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486488387/15A42509C53CC360068498EDFCE18CC2287CA9BD/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "366e17"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 17.0003777,
                "posY": 6.02935743,
                "posZ": -6.00014448,
                "rotX": -0.0006575683,
                "rotY": 179.977737,
                "rotZ": 358.69104,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Combat Level 1 - Up and at 'Em!",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486487413/62AFC806A162AC3911C5E09E6DC62B6AD83EBA10/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "b38f05"
            }
          ],
          "GUID": "e33031"
        },
        {
          "Name": "Custom_Model_Bag",
          "Transform": {
            "posX": -27.0,
            "posY": 2.35,
            "posZ": -24.0,
            "rotX": 0.0,
            "rotY": 270.0,
            "rotZ": 0.0,
            "scaleX": 0.5500004,
            "scaleY": 0.5500004,
            "scaleZ": 0.5500004
          },
          "Nickname": "Comms",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/831328194712735675/8CCFA7C97DAAAA46D410729FCF03E9306FD7D5C9/",
            "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/974352173487255794/B3A673ECDF6CAFFC54306C488325F0824AE4E9A0/",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 6,
            "CastShadows": true
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 22.99891,
                "posY": 6.03302431,
                "posZ": -7.99959946,
                "rotX": 1.59368289,
                "rotY": 180.026321,
                "rotZ": -0.001943476,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Comms Level 3 - New Intelligence",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486545526/C1DE1906770270F9DD25A34654F37F73D1BBB7E1/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "1693fd"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 23.0001278,
                "posY": 6.033418,
                "posZ": -7.99902534,
                "rotX": 1.45825672,
                "rotY": 180.012268,
                "rotZ": -0.00428564753,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Comms Level 2 - Scanner Upload",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486546279/F3C66629A8861707A84DBE379D1233D2904B05B6/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "5f47c9"
            },
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": 31.7395821,
                "posY": 4.196089,
                "posZ": 36.8682861,
                "rotX": 0.1320162,
                "rotY": 179.993744,
                "rotZ": 0.1925748,
                "scaleX": 2.0,
                "scaleY": 1.0,
                "scaleZ": 2.0
              },
              "Nickname": "Comms Level 1 - Rousing Transmission",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 1.0,
                "g": 1.0,
                "b": 1.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/974352173486544924/50085ACC77982D05F61B22E0A6D7C96D3AC7F8E4/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 3,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "712463"
            }
          ],
          "GUID": "528157"
        }
      ],
      "GUID": "d6cb38"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.500191,
        "posY": -3.0,
        "posZ": -66.00324,
        "rotX": 0.07996412,
        "rotY": 89.99857,
        "rotZ": 359.983124,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "40K items",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249989,
        "g": 0.249989,
        "b": 0.249989
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position=entry.pos, rotation=entry.rot,smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n--    broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"097ea5\":{\"lock\":true,\"pos\":{\"x\":7.75,\"y\":0.77,\"z\":-48.5},\"rot\":{\"x\":0,\"y\":180,\"z\":0}},\"18f7eb\":{\"lock\":true,\"pos\":{\"x\":-3.25,\"y\":0.77,\"z\":48.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"22433f\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":0.77,\"z\":37.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"71cdfc\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":0.77,\"z\":-37.5},\"rot\":{\"x\":0,\"y\":180,\"z\":0}},\"c79ba8\":{\"lock\":true,\"pos\":{\"x\":1.5,\"y\":0.77,\"z\":-48.5},\"rot\":{\"x\":0,\"y\":180,\"z\":0}},\"f1d9a1\":{\"lock\":true,\"pos\":{\"x\":-9.75,\"y\":0.77,\"z\":48.5},\"rot\":{\"x\":0,\"y\":0,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.07,
            "posY": 2.02,
            "posZ": 8.16,
            "rotX": 0.07987648,
            "rotY": 180.0,
            "rotZ": 359.983124,
            "scaleX": 1.0001868,
            "scaleY": 1.0,
            "scaleZ": 2.50265813
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128996372,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "13440b"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -28.53,
            "posY": 2.07,
            "posZ": -0.36,
            "rotX": 0.07987851,
            "rotY": 90.0,
            "rotZ": 359.983124,
            "scaleX": 1.00020492,
            "scaleY": 1.0,
            "scaleZ": 4.496033
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128996372,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7cc8c7"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0195,
            "posY": 2.0446,
            "posZ": -0.34,
            "rotX": 0.07987462,
            "rotY": 90.0,
            "rotZ": 1.00051691E-08,
            "scaleX": 6.0,
            "scaleY": 2.0,
            "scaleZ": 6.0
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "949424"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.07,
            "posY": 2.02,
            "posZ": -8.85,
            "rotX": 0.07987648,
            "rotY": 180.0,
            "rotZ": 359.983124,
            "scaleX": 1.00017941,
            "scaleY": 1.0,
            "scaleZ": 2.5101
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999987051,
            "b": 0.09399868
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d6c5ea"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -7.52,
            "posY": 2.02,
            "posZ": -0.36,
            "rotX": 0.07987845,
            "rotY": 90.0,
            "rotZ": 359.983124,
            "scaleX": 1.00021541,
            "scaleY": 1.0,
            "scaleZ": 4.502505
          },
          "Nickname": "Take Prisoners",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999987051,
            "b": 0.09399868
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "e0052f"
        }
      ],
      "GUID": "5549a7"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 96.0,
        "posY": -3.0,
        "posZ": -40.0,
        "rotX": 359.9201,
        "rotY": 269.9974,
        "rotZ": 0.0169,
        "scaleX": 9.258874,
        "scaleY": 1.0,
        "scaleZ": 8.787912
      },
      "Nickname": "Kill Team Rules",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/990115005953145298/FE4E91029F0FBA678F2C1F3A2DF188ED9350C71B/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/974352173486354526/859FBA09B787CBBF2CED2679571455994BB02CB1/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "03e90e"
    },
    {
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": 40.0,
        "posY": -2.0,
        "posZ": -136.0,
        "rotX": 0.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 0.5,
        "scaleZ": 1.0
      },
      "Nickname": "Extract terrain",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/796488803077454679/2F68BC7FA71E051E2BBA46C0D1B06A5972D52E7C/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 0,
        "TypeIndex": 6,
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "playZone=nil\r\nplayZoneData={\r\n    type = \"ScriptingTrigger\",\r\n    position          = {x=0, y=10, z=0},\r\n    rotation          = {x=0, y=0, z=0},\r\n    scale             = {x=72.2, y=100, z=48.2},\r\n    sound             = false,\r\n    snap_to_grid      = false,\r\n}\r\nplayZoneScale= {\r\n{x=72.2, y=100, z=72.2},\r\n{x=96.2, y=100, z=72.2},\r\n{x=120.2, y=100, z=72.2},\r\n{x=144.2, y=100, z=72.2}\r\n}\r\nselectedMat=2\r\nfunction onLoad()\r\n\r\n    assignVariables()\r\n    --createExtractButton()\r\n    self.setPosition({40,-2,-136})\r\n    self.setRotation({0,180,0})\r\n    self.interactable = false\r\n    self.setScale({1,0.5,1})\r\nend\r\nextractLbl=\"EXTRACT\\nTERRAIN\"\r\nsubtitleLbl=\"Confirm mat size first\"\r\nscaleBtn={6,6,6}\r\noffsetX=-5\r\nextractBtn={\r\n    label=extractLbl, click_function=\"showYNButtonsExtract\", function_owner=self,\r\n    position={0+offsetX,0,13}, rotation={0,0,0}, height=750, width=2000,\r\n    font_size=300, color={0.8,0.8,0.8}, font_color={0,0,0}, scale=scaleBtn\r\n}\r\nsubtitleBtn={\r\n    label=subtitleLbl, click_function=\"none\", function_owner=self,\r\n    position={0+offsetX,0,16.8}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=100, color={0.8,0.8,0.8}, font_color=\"Red\", scale=scaleBtn\r\n}\r\nbackgroundBtn={\r\n    label=\"\", click_function=\"none\", function_owner=self,\r\n    position={0+offsetX,-1,18}, rotation={0,0,0}, height=2000, width=2500,\r\n    font_size=300, color={0.4,0.4,0.4,0.7}, font_color={1,1,1}, scale=scaleBtn\r\n}\r\nconfirmYesBtnExtract={\r\n    label=\"Yes\", click_function=\"extract\", function_owner=self,\r\n    position={-7+offsetX,0,24}, rotation={0,0,0}, height=750, width=820,\r\n    font_size=300, color={0,0.6,0}, font_color={1,1,1}, scale=scaleBtn\r\n}\r\nconfirmNoBtnExtract={\r\n    label=\"No\", click_function=\"hideYNButtonsExtract\", function_owner=self,\r\n    position={7+offsetX,0,24}, rotation={0,0,0}, height=750, width=820,\r\n    font_size=300, color={0.6,0,0}, font_color={1,1,1}, scale=scaleBtn\r\n}\r\ninfoBtn={\r\n    label=\"TERRAIN\\nEXPORTING\\nINSTRUCTIONS\", click_function=\"showInstructions\", function_owner=self,\r\n    position={0+offsetX,0,36}, rotation={0,0,0}, height=1000, width=2000,\r\n    font_size=200, color={0,0,0}, font_color={1,1,1}, scale=scaleBtn\r\n}\r\n\r\ndeleteLbl=\"DELETE\\nTERRAIN\"\r\ndeleteBtn={\r\n    label=deleteLbl, click_function=\"showYNButtonsDelete\", function_owner=self,\r\n    position={0+offsetX,0,46}, rotation={0,0,0}, height=750, width=2000,\r\n    font_size=300, color={0.8,0.8,0.8}, font_color={0,0,0}, scale=scaleBtn\r\n}\r\n\r\nconfirmYesBtnDelete={\r\n    label=\"Yes\", click_function=\"deleteTerrain\", function_owner=self,\r\n    position={-7+offsetX,0,57}, rotation={0,0,0}, height=750, width=820,\r\n    font_size=300, color={0,0.6,0}, font_color={1,1,1}, scale=scaleBtn\r\n}\r\nconfirmNoBtnDelete={\r\n    label=\"No\", click_function=\"hideYNButtonsDelete\", function_owner=self,\r\n    position={7+offsetX,0,57}, rotation={0,0,0}, height=750, width=820,\r\n    font_size=300, color={0.6,0,0}, font_color={1,1,1}, scale=scaleBtn\r\n}\r\n\r\n\r\nfunction assignVariables()\r\n    --[[\r\n    playZone=getObjectFromGUID('5d3218')\r\n    junkyard1=getObjectFromGUID('894611')\r\n    junkyard2=getObjectFromGUID('2ae8cf')\r\n    junkyard3=getObjectFromGUID('d32b38')\r\n    junkyard4=getObjectFromGUID('0b6f7d')\r\n    table=getObjectFromGUID('948ce5')\r\n    mat=getObjectFromGUID('4ee1f2')\r\n    matUrlDisplay=getObjectFromGUID('c5e288')\r\n    matUrlDisplay.setPosition({0,-5.53,0})\r\n    --matUrlDisplay.setPosition({42,5,0})\r\n    ]]--\r\n    table=getObjectFromGUID('948ce5')\r\n    mat=getObjectFromGUID('4ee1f2')\r\n    mat.setPosition({0,mat.getPosition().y,mat.getPosition().z})\r\n    matUrlDisplay=getObjectFromGUID('c5e288')\r\n    Wait.frames(hideOther, 5)\r\n    matUrlDisplay.setPosition({185,-6,0})\r\n    flexControl=getObjectFromGUID('bd69bd')\r\n    YNButtonsExtract=false\r\n    YNButtonsDelete=false\r\n    label0=\"E X P O R T\\nT E R R A I N\"\r\n    adjust=3.5\r\n    scaleBtn=6\r\n    offsetBtn=-8.2*adjust\r\n    offsetYBtn=2.8*adjust\r\n    txtSize=120\r\nend\r\n\r\nfunction hideOther()\r\n    matUrlDisplay.setInvisibleTo({\"Red\", \"Blue\", \"Black\", \"Grey\", \"White\"})\r\nend\r\n\r\nfunction showInstructions()\r\n    Global.call(\"openTerrain\")\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if YNButtonsExtract==false then\r\n        extractBtn.label=extractLbl\r\n    else\r\n        extractBtn.label=\"Are you sure?\"\r\n        self.createButton(confirmYesBtnExtract)\r\n        self.createButton(confirmNoBtnExtract)\r\n    end\r\n    if YNButtonsDelete == false then\r\n        deleteBtn.label=deleteLbl\r\n    else\r\n        deleteBtn.label=\"Are you sure?\"\r\n        self.createButton(confirmYesBtnDelete)\r\n        self.createButton(confirmNoBtnDelete)\r\n    end\r\n    createExtractButton()\r\n    createDeleteButton()\r\nend\r\n\r\nfunction createMenu()\r\n    createExtractButton()\r\n    createDeleteButton()\r\nend\r\n\r\nfunction createExtractButton()\r\n    --self.createButton(backgroundBtn)\r\n    self.createButton(extractBtn)\r\n    if extractBtn.label==extractLbl then\r\n        self.createButton(subtitleBtn)\r\n    end\r\n\r\n    --self.createButton(infoBtn)\r\nend\r\n\r\nfunction createNoButtonExtract()\r\n    self.createButton(confirmNoBtnExtract)\r\nend\r\n\r\nfunction createYesButtonExtract()\r\n    self.createButton(confirmYesBtnExtract)\r\nend\r\n\r\nfunction showYNButtonsExtract()\r\n    YNButtonsExtract = true\r\n    writeMenu()\r\nend\r\n\r\nfunction hideYNButtonsExtract()\r\n    YNButtonsExtract = false\r\n    writeMenu()\r\nend\r\n\r\nfunction createDeleteButton()\r\n    self.createButton(deleteBtn)\r\nend\r\n\r\nfunction showYNButtonsDelete()\r\n    YNButtonsDelete = true\r\n    writeMenu()\r\nend\r\n\r\nfunction hideYNButtonsDelete()\r\n    YNButtonsDelete = false\r\n    writeMenu()\r\nend\r\n\r\nfunction extract()\r\n    broadcastToAll(\"EXTRATCING TERRAIN\\nwait some seconds ...\", \"Yellow\")\r\n    local startMenu=getObjectFromGUID(\"738804\")\r\n    startMenu.call(\"recallAll\")\r\n    Wait.time(extract2, 2)\r\nend\r\n\r\nfunction extract2()\r\n\r\n    matUrlDisplay.call('retriveUrl')\r\n    matUrlDisplay.clearInputs()\r\n    matUrlDisplay.clearButtons()\r\n    matUrlDisplay.setPosition({-74,-0.53,0})\r\n    matUrlDisplay.setInvisibleTo({\"Red\", \"Blue\", \"Black\", \"Grey\", \"White\"})\r\n    matUrlDisplay.interactable=false\r\n    spawnPlayZone()\r\n    Wait.frames(extract3, 3)\r\nend\r\n\r\nfunction extract3()\r\n    --print(\"Starting to delete\")\r\n    --deleteTable()\r\n\r\n    local allObj=getAllObjects()\r\n    local zoneObj=playZone.getObjects()\r\n    for i, objA in ipairs(allObj) do\r\n        local delete=true\r\n        for j, objZ in ipairs (zoneObj) do\r\n            if objA == objZ or objA == self or objA == matUrlDisplay then\r\n                delete=false\r\n                objZ.setLock(true)\r\n                --objZ.setDescription(\"\")\r\n            end\r\n        end\r\n        if delete then\r\n            objA.destroy()\r\n        end\r\n    end\r\n    local allObj2 = getAllObjects()\r\n\r\n    deleteTable()\r\n    Wait.frames(injectLua, 2)\r\n    --self.setPosition({37,2,0})\r\n    --self.destroy()\r\nend\r\n\r\nfunction deleteTable()\r\n\r\n    --flexTable=getObjectFromGUID(flexTableGuid)\r\n    local guidList = {\r\n        \"afc863\",\"c8edca\",\"393bf7\",\"12c65e\",\"f938a2\",\"9f95fd\",\"35b95f\",\r\n        \"5af8f2\",\"4ee1f2\",\"bd69bd\", \"28865a\", \"9f95fd\"\r\n    }\r\n    for i, tbl in ipairs(guidList) do\r\n        getObjectFromGUID(tbl).destroy()\r\n    end\r\n\r\n    --mat.destroy()\r\n    --flexControl.destroy()\r\n\r\nend\r\n\r\nfunction deleteSelf()\r\n    broadcastToAll(\"DONE\", \"Yellow\")\r\n    self.destroy()\r\nend\r\n\r\nfunction deleteTerrain()\r\n    broadcastToAll(\"DELETING TERRAIN\\nwait some seconds ...\", \"Red\")\r\n    local startMenu=getObjectFromGUID(\"738804\")\r\n    startMenu.call(\"recallAll\")\r\n    Wait.time(deleteTerrain2, 2)\r\nend\r\n\r\nfunction deleteTerrain2()\r\n    spawnPlayZone()\r\n    Wait.frames(deleteTerrain3, 3)\r\nend\r\n\r\nfunction deleteTerrain3()\r\n    local zoneObj=playZone.getObjects()\r\n    for i, obj in ipairs(zoneObj) do\r\n        if obj.getGUID() ~= \"4ee1f2\" and obj.getGUID() ~= \"28865a\" and obj.getGUID() ~= \"f938a2\" then\r\n            obj.destroy()\r\n        end\r\n    end\r\n    broadcastToAll(\"DONE\", \"Red\")\r\nend\r\n\r\nfunction spawnPlayZone()\r\n    local startMenu=getObjectFromGUID(\"738804\")\r\n    selectedMat= startMenu.getVar(\"matSize\")\r\n    --print(\"Selected: \"..selectedMat)\r\n    playZoneData.scale=playZoneScale[selectedMat]\r\n    playZone=spawnObject(playZoneData)\r\nend\r\n\r\nfunction injectLua()\r\n    local objList = getAllObjects()\r\n    local oldLua = \"\"\r\n    local addLua = '\\nBCBtype = \"terrain\"\\n'\r\n    local newLua = \"\"\r\n    for i, obj in ipairs(objList) do\r\n        if obj.getVar(\"BCBtype\") == \"terrain\" or obj == matUrlDisplay then\r\n            --print(\"var found \" .. obj.getVar(\"BCBtype\"))\r\n        else\r\n            oldLua = obj.getLuaScript()\r\n            newLua = addLua .. oldLua\r\n            obj.setLuaScript(newLua)\r\n        end\r\n    end\r\n    Wait.frames(deleteSelf, 1)\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "GUID": "70b9f6"
    },
    {
      "Name": "BlockRectangle",
      "Transform": {
        "posX": 90.0,
        "posY": -10.0,
        "posZ": 0.0,
        "rotX": -1.41732551E-06,
        "rotY": -0.00152179354,
        "rotZ": 7.397896E-06,
        "scaleX": 2.0,
        "scaleY": 2.0,
        "scaleZ": 2.0
      },
      "Nickname": "Mat url",
      "Description": "New",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.201567829,
        "b": 0.8235294
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "lightEquatorColor = {}\r\nlightGroundColor = {}\r\nlightSkyColor = {}\r\nlightColor = {}\r\nmanageLighting=false\r\nfunction refreshSurface()\r\n    obj_surface = getObjectFromGUID(\"4ee1f2\")\r\nend\r\n\r\nfunction onSave()\r\n    local data =  {}\r\n    if manageLighting then\r\n        data={\r\n                    link=url,\r\n                    svlightEquatorColor = lightEquatorColor,\r\n                    svlightGroundColor = lightGroundColor,\r\n                    svlightSkyColor = lightSkyColor,\r\n                    svlightColor = lightColor,\r\n                    svlightAmbientType= lightAmbientType,\r\n                    svlightAmbientIntensity = lightAmbientIntensity,\r\n                    svlightLightIntensity = lightLightIntensity,\r\n                    svlightReflectionIntesity = lightReflectionIntesity,\r\n                    }\r\n    else\r\n        data={link=url}\r\n    end\r\n\r\n    saved_data = JSON.encode(data)\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    self.setPosition({90,-10,0})\r\n    self.setInvisibleTo(Player.getColors())\r\n    self.interactable=false\r\n    if saved_data ~= \"\" then\r\n         local loaded_data = JSON.decode(saved_data)\r\n         url = loaded_data.link\r\n         lightEquatorColor = loaded_data.svlightEquatorColor\r\n         lightGroundColor = loaded_data.svlightGroundColor\r\n         lightSkyColor = loaded_data.svlightSkyColor\r\n         lightColor = loaded_data.svlightColor\r\n         lightAmbientType= loaded_data.svlightAmbientType\r\n         lightAmbientIntensity = loaded_data.svlightAmbientIntensity\r\n         lightLightIntensity = loaded_data.svlightLightIntensity\r\n         lightReflectionIntesity = loaded_data.svlightReflectionIntesity\r\n    else\r\n         url ='No url'\r\n         lightEquatorColor = {}\r\n         lightGroundColor = {}\r\n         lightSkyColor = {}\r\n         lightColor = {}\r\n         lightAmbientType= nil\r\n         lightAmbientIntensity = nil\r\n         lightLightIntensity = nil\r\n         lightReflectionIntesity = nil\r\n    end\r\n\r\n    flexControl = getObjectFromGUID('bd69bd')\r\n    obj_surface = getObjectFromGUID(\"4ee1f2\")\r\n    Xoffset=2\r\n    Yoffset=3\r\n    if obj_surface ~= nil and obj_surface.getVar(\"version\")>= 2.0 then\r\n        Wait.frames(changeMat ,5)\r\n    end\r\n    Wait.frames(createUI, 30)\r\n\r\nend\r\n\r\nfunction createUI()\r\n    createTitleButton()\r\n    createDisplay()\r\n    --createSetButton()\r\n    createRewriteButton()\r\n    createDeleteButton()\r\nend\r\n\r\nfunction createTitleButton()\r\n    button_parameters = {}\r\n    button_parameters.click_function = 'none'\r\n    button_parameters.function_owner = self\r\n    button_parameters.label = \"Copy/paste the link below to load the mat image \\n (for BCB v2.0 template it's automatic)\"\r\n    button_parameters.position = {0+Xoffset,Yoffset,0}\r\n    button_parameters.rotation = {0,270,0}\r\n    button_parameters.width = 4400\r\n    button_parameters.height = 800\r\n    button_parameters.font_size = 200\r\n    button_parameters.color = 'Black'\r\n    button_parameters.font_color = 'White'\r\n    button_parameters.tooltip=\"\"\r\n    self.createButton(button_parameters)\r\nend\r\n\r\nfunction createDisplay()\r\n    self.createInput({\r\n        label='', input_function=\"none\", function_owner=self,\r\n        alignment=3, position={1.5+Xoffset,Yoffset,0}, rotation = {0,270,0}, height=400, width= string.len(url)*160,\r\n        font_size=300, tooltip=\"\",\r\n        value= url\r\n    })\r\nend\r\n\r\nfunction createSetButton()\r\n    button_parameters = {}\r\n    button_parameters.click_function = 'changeMat'\r\n    button_parameters.function_owner = self\r\n    button_parameters.label = 'SET \\n if autoset didnt worked \\n (for BCB v2.0 template)'\r\n    button_parameters.position = {3.2+Xoffset,Yoffset,3}\r\n    button_parameters.rotation = {0,270,0}\r\n    button_parameters.width = 3000\r\n    button_parameters.height = 800\r\n    button_parameters.font_size = 200\r\n    button_parameters.tooltip=\"Auto set\"\r\n    self.createButton(button_parameters)\r\nend\r\n\r\nfunction createRewriteButton()\r\n    button_parameters = {}\r\n    button_parameters.click_function = 'rewriteUrl'\r\n    button_parameters.function_owner = self\r\n    button_parameters.label = 'SHOW AGAIN URL \\n (in case things went wrong)'\r\n    button_parameters.position = {3.2+Xoffset,Yoffset,0}\r\n    button_parameters.rotation = {0,270,0}\r\n    button_parameters.width = 2600\r\n    button_parameters.height = 800\r\n    button_parameters.font_size = 200\r\n    button_parameters.tooltip=\"Show again\"\r\n    self.createButton(button_parameters)\r\nend\r\n\r\nfunction createDeleteButton()\r\n    button_parameters = {}\r\n    button_parameters.click_function = 'erease'\r\n    button_parameters.function_owner = self\r\n    button_parameters.label = 'Erease this tool \\n when done \\n (can not undo!)'\r\n    button_parameters.position = {5.7+Xoffset,Yoffset,0}\r\n    button_parameters.rotation = {0,270,0}\r\n    button_parameters.width = 2000\r\n    button_parameters.height = 1200\r\n    button_parameters.font_size = 200\r\n    button_parameters.color = 'Black'\r\n    button_parameters.font_color = 'Red'\r\n    button_parameters.tooltip=\"Erease\"\r\n    self.createButton(button_parameters)\r\nend\r\n\r\nfunction retriveUrl()\r\n    obj_surface = getObjectFromGUID(\"4ee1f2\")\r\n    url = obj_surface.getCustomObject().diffuse\r\n    rewriteUrl()\r\n    lightEquatorColor = Lighting.getAmbientEquatorColor()\r\n    lightGroundColor = Lighting.getAmbientGroundColor()\r\n    lightSkyColor = Lighting.getAmbientSkyColor()\r\n    lightColor = Lighting.getLightColor()\r\n    lightAmbientType= Lighting.ambient_type\r\n    lightAmbientIntensity = Lighting.ambient_intensity\r\n    lightLightIntensity = Lighting.light_intensity\r\n    lightReflectionIntesity = Lighting.reflection_intensity\r\nend\r\n\r\nfunction rewriteUrl()\r\n    self.editInput({index=0, value=url})\r\n    self.editInput({index=0, width= string.len(url)*160})\r\n    self.setDescription(\"\")\r\nend\r\n\r\nfunction changeMat(new)\r\n    if url ~= \"\" and url ~= \"No url\" and flexControl ~= nil then\r\n        closeMenu()\r\n        flexControl.call('setControlF')\r\n        Wait.frames(updateSurfaceMat, 5)\r\n    else\r\n        if self.getDescription()==\"\" then\r\n            broadcastToAll(\"Invalid URL or no table\", \"Red\")\r\n        end\r\n    end\r\n    setLighting()\r\nend\r\n\r\nfunction setLighting()\r\n    if manageLighting == false then\r\n        return\r\n    end\r\n    if lightEquatorColor ~= nil then\r\n        Lighting.setAmbientEquatorColor(lightEquatorColor)\r\n    end\r\n    if lightGroundColor ~= nil then\r\n        Lighting.setAmbientGroundColor(lightGroundColor)\r\n    end\r\n    if lightSkyColor ~= nil then\r\n        Lighting.setAmbientSkyColor(lightSkyColor)\r\n    end\r\n    if lightColor ~= nil then\r\n        Lighting.setLightColor(lightColor)\r\n    end\r\n    if lightAmbientType ~= nil then\r\n        Lighting.ambient_type = lightAmbientType\r\n    end\r\n    if lightAmbientIntensity ~= nil then\r\n        Lighting.ambient_intensity = lightAmbientIntensity\r\n    end\r\n    if lightLightIntensity ~= nil then\r\n        Lighting.light_intensity = lightLightIntensity\r\n    end\r\n    if lightReflectionIntesity ~= nil then\r\n        Lighting.reflection_intensity = lightReflectionIntesity\r\n    end\r\n    Lighting.apply()\r\nend\r\n\r\n\r\nfunction setInputValues()\r\n    flexControl.editInput( {index=0, value=\"\"})\r\n    flexControl.editInput( {index=1, value=url})\r\nend\r\n\r\nfunction updateSurfaceMat()\r\n    obj_surface = getObjectFromGUID(\"4ee1f2\")\r\n    local customInfo = obj_surface.getCustomObject()\r\n    customInfo.diffuse = url\r\n    obj_surface.setCustomObject(customInfo)\r\n    obj_surface = obj_surface.reload()\r\n    Wait.frames(erease, 5)\r\nend\r\n\r\nfunction closeMenu()\r\n    flexControl.clearButtons()\r\n    flexControl.clearInputs()\r\n    flexControl.call('createOpenCloseButton')\r\nend\r\n\r\nfunction erease()\r\n    obj_surface.call(\"showMenu\")\r\n    obj_surface.interactable=false\r\n    self.destroy()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"link\":\"No url\"}",
      "GUID": "c5e288"
    },
    {
      "Name": "Chinese_Checkers_Piece",
      "Transform": {
        "posX": 105.0,
        "posY": -1.2,
        "posZ": -142.0,
        "rotX": 0.00190076465,
        "rotY": 180.0,
        "rotZ": 0.000379891542,
        "scaleX": 6.0,
        "scaleY": 3.0,
        "scaleZ": 3.0
      },
      "Nickname": "Flex Table Control",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 1,
      "XmlUI": "",
      "LuaScript": "tableHeightOffset = -9\nfunction refreshSurface()\n    obj_surface = getObjectFromGUID(\"4ee1f2\")\nend\nfunction onSave()\n    saved_data = JSON.encode({tid=tableImageData, cd=checkData})\n    --saved_data = \"\"\n    return saved_data\nend\n\nfunction onload(saved_data)\n    self.setScale({6,3,3})\n    self.setPosition({105, -1.2,-142})\n    --Loads the tracking for if the game has started yet\n    if saved_data ~= \"\" then\n         local loaded_data = JSON.decode(saved_data)\n         tableImageData = loaded_data.tid\n         checkData = loaded_data.cd\n    else\n        tableImageData = {}\n        checkData = {move=false, scale=false}\n    end\n\n    --Disables interactable status of objects with GUID in list\n    for _, guid in ipairs(ref_noninteractable) do\n        local obj = getObjectFromGUID(guid)\n        if obj then\n            obj.interactable = false --RIC\n        end\n    end\n    exportObj = getObjectFromGUID(\"70b9f6\")\n    --Establish references to table parts\n    obj_leg1 = getObjectFromGUID(\"afc863\")\n    obj_leg2 = getObjectFromGUID(\"c8edca\")\n    obj_leg3 = getObjectFromGUID(\"393bf7\")\n    obj_leg4 = getObjectFromGUID(\"12c65e\")\n    obj_surface = getObjectFromGUID(\"4ee1f2\")\n    obj_surface2 = getObjectFromGUID(\"28865a\")\n    obj_side_top = getObjectFromGUID(\"35b95f\")\n    obj_side_bot = getObjectFromGUID(\"f938a2\")\n    obj_side_lef = getObjectFromGUID(\"9f95fd\")\n    obj_side_rig = getObjectFromGUID(\"5af8f2\")\n\n    controlActive = false\n    createOpenCloseButton()\nend\n\nfunction setControlF()\n    controlActive=false\nend\n\n--Activation/deactivation of control panel\n\n\n\n--Activated by clicking on\nfunction click_toggleControl(_, color)\n    if permissionCheck(color) then\n        if not controlActive then\n            --Activate control panel\n            controlActive = true\n            self.clearButtons()\n            createOpenCloseButton()\n            createSurfaceInput()\n            createSurfaceButtons()\n            --createExtractButtons()\n            enableExtractMenu()\n            --createScaleInput()\n            --createScaleButtons()\n        else\n            --Deactivate control panel\n            controlActive = false\n            self.clearButtons()\n            self.clearInputs()\n            disableExtractMenu()\n            createOpenCloseButton()\n\n        end\n    end\nend\n\n\n\n\n--Table surface control\n\n\n\n--Changes table surface\nfunction click_applySurface(_, color)\n    if permissionCheck(color) then\n        updateSurface()\n        broadcastToAll(\"New Table Image Applied\", {0.2,0.9,0.2})\n    end\nend\n\n--Saves table surface\nfunction click_saveSurface(_, color)\n    if permissionCheck(color) then\n        local nickname = self.getInputs()[1].value\n        local url = self.getInputs()[2].value\n        if nickname == \"\" then\n            --No nickname\n            broadcastToAll(\"Please supply a nickname for this save.\", {0.9,0.2,0.2})\n        else\n            --Nickname exists\n\n            if findInImageDataIndex(url, nickname) == nil then\n                --Save doesn't exist already\n                table.insert(tableImageData, {url=url, name=nickname})\n                broadcastToAll(\"Image URL saved to memory.\", {0.2,0.9,0.2})\n                --Refresh buttons\n                self.clearButtons()\n                createOpenCloseButton()\n                createSurfaceButtons()\n                --createScaleButtons()\n            else\n                --Save exists already\n                broadcastToAll(\"Memory already contains a save with this Name or URL. Delete it first.\", {0.9,0.2,0.2})\n            end\n        end\n    end\nend\n\n--Loads table surface\nfunction click_loadMemory(_, color, index)\n    if permissionCheck(color) then\n        self.editInput({index=0, value=tableImageData[index].name})\n        self.editInput({index=1, value=tableImageData[index].url})\n        updateSurface()\n        broadcastToAll(\"Table Image Loaded\", {0.2,0.9,0.2})\n    end\nend\n\n--Deletes table surface\nfunction click_deleteMemory(_, color, index)\n    if permissionCheck(color) then\n        table.remove(tableImageData, index)\n        self.clearButtons()\n        createOpenCloseButton()\n        createSurfaceButtons()\n        --createScaleButtons()\n        broadcastToAll(\"Element Removed from Memory\", {0.2,0.9,0.2})\n    end\nend\n\n--Updates surface from the values in the input field\nfunction updateSurface()\n    local customInfo = obj_surface.getCustomObject()\n    customInfo.diffuse = self.getInputs()[2].value\n    obj_surface.setCustomObject(customInfo)\n    obj_surface = obj_surface.reload()\n    Wait.frames(disableElements, 2)\nend\n\nfunction disableElements()\n    for _, guid in ipairs(ref_noninteractable) do\n        local obj = getObjectFromGUID(guid)\n        if obj then\n            obj.interactable = false --RIC\n        end\n    end\nend\n\n\n--Table Scale control\n\n\n\n--Applies Scale to table pieces\nfunction click_applyScale(_, color)\n    if permissionCheck(color) then\n        local newWidth = tonumber(self.getInputs()[3].value)\n        local newDepth = tonumber(self.getInputs()[4].value)\n        if type(newWidth) ~= \"number\" then\n            broadcastToAll(\"Invalid Width\", {0.9,0.2,0.2})\n            return\n        elseif type(newDepth) ~= \"number\" then\n            broadcastToAll(\"Invalid Depth\", {0.9,0.2,0.2})\n            return\n        elseif newWidth<0.1 or newDepth<0.1 then\n            broadcastToAll(\"Scale cannot go below 0.1\", {0.9,0.2,0.2})\n            return\n        elseif newWidth>12 or newDepth>12 then\n            broadcastToAll(\"Scale should not go over 12 (world size limitation)\", {0.9,0.2,0.2})\n            return\n        else\n            changeTableScale(math.abs(newWidth), math.abs(newDepth))\n            broadcastToAll(\"Scale applied.\", {0.2,0.9,0.2})\n        end\n    end\nend\n\n--Checks/unchecks move box for hands\nfunction click_checkMove(_, color)\n    if permissionCheck(color) then\n        local find_func = function(o) return o.click_function==\"click_checkMove\" end\n        if checkData.move == true then\n            checkData.move = false\n            local buttonEntry = findButton(self, find_func)\n            self.editButton({index=buttonEntry.index, label=\"\"})\n        else\n            checkData.move = true\n            local buttonEntry = findButton(self, find_func)\n            self.editButton({index=buttonEntry.index, label=string.char(10008)})\n        end\n    end\nend\n\n--Checks/unchecks scale box for hands\n--This button was disabled for technical reasons\n--[[\nfunction click_checkScale(_, color)\n    if permissionCheck(color) then\n        local find_func = function(o) return o.click_function==\"click_checkScale\" end\n        if checkData.scale == true then\n            checkData.scale = false\n            local buttonEntry = findButton(self, find_func)\n            self.editButton({index=buttonEntry.index, label=\"\"})\n        else\n            checkData.scale = true\n            local buttonEntry = findButton(self, find_func)\n            self.editButton({index=buttonEntry.index, label=string.char(10008)})\n        end\n    end\nend\n]]\n\n--Alters scale of elements and moves them\nfunction changeTableScale(width, depth)\n    --Scaling factors used to translate scale to position offset\n    local width2pos = (width-1) * 18\n    local depth2pos = (depth-1) * 18\n\n    --Hand zone movement\n    if checkData.move == true then\n        for _, pc in ipairs(ref_playerColor) do\n            if Player[pc].getHandCount() > 0 then\n                moveHandZone(Player[pc], width2pos, depth2pos)\n            end\n        end\n    end\n    --Hand zone scaling\n    --The button to enable this was disabled for technical reasons\n    if checkData.scale == true then\n        for _, pc in ipairs(ref_playerColor) do\n            if Player[pc].getHandCount() > 0 then\n                scaleHandZone(Player[pc], width, depth)\n            end\n        end\n    end\n\n    --Resizing table elements\n    obj_side_top.setScale({width, 1, 1})\n    obj_side_bot.setScale({width, 1, 1})\n    obj_side_lef.setScale({depth, 1, 1})\n    obj_side_rig.setScale({depth, 1, 1})\n    obj_surface.setScale({width, 1, depth})\n\n    --Moving table elements to accomodate new scale\n    obj_side_lef.setPosition({-width2pos,tableHeightOffset,0})\n    obj_side_rig.setPosition({ width2pos,tableHeightOffset,0})\n    --obj_side_top.setPosition({0,tableHeightOffset, depth2pos}) --RIC\n    obj_side_bot.setPosition({0,tableHeightOffset,-depth2pos})\n    obj_leg1.setPosition({-width2pos,tableHeightOffset,-depth2pos})\n    obj_leg2.setPosition({-width2pos,tableHeightOffset, depth2pos})\n    obj_leg3.setPosition({ width2pos,tableHeightOffset, depth2pos})\n    obj_leg4.setPosition({ width2pos,tableHeightOffset,-depth2pos})\n    self.setPosition(obj_leg4.positionToWorld({-22.12, 8.74,-19.16}))\n    --Only enabled when changing tableHeightOffset\n    --obj_surface.setPosition({0,tableHeightOffset,0})\nend\n\n--Move hand zone, p=player reference, facts are scaling factors\nfunction moveHandZone(p, width2pos, depth2pos)\n    local widthX = obj_side_rig.getPosition().x\n    local depthZ = obj_side_top.getPosition().z\n    for i=1, p.getHandCount() do\n        local handT = p.getHandTransform()\n        local pos = handT.position\n        local y = handT.rotation.y\n\n        if y<45 or y>320 or y>135 and y<225 then\n            if pos.z > 0 then\n                pos.z = pos.z + depth2pos - depthZ\n            else\n                pos.z = pos.z - depth2pos + depthZ\n            end\n        else\n            if pos.x > 0 then\n                pos.x = pos.x + width2pos - widthX\n            else\n                pos.x = pos.x - width2pos + widthX\n            end\n        end\n\n        --Only enabled when changing tableHeightOffset\n        --pos.y = tableHeightOffset + 14\n\n        handT.position = pos\n        p.setHandTransform(handT, i)\n    end\nend\n\n\n---Scales hand zones, p=player reference, facts are scaling factors\nfunction scaleHandZone(p, width, depth)\n    local widthFact = width / obj_side_top.getScale().x\n    local depthFact = depth / obj_side_lef.getScale().x\n    for i=1, p.getHandCount() do\n        local handT = p.getHandTransform()\n        local scale = handT.scale\n        local y = handT.rotation.y\n        if y<45 or y>320 or y>135 and y<225 then\n            scale.x = scale.x * widthFact\n        else\n            scale.x = scale.x * depthFact\n        end\n        handT.scale = scale\n        p.setHandTransform(handT, i)\n    end\nend\n\n\n\n--Information gathering\n\n\n\n--Checks if a color is promoted or host\nfunction permissionCheck(color)\n    if Player[color].host==true or Player[color].promoted==true then\n        return true\n    else\n        return false\n    end\nend\n\n--Locates a string saved within memory file\nfunction findInImageDataIndex(...)\n    for _, str in ipairs({...}) do\n        for i, v in ipairs(tableImageData) do\n            if v.url == str or v.name == str then\n                return i\n            end\n        end\n    end\n    return nil\nend\n\n--Round number (num) to the Nth decimal (dec)\nfunction round(num, dec)\n  local mult = 10^(dec or 0)\n  return math.floor(num * mult + 0.5) / mult\nend\n\n--Locates a button with a helper function\nfunction findButton(obj, func)\n    if func==nil then error(\"No func supplied to findButton\") end\n    for _, v in ipairs(obj.getButtons()) do\n        if func(v) then\n            return v\n        end\n    end\n    return nil\nend\n\n\n\n--Creation of buttons/inputs\n\n\n\nfunction createOpenCloseButton()\n    local tooltip = \"Open Table Control Panel\"\n\n    local _label=\"Table and\\nTerrain\\nControls\"\n    local label=\"OPEN\\n\".._label\n    if controlActive then\n        tooltip = \"Close Table Control Panel\"\n        label=\"CLOSE\\n\".._label\n    end\n    self.createButton({\n        label=label, click_function=\"click_toggleControl\", function_owner=self,\n        position={0,0.2,0.4}, rotation={-45,0,0}, height=600, width=600, scale={0.7,0.7,0.7},\n        color={1,1,1,1}, tooltip=tooltip\n    })\nend\n\nfunction createSurfaceInput()\n    local currentURL = obj_surface.getCustomObject().diffuse\n    local nickname = \"\"\n    if findInImageDataIndex(currentURL) ~= nil then\n        nickname = tableImageData[findInImageDataIndex(currentURL)].name\n    end\n    self.createInput({\n        label=\"Nickname\", input_function=\"none\", function_owner=self,\n        alignment=3, position={0,0,2}, height=224, width=4000,\n        font_size=200, tooltip=\"Enter nickname for table image (only used for save)\",\n        value=nickname\n    })\n    self.createInput({\n        label=\"URL\", input_function=\"none\", function_owner=self,\n        alignment=3, position={0,0,3}, height=224, width=4000,\n        font_size=200, tooltip=\"Enter URL for tabletop image\",\n        value=currentURL\n    })\nend\n\nfunction createSurfaceButtons()\n    --Label\n    self.createButton({\n        label=\"Area of engagement image\", click_function=\"none\",\n        position={0,0,1}, height=0, width=0, font_size=300, font_color={1,1,1}\n    })\n    --Functional\n    self.createButton({\n        label=\"Apply Image\\nTo Table\", click_function=\"click_applySurface\",\n        function_owner=self, tooltip=\"Apply URL as table image\",\n        position={2,0,4}, height=440, width=1400, font_size=200,\n    })\n    self.createButton({\n        label=\"Save Image\\nTo Memory\", click_function=\"click_saveSurface\",\n        function_owner=self, tooltip=\"Record URL into memory (requires nickname)\",\n        position={-2,0,4}, height=440, width=1400, font_size=200,\n    })\n    --Label\n    self.createButton({\n        label=\"Load From Memory\", click_function=\"none\",\n        position={0,0,5.5}, height=0, width=0, font_size=300, font_color={1,1,1}\n    })\n    --Saves, created dynamically from memory file\n    for i, memoryEntry in ipairs(tableImageData) do\n        --Load\n        local funcName = i..\"loadMemory\"\n        local func = function(x,y) click_loadMemory(x,y,i) end\n        self.setVar(funcName, func)\n        self.createButton({\n            label=memoryEntry.name, click_function=funcName,\n            function_owner=self, tooltip=memoryEntry.url, font_size=200,\n            position={-0.6,0,6.5+0.5*(i-1)}, height=240, width=3300,\n        })\n        --Delete\n        local funcName = i..\"deleteMemory\"\n        local func = function(x,y) click_deleteMemory(x,y,i) end\n        self.setVar(funcName, func)\n        self.createButton({\n            label=\"DELETE\", click_function=funcName,\n            function_owner=self, tooltip=\"\",\n            position={3.6,0,6.5+0.5*(i-1)}, height=240, width=600,\n            font_size=160, font_color={1,0,0}, color={0.8,0.8,0.8}\n        })\n    end\nend\n\nfunction enableExtractMenu()\n    if exportObj ~= nil then\n        exportObj.setVar(\"YNButtonsExtract\", false)\n        local tmpTbl=exportObj.getTable(\"extractBtn\")\n        tmpTbl.label=\"EXTRACT\\nTERRAIN\"\n        exportObj.setTable(\"extractBtn\", tmpTbl)\n        exportObj.setVar(\"YNButtonsDelete\", false)\n        local tmpTbl=exportObj.getTable(\"deleteBtn\")\n        tmpTbl.label=\"DELETE\\nTERRAIN\"\n        exportObj.setTable(\"deleteBtn\", tmpTbl)\n        --exportObj.call(\"createMenu\") -- RIC\n\n    end\nend\n\nfunction disableExtractMenu()\n    if exportObj ~= nil then\n        exportObj.clearButtons()\n    end\nend\n\n\nfunction createScaleInput()\n    self.createInput({\n        label=string.char(8644), input_function=\"none\", function_owner=self,\n        alignment=3, position={-8.5,0,2}, height=224, width=400,\n        font_size=200, tooltip=\"Table Width\",\n        value=round(obj_side_top.getScale().x, 1)\n    })\n    self.createInput({\n        label=string.char(8645), input_function=\"none\", function_owner=self,\n        alignment=3, position={-7.5,0,2}, height=224, width=400,\n        font_size=200, tooltip=\"Table Depth\",\n        value=round(obj_side_lef.getScale().x, 1)\n    })\nend\n\nfunction createScaleButtons()\n    --Labels\n    self.createButton({\n        label=\"Table Scale\", click_function=\"none\",\n        position={-8,0,1}, height=0, width=0, font_size=300, font_color={1,1,1}\n    })\n    self.createButton({\n        label=string.char(8644)..\"            \"..string.char(8645),\n        click_function=\"none\",\n        position={-8,0,2}, height=0, width=0, font_size=300, font_color={1,1,1}\n    })\n    self.createButton({\n        label=\"Move Hands:\", click_function=\"none\",\n        position={-8.3,0,3}, height=0, width=0, font_size=200, font_color={1,1,1}\n    })\n    --Disabled due to me removing the feature for technical reasons\n    --[[\n    self.createButton({\n        label=\"Scale Hands:\", click_function=\"none\",\n        position={-8.3,0,4}, height=0, width=0, font_size=200, font_color={1,1,1}\n    })\n    ]]\n    --Checkboxes\n    local label = \"\"\n    if checkData.move == true then label = string.char(10008) end\n    self.createButton({\n        label=label, click_function=\"click_checkMove\",\n        function_owner=self, tooltip=\"Check to move hands when table is rescaled\",\n        position={-6.8,0,3}, height=224, width=224, font_size=200,\n    })\n    --[[\n    local label = \"\"\n    if checkData.scale == true then label = string.char(10008) end\n    self.createButton({\n        label=label, click_function=\"click_checkScale\",\n        function_owner=self, tooltip=\"Check to scale the width of hands when table is rescaled\",\n        position={-6.8,0,4}, height=224, width=224, font_size=200,\n    })\n    ]]\n    --Apply button\n    self.createButton({\n        label=\"Apply Scale\", click_function=\"click_applyScale\",\n        function_owner=self, tooltip=\"Apply width/depth to table\",\n        position={-8,0,4}, height=440, width=1400, font_size=200,\n    })\nend\n\n\n\n\n\n--Data tables\n\n\nref_noninteractable2 = {}\n\nref_noninteractable = {\n    \"afc863\",\"c8edca\",\"393bf7\",\"12c65e\",\"f938a2\",\"9f95fd\",\"35b95f\",\n    \"5af8f2\",\"4ee1f2\", \"28865a\",\"bd69bd\"\n}\n\nref_playerColor = {\n    \"White\", \"Brown\", \"Red\", \"Orange\", \"Yellow\",\n    \"Green\", \"Teal\", \"Blue\", \"Purple\", \"Pink\", \"Black\"\n}\n\n--Dummy function, absorbs unwanted triggers\nfunction none() end",
      "LuaScriptState": "{\"cd\":{\"move\":true,\"scale\":false},\"tid\":[{\"name\":\"Urban 1\",\"url\":\"http://cloud-3.steamusercontent.com/ugc/849339809539335607/A315686492591FD0DE01FE60C418CC54AD0F8719/\"},{\"name\":\"Urban 2\",\"url\":\"http://cloud-3.steamusercontent.com/ugc/849339809539324370/51C21480B786A9216BA5EDB44E2A10E35DDF3601/\"},{\"name\":\"Desert 1\",\"url\":\"http://cloud-3.steamusercontent.com/ugc/849339809539332522/5289A4E95F8A2C03C1CD552D9A0A4CC98BEEBE44/\"},{\"name\":\"Desert 2\",\"url\":\"http://cloud-3.steamusercontent.com/ugc/849339809539334528/422A466AB6D8B919E18852C90CFFF582E0A47F35/\"},{\"name\":\"Desert River\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477311500/010B988AA13234C915CF7ADB95B9993BF08FDD1A/\"},{\"name\":\"Grass 1\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477318654/C73F9B4F486C47CB2808138069F1DBBBE6B71B14/\"},{\"name\":\"Grass 2\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477323114/3B56A233BA2F93E954BBBF0064208B973EC68727/\"},{\"name\":\"Rubble Grass\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477337108/BED38DF4AAD4F57AC10A6327DD5822F0057B5C4B/\"},{\"name\":\"Snow\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477340711/9634494CC699D1D188D3F0E7FD4737167552F7DE/\"},{\"name\":\"Ice\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477345048/37A2E39D5099828A4057DECC53804AC36276A669/\"},{\"name\":\"Lava\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477355670/DC4B8F6E22A832A6E3BAA3F8D6C95F433D4D475B/\"},{\"name\":\"Lunar\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477358932/73C74608E61F99D1306818739324FFB6DB3FF8C1/\"},{\"name\":\"Chaos\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477362115/1B6EA548941B8648DD382A3FA4FAA922FB1B218B/\"},{\"name\":\"Nurgle\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477364563/66F3F747C31150EC7C96B7F5065A797A7B5856A5/\"},{\"name\":\"Necro\",\"url\":\"https://steamuserimages-a.akamaihd.net/ugc/961990768477367523/F93D77442BCED2AED5326D982B80F742DDBF1ADE/\"},{\"name\":\"KT Map 1\",\"url\":\"https://image.noelshack.com/fichiers/2018/31/2/1533054432-plateau-modulable.jpg\"},{\"name\":\"KT Map 2\",\"url\":\"https://image.noelshack.com/fichiers/2018/31/2/1533054947-plateau-modulable-02.jpg\"},{\"name\":\"KT Map 3\",\"url\":\"https://image.noelshack.com/fichiers/2018/31/3/1533128138-plateau-modulable-03.jpg\"},{\"name\":\"KT Map 4\",\"url\":\"https://image.noelshack.com/fichiers/2018/31/3/1533128387-plateau-modulable-04.jpg\\r\\n\"},{\"name\":\"KT Map 5\",\"url\":\"https://image.noelshack.com/fichiers/2018/32/1/1533578702-plateau-modulable-05.jpg\"},{\"name\":\"KT Map 6\",\"url\":\"https://image.noelshack.com/fichiers/2018/32/2/1533629781-ground-text-01.jpg\"},{\"name\":\"KT Map 7\",\"url\":\"https://image.noelshack.com/fichiers/2018/32/2/1533629781-ground-text-02a.jpg\"},{\"name\":\"KT Map 8\",\"url\":\"https://image.noelshack.com/fichiers/2018/32/2/1533629781-ground-text-02b.jpg\"},{\"name\":\"KT Map 9\",\"url\":\"https://image.noelshack.com/fichiers/2018/32/2/1533630161-ground-text-03a.jpg\"},{\"name\":\"KT Map 10\",\"url\":\"https://image.noelshack.com/fichiers/2018/32/2/1533630320-ground-text-04a.jpg\"},{\"name\":\"KT Map 11\",\"url\":\"https://image.noelshack.com/fichiers/2018/32/2/1533632744-ground-text-05a.jpg\"},{\"name\":\"Areonautica 1\",\"url\":\"http://cloud-3.steamusercontent.com/ugc/775105953850805381/4DF8125A0A281F43435E51A35582E5C82DA9C923/\"},{\"name\":\"Areonautica 2\",\"url\":\"http://cloud-3.steamusercontent.com/ugc/775105953850802229/4CEA70E3D800464DE86A92F94A87895981AA2396/\"}]}",
      "GUID": "bd69bd"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": -58.0,
        "posY": -1.0,
        "posZ": 0.0,
        "rotX": 0.0,
        "rotY": 270.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Instructions",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.627,
        "g": 0.124989636,
        "b": 0.941
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "\r\noffsetX=16\r\noffsetY=2\r\noffsetZ=0\r\nscaleBtn={2,2,2}\r\nfontSize=340\r\nfontColor={1,1,1}\r\nbtnColor={0.5,0,0.5}\r\ninfoTerrainBtn={\r\n    label=\"BASE AND\\nCHARACTER SHEET\\nINSTRUCTIONS\", click_function=\"showTerrainInstructions\", function_owner=self,\r\n    position={offsetX,offsetY,offsetZ}, rotation={0,0,0}, height=2000, width=3000,\r\n    font_size=fontSize, color=btnColor, font_color=fontColor, scale=scaleBtn\r\n}\r\ninfoGameBtn={\r\n    label=\"GAME\\n\\nINSTRUCTIONS\", click_function=\"showGameInstructions\", function_owner=self,\r\n    position={-offsetX,offsetY,offsetZ}, rotation={0,0,0}, height=2000, width=3000,\r\n    font_size=fontSize, color=btnColor, font_color=fontColor, scale=scaleBtn\r\n}\r\nfunction onLoad(save_state)\r\n    self.setRotation({0,270,0})\r\n    self.setPosition({-58,-1,0})\r\n    self.createButton(infoTerrainBtn)\r\n    self.createButton(infoGameBtn)\r\nend\r\nfunction showTerrainInstructions()\r\n    Global.call(\"openTerrain\")\r\nend\r\nfunction showGameInstructions()\r\n    Global.call(\"openGame\")\r\nend",
      "LuaScriptState": "",
      "GUID": "d553e3"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 4.0,
        "posY": 0.900000036,
        "posZ": 31.0,
        "rotX": -2.4465985E-06,
        "rotY": 0.0,
        "rotZ": 3.149201E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D12-Blue",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3058885,
        "g": 0.372555166,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": -34.8085251,
            "posY": 3.44648385,
            "posZ": -29.3561249,
            "rotX": 26.57,
            "rotY": 180.0,
            "rotZ": 72.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/791986922388899122/097F2E262A385A736B2DB3A2FE40BCFC8907D76F/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 4
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9749b3",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 72.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 144.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -72.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 180.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -144.0
              }
            },
            {
              "Value": 7,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 36.0
              }
            },
            {
              "Value": 8,
              "Rotation": {
                "x": -90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 9,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 10,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 108.0
              }
            },
            {
              "Value": 11,
              "Rotation": {
                "x": -27.0,
                "y": 108.0,
                "z": -36.0
              }
            },
            {
              "Value": 12,
              "Rotation": {
                "x": -27.0,
                "y": 36.0,
                "z": -108.0
              }
            }
          ]
        }
      ],
      "GUID": "420627"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 4.0,
        "posY": 1.0,
        "posZ": 27.0,
        "rotX": -2.4465985E-06,
        "rotY": 0.0,
        "rotZ": 3.14920135E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D12-Black",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": -34.49279,
            "posY": 3.418555,
            "posZ": -28.97965,
            "rotX": 26.57,
            "rotY": 180.0,
            "rotZ": 72.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/791986922388899266/784AE2A7CE7CA3AD59440D119E9819D5CCA0ABAF/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 4
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "c8cd0b",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 72.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 144.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -72.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 180.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -144.0
              }
            },
            {
              "Value": 7,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 36.0
              }
            },
            {
              "Value": 8,
              "Rotation": {
                "x": -90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 9,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 10,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 108.0
              }
            },
            {
              "Value": 11,
              "Rotation": {
                "x": -27.0,
                "y": 108.0,
                "z": -36.0
              }
            },
            {
              "Value": 12,
              "Rotation": {
                "x": -27.0,
                "y": 36.0,
                "z": -108.0
              }
            }
          ]
        }
      ],
      "GUID": "b9c441"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 4.0,
        "posY": 1.0,
        "posZ": 29.0,
        "rotX": -2.4465985E-06,
        "rotY": 0.0,
        "rotZ": 3.14920135E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D12-White",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": -34.49279,
            "posY": 3.418555,
            "posZ": -28.97965,
            "rotX": 26.57,
            "rotY": 180.0,
            "rotZ": 72.0,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/791986922388899475/4B3C697819A61B72057C753B253E4DBA66580CDC/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 4
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "c8cd0b",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 72.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 144.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -72.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 180.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -144.0
              }
            },
            {
              "Value": 7,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 36.0
              }
            },
            {
              "Value": 8,
              "Rotation": {
                "x": -90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 9,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 10,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 108.0
              }
            },
            {
              "Value": 11,
              "Rotation": {
                "x": -27.0,
                "y": 108.0,
                "z": -36.0
              }
            },
            {
              "Value": 12,
              "Rotation": {
                "x": -27.0,
                "y": 36.0,
                "z": -108.0
              }
            }
          ]
        }
      ],
      "GUID": "fbf744"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5,
        "posY": -3.0,
        "posZ": 115.001816,
        "rotX": 4.03593367E-05,
        "rotY": 89.9967041,
        "rotZ": 1.53038072E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#6 6x6 Vanguard Strike",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.11799065,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"081c36\":{\"lock\":true,\"pos\":{\"x\":-27.61,\"y\":2.5,\"z\":-8.8586},\"rot\":{\"x\":0,\"y\":315,\"z\":0}},\"ed1bef\":{\"lock\":true,\"pos\":{\"x\":-11.36,\"y\":2.5,\"z\":8.8271},\"rot\":{\"x\":0,\"y\":315,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 8.14,
            "posY": 2.5,
            "posZ": 8.8271,
            "rotX": 0.0,
            "rotY": 315.0,
            "rotZ": 0.0,
            "scaleX": 1.00004768,
            "scaleY": 1.0,
            "scaleZ": 39.9951973
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999972,
            "b": 0.0939997062
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ed1bef"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -8.11,
            "posY": 2.5,
            "posZ": -8.8586,
            "rotX": 0.0,
            "rotY": 315.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 40.0
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289987,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "081c36"
        }
      ],
      "GUID": "761243"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5,
        "posY": -3.0,
        "posZ": 119.001755,
        "rotX": 4.46827435E-05,
        "rotY": 90.0009155,
        "rotZ": -3.00993452E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#5 6x6 Front-Line Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.11799065,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"1b9973\":{\"lock\":true,\"pos\":{\"x\":-37.5,\"y\":2.5,\"z\":18},\"rot\":{\"x\":0,\"y\":288.43,\"z\":0}},\"658298\":{\"lock\":true,\"pos\":{\"x\":-37.5,\"y\":2.5,\"z\":-18},\"rot\":{\"x\":0,\"y\":71.57,\"z\":0}},\"6e678e\":{\"lock\":true,\"pos\":{\"x\":-1.5,\"y\":2.5,\"z\":18},\"rot\":{\"x\":0,\"y\":71.57,\"z\":0}},\"d11a30\":{\"lock\":true,\"pos\":{\"x\":-1.5,\"y\":2.5,\"z\":-18},\"rot\":{\"x\":0,\"y\":108.43,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0,
            "posY": 2.5,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 288.43,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 18.98
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998578,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "1b9973"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0,
            "posY": 2.5,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 71.57,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 18.98
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999994054,
            "b": 0.09399941
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "658298"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 18.0,
            "posY": 2.5,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 71.57,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 18.98
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998578,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6e678e"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 18.0,
            "posY": 2.5,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 108.429993,
            "rotZ": 0.0,
            "scaleX": 1.00002384,
            "scaleY": 1.0,
            "scaleZ": 18.98
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999994054,
            "b": 0.09399941
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d11a30"
        }
      ],
      "GUID": "765e69"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5,
        "posY": -3.0,
        "posZ": 123.00174,
        "rotX": -3.00671019E-07,
        "rotY": 90.003,
        "rotZ": -4.52781824E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#4 6x6 Hammer and Anvil",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.11799065,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+12,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"2e6473\":{\"lock\":true,\"pos\":{\"x\":-24,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"f454ae\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -12.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999993,
            "b": 0.0939992741
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2e6473"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 12.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998637,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f454ae"
        }
      ],
      "GUID": "5745a4"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5,
        "posY": -3.0,
        "posZ": 127.00174,
        "rotX": 6.572983E-05,
        "rotY": 89.99728,
        "rotZ": 4.248446E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#3 6x6 Search and Destroy",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.11799065,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"0e216d\":{\"lock\":true,\"pos\":{\"x\":7.5,\"y\":2.5,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"3448fe\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"3f60c7\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":-27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"51ee2f\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.51,\"z\":0},\"rot\":{\"x\":0.0799,\"y\":89.9897,\"z\":359.9831}},\"580d88\":{\"lock\":true,\"pos\":{\"x\":-46.5,\"y\":2.5,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -27.0,
            "posY": 2.5,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.099999465,
            "b": 0.09399945
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "580d88"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": -27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998578,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3f60c7"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": 27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.099999465,
            "b": 0.09399945
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3448fe"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 27.0,
            "posY": 2.5,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.000046,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998578,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0e216d"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.51,
            "posZ": 0.0,
            "rotX": 0.0799,
            "rotY": 89.9897,
            "rotZ": 359.9831,
            "scaleX": 18.0,
            "scaleY": 2.0,
            "scaleZ": 18.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.5,
            "g": 0.5,
            "b": 0.5
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "51ee2f"
        }
      ],
      "GUID": "86ddab"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.500839,
        "posY": -3.0,
        "posZ": 131.00174,
        "rotX": -3.06074835E-05,
        "rotY": 89.99569,
        "rotZ": 2.59757348E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#2 6x6 Dawn of War",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.11799065,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"a44dd1\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":-12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"ee860d\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128999233,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a44dd1"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999954,
            "b": 0.09399951
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ee860d"
        }
      ],
      "GUID": "734a7b"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5,
        "posY": -3.0,
        "posZ": 135.001724,
        "rotX": -3.524245E-05,
        "rotY": 89.99626,
        "rotZ": 7.621799E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#1 6x6 Spearhead Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.11799065,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"23c6f8\":{\"lock\":false,\"pos\":{\"x\":-7.5,\"y\":1.9,\"z\":0},\"rot\":{\"x\":0,\"y\":359.986,\"z\":0.0924}},\"7a9866\":{\"lock\":true,\"pos\":{\"x\":-31.5,\"y\":2.5,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 11.9956732,
            "posY": 1.96148157,
            "posZ": 2.18174137E-05,
            "rotX": 7.18762649E-08,
            "rotY": 359.986,
            "rotZ": 0.340340853,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999954,
            "b": 0.09399951
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "23c6f8"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -12.0,
            "posY": 2.5,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128999174,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7a9866"
        }
      ],
      "GUID": "a9c405"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5008,
        "posY": -3.0,
        "posZ": 90.0018845,
        "rotX": -5.21951233E-06,
        "rotY": 89.9965744,
        "rotZ": 1.50044489E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#6 8x6 Vanguard Strike",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.17199111
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"081c36\":{\"lock\":true,\"pos\":{\"x\":-29.63,\"y\":2.5,\"z\":-7.4},\"rot\":{\"x\":0,\"y\":306.87,\"z\":0}},\"ed1bef\":{\"lock\":true,\"pos\":{\"x\":-9.37,\"y\":2.5,\"z\":7.4016},\"rot\":{\"x\":0,\"y\":306.87,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -10.13,
            "posY": 2.5,
            "posZ": -7.4,
            "rotX": 0.0,
            "rotY": 306.87,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 47.3403625
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289987,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "081c36"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 10.13,
            "posY": 2.5,
            "posZ": 7.4016,
            "rotX": 0.0,
            "rotY": 306.87,
            "rotZ": 0.0,
            "scaleX": 1.00004745,
            "scaleY": 1.0,
            "scaleZ": 48.0587578
          },
          "Nickname": "#6: Vanguard Strike",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999972,
            "b": 0.0939997062
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ed1bef"
        }
      ],
      "GUID": "8206e4"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5008,
        "posY": -3.0,
        "posZ": 94.0018845,
        "rotX": 3.84770574E-05,
        "rotY": 90.0010147,
        "rotZ": -4.08413052E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#5 8x6 Front-Line Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.17199111
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"658298\":{\"lock\":true,\"pos\":{\"x\":-24,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":75,\"z\":0}},\"6e678e\":{\"lock\":true,\"pos\":{\"x\":24,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":75,\"z\":0}},\"9d478e\":{\"lock\":true,\"pos\":{\"x\":-24,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":285,\"z\":0}},\"d11a30\":{\"lock\":true,\"pos\":{\"x\":24,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":285,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 24.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 75.0,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 24.8
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289987,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6e678e"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 24.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 285.0,
            "rotZ": 0.0,
            "scaleX": 1.00002384,
            "scaleY": 1.0,
            "scaleZ": 24.8
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999954,
            "b": 0.09399951
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "d11a30"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -24.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 75.0,
            "rotZ": 0.0,
            "scaleX": 1.00005341,
            "scaleY": 1.0,
            "scaleZ": 24.8
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999954,
            "b": 0.09399951
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "658298"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -24.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 285.0,
            "rotZ": 0.0,
            "scaleX": 1.00002384,
            "scaleY": 1.0,
            "scaleZ": 24.8
          },
          "Nickname": "#5: Front-Line Assault",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.1289987,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9d478e"
        }
      ],
      "GUID": "8936fa"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5008,
        "posY": -3.0,
        "posZ": 98.0018845,
        "rotX": 2.01188886E-05,
        "rotY": 90.0024948,
        "rotZ": -3.45171065E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#4 8x6 Hammer and Anvil",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.17199111
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+12,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"2e6473\":{\"lock\":true,\"pos\":{\"x\":-24,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"f454ae\":{\"lock\":true,\"pos\":{\"x\":0,\"y\":2,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -12.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.0999993,
            "b": 0.0939992741
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2e6473"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 12.0,
            "posY": 2.0,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 36.0
          },
          "Nickname": "#4: Hammer and Anvil",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998637,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228789723/30C5477595CD1E06E955200433657907C192EA8A/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f454ae"
        }
      ],
      "GUID": "fc0284"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5008,
        "posY": -3.0,
        "posZ": 102.001884,
        "rotX": 4.18651143E-05,
        "rotY": 89.99694,
        "rotZ": 1.83188549E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#3 8x6 Search and Destroy",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.17199111
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"0e216d\":{\"lock\":true,\"pos\":{\"x\":13.5,\"y\":2.5,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"3448fe\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"3f60c7\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":-27},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"51ee2f\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.51,\"z\":0},\"rot\":{\"x\":0,\"y\":0,\"z\":0}},\"580d88\":{\"lock\":true,\"pos\":{\"x\":-52.5,\"y\":2.5,\"z\":0},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 33.0,
            "posY": 2.5,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00005531,
            "scaleY": 1.0,
            "scaleZ": 15.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998816,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "0e216d"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": 27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999985,
            "b": 0.0939998254
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3448fe"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.51,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 18.0,
            "scaleY": 2.0,
            "scaleZ": 18.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.5,
            "g": 0.5,
            "b": 0.5
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228557194/2C2FD3DC79EE5E844D6BFAA49ECF6B21C72A246A/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": false,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "51ee2f"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -33.0,
            "posY": 2.5,
            "posZ": 0.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 15.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999985,
            "b": 0.0939998254
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "580d88"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": -27.0,
            "rotX": 0.0,
            "rotY": 0.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 9.0
          },
          "Nickname": "#3: Search and Destroy",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998816,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "3f60c7"
        }
      ],
      "GUID": "a2379d"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5008,
        "posY": -3.0,
        "posZ": 106.001884,
        "rotX": -1.54771915E-05,
        "rotY": 89.99569,
        "rotZ": -1.89308287E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#2 8x6 Dawn of War",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.17199111
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"a44dd1\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":-12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}},\"ee860d\":{\"lock\":true,\"pos\":{\"x\":-19.5,\"y\":2.5,\"z\":12},\"rot\":{\"x\":0,\"y\":90,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": -12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 48.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998816,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "a44dd1"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 0.0,
            "posY": 2.5,
            "posZ": 12.0,
            "rotX": 0.0,
            "rotY": 90.0,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 48.0
          },
          "Nickname": "#2: Dawn of War",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999966,
            "b": 0.09399965
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "ee860d"
        }
      ],
      "GUID": "5ba086"
    },
    {
      "Name": "Bag",
      "Transform": {
        "posX": 112.5,
        "posY": -3.0,
        "posZ": 110.001991,
        "rotX": 2.21051432E-05,
        "rotY": 89.9964142,
        "rotZ": 6.105968E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "#1 8x6 Spearhead Assault",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.17199111
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "function updateSave()\r\n    local data_to_save = {[\"ml\"]=memoryList}\r\n    saved_data = JSON.encode(data_to_save)\r\n    self.script_state = saved_data\r\nend\r\n\r\nfunction onload(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        --Set up information off of loaded_data\r\n        memoryList = loaded_data.ml\r\n    else\r\n        --Set up information for if there is no saved saved data\r\n        memoryList = {}\r\n    end\r\n\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\nend\r\n\r\n\r\n--Beginning Setup\r\n\r\n\r\n--Make setup button\r\nfunction createSetupButton()\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Triggered by setup button,\r\nfunction buttonClick_setup()\r\n    memoryListBackup = duplicateTable(memoryList)\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createButtonsOnAllObjects()\r\n    createSetupActionButtons()\r\nend\r\n\r\n--Creates selection buttons on objects\r\nfunction createButtonsOnAllObjects()\r\n    local howManyButtons = 0\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        if obj ~= self then\r\n            local dummyIndex = howManyButtons\r\n            --On a normal bag, the button positions aren't the same size as the bag.\r\n            globalScaleFactor = 1.25 * 1/self.getScale().x\r\n            --Super sweet math to set button positions\r\n            local selfPos = self.getPosition()\r\n            local objPos = obj.getPosition()\r\n            local deltaPos = findOffsetDistance(selfPos, objPos, obj)\r\n            local objPos = rotateLocalCoordinates(deltaPos, self)\r\n            objPos.x = -objPos.x * globalScaleFactor\r\n            objPos.y = objPos.y * globalScaleFactor\r\n            objPos.z = objPos.z * globalScaleFactor\r\n            --Offset rotation of bag\r\n            local rot = self.getRotation()\r\n            rot.y = -rot.y + 180\r\n            --Create function\r\n            local funcName = \"selectButton_\" .. howManyButtons\r\n            local func = function() buttonClick_selection(dummyIndex, obj) end\r\n            self.setVar(funcName, func)\r\n            self.createButton({\r\n                click_function=funcName, function_owner=self,\r\n                position=objPos, rotation=rot, height=1000, width=1000,\r\n                color={0.75,0.25,0.25,0.6},\r\n            })\r\n            howManyButtons = howManyButtons + 1\r\n        end\r\n    end\r\nend\r\n\r\n--Creates submit and cancel buttons\r\nfunction createSetupActionButtons()\r\n    self.createButton({\r\n        label=\"Cancel\", click_function=\"buttonClick_cancel\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Submit\", click_function=\"buttonClick_submit\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=1100,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Reset\", click_function=\"buttonClick_reset\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n\r\n--During Setup\r\n\r\n\r\n--Checks or unchecks buttons\r\nfunction buttonClick_selection(index, obj)\r\n    local color = {0,1,0,0.6}\r\n    if memoryList[obj.getGUID()] == nil then\r\n        self.editButton({index=index, color=color})\r\n        --Adding pos/rot to memory table\r\n        local pos, rot = obj.getPosition(), obj.getRotation()\r\n        --I need to add it like this or it won't save due to indexing issue\r\n        memoryList[obj.getGUID()] = {\r\n            pos={x=round(pos.x,4), y=round(pos.y,4), z=round(pos.z,4)},\r\n            rot={x=round(rot.x,4), y=round(rot.y,4), z=round(rot.z,4)},\r\n            lock=obj.getLock()\r\n        }\r\n        obj.highlightOn({0,1,0})\r\n    else\r\n        color = {0.75,0.25,0.25,0.6}\r\n        self.editButton({index=index, color=color})\r\n        memoryList[obj.getGUID()] = nil\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Cancels selection process\r\nfunction buttonClick_cancel()\r\n    memoryList = memoryListBackup\r\n    self.clearButtons()\r\n    if next(memoryList) == nil then\r\n        createSetupButton()\r\n    else\r\n        createMemoryActionButtons()\r\n    end\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Selection Canceled\", {1,1,1})\r\nend\r\n\r\n--Saves selections\r\nfunction buttonClick_submit()\r\n    if next(memoryList) == nil then\r\n        broadcastToAll(\"You cannot submit without any selections.\", {0.75, 0.25, 0.25})\r\n    else\r\n        self.clearButtons()\r\n        createMemoryActionButtons()\r\n        local count = 0\r\n        for guid in pairs(memoryList) do\r\n            count = count + 1\r\n            local obj = getObjectFromGUID(guid)\r\n            if obj ~= nil then obj.highlightOff() end\r\n        end\r\n        broadcastToAll(count..\" Objects Saved\", {1,1,1})\r\n        updateSave()\r\n    end\r\nend\r\n\r\n--Resets bag to starting status\r\nfunction buttonClick_reset()\r\n    memoryList = {}\r\n    self.clearButtons()\r\n    createSetupButton()\r\n    removeAllHighlights()\r\n    broadcastToAll(\"Tool Reset\", {1,1,1})\r\n    updateSave()\r\nend\r\n\r\n\r\n--After Setup\r\n\r\n\r\n--Creates recall and place buttons\r\nfunction createMemoryActionButtons()\r\n    self.createButton({\r\n        label=\"Place\", click_function=\"buttonClick_place\", function_owner=self,\r\n        position={0,0.3,-2}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Recall\", click_function=\"buttonClick_recall\", function_owner=self,\r\n        position={0,0.3,-2.8}, rotation={0,180,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\n    self.createButton({\r\n        label=\"Setup\", click_function=\"buttonClick_setup\", function_owner=self,\r\n        position={-2,0.3,0}, rotation={0,270,0}, height=350, width=800,\r\n        font_size=250, color={0,0,0}, font_color={1,1,1}\r\n    })\r\nend\r\n\r\n--Sends objects from bag/table to their saved position/rotation\r\nfunction buttonClick_place()\r\n    local bagObjList = self.getObjects()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        --If obj is out on the table, move it to the saved pos/rot\r\n        if obj ~= nil then\r\n            obj.setPositionSmooth(entry.pos)\r\n            obj.setRotationSmooth(entry.rot)\r\n            obj.setLock(entry.lock)\r\n        else\r\n            --If obj is inside of the bag\r\n            for _, bagObj in ipairs(bagObjList) do\r\n                if bagObj.guid == guid then\r\n                    local item = self.takeObject({\r\n                        guid=guid, position={entry.pos.x+19.5,entry.pos.y,entry.pos.z}, rotation=entry.rot, smooth=false\r\n                    })\r\n                    item.setLock(entry.lock)\r\n                    break\r\n                end\r\n            end\r\n        end\r\n    end\r\n    --broadcastToAll(\"Objects Placed\", {1,1,1})\r\nend\r\n\r\n--Recalls objects to bag from table\r\nfunction buttonClick_recall()\r\n    for guid, entry in pairs(memoryList) do\r\n        local obj = getObjectFromGUID(guid)\r\n        if obj ~= nil then self.putObject(obj) end\r\n    end\r\n    --broadcastToAll(\"Objects Recalled\", {1,1,1})\r\nend\r\n\r\n\r\n--Utility functions\r\n\r\n\r\n--Find delta (difference) between 2 x/y/z coordinates\r\nfunction findOffsetDistance(p1, p2, obj)\r\n    local deltaPos = {}\r\n    local bounds = obj.getBounds()\r\n    deltaPos.x = (p2.x-p1.x)\r\n    deltaPos.y = (p2.y-p1.y) + (bounds.size.y - bounds.offset.y)\r\n    deltaPos.z = (p2.z-p1.z)\r\n    return deltaPos\r\nend\r\n\r\n--Used to rotate a set of coordinates by an angle\r\nfunction rotateLocalCoordinates(desiredPos, obj)\r\n\tlocal objPos, objRot = obj.getPosition(), obj.getRotation()\r\n    local angle = math.rad(objRot.y)\r\n\tlocal x = desiredPos.x * math.cos(angle) - desiredPos.z * math.sin(angle)\r\n\tlocal z = desiredPos.x * math.sin(angle) + desiredPos.z * math.cos(angle)\r\n\t--return {x=objPos.x+x, y=objPos.y+desiredPos.y, z=objPos.z+z}\r\n    return {x=x, y=desiredPos.y, z=z}\r\nend\r\n\r\n--Coroutine delay, in seconds\r\nfunction wait(time)\r\n    local start = os.time()\r\n    repeat coroutine.yield(0) until os.time() > start + time\r\nend\r\n\r\n--Duplicates a table (needed to prevent it making reference to the same objects)\r\nfunction duplicateTable(oldTable)\r\n    local newTable = {}\r\n    for k, v in pairs(oldTable) do\r\n        newTable[k] = v\r\n    end\r\n    return newTable\r\nend\r\n\r\n--Moves scripted highlight from all objects\r\nfunction removeAllHighlights()\r\n    for _, obj in ipairs(getAllObjects()) do\r\n        obj.highlightOff()\r\n    end\r\nend\r\n\r\n--Round number (num) to the Nth decimal (dec)\r\nfunction round(num, dec)\r\n  local mult = 10^(dec or 0)\r\n  return math.floor(num * mult + 0.5) / mult\r\nend",
      "LuaScriptState": "{\"ml\":{\"013619\":{\"lock\":true,\"pos\":{\"x\":-37.5,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":18.44,\"z\":0}},\"2c8d97\":{\"lock\":true,\"pos\":{\"x\":-1.5,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":18.43,\"z\":0}},\"7a9866\":{\"lock\":true,\"pos\":{\"x\":-1.5,\"y\":2,\"z\":-18},\"rot\":{\"x\":0,\"y\":341.56,\"z\":0}},\"9bc03e\":{\"lock\":true,\"pos\":{\"x\":-37.5,\"y\":2,\"z\":18},\"rot\":{\"x\":0,\"y\":341.57,\"z\":0}}}}",
      "ContainedObjects": [
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 18.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 18.43,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 18.97
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998756,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2c8d97"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": 18.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 341.56,
            "rotZ": 0.0,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 18.97
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.128998756,
            "g": 0.694,
            "b": 0.606999934
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "7a9866"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0,
            "posY": 2.0,
            "posZ": -18.0,
            "rotX": 0.0,
            "rotY": 18.44,
            "rotZ": 0.0,
            "scaleX": 1.00002337,
            "scaleY": 1.0,
            "scaleZ": 18.97
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999894,
            "b": 0.09399892
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "013619"
        },
        {
          "Name": "Custom_Model",
          "Transform": {
            "posX": -18.0,
            "posY": 2.0,
            "posZ": 18.0,
            "rotX": 0.0,
            "rotY": 341.57,
            "rotZ": 0.0,
            "scaleX": 1.00005984,
            "scaleY": 1.0,
            "scaleZ": 18.97
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.856,
            "g": 0.09999894,
            "b": 0.09399892
          },
          "Locked": true,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": false,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomMesh": {
            "MeshURL": "http://cloud-3.steamusercontent.com/ugc/929311677228065725/08A047560B3B217463EB39969C8BD76749A0A723/",
            "DiffuseURL": "",
            "NormalURL": "",
            "ColliderURL": "",
            "Convex": true,
            "MaterialIndex": 3,
            "TypeIndex": 0,
            "CastShadows": false
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9bc03e"
        }
      ],
      "GUID": "157d9e"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 114.004616,
        "posY": -1.000557,
        "posZ": 125.5767,
        "rotX": -8.954613E-06,
        "rotY": 270.0,
        "rotZ": -1.72388773E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "----------------------------  6x6 ---------------------------",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "57634a"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 114.004608,
        "posY": -1.00057888,
        "posZ": 100.005074,
        "rotX": -8.954613E-06,
        "rotY": 270.0,
        "rotZ": -1.72388773E-05,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "----------------------------  8x6 ---------------------------",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "243881"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 1.25,
        "posY": 0.8829991,
        "posZ": 37.5,
        "rotX": 1.60111074E-06,
        "rotY": 5.2694144E-05,
        "rotZ": -3.48844537E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stall Marker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.3919915,
        "b": 0.112991504
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.519589,
            "posY": 2.93813181,
            "posZ": 37.9254074,
            "rotX": 0.1757134,
            "rotY": 314.96994,
            "rotZ": 359.137848,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "Stall",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254420351/EEBBE4C66562AFCC8FD7801528924F542A62CE71/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254420351/EEBBE4C66562AFCC8FD7801528924F542A62CE71/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "362b59"
        }
      ],
      "GUID": "8d5ba2"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 1.25,
        "posY": 0.8829991,
        "posZ": 35.0,
        "rotX": 1.74654917E-06,
        "rotY": -3.103837E-05,
        "rotZ": -1.43326488E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "2 Structure Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.05071723,
            "posY": 2.79907632,
            "posZ": 35.7802925,
            "rotX": 7.754771E-07,
            "rotY": 179.977448,
            "rotZ": 3.45970079E-07,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "2 Structure Points",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254492853/5C87FA73ACD43C69CB2F3F80E49AB50361C770D5/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254492853/5C87FA73ACD43C69CB2F3F80E49AB50361C770D5/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6dbada"
        }
      ],
      "GUID": "016cf2"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 0.0,
        "posY": 0.882999063,
        "posZ": 40.0,
        "rotX": 1.62684728E-06,
        "rotY": -5.383752E-07,
        "rotZ": -4.13898476E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Tailing Marker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171991944
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.09762553,
            "posY": 2.96867228,
            "posZ": 40.3028336,
            "rotX": 359.604675,
            "rotY": 134.992783,
            "rotZ": 0.748525262,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "Tailing",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254386396/0420F4806D3B3ABCD19B0ACA7F0F6D162CE055C4/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254386396/0420F4806D3B3ABCD19B0ACA7F0F6D162CE055C4/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2abbef"
        }
      ],
      "GUID": "8c5a61"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.25,
        "posY": 0.8829991,
        "posZ": 35.0,
        "rotX": 1.54343059E-06,
        "rotY": 2.59645674E-07,
        "rotZ": -1.04972749E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "3 Structure Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -1.226482,
            "posY": 2.93329525,
            "posZ": 35.50914,
            "rotX": 358.77182,
            "rotY": 179.9453,
            "rotZ": 0.0999037,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "3 Structure Points",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254496563/ECDEC452B795BDF7588341ECD4F8EF1D935E0001/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254496563/ECDEC452B795BDF7588341ECD4F8EF1D935E0001/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f43dc4"
        }
      ],
      "GUID": "8d5056"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 66.5023,
        "posY": 1.23954344,
        "posZ": 36.0027,
        "rotX": 90.0,
        "rotY": 90.13098,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "ORANGE Victory Points",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1e2dd4"
    },
    {
      "Name": "FogOfWarTrigger",
      "Transform": {
        "posX": 36.0,
        "posY": 4.0,
        "posZ": 37.5,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 30.0,
        "scaleY": 6.0,
        "scaleZ": 8.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999997,
        "b": 0.09399996,
        "a": 0.75
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Red",
      "FogHidePointers": false,
      "FogReverseHiding": false,
      "FogSeethrough": true,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "5e23e4"
    },
    {
      "Name": "FogOfWarTrigger",
      "Transform": {
        "posX": -36.0,
        "posY": 4.0,
        "posZ": 37.5,
        "rotX": 0.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 30.0,
        "scaleY": 6.0,
        "scaleZ": 8.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.39199996,
        "b": 0.112999953,
        "a": 0.75
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Orange",
      "FogHidePointers": false,
      "FogReverseHiding": false,
      "FogSeethrough": true,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a5c423"
    },
    {
      "Name": "FogOfWarTrigger",
      "Transform": {
        "posX": -36.0,
        "posY": 4.0,
        "posZ": -37.5,
        "rotX": 0.0,
        "rotY": 0.07192552,
        "rotZ": 0.0,
        "scaleX": 30.0,
        "scaleY": 6.0,
        "scaleZ": 8.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128999949,
        "g": 0.694,
        "b": 0.606999934,
        "a": 0.75
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Teal",
      "FogHidePointers": false,
      "FogReverseHiding": false,
      "FogSeethrough": true,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "edac77"
    },
    {
      "Name": "FogOfWarTrigger",
      "Transform": {
        "posX": 36.0,
        "posY": 4.0,
        "posZ": -37.5,
        "rotX": 0.0,
        "rotY": 0.07192552,
        "rotZ": 0.0,
        "scaleX": 30.0,
        "scaleY": 6.0,
        "scaleZ": 8.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117999978,
        "g": 0.53,
        "b": 1.0,
        "a": 0.75
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "FogColor": "Blue",
      "FogHidePointers": false,
      "FogReverseHiding": false,
      "FogSeethrough": true,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "fb0c14"
    },
    {
      "Name": "Die_6_Rounded",
      "Transform": {
        "posX": 26.5498543,
        "posY": 1.32000089,
        "posZ": -28.10009,
        "rotX": 90.0,
        "rotY": 0.00548086734,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117995583,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 3,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "6804ea",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        }
      ]
    },
    {
      "Name": "Die_6_Rounded",
      "Transform": {
        "posX": 26.54978,
        "posY": 1.32000291,
        "posZ": -29.15009,
        "rotX": -8.515642E-06,
        "rotY": 0.00586420344,
        "rotZ": 89.99999,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117995583,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 3,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4e9f87",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        }
      ]
    },
    {
      "Name": "Die_6_Rounded",
      "Transform": {
        "posX": 26.5497074,
        "posY": 1.31999731,
        "posZ": -30.2000923,
        "rotX": -8.687605E-06,
        "rotY": 0.00590891764,
        "rotZ": 270.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117995583,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 3,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2ebb43",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        }
      ]
    },
    {
      "Name": "Die_6_Rounded",
      "Transform": {
        "posX": 26.5496349,
        "posY": 1.32000065,
        "posZ": -31.2500916,
        "rotX": 270.0,
        "rotY": 0.006491415,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117995583,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 3,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a040ea",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        }
      ]
    },
    {
      "Name": "Die_6_Rounded",
      "Transform": {
        "posX": 26.54956,
        "posY": 1.31999981,
        "posZ": -32.30009,
        "rotX": -7.906614E-06,
        "rotY": 0.005895154,
        "rotZ": 180.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117995583,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 3,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f221c1",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        }
      ]
    },
    {
      "Name": "Die_6_Rounded",
      "Transform": {
        "posX": 26.5499268,
        "posY": 1.32000065,
        "posZ": -27.05009,
        "rotX": -9.466232E-06,
        "rotY": 0.00593000976,
        "rotZ": -5.789935E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117995583,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 3,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "05bc3e",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -45.4500732,
        "posY": 1.33322,
        "posZ": -27.05009,
        "rotX": 270.0,
        "rotY": 0.006272618,
        "rotZ": 0.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128991783,
        "g": 0.694,
        "b": 0.606999934
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "adbb37",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -45.4501457,
        "posY": 1.333221,
        "posZ": -28.10009,
        "rotX": -8.6488435E-06,
        "rotY": 0.005920826,
        "rotZ": -1.22681433E-06,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128991783,
        "g": 0.694,
        "b": 0.606999934
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "b29c22",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -45.45022,
        "posY": 1.33321714,
        "posZ": -29.15009,
        "rotX": -7.808819E-06,
        "rotY": 0.00592170143,
        "rotZ": 270.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128991753,
        "g": 0.694,
        "b": 0.606999934
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "23ebcf",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -45.4502945,
        "posY": 1.33322275,
        "posZ": -30.2000923,
        "rotX": -8.19777E-06,
        "rotY": 0.00584682869,
        "rotZ": 89.99999,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128991753,
        "g": 0.694,
        "b": 0.606999934
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "302252",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -45.450367,
        "posY": 1.33321977,
        "posZ": -31.2500916,
        "rotX": -9.525894E-06,
        "rotY": 0.00589934271,
        "rotZ": 180.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128991753,
        "g": 0.694,
        "b": 0.606999934
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "11ba2b",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -45.45044,
        "posY": 1.33321929,
        "posZ": -32.30009,
        "rotX": 90.0,
        "rotY": 0.00576054445,
        "rotZ": 0.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.128991783,
        "g": 0.694,
        "b": 0.606999934
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "caee6f",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -26.5500164,
        "posY": 1.33322036,
        "posZ": 27.0500031,
        "rotX": 270.0,
        "rotY": 180.000031,
        "rotZ": 0.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391995549,
        "b": 0.112995557
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "14fd18",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -26.5500355,
        "posY": 1.333221,
        "posZ": 28.0999985,
        "rotX": -8.835085E-06,
        "rotY": 180.0,
        "rotZ": -7.85487146E-07,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391995549,
        "b": 0.112995557
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f9d953",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -26.5500526,
        "posY": 1.33321929,
        "posZ": 29.1500015,
        "rotX": -8.72174E-06,
        "rotY": 180.0,
        "rotZ": 270.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391995549,
        "b": 0.112995557
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "bb15ee",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -26.55007,
        "posY": 1.33321917,
        "posZ": 30.2,
        "rotX": -7.721644E-06,
        "rotY": 180.0,
        "rotZ": 89.99999,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391995549,
        "b": 0.112995557
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "0d27f0",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -26.550087,
        "posY": 1.33321977,
        "posZ": 31.25,
        "rotX": -8.253883E-06,
        "rotY": 180.0,
        "rotZ": 180.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391995549,
        "b": 0.112995557
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "269c25",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": -26.5501041,
        "posY": 1.33322,
        "posZ": 32.3,
        "rotX": 90.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391995549,
        "b": 0.112995557
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a19a20",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 10.9993105,
        "posY": 0.999727,
        "posZ": -24.9996758,
        "rotX": 90.0,
        "rotY": 0.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "Bag State 1 has fully\nscripted Order Tokens.\n\nBag State 2 has partially\nscripted Order Tokens.\n\nSee \"GAME INSTRUCTIONS\".",
        "colorstate": {
          "r": 0.118,
          "g": 0.53,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1e614d"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -11.0018854,
        "posY": 0.999668539,
        "posZ": 25.0020962,
        "rotX": 90.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "Bag State 1 has fully\nscripted Order Tokens.\n\nBag State 2 has partially\nscripted Order Tokens.\n\nSee \"GAME INSTRUCTIONS\".",
        "colorstate": {
          "r": 0.956,
          "g": 0.392,
          "b": 0.113
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "6011e0"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -4.0,
        "posY": 1.0,
        "posZ": -27.0,
        "rotX": -2.4465985E-06,
        "rotY": -4.24649873E-20,
        "rotZ": 3.14920226E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D12-Blue",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3058885,
        "g": 0.372555166,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": -4.03404474,
            "posY": 3.50725079,
            "posZ": -39.1735458,
            "rotX": 22.2387486,
            "rotY": 0.378658563,
            "rotZ": 72.9164047,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/791986922388899122/097F2E262A385A736B2DB3A2FE40BCFC8907D76F/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 4
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "9749b3",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 72.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 144.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -72.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 180.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -144.0
              }
            },
            {
              "Value": 7,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 36.0
              }
            },
            {
              "Value": 8,
              "Rotation": {
                "x": -90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 9,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 10,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 108.0
              }
            },
            {
              "Value": 11,
              "Rotation": {
                "x": -27.0,
                "y": 108.0,
                "z": -36.0
              }
            },
            {
              "Value": 12,
              "Rotation": {
                "x": -27.0,
                "y": 36.0,
                "z": -108.0
              }
            }
          ]
        }
      ],
      "GUID": "c106ef"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -4.0,
        "posY": 1.0,
        "posZ": -29.0,
        "rotX": -2.4465985E-06,
        "rotY": 6.06642669E-21,
        "rotZ": 3.14920226E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D12-White",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": -4.025129,
            "posY": 3.461102,
            "posZ": -41.349453,
            "rotX": 19.3370934,
            "rotY": 2.00701833,
            "rotZ": 72.38203,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/791986922388899475/4B3C697819A61B72057C753B253E4DBA66580CDC/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 4
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "32d584",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 72.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 144.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -72.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 180.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -144.0
              }
            },
            {
              "Value": 7,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 36.0
              }
            },
            {
              "Value": 8,
              "Rotation": {
                "x": -90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 9,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 10,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 108.0
              }
            },
            {
              "Value": 11,
              "Rotation": {
                "x": -27.0,
                "y": 108.0,
                "z": -36.0
              }
            },
            {
              "Value": 12,
              "Rotation": {
                "x": -27.0,
                "y": 36.0,
                "z": -108.0
              }
            }
          ]
        }
      ],
      "GUID": "a5620e"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -4.0,
        "posY": 1.0,
        "posZ": -31.0,
        "rotX": -2.4465985E-06,
        "rotY": 6.06642669E-21,
        "rotZ": 3.14920226E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "D12-Black",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Dice",
          "Transform": {
            "posX": -3.86784148,
            "posY": 3.512808,
            "posZ": -42.9274826,
            "rotX": 27.37984,
            "rotY": 359.239532,
            "rotZ": 70.3291,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/791986922388899266/784AE2A7CE7CA3AD59440D119E9819D5CCA0ABAF/",
            "ImageSecondaryURL": "",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomDice": {
              "Type": 4
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "121310",
          "RotationValues": [
            {
              "Value": 1,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 72.0
              }
            },
            {
              "Value": 2,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 144.0
              }
            },
            {
              "Value": 3,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -72.0
              }
            },
            {
              "Value": 4,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 180.0
              }
            },
            {
              "Value": 5,
              "Rotation": {
                "x": 90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 6,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": -144.0
              }
            },
            {
              "Value": 7,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 36.0
              }
            },
            {
              "Value": 8,
              "Rotation": {
                "x": -90.0,
                "y": 180.0,
                "z": 0.0
              }
            },
            {
              "Value": 9,
              "Rotation": {
                "x": 27.0,
                "y": 0.0,
                "z": 0.0
              }
            },
            {
              "Value": 10,
              "Rotation": {
                "x": -27.0,
                "y": 180.0,
                "z": 108.0
              }
            },
            {
              "Value": 11,
              "Rotation": {
                "x": -27.0,
                "y": 108.0,
                "z": -36.0
              }
            },
            {
              "Value": 12,
              "Rotation": {
                "x": -27.0,
                "y": 36.0,
                "z": -108.0
              }
            }
          ]
        }
      ],
      "GUID": "16b2d2"
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": 45.44998,
        "posY": 1.34471893,
        "posZ": 27.05,
        "rotX": 270.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999687,
        "b": 0.09399686
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "7b0f68",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": 45.4499664,
        "posY": 1.34471953,
        "posZ": 28.1,
        "rotX": -8.1193E-06,
        "rotY": 180.0,
        "rotZ": -9.627757E-07,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999687,
        "b": 0.09399686
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "4e6d04",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": 45.4499474,
        "posY": 1.34471786,
        "posZ": 29.15,
        "rotX": -8.888223E-06,
        "rotY": 180.0,
        "rotZ": 270.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999687,
        "b": 0.09399686
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "004dc9",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": 45.44993,
        "posY": 1.34471822,
        "posZ": 30.2,
        "rotX": -7.81995E-06,
        "rotY": 180.0,
        "rotZ": 89.99999,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999687,
        "b": 0.09399686
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "9a687c",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": 45.449913,
        "posY": 1.34471834,
        "posZ": 31.25,
        "rotX": -7.230443E-06,
        "rotY": 180.0,
        "rotZ": 180.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999687,
        "b": 0.09399686
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "905fae",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Die_6",
      "Transform": {
        "posX": 45.449894,
        "posY": 1.34471858,
        "posZ": 32.3,
        "rotX": 90.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0999999,
        "scaleY": 1.0999999,
        "scaleZ": 1.0999999
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.856,
        "g": 0.09999687,
        "b": 0.09399686
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": 0,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2c7897",
      "RotationValues": [
        {
          "Value": 1,
          "Rotation": {
            "x": -90.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 2,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 0.0
          }
        },
        {
          "Value": 3,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -90.0
          }
        },
        {
          "Value": 4,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": 90.0
          }
        },
        {
          "Value": 5,
          "Rotation": {
            "x": 0.0,
            "y": 0.0,
            "z": -180.0
          }
        },
        {
          "Value": 6,
          "Rotation": {
            "x": 90.0,
            "y": 0.0,
            "z": 0.0
          }
        }
      ]
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -46.5,
        "posY": 0.88300246,
        "posZ": -38.97114,
        "rotX": -1.27245778E-06,
        "rotY": 180.001434,
        "rotZ": 5.444414E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Level Flight (scripted)",
      "Description": "1",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -32.9356232,
            "posY": 2.41768122,
            "posZ": -24.8449135,
            "rotX": 5.16596156E-05,
            "rotY": 0.007914229,
            "rotZ": 0.0002780136,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "c9369b",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -11.9999008,
            "posY": 0.909728646,
            "posZ": -19.0525665,
            "rotX": 0.000102887163,
            "rotY": 179.997849,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Level Flight (not scripted)",
          "Description": "1",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -33.0003471,
                "posY": 2.87655449,
                "posZ": -34.59568,
                "rotX": 0.000121012527,
                "rotY": 0.00397769827,
                "rotZ": 0.000102190221,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "834db1"
            }
          ],
          "GUID": "3651be"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -43.5,
        "posY": 0.883002639,
        "posZ": -38.97114,
        "rotX": -1.74680315E-06,
        "rotY": 180.006439,
        "rotZ": 7.49529363E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Swoop (scripted)",
      "Description": "2",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8891983,
            "posY": 2.663595,
            "posZ": -24.20665,
            "rotX": 5.54067665E-05,
            "rotY": 0.00665008556,
            "rotZ": 0.0002624052,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "622e85",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -22.5000782,
            "posY": 0.8456327,
            "posZ": -16.454319,
            "rotX": 0.000144029342,
            "rotY": 180.0081,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Swoop (not scripted)",
          "Description": "2",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3137253,
            "g": 0.4156861,
            "b": 0.4156861
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.0966949,
                "posY": 2.89461231,
                "posZ": -34.6206856,
                "rotX": 0.000211076927,
                "rotY": 359.220764,
                "rotZ": 0.000165454519,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "37fda1"
            }
          ],
          "GUID": "4cab5f"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -40.5,
        "posY": 0.883002639,
        "posZ": -38.97114,
        "rotX": -1.785402E-06,
        "rotY": 180.001511,
        "rotZ": 6.628285E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Turn (scripted)",
      "Description": "3",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3169941,
        "g": 0.4163731,
        "b": 0.4163731
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.4127388,
            "posY": 2.56684971,
            "posZ": -24.445982,
            "rotX": 7.34199639E-05,
            "rotY": 0.00753513444,
            "rotZ": 0.000248479628,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "979f07",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -5.99986124,
            "posY": 0.946356952,
            "posZ": -19.0525627,
            "rotX": 5.24872157E-05,
            "rotY": 179.9965,
            "rotZ": 359.6501,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Turn (not scripted)",
          "Description": "3",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -26.8557758,
                "posY": 2.91376042,
                "posZ": -34.4921875,
                "rotX": 0.3038817,
                "rotY": 359.521729,
                "rotZ": 0.174552858,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "86e121"
            }
          ],
          "GUID": "97ed48"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -28.5,
        "posY": 0.8830023,
        "posZ": -38.97114,
        "rotX": -1.77945208E-06,
        "rotY": 180.000626,
        "rotZ": 4.201958E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Bank (scripted)",
      "Description": "7",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3169941,
        "g": 0.4163731,
        "b": 0.4163731
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.1952019,
            "posY": 2.66783428,
            "posZ": -29.51344,
            "rotX": 6.42953746E-05,
            "rotY": 0.00774379028,
            "rotZ": 0.0002735054,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "a3ff30",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.00011,
            "posY": 1.14780438,
            "posZ": -24.24871,
            "rotX": 0.00023139712,
            "rotY": 180.019989,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Bank (not scripted)",
          "Description": "7",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -27.05926,
                "posY": 2.88930774,
                "posZ": -40.2675133,
                "rotX": 0.9061648,
                "rotY": 0.610530257,
                "rotZ": 359.807617,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "19d464"
            }
          ],
          "GUID": "75916e"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -37.5,
        "posY": 0.88300246,
        "posZ": -38.97114,
        "rotX": -1.702419E-06,
        "rotY": 179.998428,
        "rotZ": 1.067222E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Snap Turn (scripted)",
      "Description": "4",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3169941,
        "g": 0.4163731,
        "b": 0.4163731
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.3256512,
            "posY": 2.03877234,
            "posZ": -24.7639217,
            "rotX": 6.104767E-05,
            "rotY": 0.007719993,
            "rotZ": 0.000259471271,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "df53d9",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001068,
            "posY": 1.147828,
            "posZ": -8.66025448,
            "rotX": 0.000128972068,
            "rotY": 180.004364,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Snap Turn (not scripted)",
          "Description": "4",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.96544,
                "posY": 2.925014,
                "posZ": -34.9782639,
                "rotX": 0.07231524,
                "rotY": 359.454132,
                "rotZ": 0.0127831027,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "ce99bf"
            }
          ],
          "GUID": "11c972"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -31.5,
        "posY": 0.8830025,
        "posZ": -38.97114,
        "rotX": -1.75235743E-06,
        "rotY": 180.005447,
        "rotZ": 5.620243E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stoop (scripted)",
      "Description": "6",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3169941,
        "g": 0.4163731,
        "b": 0.4163731
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8784237,
            "posY": 2.26953959,
            "posZ": -30.1730614,
            "rotX": 4.08661581E-05,
            "rotY": 0.00721040368,
            "rotZ": 0.0002653661,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "a8fcbc",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001049,
            "posY": 1.1478107,
            "posZ": -19.0525665,
            "rotX": 0.000167967737,
            "rotY": 179.999756,
            "rotZ": 359.649841,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stoop (not scripted)",
          "Description": "6",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend\r\n",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.2293625,
                "posY": 2.894873,
                "posZ": -39.97549,
                "rotX": 0.000234923864,
                "rotY": 1.2214663,
                "rotZ": 0.000185809156,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "bd9cc2"
            }
          ],
          "GUID": "22fc8a"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -34.5,
        "posY": 0.88300246,
        "posZ": -38.97114,
        "rotX": -1.77678226E-06,
        "rotY": 179.999634,
        "rotZ": 7.022878E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stall Turn (scripted)",
      "Description": "5",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3169941,
        "g": 0.4163731,
        "b": 0.4163731
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -33.3404465,
            "posY": 1.2282064,
            "posZ": -30.37865,
            "rotX": 6.796308E-05,
            "rotY": 0.007930243,
            "rotZ": 0.000264487782,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "ead47f",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001011,
            "posY": 1.14781833,
            "posZ": -13.8564129,
            "rotX": 0.000102620514,
            "rotY": 179.9998,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stall Turn (not scripted)",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -32.61196,
                "posY": 2.86252475,
                "posZ": -39.62115,
                "rotX": 0.0002652792,
                "rotY": 0.0200663656,
                "rotZ": 0.000343156746,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c12ee5"
            }
          ],
          "GUID": "824377"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -25.5,
        "posY": 0.8830023,
        "posZ": -38.97114,
        "rotX": -1.70279327E-06,
        "rotY": 180.000519,
        "rotZ": 7.502909E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Wing Over (scripted)",
      "Description": "8",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3169941,
        "g": 0.4163731,
        "b": 0.4163731
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.5426254,
            "posY": 2.52077818,
            "posZ": -29.161581,
            "rotX": 5.22859E-05,
            "rotY": 0.009161219,
            "rotZ": 0.000254108541,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "137e9e",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 16.5001049,
            "posY": 1.08372211,
            "posZ": -12.9903812,
            "rotX": 9.503652E-05,
            "rotY": 179.999832,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Wing Over (not scripted)",
          "Description": "8",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.9480724,
                "posY": 2.93111753,
                "posZ": -40.09733,
                "rotX": 0.0002752876,
                "rotY": 0.323412329,
                "rotZ": 4.30122273E-05,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c0fa47"
            }
          ],
          "GUID": "13224d"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 112.0,
        "posY": -3.0,
        "posZ": -18.0,
        "rotX": 1.81509893E-06,
        "rotY": -3.95156334E-08,
        "rotZ": -6.00875E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Universal Manoeuvre Bag",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.3058885,
        "g": 0.372555166,
        "b": 1.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 43.6436462,
            "posY": 2.97053576,
            "posZ": 11.0046368,
            "rotX": 0.5916711,
            "rotY": 180.032349,
            "rotZ": 0.335370272,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank Manoeuvre token",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "19de2f"
        }
      ],
      "GUID": "8fc951"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 28.5,
        "posY": 0.8830018,
        "posZ": -37.23909,
        "rotX": -1.770166E-06,
        "rotY": 180.006439,
        "rotZ": 8.16097838E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Swoop (scripted)",
      "Description": "2",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8891983,
            "posY": 2.663595,
            "posZ": -24.20665,
            "rotX": 5.54067665E-05,
            "rotY": 0.00665008556,
            "rotZ": 0.0002624052,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "8389ab",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -22.5000782,
            "posY": 0.8456327,
            "posZ": -16.454319,
            "rotX": 0.000144029342,
            "rotY": 180.0081,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Swoop (not scripted)",
          "Description": "2",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3137253,
            "g": 0.4156861,
            "b": 0.4156861
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.0966949,
                "posY": 2.89461231,
                "posZ": -34.6206856,
                "rotX": 0.000211076927,
                "rotY": 359.220764,
                "rotZ": 0.000165454519,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "37fda1"
            }
          ],
          "GUID": "4cab5f"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 31.5,
        "posY": 0.8830018,
        "posZ": -37.23909,
        "rotX": -1.90723847E-06,
        "rotY": 180.001511,
        "rotZ": 7.65510549E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Turn (scripted)",
      "Description": "3",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.4127388,
            "posY": 2.56684971,
            "posZ": -24.445982,
            "rotX": 7.34199639E-05,
            "rotY": 0.00753513444,
            "rotZ": 0.000248479628,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "063987",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -5.99986124,
            "posY": 0.946356952,
            "posZ": -19.0525627,
            "rotX": 5.24872157E-05,
            "rotY": 179.9965,
            "rotZ": 359.6501,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Turn (not scripted)",
          "Description": "3",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -26.8557758,
                "posY": 2.91376042,
                "posZ": -34.4921875,
                "rotX": 0.3038817,
                "rotY": 359.521729,
                "rotZ": 0.174552858,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "86e121"
            }
          ],
          "GUID": "97ed48"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 34.5,
        "posY": 0.8830018,
        "posZ": -37.23909,
        "rotX": -1.703008E-06,
        "rotY": 179.998428,
        "rotZ": 3.62713223E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Snap Turn (scripted)",
      "Description": "4",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.3256512,
            "posY": 2.03877234,
            "posZ": -24.7639217,
            "rotX": 6.104767E-05,
            "rotY": 0.007719993,
            "rotZ": 0.000259471271,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "7dbdc4",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001068,
            "posY": 1.147828,
            "posZ": -8.66025448,
            "rotX": 0.000128972068,
            "rotY": 180.004364,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Snap Turn (not scripted)",
          "Description": "4",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.96544,
                "posY": 2.925014,
                "posZ": -34.9782639,
                "rotX": 0.07231524,
                "rotY": 359.454132,
                "rotZ": 0.0127831027,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "ce99bf"
            }
          ],
          "GUID": "11c972"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 37.5,
        "posY": 0.8830017,
        "posZ": -37.23909,
        "rotX": -1.959874E-06,
        "rotY": 179.999634,
        "rotZ": 8.210321E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stall Turn (scripted)",
      "Description": "5",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -33.3404465,
            "posY": 1.2282064,
            "posZ": -30.37865,
            "rotX": 6.796308E-05,
            "rotY": 0.007930243,
            "rotZ": 0.000264487782,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "f80809",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001011,
            "posY": 1.14781833,
            "posZ": -13.8564129,
            "rotX": 0.000102620514,
            "rotY": 179.9998,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stall Turn (not scripted)",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -32.61196,
                "posY": 2.86252475,
                "posZ": -39.62115,
                "rotX": 0.0002652792,
                "rotY": 0.0200663656,
                "rotZ": 0.000343156746,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c12ee5"
            }
          ],
          "GUID": "824377"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 25.5,
        "posY": 0.883002,
        "posZ": -37.23909,
        "rotX": -1.75921616E-06,
        "rotY": 180.001434,
        "rotZ": 5.69428039E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Level Flight (scripted)",
      "Description": "1",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -32.9356232,
            "posY": 2.41768122,
            "posZ": -24.8449135,
            "rotX": 5.16596156E-05,
            "rotY": 0.007914229,
            "rotZ": 0.0002780136,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "5a75a4",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -11.9999008,
            "posY": 0.909728646,
            "posZ": -19.0525665,
            "rotX": 0.000102887163,
            "rotY": 179.997849,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Level Flight (not scripted)",
          "Description": "1",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -33.0003471,
                "posY": 2.87655449,
                "posZ": -34.59568,
                "rotX": 0.000121012527,
                "rotY": 0.00397769827,
                "rotZ": 0.000102190221,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "834db1"
            }
          ],
          "GUID": "3651be"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 40.5,
        "posY": 0.883001745,
        "posZ": -37.23909,
        "rotX": -1.77391541E-06,
        "rotY": 180.005447,
        "rotZ": 5.028898E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stoop (scripted)",
      "Description": "6",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8784237,
            "posY": 2.26953959,
            "posZ": -30.1730614,
            "rotX": 4.08661581E-05,
            "rotY": 0.00721040368,
            "rotZ": 0.0002653661,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "b5cab7",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001049,
            "posY": 1.1478107,
            "posZ": -19.0525665,
            "rotX": 0.000167967737,
            "rotY": 179.999756,
            "rotZ": 359.649841,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stoop (not scripted)",
          "Description": "6",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend\r\n",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.2293625,
                "posY": 2.894873,
                "posZ": -39.97549,
                "rotX": 0.000234923864,
                "rotY": 1.2214663,
                "rotZ": 0.000185809156,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "bd9cc2"
            }
          ],
          "GUID": "22fc8a"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 43.5,
        "posY": 0.8830015,
        "posZ": -37.23909,
        "rotX": -1.78118717E-06,
        "rotY": 180.000626,
        "rotZ": 6.93650463E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Bank (scripted)",
      "Description": "7",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.1952019,
            "posY": 2.66783428,
            "posZ": -29.51344,
            "rotX": 6.42953746E-05,
            "rotY": 0.00774379028,
            "rotZ": 0.0002735054,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "0afa10",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.00011,
            "posY": 1.14780438,
            "posZ": -24.24871,
            "rotX": 0.00023139712,
            "rotY": 180.019989,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Bank (not scripted)",
          "Description": "7",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -27.05926,
                "posY": 2.88930774,
                "posZ": -40.2675133,
                "rotX": 0.9061648,
                "rotY": 0.610530257,
                "rotZ": 359.807617,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "19d464"
            }
          ],
          "GUID": "75916e"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 46.5,
        "posY": 0.8830018,
        "posZ": -37.23909,
        "rotX": -1.776459E-06,
        "rotY": 180.000519,
        "rotZ": 4.411209E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Wing Over (scripted)",
      "Description": "8",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.5426254,
            "posY": 2.52077818,
            "posZ": -29.161581,
            "rotX": 5.22859E-05,
            "rotY": 0.009161219,
            "rotZ": 0.000254108541,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "5ee6c7",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 16.5001049,
            "posY": 1.08372211,
            "posZ": -12.9903812,
            "rotX": 9.503652E-05,
            "rotY": 179.999832,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Wing Over (not scripted)",
          "Description": "8",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.9480724,
                "posY": 2.93111753,
                "posZ": -40.09733,
                "rotX": 0.0002752876,
                "rotY": 0.323412329,
                "rotZ": 4.30122273E-05,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c0fa47"
            }
          ],
          "GUID": "13224d"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 43.5,
        "posY": 0.882999659,
        "posZ": 37.23909,
        "rotX": 1.71987585E-06,
        "rotY": 0.00507927174,
        "rotZ": -5.689854E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Swoop (scripted)",
      "Description": "2",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8891983,
            "posY": 2.663595,
            "posZ": -24.20665,
            "rotX": 5.54067665E-05,
            "rotY": 0.00665008556,
            "rotZ": 0.0002624052,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "d3f5ea",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -22.5000782,
            "posY": 0.8456327,
            "posZ": -16.454319,
            "rotX": 0.000144029342,
            "rotY": 180.0081,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Swoop (not scripted)",
          "Description": "2",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3137253,
            "g": 0.4156861,
            "b": 0.4156861
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.0966949,
                "posY": 2.89461231,
                "posZ": -34.6206856,
                "rotX": 0.000211076927,
                "rotY": 359.220764,
                "rotZ": 0.000165454519,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "37fda1"
            }
          ],
          "GUID": "4cab5f"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 40.5,
        "posY": 0.8829996,
        "posZ": 37.23909,
        "rotX": 1.49505263E-06,
        "rotY": 0.00507927034,
        "rotZ": -3.28176867E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Turn (scripted)",
      "Description": "3",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.4127388,
            "posY": 2.56684971,
            "posZ": -24.445982,
            "rotX": 7.34199639E-05,
            "rotY": 0.00753513444,
            "rotZ": 0.000248479628,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "d0e7f6",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -5.99986124,
            "posY": 0.946356952,
            "posZ": -19.0525627,
            "rotX": 5.24872157E-05,
            "rotY": 179.9965,
            "rotZ": 359.6501,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Turn (not scripted)",
          "Description": "3",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -26.8557758,
                "posY": 2.91376042,
                "posZ": -34.4921875,
                "rotX": 0.3038817,
                "rotY": 359.521729,
                "rotZ": 0.174552858,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "86e121"
            }
          ],
          "GUID": "97ed48"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 37.5,
        "posY": 0.8829996,
        "posZ": 37.23909,
        "rotX": 1.58639784E-06,
        "rotY": 0.005079249,
        "rotZ": -2.63211916E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Snap Turn (scripted)",
      "Description": "4",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.3256512,
            "posY": 2.03877234,
            "posZ": -24.7639217,
            "rotX": 6.104767E-05,
            "rotY": 0.007719993,
            "rotZ": 0.000259471271,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "c6ac92",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001068,
            "posY": 1.147828,
            "posZ": -8.66025448,
            "rotX": 0.000128972068,
            "rotY": 180.004364,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Snap Turn (not scripted)",
          "Description": "4",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.96544,
                "posY": 2.925014,
                "posZ": -34.9782639,
                "rotX": 0.07231524,
                "rotY": 359.454132,
                "rotZ": 0.0127831027,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "ce99bf"
            }
          ],
          "GUID": "11c972"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 34.5,
        "posY": 0.8829997,
        "posZ": 37.23909,
        "rotX": 1.47080561E-06,
        "rotY": 0.005079265,
        "rotZ": -1.90702522E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stall Turn (scripted)",
      "Description": "5",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -33.3404465,
            "posY": 1.2282064,
            "posZ": -30.37865,
            "rotX": 6.796308E-05,
            "rotY": 0.007930243,
            "rotZ": 0.000264487782,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "2450e0",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001011,
            "posY": 1.14781833,
            "posZ": -13.8564129,
            "rotX": 0.000102620514,
            "rotY": 179.9998,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stall Turn (not scripted)",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -32.61196,
                "posY": 2.86252475,
                "posZ": -39.62115,
                "rotX": 0.0002652792,
                "rotY": 0.0200663656,
                "rotZ": 0.000343156746,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c12ee5"
            }
          ],
          "GUID": "824377"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 46.5,
        "posY": 0.882999659,
        "posZ": 37.23909,
        "rotX": 1.41542273E-06,
        "rotY": 0.005079286,
        "rotZ": -1.78827875E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Level Flight (scripted)",
      "Description": "1",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -32.9356232,
            "posY": 2.41768122,
            "posZ": -24.8449135,
            "rotX": 5.16596156E-05,
            "rotY": 0.007914229,
            "rotZ": 0.0002780136,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "1263c2",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -11.9999008,
            "posY": 0.909728646,
            "posZ": -19.0525665,
            "rotX": 0.000102887163,
            "rotY": 179.997849,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Level Flight (not scripted)",
          "Description": "1",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -33.0003471,
                "posY": 2.87655449,
                "posZ": -34.59568,
                "rotX": 0.000121012527,
                "rotY": 0.00397769827,
                "rotZ": 0.000102190221,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "834db1"
            }
          ],
          "GUID": "3651be"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 31.5,
        "posY": 0.8829998,
        "posZ": 37.23909,
        "rotX": 1.78127959E-06,
        "rotY": 0.00507926662,
        "rotZ": -4.990068E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stoop (scripted)",
      "Description": "6",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8784237,
            "posY": 2.26953959,
            "posZ": -30.1730614,
            "rotX": 4.08661581E-05,
            "rotY": 0.00721040368,
            "rotZ": 0.0002653661,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "8e274a",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001049,
            "posY": 1.1478107,
            "posZ": -19.0525665,
            "rotX": 0.000167967737,
            "rotY": 179.999756,
            "rotZ": 359.649841,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stoop (not scripted)",
          "Description": "6",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend\r\n",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.2293625,
                "posY": 2.894873,
                "posZ": -39.97549,
                "rotX": 0.000234923864,
                "rotY": 1.2214663,
                "rotZ": 0.000185809156,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "bd9cc2"
            }
          ],
          "GUID": "22fc8a"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 28.5,
        "posY": 0.8829996,
        "posZ": 37.23909,
        "rotX": 1.46157174E-06,
        "rotY": 0.005079281,
        "rotZ": -3.882759E-08,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Bank (scripted)",
      "Description": "7",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.1952019,
            "posY": 2.66783428,
            "posZ": -29.51344,
            "rotX": 6.42953746E-05,
            "rotY": 0.00774379028,
            "rotZ": 0.0002735054,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "285e1c",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.00011,
            "posY": 1.14780438,
            "posZ": -24.24871,
            "rotX": 0.00023139712,
            "rotY": 180.019989,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Bank (not scripted)",
          "Description": "7",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -27.05926,
                "posY": 2.88930774,
                "posZ": -40.2675133,
                "rotX": 0.9061648,
                "rotY": 0.610530257,
                "rotZ": 359.807617,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "19d464"
            }
          ],
          "GUID": "75916e"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 25.5,
        "posY": 0.8829998,
        "posZ": 37.23909,
        "rotX": 1.13604642E-06,
        "rotY": 0.005079276,
        "rotZ": -5.28335249E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Wing Over (scripted)",
      "Description": "8",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994071,
        "g": 0.416373074,
        "b": 0.416373074
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.5426254,
            "posY": 2.52077818,
            "posZ": -29.161581,
            "rotX": 5.22859E-05,
            "rotY": 0.009161219,
            "rotZ": 0.000254108541,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "4eedff",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 16.5001049,
            "posY": 1.08372211,
            "posZ": -12.9903812,
            "rotX": 9.503652E-05,
            "rotY": 179.999832,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Wing Over (not scripted)",
          "Description": "8",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.9480724,
                "posY": 2.93111753,
                "posZ": -40.09733,
                "rotX": 0.0002752876,
                "rotY": 0.323412329,
                "rotZ": 4.30122273E-05,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c0fa47"
            }
          ],
          "GUID": "13224d"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -40.5,
        "posY": 0.883000255,
        "posZ": 37.23909,
        "rotX": 1.73381864E-06,
        "rotY": 0.00507924566,
        "rotZ": -7.28851148E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stoop (scripted)",
      "Description": "6",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8784237,
            "posY": 2.26953959,
            "posZ": -30.1730614,
            "rotX": 4.08661581E-05,
            "rotY": 0.00721040368,
            "rotZ": 0.0002653661,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "6166d2",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001049,
            "posY": 1.1478107,
            "posZ": -19.0525665,
            "rotX": 0.000167967737,
            "rotY": 179.999756,
            "rotZ": 359.649841,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stoop (not scripted)",
          "Description": "6",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend\r\n",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.2293625,
                "posY": 2.894873,
                "posZ": -39.97549,
                "rotX": 0.000234923864,
                "rotY": 1.2214663,
                "rotZ": 0.000185809156,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "bd9cc2"
            }
          ],
          "GUID": "22fc8a"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -37.5,
        "posY": 0.883000553,
        "posZ": 37.23909,
        "rotX": 1.53189831E-06,
        "rotY": 0.00507926056,
        "rotZ": -2.946446E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stall Turn (scripted)",
      "Description": "5",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -33.3404465,
            "posY": 1.2282064,
            "posZ": -30.37865,
            "rotX": 6.796308E-05,
            "rotY": 0.007930243,
            "rotZ": 0.000264487782,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "f54cee",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001011,
            "posY": 1.14781833,
            "posZ": -13.8564129,
            "rotX": 0.000102620514,
            "rotY": 179.9998,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Stall Turn (not scripted)",
          "Description": "5",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -32.61196,
                "posY": 2.86252475,
                "posZ": -39.62115,
                "rotX": 0.0002652792,
                "rotY": 0.0200663656,
                "rotZ": 0.000343156746,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c12ee5"
            }
          ],
          "GUID": "824377"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -43.5,
        "posY": 0.8830004,
        "posZ": 37.23909,
        "rotX": 1.546389E-06,
        "rotY": 0.005079272,
        "rotZ": -2.18984837E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Bank (scripted)",
      "Description": "7",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.1952019,
            "posY": 2.66783428,
            "posZ": -29.51344,
            "rotX": 6.42953746E-05,
            "rotY": 0.00774379028,
            "rotZ": 0.0002735054,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "cb7f11",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.00011,
            "posY": 1.14780438,
            "posZ": -24.24871,
            "rotX": 0.00023139712,
            "rotY": 180.019989,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Bank (not scripted)",
          "Description": "7",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -27.05926,
                "posY": 2.88930774,
                "posZ": -40.2675133,
                "rotX": 0.9061648,
                "rotY": 0.610530257,
                "rotZ": 359.807617,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "19d464"
            }
          ],
          "GUID": "75916e"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -46.5,
        "posY": 0.8830004,
        "posZ": 37.23909,
        "rotX": 1.7978474E-06,
        "rotY": 0.00507927267,
        "rotZ": -6.20463538E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Wing Over (scripted)",
      "Description": "8",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.5426254,
            "posY": 2.52077818,
            "posZ": -29.161581,
            "rotX": 5.22859E-05,
            "rotY": 0.009161219,
            "rotZ": 0.000254108541,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "dca002",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 16.5001049,
            "posY": 1.08372211,
            "posZ": -12.9903812,
            "rotX": 9.503652E-05,
            "rotY": 179.999832,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Wing Over (not scripted)",
          "Description": "8",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.9480724,
                "posY": 2.93111753,
                "posZ": -40.09733,
                "rotX": 0.0002752876,
                "rotY": 0.323412329,
                "rotZ": 4.30122273E-05,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "c0fa47"
            }
          ],
          "GUID": "13224d"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -34.5,
        "posY": 0.8830003,
        "posZ": 37.23909,
        "rotX": 1.45982665E-06,
        "rotY": 0.005079213,
        "rotZ": -3.01338673E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Snap Turn (scripted)",
      "Description": "4",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -23.3256512,
            "posY": 2.03877234,
            "posZ": -24.7639217,
            "rotX": 6.104767E-05,
            "rotY": 0.007719993,
            "rotZ": 0.000259471271,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "a92411",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": 27.0001068,
            "posY": 1.147828,
            "posZ": -8.66025448,
            "rotX": 0.000128972068,
            "rotY": 180.004364,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Snap Turn (not scripted)",
          "Description": "4",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -23.96544,
                "posY": 2.925014,
                "posZ": -34.9782639,
                "rotX": 0.07231524,
                "rotY": 359.454132,
                "rotZ": 0.0127831027,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "ce99bf"
            }
          ],
          "GUID": "11c972"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -31.5,
        "posY": 0.883000255,
        "posZ": 37.23909,
        "rotX": 1.68060933E-06,
        "rotY": 0.005079269,
        "rotZ": -4.43106018E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Turn (scripted)",
      "Description": "3",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994041,
        "g": 0.416373044,
        "b": 0.416373044
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -27.4127388,
            "posY": 2.56684971,
            "posZ": -24.445982,
            "rotX": 7.34199639E-05,
            "rotY": 0.00753513444,
            "rotZ": 0.000248479628,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "030488",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -5.99986124,
            "posY": 0.946356952,
            "posZ": -19.0525627,
            "rotX": 5.24872157E-05,
            "rotY": 179.9965,
            "rotZ": 359.6501,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Turn (not scripted)",
          "Description": "3",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -26.8557758,
                "posY": 2.91376042,
                "posZ": -34.4921875,
                "rotX": 0.3038817,
                "rotY": 359.521729,
                "rotZ": 0.174552858,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "86e121"
            }
          ],
          "GUID": "97ed48"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -28.5,
        "posY": 0.883000255,
        "posZ": 37.23909,
        "rotX": 1.68996439E-06,
        "rotY": 0.005042201,
        "rotZ": -8.823766E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Swoop (scripted)",
      "Description": "2",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994,
        "g": 0.416373,
        "b": 0.416373
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -29.8891983,
            "posY": 2.663595,
            "posZ": -24.20665,
            "rotX": 5.54067665E-05,
            "rotY": 0.00665008556,
            "rotZ": 0.0002624052,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "bc9bce",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -22.5000782,
            "posY": 0.8456327,
            "posZ": -16.454319,
            "rotX": 0.000144029342,
            "rotY": 180.0081,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Swoop (not scripted)",
          "Description": "2",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.3137253,
            "g": 0.4156861,
            "b": 0.4156861
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -30.0966949,
                "posY": 2.89461231,
                "posZ": -34.6206856,
                "rotX": 0.000211076927,
                "rotY": 359.220764,
                "rotZ": 0.000165454519,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "37fda1"
            }
          ],
          "GUID": "4cab5f"
        }
      }
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -25.5,
        "posY": 0.883000135,
        "posZ": 37.23909,
        "rotX": 1.7213024E-06,
        "rotY": 0.00507928571,
        "rotZ": -6.08446555E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Level Flight (scripted)",
      "Description": "1",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.316994,
        "g": 0.416373,
        "b": 0.416373
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -32.9356232,
            "posY": 2.41768122,
            "posZ": -24.8449135,
            "rotX": 5.16596156E-05,
            "rotY": 0.007914229,
            "rotZ": 0.0002780136,
            "scaleX": 0.5,
            "scaleY": 1.0,
            "scaleZ": 0.5
          },
          "Nickname": "Blank TOKEN Man",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "tokencolour={\"Red\",\"Green\",\"Blue\"}\r\norderType=2\r\nowner=\"\"\r\nname={\"Level Flight\",\"Swoop\",\"Turn\",\"Snap Turn\",\"Stall Turn\", \"Stoop\", \"Bank\", \"Wing Over\"}\r\nbottomImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ntopImage={  \"http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153082/06B033E061F6E2F00270FEB412E760D50652F487/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496153951/FBC59112E7B28E30E75285CACA19697C8A5A3AA9/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496155090/B4FC3E047C967B23F1A14491878C7E231C72389D/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496156515/C51533A424904C453A7A65FCEF9A65B5F203FCEA/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496158296/A76A2A5E8596C73BF9EE3C00BE6B524BCBD74E15/\",\r\n\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496159092/482E7C1F41648C8B5C0A5FDBC9305BF69E52AB71/\",\r\n            \"http://cloud-3.steamusercontent.com/ugc/780734328496161222/0A30FF67DAC164DFC44A83C1857CDD237FC528B5/\",\r\n        }\r\n\r\nflipBtn={\r\n    label=\"FLIP/PEEK\", click_function=\"flipToken\", function_owner=self,\r\n    position={0,0.1,0.7}, rotation={0,0,0}, height=60, width=500,\r\n    font_size=80, color={1,1,1,0.85}, font_color={0,0,0}\r\n}\r\n\r\nfunction onSave()\r\n    local saved_data = JSON.encode( {svorderType=orderType, svowner=owner})\r\n    --saved_data=\"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        orderType=loaded_data.svorderType\r\n        owner=loaded_data.svowner\r\n    end\r\n    self.createButton(flipBtn)\r\nend\r\n\r\nfunction flipToken(obj, color, alt)\r\n    if owner == \"\" or owner == color then\r\n        if alt then -- PEEK\r\n            printToColor(\"\"..name[orderType]..\"  manoeuvre\",color,\"White\")\r\n\r\n        else --FLIP\r\n\r\n            local customInfo=self.getCustomObject()\r\n            if customInfo.image == topImage[orderType] then\r\n                flipDown()\r\n            else\r\n                flipUp()\r\n            end\r\n        end\r\n    else\r\n        if alt then\r\n            printToAll(color..\" tried to peek at \"..owner..\"'s token!\", \"Red\")\r\n        else\r\n            printToAll(color..\" tried to flip a \"..owner..\"'s token!\", \"Red\")\r\n        end\r\n    end\r\nend\r\n\r\nfunction flipUp()\r\n    flipUpDown(topImage[orderType])\r\nend\r\n\r\nfunction flipDown()\r\n    flipUpDown(bottomImage)\r\nend\r\n\r\nfunction flipUpDown(image)\r\n        local customInfo=self.getCustomObject()\r\n        customInfo.image=image\r\n        customInfo.image_bottom=image\r\n        customInfo.image_secondary=image\r\n        self.setCustomObject(customInfo)\r\n        self.script_state = onSave()\r\n        self.reload()\r\nend\r\n\r\nfunction onPickUp(color)\r\n    if owner~=\"\" and owner ~= color then\r\n        self.drop()\r\n    end\r\nend\r\n",
          "LuaScriptState": "{\"svorderType\":2,\"svowner\":\"\"}",
          "GUID": "563780"
        }
      ],
      "GUID": "b1e717",
      "States": {
        "2": {
          "Name": "Infinite_Bag",
          "Transform": {
            "posX": -11.9999008,
            "posY": 0.909728646,
            "posZ": -19.0525665,
            "rotX": 0.000102887163,
            "rotY": 179.997849,
            "rotZ": 359.6499,
            "scaleX": 1.0,
            "scaleY": 1.0,
            "scaleZ": 1.0
          },
          "Nickname": "Level Flight (not scripted)",
          "Description": "1",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.313725322,
            "g": 0.415686131,
            "b": 0.415686131
          },
          "Locked": false,
          "Grid": true,
          "Snap": true,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": true,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "MaterialIndex": -1,
          "MeshIndex": -1,
          "XmlUI": "",
          "LuaScript": "token=nil\r\nbagOrderType=1\r\navailables=8\r\nowner=\"\"\r\n\r\ntitleBtn={\r\n    label=self.getName(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,1.4}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=200, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nnumberBtn={\r\n    label=self.getDescription(), click_function=\"none\", function_owner=self,\r\n    position={0,0.15,2.1}, rotation={0,0,0}, height=0, width=0,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nfunction onLoad(save_state)\r\n    local cleanedString=self.getName()\r\n    cleanedString=string.gsub(cleanedString, \"(not scripted)\", \"\")\r\n    cleanedString=string.sub(cleanedString, 1, string.len(cleanedString)-2)\r\n    titleBtn.label=cleanedString\r\n    self.createButton(titleBtn)\r\n    self.createButton(numberBtn)\r\nend\r\n\r\nfunction onObjectLeaveContainer(container, leave_object)\r\n    if true or container ~= self then\r\n        return\r\n    end\r\n    token=leave_object\r\n    Wait.frames(setTokenVar, 3)\r\nend\r\n\r\nfunction setTokenVar()\r\n    bagOrderType=tonumber(self.getDescription())\r\n    if bagOrderType==0 or bagOrderType> availables then\r\n        bagOrderType=1\r\n    end\r\n    if bagOrderType==nil then\r\n        bagOrderType=1\r\n    end\r\n    token.setColorTint(token.held_by_color)\r\n    token.setName(\"\")\r\n    token.setVar(\"owner\", token.held_by_color)\r\n    token.setVar(\"orderType\", bagOrderType)\r\n\r\nend\r\n\r\nfunction none()\r\nend",
          "LuaScriptState": "",
          "ContainedObjects": [
            {
              "Name": "Custom_Tile",
              "Transform": {
                "posX": -33.0003471,
                "posY": 2.87655449,
                "posZ": -34.59568,
                "rotX": 0.000121012527,
                "rotY": 0.00397769827,
                "rotZ": 0.000102190221,
                "scaleX": 0.2647439,
                "scaleY": 1.0,
                "scaleZ": 0.2647439
              },
              "Nickname": "",
              "Description": "",
              "GMNotes": "",
              "ColorDiffuse": {
                "r": 0.0,
                "g": 0.0,
                "b": 0.0
              },
              "Locked": false,
              "Grid": true,
              "Snap": true,
              "IgnoreFoW": false,
              "Autoraise": true,
              "Sticky": true,
              "Tooltip": true,
              "GridProjection": false,
              "HideWhenFaceDown": false,
              "Hands": false,
              "CustomImage": {
                "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496123676/8E9444841C3717D3BFF236EF368BD978495253C6/",
                "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/",
                "ImageScalar": 1.0,
                "WidthScale": 0.0,
                "CustomTile": {
                  "Type": 2,
                  "Thickness": 0.1,
                  "Stackable": false,
                  "Stretch": true
                }
              },
              "XmlUI": "",
              "LuaScript": "",
              "LuaScriptState": "",
              "GUID": "834db1"
            }
          ],
          "GUID": "3651be"
        }
      }
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 88.5,
        "posY": -2.5,
        "posZ": 0.0,
        "rotX": 4.963574E-06,
        "rotY": 0.000106507992,
        "rotZ": -2.38097453E-08,
        "scaleX": 1.5,
        "scaleY": 1.0,
        "scaleZ": 2.0
      },
      "Nickname": "Hangar",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.249996841,
        "g": 0.249996841,
        "b": 0.249996841
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "\r\nbackImage=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n\r\ndefaultImage=backImage\r\nclonedYRot=0\r\n\r\n\r\n\r\nAvailablePlanes={\r\n    {type=\"defaultPlaneStats\", cat=\"plane\", cost=25, structure=8, transport=-1, fuel=-1, throttle=10, manoeuvres={1,2,3,4,5,6,7,8}, handling=1,  minSpeed=0, maxSpeed=10, maxAlt=10,\r\n            image=defaultImage},\r\n    {type=\"Blank Plane\", cat=\"fighter\", cost=0, structure=10, transport=-1, fuel=-1, throttle=10, manoeuvres={1,2,3,4,5,6,7,8}, handling=1,  minSpeed=0, maxSpeed=10, maxAlt=10 ,\r\n            image=defaultImage},\r\n    --{type=\"IMPERIAL NAVY\", cat=\"title\", structure=-1, transport=-1, fuel=-1, throttle=10, manoeuvres=9, handling=1,  minSpeed=1, maxSpeed=10, maxAlt=10 },\r\n    {type=\"IMPERIAL NAVY\", cat=\"title\"},\r\n    {type=\"Thunderbolt\", cat=\"fighter\", cost=25, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3,  minSpeed=2, maxSpeed=6, maxAlt=5,\r\n            guid=\"36e749\", image=\"http://cloud-3.steamusercontent.com/ugc/779608208368330011/743D81CA9D4BC46172B07B4911CBB19A64D7131C/\"},\r\n    {type=\"Thunderbolt Fury\", cat=\"fighter\", cost=25, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3,  minSpeed=2, maxSpeed=6, maxAlt=5,\r\n            guid=\"36e749\", image=\"http://cloud-3.steamusercontent.com/ugc/777357589157352731/3352FB4DB7F352E3B050771E1B764B445CED2EF2/\"},\r\n    {type=\"Executioner\", cat=\"fighter\", cost=23, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5,6}, handling=3,  minSpeed=2, maxSpeed=7, maxAlt=5,\r\n            guid=\"a13cf0\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107281998/671E06F39C00F95518EE96444F645AB367821878/\"},\r\n    {type=\"Marauder\", cat=\"bomber\", cost=23, structure=5, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=4,  minSpeed=2, maxSpeed=5, maxAlt=5,\r\n            guid=\"1e2250\", image=\"http://cloud-3.steamusercontent.com/ugc/779608208368454033/B74AE35CCAAE4010D89F6309F840AD664785E35D/\"},\r\n    {type=\"Marauder Destroyer\", cat=\"bomber\", cost=27, structure=5, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=4,  minSpeed=2, maxSpeed=5, maxAlt=5,\r\n            guid=\"d4bd42\", image=\"http://cloud-3.steamusercontent.com/ugc/777357589157235021/8B5C64123FAA1401B8C87D673C5590C4BEA5EB93/\"},\r\n    {type=\"Blue Devil\", cat=\"bomber\", cost=26, structure=5, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=4,  minSpeed=2, maxSpeed=5, maxAlt=5,\r\n            guid=\"bf8c96\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107493846/28BDC4698D6A8E46EFC492A4D3BAA20BA077554C/\"},\r\n\r\n    {type=\"ORKS\", cat=\"title\" },\r\n    {type=\"Dakkajet\", cat=\"fighter\", cost=16, structure=2, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5}, handling=4,  minSpeed=4, maxSpeed=8, maxAlt=4,\r\n            guid=\"a8daed\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107567472/195D0D180BE4E1455EEC15F3FBE1269B7911DFAF/\"},\r\n    {type=\"Vulture\", cat=\"fighter\", cost=23, structure=2, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4,5}, handling=3,  minSpeed=3, maxSpeed=8, maxAlt=4,\r\n            guid=\"162a26\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107918695/4F3ABA1022455670FA9817F19387D6CA28C470BB/\"},\r\n    {type=\"Fighta Bommer\", cat=\"bomber\", cost=20, structure=3, transport=-1, fuel=-1, throttle=1, manoeuvres={1,2,3,4}, handling=4,  minSpeed=3, maxSpeed=7, maxAlt=4,\r\n            guid=\"bc8951\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107655644/075EC5BE665AFA6EF3708801E72CBB177862943B/\"},\r\n    {type=\"Big Burna\", cat=\"bomber\", cost=22, structure=3, transport=-1, fuel=-1, throttle=2, manoeuvres={1,2,3,4}, handling=4,  minSpeed=3, maxSpeed=7, maxAlt=4,\r\n            guid=\"fb514f\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107993093/9BD4AA9CF5103D2BA7C188FA283591CA0C1044CA/\"},\r\n    {type=\"Eavy Bommer\", cat=\"bomber\", cost=28, structure=6, transport=2, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=5,  minSpeed=2, maxSpeed=4, maxAlt=4,\r\n            guid=\"f8f75c\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107723270/56142D4579E7BE91A01817D1C550470193BD45B9/\"},\r\n    {type=\"Grot Bommer\", cat=\"bomber\", cost=28, structure=6, transport=3, fuel=-1, throttle=1, manoeuvres={1,2,3}, handling=5,  minSpeed=2, maxSpeed=4, maxAlt=4,\r\n            guid=\"6cd42b\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107778303/D0508CD0911A11A81BC3B3BF7A2DA1DDA197CC45/\"},\r\n\r\n}\r\nAvailableUpgrades={ -- This includes PILOTS, WEAPONS and UPGRADES\r\n    {type=\"Blank Upgrade\", cat=\"upgrade\", cost=0, desc=\"None\",\r\n            image=defaultImage},\r\n    {type=\"Custom Blank Upgrade\", cat=\"upgrade\", cost=0, desc=\"None\",\r\n            image=defaultImage},\r\n\r\n    {type=\"IMPERIAL NAVY\", cat=\"title\"},\r\n    {type=\"Hellstrike Missiles\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={2,2,2}, dmg=3, ammo=1, special={\"Ground Attack\", \"Extra damage(6+)\"}, desc=\"\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/773980053949536502/F1B7BD763A494F15BD4C69B1E4362E757F9A1AEC/\"},\r\n    {type=\"Skystrike Missiles\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={0,2,2}, dmg=3, ammo=1, special={\"Aerial Attack\", \"Extra damage(6+)\"}, desc=\"\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/773980053949538537/895FBD20C60D85FA03FD3B1BCD5AFCEE0E698229/\"},\r\n    {type=\"Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={4,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540980/ABA8D14C30F81095DB8C5DBB89A3E1A296CE8DC4/\"},\r\n    {type=\"Armoured Cockpit\", cat=\"upgrade\", cost=3, desc=\"When taking damage roll a D6, on a 6+ ignore that damage and dont loose hp\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108278093/A6DB0CAB01AF893DEE345B949DBEBD63FFC2A848/\"},\r\n    {type=\"Ejector Seats\", cat=\"upgrade\", cost=2, desc=\"When the aircraft is destroyed rolla D6, on a 5+ the aircraft is woth 75% of VP instead of 100%\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108211351/ADF5A7312FE59D0FAF6CAD7882CFBE568F3A458D/\"},\r\n    {type=\"Flares or Chaff Launchers\", cat=\"upgrade\", cost=1, desc=\"Once per game if the aircraft is hit by a weapon with AMMO caracteristic of 1,2 or 3 roll a D6. On 6+ the hit becames a miss.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108222571/D7AE00B3221EEFEE96096A81C16322AE859A48B9/\"},\r\n    {type=\"Imperial Ace\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108262070/E92693364F8F9720D9FD7B26671B0320E1F1044D/\"},\r\n    {type=\"Infra-red Targetting\", cat=\"upgrade\", cost=2, desc=\"If Night Fight or Bad Weather rules are in use, this aircraft does not reduce the FPR at Medium range.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108243713/9C7F8BF167F502528F515D87C4255BC0C6F08720/\"},\r\n    {type=\"Dagor-Jarni\", cat=\"pilot\", cost=0, desc=\"Once per game, when targetting an aircraft at lower altitude with Air-to-Air fire add a +1 to each FPW dice rolled.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876107326783/44A413C383C62E7E74109A17D16E6B2A3BD01612/\"},\r\n    {type=\"Gallus Barret\", cat=\"pilot\", cost=0, desc=\"When making a Bombing Run you may reroll any roll of 1s made with wing bombs.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876107524090/7A6CC785FB598BDB951773B52C5C998A6ABAC705/\"},\r\n    {type=\"Expert Gunner\", cat=\"crew\", cost=3, desc=\"Once per game, when making a Strafing Run, you may add a +1 modifier to each FPR dice when rolling to hit.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105953851263510/0D95A6EFBB05D770A7EFDD45F40981D1216F286A/\"},\r\n    {type=\"Lightning Reactions\", cat=\"crew\", cost=3, desc=\"Once per game, when when this aircraft is activated you may discard the Ace Manoeuvre that was chosen during the Choose Manoeuvre phase and immediately choose anothe Ace Manoeuvre.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105953851238390/E3EFBFA9ABEBFE7247A5BBC45BBA532B76EC727A/\"},\r\n    {type=\"Master Navigator\", cat=\"crew\", cost=2, desc=\"Once per game, after completing its movement, youmay move this aircraft in any direction, effectively allowing you to adjustits final position (but not its facing).\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105953851276001/F7B26C7F3C8573C026453A0BE1C7DDFF958D3B2A/\"},\r\n\r\n    {type=\"ORKS\", cat=\"title\"},\r\n    {type=\"Rokkits\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={3,2,1}, dmg=3, ammo=1, special={\"\"}, desc=\"\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/773980053949537617/3FDC30CEEDE9826E734922B612EBF40D53568396/\"},\r\n    {type=\"Wing Bombs\", cat=\"weapon\", cost=2, arc=\"Rear\", fpr={4,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(5+)\"}, desc=\"\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540980/ABA8D14C30F81095DB8C5DBB89A3E1A296CE8DC4/\"},\r\n    {type=\"Big Bombs\", cat=\"weapon\", cost=4, arc=\"Rear\", fpr={6,0,0}, dmg=2, ammo=1, special={\"Ground Attack\", \"Extra damage(4+)\"}, desc=\"\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/773980053949542873/4D43E2B3AE28E1A45584F02E5370A11092CAFAB7/\"},\r\n    {type=\"Grot Bomms\", cat=\"weapon\", cost=8, arc=\"Front, L-F, R-F\", fpr={0,0,0}, dmg=2, ammo=2, special={\"Autonomous Weapon\", \"Extra damage(4+)\"}, desc=\"\",\r\n            guid=\"d33149\",    image=\"http://cloud-3.steamusercontent.com/ugc/773980053955404576/ADA7428FD099FFBDD2A74D59E2E5437CBE39560E/\"},\r\n    {type=\"Big Shootas\", cat=\"weapon\", cost=2, arc=\"Front\", fpr={2,2,0}, dmg=5, ammo=0, special={\"\"}, desc=\"\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/773980053949540233/E32BF5DA9C975A896605E887EA8C22AD7CA07174/\"},\r\n    {type=\"Belching Smoke\", cat=\"upgrade\", cost=1, desc=\"Once per game if the aircraft is hit by a weapon with AMMO caracteristic of 1,2 or 3 roll a D6. On 6+ the hit becames a miss.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108048766/BEEBF83BDF177CF6C0A400DF743B0A17CE685961/\"},\r\n    {type=\"Extra Armour\", cat=\"upgrade\", cost=2, mod={maxSpeed=-1}, desc=\"Reduce the Max Speed by 1. If ht by enemy rolla  D6, on a 6 the damage is not taken.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108087827/38B9E33E3CDF1561E4A1D408C5137F078AB284B2/\"},\r\n    {type=\"Fly Boss\", cat=\"upgrade\", cost=5, desc=\"Once per game the aircraft can reroll a dice roll. All the dice must be rolled and the second roll is accepted, even if worse.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108262070/E92693364F8F9720D9FD7B26671B0320E1F1044D/\"},\r\n    {type=\"Kustom Big Shootas\", cat=\"upgrade\", cost=3, desc=\"Add the Big Shootas as Primary weapon, reduce the number of additional weapons that you can take by 1.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108102609/241C34E6A5C63AD5DD9502DFCA3566FED4D7ECD5/\"},\r\n    {type=\"Wazmek Speshul\", cat=\"upgrade\", cost=2, mod={minSpeed=1, maxSpeed=1}, desc=\"Increase both Min and Max Speed by 1, to a maximum of 9.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108076044/0C01E313B64E4816817A5C39B08E3538869594A9/\"},\r\n    {type=\"Da Black Barun\", cat=\"pilot\", cost=0, desc=\"When targetting an aircraft with Air-to-Air fire you may reroll any 1 rolled by FPR dice.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876107940521/DB6ABCEBC22C4F89F59DDE92778EE6A88B02044C/\"},\r\n    {type=\"Toofkraker\", cat=\"pilot\", cost=0, desc=\"Once per game, when making a Bombing Run you may add a +1 modifier to each FPR dice when rolling to hit.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105876108014367/15E50B1201DE4376DDF4A6F62E44E11872B173F0/\"},\r\n    {type=\"Ace Gunna\", cat=\"crew\", cost=3, desc=\"Once per game, when targetting an aircraft with Air-to-Air fire you may reroll any 1 rolled by FPR dice.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105953851313305/8D03B82F584E8CB2DD9AC504812D2E7AC4E537A8/\"},\r\n    {type=\"Lightning Reactions\", cat=\"crew\", cost=3, desc=\"Once per game, when when this aircraft is activated you may discard the Ace Manoeuvre that was chosen during the Choose Manoeuvre phase and immediately choose anothe Ace Manoeuvre.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105953851292297/030DBF934F7C8904BA32BE939B177F146E65504B/\"},\r\n    {type=\"Strategic Bommer\", cat=\"crew\", cost=2, desc=\"Once per game, when making a Bombing Run you may add a +1 modifier to each FPR dice when rolling to hit.\",\r\n            image=\"http://cloud-3.steamusercontent.com/ugc/775105953851327766/564496D8251814CD41FAFB319549E869638B670B/\"},\r\n\r\n}\r\n\r\nAvailableGroundDefences={\r\n--[[\r\n    {type=\"Blank Ground Defence\", cat=\"upgrade\", cost=0, desc=\"None\",\r\n            image=defaultImage},\r\n    {type=\"Custom Blank Ground Defence\", cat=\"upgrade\", cost=0, desc=\"None\",\r\n            image=defaultImage},\r\n    {type=\"defaultGroundDefence\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={2,1,1}, dmg=4, ammo=0, special={\"Effective Altitude (5)\",\"Ground-To-Air Fire\", \"Extra damage(5+)\"}, desc=\"\",\r\n                    image=defaultImage},\r\n]]\r\n    {type=\"IMPERIAL NAVY\", cat=\"title\"},\r\n    {type=\"Hydra Flak Battery\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={6,4,2}, dmg=5, ammo=0, special={\"Effective Altitude (2)\",\"Ground-To-Air Fire\"}, desc=\"\",\r\n            guid=\"1dbe8c\", image=\"http://cloud-3.steamusercontent.com/ugc/777357589157422806/A7370E8D655A43253704E94F83E4A064CE853205/\"},\r\n    {type=\"Manticore Missile Battery\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={2,1,1}, dmg=4, ammo=0, special={\"Effective Altitude (5)\",\"Ground-To-Air Fire\", \"Extra damage(5+)\"}, desc=\"\",\r\n            guid=\"852b47\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107226285/FB75EE29C73FE78C5F7B4ECD03A7DE206E66444D/\"},\r\n\r\n    {type=\"ORKS\", cat=\"title\"},\r\n    {type=\"Flak Platform\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={8,4,2}, dmg=5, ammo=0, special={\"Effective Altitude (2)\",\"Ground-To-Air Fire\"}, desc=\"\",\r\n            guid=\"ddf175\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107859364/EEB3FAB00BF204F20039B9ACD7F77E888C77A623/\"},\r\n    {type=\"Eavy Flak Kannon\", cat=\"weapon\", cost=7, structure=2, arc=\"All\", fpr={2,1,1}, dmg=4, ammo=0, special={\"Effective Altitude (4)\",\"Ground-To-Air Fire\", \"Extra damage(6+)\"}, desc=\"\",\r\n            guid=\"ad3d14\", image=\"http://cloud-3.steamusercontent.com/ugc/775105876107881156/9FB91012AA6DC3914F9916FCEC7ED4BAAD954B0F/\"},\r\n}\r\n\r\n\r\nblankBase_GUID=\"530aa8\"\r\nblankAutonomous_GUID=\"34f590\"\r\nblankCharacter_GUID=\"48ad0a\"\r\nblankDataCard_GUID=\"93ba66\"\r\n\r\nupgradeHeight=250\r\nupgradeWidth=2400\r\nXoffset=0\r\nYoffset=4\r\nXoffsetSecondary=8\r\nZoffset=25\r\n\r\nspawnBaseBtn = {\r\n    label=\"SPAWN HEX BASE\", click_function=\"spawnBase\", func_param={card=\"\"}, function_owner=self,\r\n    position={(-XoffsetSecondary/2)+Xoffset,Yoffset,Zoffset-2}, rotation={0,0,0}, height=400, width=3000,\r\n    font_size=300, color=\"Black\", font_color=\"White\", tooltip=\"LMB Aircraft\\nRMB Autonomous weapon\"\r\n}\r\nspawnCharacterBtn = {\r\n    label=\"SPAWN CHARACTER\", click_function=\"spawnCharacter\", func_param={card=\"\"}, function_owner=self,\r\n    position={(XoffsetSecondary/2)+Xoffset,Yoffset,Zoffset-2}, rotation={0,0,0}, height=400, width=3000,\r\n    font_size=300, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nmainTitleBtn = {\r\n      label=\"D A T A S H E E T      A N D         D A T A C A R D S    -   Left Click\\nM O D E L S    -   Right Click                                                           \", click_function=\"none1\",func_param={card=\"\"}, function_owner=self,\r\n--    label=\"D A T A S H E E T      A N D         D A T A C A R D S    -   Left Click\\nD A T A S H E E T      A N D         D A T A C A R D S    -   Left Click\"\r\n    position={0+Xoffset,Yoffset,Zoffset-0.5}, rotation={0,0,0}, height=900, width=12000,\r\n    font_size=350, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nmainTitle2Btn = {\r\n    label=\"GAMING TOOLS\", click_function=\"none1\",func_param={card=\"\"}, function_owner=self,\r\n    position={-15+Xoffset,Yoffset,Zoffset}, rotation={0,0,0}, height=500, width=4000,\r\n    font_size=400, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nmainTitlePlanesBtn = {\r\n    label=\"AIRCRAFTS\", click_function=\"none1\",func_param={card=\"\"}, function_owner=self,\r\n    position={-XoffsetSecondary+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=400, width=3000,\r\n    font_size=300, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nmainTitleUpgradesBtn = {\r\n    label=\"UPGRADES\", click_function=\"none2\", func_param={card=\"\"}, function_owner=self,\r\n    position={0+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=400, width=3000,\r\n    font_size=300, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nmainTitleGroundDefencesBtn = {\r\n    label=\"GROUND DEFENCES\", click_function=\"none2\", func_param={card=\"\"}, function_owner=self,\r\n    position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=400, width=3000,\r\n    font_size=300, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\navailablePlaneBtn = {\r\n    label=\"NONE\", click_function=\"none3\", func_param={card=\"\"}, function_owner=self,\r\n    position={-XoffsetSecondary+Xoffset,Yoffset,0}, rotation={0,0,0}, height=200*1, width=2000*1,\r\n    font_size=250, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\navailableUpgradeBtn = {\r\n    label=\"NONE\", click_function=\"none4\", func_param={card=\"\"}, function_owner=self,\r\n    position={XoffsetSecondary+Xoffset,Yoffset,0}, rotation={0,0,0}, height=200*1, width=2000*1,\r\n    font_size=250, color=\"Black\", font_color=\"White\"\r\n}\r\nmainTitleUpgradesBtn = {\r\n    label=\"UPGRADES\", click_function=\"none2\", func_param={card=\"\"}, function_owner=self,\r\n    position={0+Xoffset,Yoffset,Zoffset+1}, rotation={0,0,0}, height=400, width=3000,\r\n    font_size=300, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\n\r\nbuttonList={}\r\nplaneButtonsList={}\r\nupgradeButtonsList={}\r\ngroundDefencesButtonsList={}\r\n\r\nspawningPosition={-15,10,32}\r\nspawningPosition2={spawningPosition[1],spawningPosition[2],-spawningPosition[3]}\r\n\r\nfunction onLoad()\r\n    if true then return end\r\n    --self.setPosition({88.5, -2.5, 0.00})\r\n    self.setLock(true)\r\n    self.interactable=false\r\n    hideMasterModels()\r\n    blankBase=getObjectFromGUID(blankBase_GUID)\r\n    if blankBase ~= nil then\r\n        blankBase.setPosition({90,-5,20})\r\n        blankBase.setLock(true)\r\n        blankBase.interactable=  false\r\n    end\r\n    blankAutonomous=getObjectFromGUID(blankAutonomous_GUID)\r\n    if blankAutonomous ~= nil then\r\n        blankAutonomous.setPosition({90,-5,20})\r\n        blankAutonomous.setLock(true)\r\n        blankAutonomous.interactable=  false\r\n    end\r\n    blankCharacter=getObjectFromGUID(blankCharacter_GUID)\r\n    if  blankCharacter ~= nil then\r\n        blankCharacter.setPosition({90,-5,0})\r\n        blankCharacter.setLock(true)\r\n        blankCharacter.interactable=  false\r\n    end\r\n    blankDatacard=getObjectFromGUID(\"93ba66\")\r\n    if  blankDatacard ~= nil then\r\n        blankDatacard.setPosition({90,-5,-20})\r\n        blankDatacard.setLock(true)\r\n        blankDatacard.interactable=  false\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    local buttonList={}\r\n    table.insert(buttonList, mainTitleBtn)\r\n    --table.insert(buttonList, mainTitle2Btn)\r\n    table.insert(buttonList, spawnBaseBtn)\r\n    table.insert(buttonList, spawnCharacterBtn)\r\n    for i, btn in ipairs(buttonList) do\r\n        self.createButton(btn)\r\n        -- creating secondary list for other side\r\n        --btn.click_function=btn.click_function..\"2\"\r\n        --_G[btn.click_function] = function()  spawnCard(btn.label, \"\", {0,2,-15}) end\r\n        btn.rotation={0,180,0}\r\n        local pos={x=btn.position[1],y=btn.position[2],z=btn.position[3]}\r\n        btn.position=rotatePointXZ(pos, {x=0,y=0,z=0}, 180)\r\n        self.createButton(btn)\r\n        -- END  secondary list for other side\r\n    end\r\n    writePlanesList()\r\n    writeUpgradesList()\r\n    writeGroundDefencesList()\r\nend\r\n\r\nfunction writePlanesList()\r\n    planeButtonsList={}\r\n\r\n    self.createButton(mainTitlePlanesBtn)\r\n    self.createButton(blankDatasheetBtn)\r\n    for i, type in ipairs(AvailablePlanes) do\r\n        local availablePlaneBtn2={}\r\n        --availablePlaneBtn2=availablePlaneBtn\r\n        if type.type ~= \"defaultPlaneStats\" then\r\n            if type.cat==\"title\" then\r\n                availablePlaneBtn2.height=350\r\n                availablePlaneBtn2.width=2400\r\n                availablePlaneBtn2.label=string.gsub(type.type, \" \", \" \")\r\n                availablePlaneBtn2.click_function=\"none\"\r\n                availablePlaneBtn2.color=\"Black\"\r\n                availablePlaneBtn2.font_color=\"White\"\r\n            else\r\n                availablePlaneBtn2.height=upgradeHeight\r\n                availablePlaneBtn2.width=upgradeWidth\r\n                availablePlaneBtn2.label=string.gsub(type.type, \" \", \" \")..\" (\"..type.cost..\")\"\r\n                availablePlaneBtn2.label=type.type\r\n                availablePlaneBtn2.click_function=availablePlaneBtn2.label..i\r\n                if type.cat == \"scout\" then\r\n                    availablePlaneBtn2.color=\"Blue\"\r\n                end\r\n                if type.cat == \"fighter\" then\r\n                    availablePlaneBtn2.color=\"Green\"\r\n                end\r\n                if type.cat == \"bomber\" then\r\n                    availablePlaneBtn2.color=\"Red\"\r\n                end\r\n            end\r\n            availablePlaneBtn2.position={-XoffsetSecondary+Xoffset,Yoffset,Zoffset+0.3+i*0.75}\r\n            availablePlaneBtn2.function_owner=self\r\n            availablePlaneBtn2.font_size=250\r\n\r\n            table.insert(planeButtonsList, availablePlaneBtn2)\r\n            --printToAll(\"ADDED   \"..planeButtonsList[#planeButtonsList].label, \"Green\")\r\n            for l, val in ipairs(planeButtonsList) do\r\n                --printToAll(\"RECAP   \"..val.label)\r\n            end\r\n            --self.createButton(availablePlaneBtn2)\r\n        end\r\n    end\r\n    for j, btn in pairs(planeButtonsList) do\r\n        if _G[btn.click_function] == nil then\r\n            _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datasheet\",  spawningPosition, player, alt) end\r\n        end\r\n        self.createButton(btn)\r\n        -- creating secondary list for other side\r\n        btn.click_function=btn.click_function..\"2\"\r\n        _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datasheet\",  spawningPosition2, player, alt) end\r\n        btn.rotation={0,180,0}\r\n        local pos={x=btn.position[1],y=btn.position[2],z=btn.position[3]}\r\n        btn.position=rotatePointXZ(pos, {x=0,y=0,z=0}, 180)\r\n        self.createButton(btn)\r\n        -- END  secondary list for other side\r\n    end\r\nend\r\n\r\nfunction writeUpgradesList()\r\n    upgradeButtonsList={}\r\n    self.createButton(mainTitleUpgradesBtn)\r\n    for i, type in ipairs(AvailableUpgrades) do\r\n        local availableUpgradeBtn2={}\r\n        if type.type ~= \"defaultPlaneStats\" then\r\n            if type.cat==\"title\" then\r\n                availableUpgradeBtn2.height=350\r\n                availableUpgradeBtn2.width=2400\r\n                availableUpgradeBtn2.label=string.gsub(type.type, \" \", \" \")\r\n                availableUpgradeBtn2.click_function=\"none\"\r\n                availableUpgradeBtn2.color=\"Black\"\r\n                availableUpgradeBtn2.font_color=\"White\"\r\n            else\r\n                availableUpgradeBtn2.height=upgradeHeight\r\n                availableUpgradeBtn2.width=upgradeWidth\r\n                availableUpgradeBtn2.label=string.gsub(type.type, \" \", \" \")..\" (\"..type.cost..\")\"\r\n                availableUpgradeBtn2.label=type.type\r\n                availableUpgradeBtn2.click_function=availableUpgradeBtn2.label..i\r\n                if type.cat == \"pilot\" then\r\n                    availableUpgradeBtn2.color=\"Blue\"\r\n                end\r\n                if type.cat == \"crew\" then\r\n                    availableUpgradeBtn2.color=\"Green\"\r\n                end\r\n                if type.cat == \"weapon\" then\r\n                    availableUpgradeBtn2.color=\"Red\"\r\n                end\r\n                if type.cat == \"upgrade\" then\r\n                    availableUpgradeBtn2.color=\"Orange\"\r\n                end\r\n                -- wpn RED     Up Orange     pilot BLUE   crew GREEN\r\n            end\r\n            availableUpgradeBtn2.position={0+Xoffset,Yoffset,Zoffset+0.3+(i+1)*0.75}\r\n            availableUpgradeBtn2.function_owner=self\r\n            availableUpgradeBtn2.font_size=250\r\n\r\n            table.insert(upgradeButtonsList, availableUpgradeBtn2)\r\n            --self.createButton(availableUpgradeBtn)\r\n        end\r\n    end\r\n    for j, btn in pairs(upgradeButtonsList) do\r\n        if _G[btn.click_function] == nil then\r\n            _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\", spawningPosition, player, alt) end\r\n        end\r\n        self.createButton(btn)\r\n        -- creating secondary list for other side\r\n        btn.click_function=btn.click_function..\"2\"\r\n        _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\", spawningPosition2, player, alt) end\r\n        btn.rotation={0,180,0}\r\n        local pos={x=btn.position[1],y=btn.position[2],z=btn.position[3]}\r\n        btn.position=rotatePointXZ(pos, {x=0,y=0,z=0}, 180)\r\n        self.createButton(btn)\r\n        -- END  secondary list for other side\r\n    end\r\nend\r\n\r\nfunction writeGroundDefencesList()\r\n    groundDefencesButtonsList={}\r\n    self.createButton(mainTitleGroundDefencesBtn)\r\n    for i, type in ipairs(AvailableGroundDefences) do\r\n        local availableUpgradeBtn2={}\r\n        if type.type ~= \"defaultPlaneStats\" then\r\n            if type.cat==\"title\" then\r\n                availableUpgradeBtn2.height=350\r\n                availableUpgradeBtn2.width=2400\r\n                availableUpgradeBtn2.label=string.gsub(type.type, \" \", \" \")\r\n                availableUpgradeBtn2.click_function=\"none\"\r\n                availableUpgradeBtn2.color=\"Black\"\r\n                availableUpgradeBtn2.font_color=\"White\"\r\n            else\r\n                availableUpgradeBtn2.height=upgradeHeight\r\n                availableUpgradeBtn2.width=upgradeWidth\r\n                availableUpgradeBtn2.label=string.gsub(type.type, \" \", \" \")..\" (\"..type.cost..\")\"\r\n                availableUpgradeBtn2.label=type.type\r\n                availableUpgradeBtn2.click_function=availableUpgradeBtn2.label..i\r\n                if type.cat == \"pilot\" then\r\n                    availableUpgradeBtn2.color=\"Blue\"\r\n                end\r\n                if type.cat == \"crew\" then\r\n                    availableUpgradeBtn2.color=\"Green\"\r\n                end\r\n                if type.cat == \"weapon\" then\r\n                    availableUpgradeBtn2.color=\"Red\"\r\n                end\r\n                if type.cat == \"upgrade\" then\r\n                    availableUpgradeBtn2.color=\"Orange\"\r\n                end\r\n                -- wpn RED     Up Orange     pilot BLUE   crew GREEN\r\n            end\r\n            availableUpgradeBtn2.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+0.3+(i+1)*0.75}\r\n            availableUpgradeBtn2.function_owner=self\r\n            availableUpgradeBtn2.font_size=250\r\n\r\n            table.insert(groundDefencesButtonsList, availableUpgradeBtn2)\r\n            --self.createButton(availableUpgradeBtn)\r\n        end\r\n    end\r\n    for j, btn in pairs(groundDefencesButtonsList) do\r\n        if _G[btn.click_function] == nil then\r\n            _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\",spawningPosition, player, alt) end\r\n        end\r\n        self.createButton(btn)\r\n        -- creating secondary list for other side\r\n        btn.click_function=btn.click_function..\"2\"\r\n        _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\", spawningPosition2, player, alt) end\r\n        btn.rotation={0,180,0}\r\n        local pos={x=btn.position[1],y=btn.position[2],z=btn.position[3]}\r\n        btn.position=rotatePointXZ(pos, {x=0,y=0,z=0}, 180)\r\n        self.createButton(btn)\r\n        -- END  secondary list for other side\r\n    end\r\n\r\nend\r\n\r\nfunction hideMasterModels()\r\n    local startPos={90,-5,50}\r\n    local counter=0\r\n    local step=6\r\n    local items={}\r\n    for i, plane in ipairs(AvailablePlanes) do\r\n        table.insert(items, plane)\r\n    end\r\n    for i, upgrade in ipairs(AvailableUpgrades) do\r\n        table.insert(items, upgrade)\r\n    end\r\n    for i, defence in ipairs(AvailableGroundDefences) do\r\n        table.insert(items, defence)\r\n    end\r\n    for i, available in ipairs(items) do\r\n        local master=getObjectFromGUID(available.guid)\r\n        if master ~= nil then\r\n            master.setPosition({startPos[1],startPos[2],startPos[3]-counter*step})\r\n            master.setLock(true)\r\n            master.interactable=false\r\n            counter=counter+1\r\n        end\r\n    end\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction spawnBase(obj, player, alt)\r\n    cloned=nil\r\n    local _spawnPos=spawningPosition\r\n    clonedYRot=0\r\n    local invert= false\r\n    if Player[player].getPointerPosition().z<0 then\r\n         invert=true\r\n         clonedYRot=180\r\n    end\r\n    if not alt then\r\n        if blankBase == nil then\r\n            printToAll(\"NO BASE\", \"Red\")\r\n            return\r\n        end\r\n        if invert then\r\n            cloned= blankBase.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],-_spawnPos[3]}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        else\r\n            cloned= blankBase.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        end\r\n    else\r\n        if blankAutonomous == nil then\r\n            printToAll(\"NO BASE\", \"Red\")\r\n            return\r\n        end\r\n        if invert then\r\n            cloned= blankAutonomous.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],-_spawnPos[3]}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        else\r\n            cloned= blankAutonomous.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        end\r\n    end\r\n    Wait.frames(unlockClone, 2)\r\nend\r\n\r\nfunction spawnCharacter(obj, player, alt)\r\n    cloned=nil\r\n    local _spawnPos=spawningPosition\r\n\r\n    clonedYRot=180\r\n    local invert= false\r\n    if Player[player].getPointerPosition().z<0 then\r\n         invert=true\r\n         clonedYRot=0\r\n    end\r\n    if blankCharacter == nil then\r\n        printToAll(\"NO CHARACTER SHEET\", \"Red\")\r\n        return\r\n    end\r\n    if invert then\r\n        cloned= blankCharacter.clone({\r\n            position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],-_spawnPos[3]-5}),\r\n            snap_to_grid = true,\r\n        })\r\n\r\n    else\r\n        cloned= blankCharacter.clone({\r\n            position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]+5}),\r\n            snap_to_grid = true,\r\n        })\r\n\r\n    end\r\n    Wait.frames(unlockClone, 2)\r\nend\r\n\r\nfunction unlockClone()\r\n    cloned.setLock(false)\r\n    cloned.interactable=true\r\n    cloned.sticky=false\r\n    cloned.use_snap_points=false\r\n    cloned.auto_raise=false\r\n    cloned.setRotation({0,clonedYRot,0})\r\n    clonedYRot=0\r\nend\r\n\r\nfunction spawnModel(_type, list, _spawnPosition) -- list is SpawnableGUID\r\n    local myGUID= list[_type]\r\n    local master= getObjectFromGUID(myGUID)\r\n    cloned = nil\r\n    if master ~= nil then\r\n        clone= master.clone({\r\n            position     = self.positionToWorld(_spawnPosition),\r\n            snap_to_grid = true,\r\n        })\r\n    end\r\n    Wait.frames(unlockClone, 2)\r\n    return cloned  -- in other function    spawned=spawnModel(_type, list, _spawnPosition)\r\nend\r\n\r\nfunction spawnCard(card, type, _spawnPosition, player, alt)\r\n    if type==\"title\" then\r\n        return\r\n    end\r\n\r\n    clonedYRot=0\r\n    if Player[player].getPointerPosition().z<0 then\r\n          clonedYRot=180\r\n    end\r\n    local items={}\r\n    for i, plane in ipairs(AvailablePlanes) do\r\n        table.insert(items, plane)\r\n    end\r\n    for i, upgrade in ipairs(AvailableUpgrades) do\r\n        table.insert(items, upgrade)\r\n    end\r\n    for i, defence in ipairs(AvailableGroundDefences) do\r\n        table.insert(items, defence)\r\n    end\r\n    for i, available in ipairs(items) do\r\n        if available.type == card then\r\n            local adj=5\r\n            if _spawnPosition[3]<0 then\r\n                adj=-5\r\n            end\r\n            if alt then --spawn model\r\n                local model=getObjectFromGUID(available.guid)\r\n                if model ~= nil then\r\n                    cloned=model.clone({\r\n                        position     = self.positionToWorld({_spawnPosition[1],_spawnPosition[2],_spawnPosition[3]}),\r\n                        snap_to_grid = false,\r\n                    })\r\n                    Wait.frames(unlockClone, 2)\r\n                    return\r\n                end\r\n                printToAll(\"No model available!\", \"Red\")\r\n                return\r\n            else -- spawn card\r\n                local img=available.image\r\n                if img==\"\" or img== nil then\r\n                    img=backImage\r\n                end\r\n                local tileDataType=\"Datacard\"\r\n                local tileDesc=\"\"\r\n                local tileScale={1.15,0.2,0.75}\r\n                if available.cat == \"scout\" or available.cat == \"fighter\" or available.cat == \"bomber\" then\r\n                    tileScale={2.3,0.2,1.5}\r\n                    tileDataType=\"Datasheet\"\r\n                end\r\n                if available.cat == \"weapon\" then\r\n                    tileDesc=\"ARC    \"..available.arc..\"\\nFPR    \"..available.fpr[1]..\" / \"..available.fpr[2]..\" / \"..available.fpr[3]..\"\\nDMG    \"..available.dmg..\"+\\nAMMO   \"..available.ammo\r\n                    tileDesc=tileDesc..\"\\nSPECIAL \"\r\n                    --local specList=available.special\r\n                    for i=1, (#available.special-1)  do\r\n                        if i==1 then\r\n                            tileDesc=tileDesc..available.special[i]..\"\\n\"\r\n                        else\r\n                            tileDesc=tileDesc..\"              \"..available.special[i]..\"\\n\"\r\n                        end\r\n                    end\r\n                        tileDesc=tileDesc..\"              \"..available.special[#available.special]\r\n                end\r\n                if available.cat == \"pilot\" or available.cat == \"crew\" or available.cat == \"upgrade\" then\r\n                    tileDesc=available.desc\r\n                end\r\n                if available.cat == \"pilot\" or available.cat == \"crew\" then\r\n                    tileScale={0.75,0.2,1.15}\r\n                end\r\n                local spawned= blankDatacard.clone({\r\n                    position     = self.positionToWorld({_spawnPosition[1],_spawnPosition[2],_spawnPosition[3]+adj}),\r\n                    snap_to_grid = false,\r\n                })\r\n                spawned.setScale(tileScale)\r\n                spawned.setCustomObject( {type=0, image=img, image_bottom=backImage, thickness=0.2, stackable=false})\r\n                spawned.setName(available.type..\" \"..tileDataType)\r\n                tileDesc=\"\"\r\n                spawned.setDescription(tileDesc)\r\n                spawned.interactable=true\r\n                spawned.sticky=false\r\n                spawned.auto_raise=false\r\n                spawned.setLock(false)\r\n                spawned.setRotation({0,clonedYRot,0})\r\n                spawned.reload()\r\n                --Wait.frames(unlockClone, 2)\r\n                return\r\n            end\r\n                printToAll(\"No datasheet / datacard available!\", \"Red\")\r\n        end\r\n\r\n    end\r\n\r\n\r\nend\r\n\r\n\r\n\r\nfunction spawn1()\r\nend\r\nfunction spawn2()\r\nend\r\n\r\nfunction none()\r\nend\r\nfunction none1()\r\nend",
      "LuaScriptState": "",
      "GUID": "5a7404"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 88.50446,
        "posY": 2.63165855,
        "posZ": -21.499979,
        "rotX": 0.07354119,
        "rotY": 89.99968,
        "rotZ": 1.4407442E-06,
        "scaleX": 2.0,
        "scaleY": 1.5,
        "scaleZ": 2.25
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/856108193884777236/E081C70D691BB9C4BE542DC03BCB6B0B76DD0BDC/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/856108193884775088/EE6877FD1CAF3F75B171191ED5F713E97949B9D5/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/856108193884777236/E081C70D691BB9C4BE542DC03BCB6B0B76DD0BDC/",
        "Convex": false,
        "MaterialIndex": 0,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 7.0,
          "FresnelStrength": 0.4
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "658b95"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 88.5,
        "posY": 0.874585032,
        "posZ": 19.54269,
        "rotX": 0.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 3.25,
        "scaleY": 2.5,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/84845992354757828/F8493735190229F5D81F219CCAB378EC07E96643/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/84845992354763049/19F5743F5DBACBDDA5FE15FCEB6559AE0A206BC2/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/84845992354757828/F8493735190229F5D81F219CCAB378EC07E96643/",
        "Convex": false,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "9a11ee"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 88.5,
        "posY": 1.56605,
        "posZ": 23.9779167,
        "rotX": -1.5647347E-06,
        "rotY": 0.0,
        "rotZ": 4.71936147E-07,
        "scaleX": 0.9,
        "scaleY": 0.9,
        "scaleZ": 0.9
      },
      "Nickname": "Burna Bommer",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992161334,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491669722/58967034A9B176C0F480E0DA31A0014AE22975BB/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255007505/557B036872088888BD29489C2523CF8B037458FA/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "da7a55"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -3.75,
        "posY": 0.894134045,
        "posZ": 35.0,
        "rotX": 1.74654917E-06,
        "rotY": -3.103837E-05,
        "rotZ": -1.43326488E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "4 Structure Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -3.73942447,
            "posY": 2.69343162,
            "posZ": 35.90905,
            "rotX": 358.667145,
            "rotY": 180.012589,
            "rotZ": 0.0496545881,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "4 Structure Points",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254498742/41098547660CD950E6AF52FCD4C2B916A10A0F14/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254498742/41098547660CD950E6AF52FCD4C2B916A10A0F14/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4dcb85"
        }
      ],
      "GUID": "73cfaa"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 3.75,
        "posY": 0.894134045,
        "posZ": 35.0,
        "rotX": 1.54343059E-06,
        "rotY": 2.59645674E-07,
        "rotZ": -1.04972749E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "1 Structure Point",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 3.66265,
            "posY": 2.813931,
            "posZ": 35.77721,
            "rotX": 358.828552,
            "rotY": 180.054184,
            "rotZ": 359.77713,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "1 Structure Point",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254488894/35FB3AF989774E4240763F6D9D218CB9B5109AEE/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254488894/35FB3AF989774E4240763F6D9D218CB9B5109AEE/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "edfec3"
        }
      ],
      "GUID": "e226e9"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.25,
        "posY": 0.894134045,
        "posZ": 37.55913,
        "rotX": 1.60111074E-06,
        "rotY": 5.2694144E-05,
        "rotZ": -3.48844537E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Spin Marker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391991466,
        "b": 0.112991475
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -1.20548415,
            "posY": 2.98114157,
            "posZ": 37.7531128,
            "rotX": 358.994415,
            "rotY": 164.981964,
            "rotZ": 0.5338714,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "Spin",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254444075/9D1076C44A0153AE3F2F05D19F449F8F058909BC/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254444075/9D1076C44A0153AE3F2F05D19F449F8F058909BC/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "397508"
        }
      ],
      "GUID": "d0b003"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.24999917,
        "posY": 0.883002043,
        "posZ": -37.5,
        "rotX": -2.05308424E-06,
        "rotY": 179.991379,
        "rotZ": 1.25134034E-06,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Stall Marker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391991466,
        "b": 0.112991475
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.519589,
            "posY": 2.93813181,
            "posZ": 37.9254074,
            "rotX": 0.1757134,
            "rotY": 314.96994,
            "rotZ": 359.137848,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "Stall",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254420351/EEBBE4C66562AFCC8FD7801528924F542A62CE71/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254420351/EEBBE4C66562AFCC8FD7801528924F542A62CE71/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "362b59"
        }
      ],
      "GUID": "3a1f9d"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.25,
        "posY": 0.883002,
        "posZ": -35.0,
        "rotX": -1.85223939E-06,
        "rotY": 179.991425,
        "rotZ": 7.81452854E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "2 Structure Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 1.05071723,
            "posY": 2.79907632,
            "posZ": 35.7802925,
            "rotX": 7.754771E-07,
            "rotY": 179.977448,
            "rotZ": 3.45970079E-07,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "2 Structure Points",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254492853/5C87FA73ACD43C69CB2F3F80E49AB50361C770D5/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254492853/5C87FA73ACD43C69CB2F3F80E49AB50361C770D5/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "6dbada"
        }
      ],
      "GUID": "738ab7"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -1.59935354E-08,
        "posY": 0.883002162,
        "posZ": -40.0,
        "rotX": -1.84429837E-06,
        "rotY": 179.991425,
        "rotZ": 6.21095239E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Tailing Marker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.905,
        "g": 0.898,
        "b": 0.171991915
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 0.09762553,
            "posY": 2.96867228,
            "posZ": 40.3028336,
            "rotX": 359.604675,
            "rotY": 134.992783,
            "rotZ": 0.748525262,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "Tailing",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254386396/0420F4806D3B3ABCD19B0ACA7F0F6D162CE055C4/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254386396/0420F4806D3B3ABCD19B0ACA7F0F6D162CE055C4/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "2abbef"
        }
      ],
      "GUID": "425bda"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 1.24999928,
        "posY": 0.883002,
        "posZ": -35.0,
        "rotX": -1.69192356E-06,
        "rotY": 183.092743,
        "rotZ": 3.11649927E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "3 Structure Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -1.226482,
            "posY": 2.93329525,
            "posZ": 35.50914,
            "rotX": 358.77182,
            "rotY": 179.9453,
            "rotZ": 0.0999037,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "3 Structure Points",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254496563/ECDEC452B795BDF7588341ECD4F8EF1D935E0001/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254496563/ECDEC452B795BDF7588341ECD4F8EF1D935E0001/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "f43dc4"
        }
      ],
      "GUID": "a23b21"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 3.75000048,
        "posY": 0.883002,
        "posZ": -35.0,
        "rotX": -1.99399574E-06,
        "rotY": 183.092316,
        "rotZ": 8.47007641E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "4 Structure Points",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -3.73942447,
            "posY": 2.69343162,
            "posZ": 35.90905,
            "rotX": 358.667145,
            "rotY": 180.012589,
            "rotZ": 0.0496545881,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "4 Structure Points",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254498742/41098547660CD950E6AF52FCD4C2B916A10A0F14/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254498742/41098547660CD950E6AF52FCD4C2B916A10A0F14/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "4dcb85"
        }
      ],
      "GUID": "60929e"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": -3.75,
        "posY": 0.8830019,
        "posZ": -35.0,
        "rotX": -1.72224827E-06,
        "rotY": 179.991425,
        "rotZ": 4.549151E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "1 Structure Point",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": 3.66265,
            "posY": 2.813931,
            "posZ": 35.77721,
            "rotX": 358.828552,
            "rotY": 180.054184,
            "rotZ": 359.77713,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "1 Structure Point",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254488894/35FB3AF989774E4240763F6D9D218CB9B5109AEE/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254488894/35FB3AF989774E4240763F6D9D218CB9B5109AEE/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "edfec3"
        }
      ],
      "GUID": "9d77de"
    },
    {
      "Name": "Infinite_Bag",
      "Transform": {
        "posX": 1.25000083,
        "posY": 0.8830019,
        "posZ": -37.5,
        "rotX": -1.89106117E-06,
        "rotY": 179.991379,
        "rotZ": 3.893298E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Spin Marker",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9559999,
        "g": 0.391991436,
        "b": 0.112991445
      },
      "Locked": false,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "ContainedObjects": [
        {
          "Name": "Custom_Tile",
          "Transform": {
            "posX": -1.20548415,
            "posY": 2.98114157,
            "posZ": 37.7531128,
            "rotX": 358.994415,
            "rotY": 164.981964,
            "rotZ": 0.5338714,
            "scaleX": 0.2647439,
            "scaleY": 1.0,
            "scaleZ": 0.2647439
          },
          "Nickname": "Spin",
          "Description": "",
          "GMNotes": "",
          "ColorDiffuse": {
            "r": 0.0,
            "g": 0.0,
            "b": 0.0
          },
          "Locked": false,
          "Grid": false,
          "Snap": false,
          "IgnoreFoW": false,
          "Autoraise": true,
          "Sticky": false,
          "Tooltip": true,
          "GridProjection": false,
          "HideWhenFaceDown": false,
          "Hands": false,
          "CustomImage": {
            "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254444075/9D1076C44A0153AE3F2F05D19F449F8F058909BC/",
            "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254444075/9D1076C44A0153AE3F2F05D19F449F8F058909BC/",
            "ImageScalar": 1.0,
            "WidthScale": 0.0,
            "CustomTile": {
              "Type": 2,
              "Thickness": 0.1,
              "Stackable": false,
              "Stretch": true
            }
          },
          "XmlUI": "",
          "LuaScript": "",
          "LuaScriptState": "",
          "GUID": "397508"
        }
      ],
      "GUID": "6452b1"
    },
    {
      "Name": "Tablet",
      "Transform": {
        "posX": -102.149635,
        "posY": 2.0,
        "posZ": -2.682209E-07,
        "rotX": 1.1652005E-05,
        "rotY": 270.0,
        "rotZ": -7.11235361E-06,
        "scaleX": 4.0,
        "scaleY": 1.0,
        "scaleZ": 4.0
      },
      "Nickname": "Videotutorial",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Tablet": {
        "PageURL": "https://aeronautica-imperialis.com/"
      },
      "XmlUI": "",
      "LuaScript": "\r\nXoffset=4\r\nYoffset=0\r\nZoffset=0\r\n\r\nmainTitleBtn = {\r\n    label=\"V I D E O     T U T O R I A L S\", click_function=\"none\", function_owner=self,\r\n    position={Xoffset/self.getScale().x,Yoffset/self.getScale().y,Zoffset/self.getScale().y}, rotation={0,0,0}, height=400, width=3000, scale={1/self.getScale().x,1/self.getScale().y,1/self.getScale().z},\r\n    font_size=300, color=\"Black\", font_color=\"White\"\r\n}\r\n\r\nmainTitleBtn = {\r\n    label=\"V I D E O    T U T O R I A L S\\nRead text instructions first!\", click_function=\"none\", function_owner=self,\r\n    position={0,Yoffset,Zoffset-11}, rotation={0,0,0}, height=1200, width=5500,\r\n    font_size=430, color=\"Black\", font_color=\"White\"\r\n}\r\nhomeBtn = {\r\n    label=\"Areonautica Imperialis\\nofficial site\", click_function=\"setHome\", function_owner=self,\r\n    position={0,Yoffset,Zoffset+7}, rotation={0,0,0}, height=900, width=3200,\r\n    font_size=300, color=\"White\", font_color=\"Black\"\r\n}\r\ntutorial1Btn = {\r\n    label=\"How to\\nuse bases\", click_function=\"setTutorial1\", function_owner=self,\r\n    position={-Xoffset,Yoffset,Zoffset-8}, rotation={0,0,0}, height=900, width=1400,\r\n    font_size=300, color=\"White\", font_color=\"Black\"\r\n}\r\ntutorial2Btn = {\r\n    label=\"How to\\nset bases\", click_function=\"setTutorial2\", function_owner=self,\r\n    position={0,Yoffset,Zoffset-8}, rotation={0,0,0}, height=900, width=1400,\r\n    font_size=300, color=\"White\", font_color=\"Black\"\r\n}\r\ntutorial3Btn = {\r\n    label=\"How to set\\nfully playable\\naircraft\", click_function=\"setTutorial3\", function_owner=self,\r\n    position={Xoffset,Yoffset,Zoffset-8}, rotation={0,0,0}, height=900, width=1400,\r\n    font_size=200, color=\"White\", font_color=\"Black\"\r\n}\r\n\r\nfunction onLoad()\r\n    setHome()\r\n    writeMenu()\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    self.createButton(mainTitleBtn)\r\n    self.createButton(homeBtn)\r\n    self.createButton(tutorial1Btn)\r\n    self.createButton(tutorial2Btn)\r\n    self.createButton(tutorial3Btn)\r\nend\r\n\r\nfunction setHome()\r\n    self.setValue(\"https://aeronautica-imperialis.com/\")\r\nend\r\n\r\nfunction setTutorial1()\r\n    self.setValue(\"https://www.youtube.com/embed/tSLaOo2uk3s\")\r\nend\r\n\r\nfunction setTutorial2()\r\n    self.setValue(\"https://www.youtube.com/embed/1FhdRKbumnQ\")\r\n\r\nend\r\n\r\nfunction setTutorial3()\r\n    self.setValue(\"https://www.youtube.com/embed/iM8u8tSSdl0\")\r\n    --self.setValue(\"https://www.youtube.com/embed/z1BR3XsqAow\") --old tutorial NOT DELETE\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "GUID": "478779"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -4.0,
        "rotX": -1.59263789E-06,
        "rotY": 180.000122,
        "rotZ": 4.41210972E-07,
        "scaleX": 0.7000002,
        "scaleY": 0.7000002,
        "scaleZ": 0.7000002
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921616,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734585254911863/835068BF98145C6BD820CC16BFD2885D8E1ACEF3/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255008153/CBE720288D4A7E7B3460FEB9C5E9B11391E9165C/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "fb514f"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 8.0,
        "rotX": -1.67784378E-06,
        "rotY": 179.9995,
        "rotZ": 7.233636E-07,
        "scaleX": 0.250000119,
        "scaleY": 0.250000119,
        "scaleZ": 0.250000119
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491671678/1FD1FC4AA34B44DE29C10414671B2F669FCC522D/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585254843685/1427151E1C96A34025D2A07F8EF0B7CE3FFAEEC3/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "162a26"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 38.0,
        "rotX": -1.57069314E-06,
        "rotY": 179.995438,
        "rotZ": 3.24059442E-07,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491784074/D67164B03135AAE24E448C6D849DB6E8253C2C4A/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585254953220/CDAE7559C3A4CB93F748887ECFF5CE9355D57E10/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/952964455676160126/1E69621AF7CDB2D1715C25422AEFC9FA793B49D6/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a13cf0"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 20.0,
        "rotX": -1.36922858E-06,
        "rotY": 180.001129,
        "rotZ": 6.413442E-07,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491726709/BFE90909E41637D1BBAEB9A8A8F6F745EB158FA5/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255003306/19A68B5E788CC9AAEAD682A8D07D1361431E8605/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "bf8c96"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 14.0,
        "rotX": -1.25246208E-06,
        "rotY": 180.000931,
        "rotZ": 9.36494359E-07,
        "scaleX": 0.250000119,
        "scaleY": 0.250000119,
        "scaleZ": 0.250000119
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491671678/1FD1FC4AA34B44DE29C10414671B2F669FCC522D/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255007617/122D892DB5FEB875DA5B47829334ADD6584FF452/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a8daed"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 44.0,
        "rotX": -1.57413649E-06,
        "rotY": 179.995468,
        "rotZ": 5.220534E-07,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491784074/D67164B03135AAE24E448C6D849DB6E8253C2C4A/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/952964455676166757/364D86BE6ABC712FB1219438B81456D380859541/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/952964455676160126/1E69621AF7CDB2D1715C25422AEFC9FA793B49D6/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "36e749"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 2.0,
        "rotX": -1.575359E-06,
        "rotY": 180.017075,
        "rotZ": 2.06252125E-07,
        "scaleX": 0.250000477,
        "scaleY": 0.250000477,
        "scaleZ": 0.250000477
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992161334,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491669722/58967034A9B176C0F480E0DA31A0014AE22975BB/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255007505/557B036872088888BD29489C2523CF8B037458FA/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "bc8951"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 32.0,
        "rotX": -1.85911574E-06,
        "rotY": 180.001129,
        "rotZ": 7.625159E-07,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491726709/BFE90909E41637D1BBAEB9A8A8F6F745EB158FA5/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255007727/2639C62ED5F0562F1989F4E5D7D5AC4FDA8709C3/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "1e2250"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 26.0,
        "rotX": 1.92186926E-05,
        "rotY": 0.00314576249,
        "rotZ": 8.723218E-05,
        "scaleX": 0.2500003,
        "scaleY": 0.2500003,
        "scaleZ": 0.2500003
      },
      "Nickname": "'Eavy Flak Kannon",
      "Description": "Eavy Flak Kannon",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167056,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734585254662480/486B8B8AD0AB24BE4E37D94A5407A1A719B0FE91/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255008008/6FDCD620D4207B87C9AC01813E8D56C4FD501155/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689447/151C0C2E002904F1B7C92B96B9CBD5930808F86A/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/775105876107881156/9FB91012AA6DC3914F9916FCEC7ED4BAAD954B0F/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"ammo\":0,\"arc\":\"All\",\"cat\":\"weapon\",\"cost\":7,\"desc\":\"\",\"dmg\":4,\"faction\":\"Orks\",\"fpr\":[2,1,1],\"guid\":\"ad3d14\",\"image\":\"http://cloud-3.steamusercontent.com/ugc/775105876107881156/9FB91012AA6DC3914F9916FCEC7ED4BAAD954B0F/\",\"special\":[\"Effective Altitude (4)\",\"Ground-To-Air Fire\",\"Extra damage(6+)\"],\"structure\":2,\"type\":\"Eavy Flak Kannon\"},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "ad3d14"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 32.0,
        "rotX": 1.990263E-05,
        "rotY": 359.992981,
        "rotZ": 8.662825E-05,
        "scaleX": 0.2500003,
        "scaleY": 0.2500003,
        "scaleZ": 0.2500003
      },
      "Nickname": "Flak Platform",
      "Description": "Flak Platform",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167056,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734585254713181/51E81DF2FFAF4C80E37E810464F171BFCDEDED69/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255008008/6FDCD620D4207B87C9AC01813E8D56C4FD501155/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689447/151C0C2E002904F1B7C92B96B9CBD5930808F86A/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/775105876107859364/EEB3FAB00BF204F20039B9ACD7F77E888C77A623/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"ammo\":0,\"arc\":\"All\",\"cat\":\"weapon\",\"cost\":7,\"desc\":\"\",\"dmg\":5,\"faction\":\"Orks\",\"fpr\":[8,4,2],\"guid\":\"ddf175\",\"image\":\"http://cloud-3.steamusercontent.com/ugc/775105876107859364/EEB3FAB00BF204F20039B9ACD7F77E888C77A623/\",\"special\":[\"Effective Altitude (2)\",\"Ground-To-Air Fire\"],\"structure\":2,\"type\":\"Flak Platform\"},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "ddf175"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 44.0,
        "rotX": 1.950878E-05,
        "rotY": 359.982422,
        "rotZ": 8.592794E-05,
        "scaleX": 0.2500003,
        "scaleY": 0.2500003,
        "scaleZ": 0.2500003
      },
      "Nickname": "Hydra Flak Battery",
      "Description": "Hydra Flak Battery",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734585254595180/187D74BB5B44341DF823F012B7ABF5896463B146/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255007807/6071EBBC3BF58FA0D938B8668C296344D38D889E/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689447/151C0C2E002904F1B7C92B96B9CBD5930808F86A/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/777357589157422806/A7370E8D655A43253704E94F83E4A064CE853205/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"ammo\":0,\"arc\":\"All\",\"cat\":\"weapon\",\"cost\":7,\"desc\":\"\",\"dmg\":5,\"faction\":\"IN\",\"fpr\":[6,4,2],\"guid\":\"1dbe8c\",\"image\":\"http://cloud-3.steamusercontent.com/ugc/777357589157422806/A7370E8D655A43253704E94F83E4A064CE853205/\",\"special\":[\"Effective Altitude (2)\",\"Ground-To-Air Fire\"],\"structure\":2,\"type\":\"Hydra Flak Battery\"},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "1dbe8c"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 38.0,
        "rotX": -4.07797343E-05,
        "rotY": 119.988449,
        "rotZ": -1.84981345E-05,
        "scaleX": 0.25866586,
        "scaleY": 0.245666429,
        "scaleZ": 0.2456677
      },
      "Nickname": "Manticore Missile Battery",
      "Description": "Manticore Missile Battery",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734585254626646/36EE3593DDD8087AB5D7AE74372CDC8E1D74FC7C/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/780734585255007914/54734D848E57DB53FD18593F00070503DAED5FEC/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689447/151C0C2E002904F1B7C92B96B9CBD5930808F86A/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/775105876107226285/FB75EE29C73FE78C5F7B4ECD03A7DE206E66444D/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"ammo\":0,\"arc\":\"All\",\"cat\":\"weapon\",\"cost\":7,\"desc\":\"\",\"dmg\":4,\"faction\":\"IN\",\"fpr\":[2,1,1],\"guid\":\"852b47\",\"image\":\"http://cloud-3.steamusercontent.com/ugc/775105876107226285/FB75EE29C73FE78C5F7B4ECD03A7DE206E66444D/\",\"special\":[\"Effective Altitude (5)\",\"Ground-To-Air Fire\",\"Extra damage(5+)\"],\"structure\":2,\"type\":\"Manticore Missile Battery\"},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "852b47"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -4.50000048,
        "posY": 0.9000026,
        "posZ": -49.3634453,
        "rotX": -1.60833383E-06,
        "rotY": 179.999847,
        "rotZ": 5.17068429E-07,
        "scaleX": 6.01513433,
        "scaleY": 1.0,
        "scaleZ": 6.01513433
      },
      "Nickname": "Quick Reference 1/2",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496173267/07B673B6E2B4E31D92A8CE572A17AD6C2909D284/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734328496173267/07B673B6E2B4E31D92A8CE572A17AD6C2909D284/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e59984"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 4.49999952,
        "posY": 0.9000025,
        "posZ": -49.3634453,
        "rotX": -1.58722321E-06,
        "rotY": 179.999832,
        "rotZ": 4.916106E-07,
        "scaleX": 6.01513433,
        "scaleY": 1.0,
        "scaleZ": 6.01513433
      },
      "Nickname": "Quick Reference 2/2",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734585254189344/D406C27EE14E106934C1D58B641AC3BDCB47CBA6/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734585254189344/D406C27EE14E106934C1D58B641AC3BDCB47CBA6/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e5d42a"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 6.48385765E-07,
        "posY": 0.9000029,
        "posZ": -62.35383,
        "rotX": -1.57260183E-06,
        "rotY": 179.999832,
        "rotZ": 5.02430339E-07,
        "scaleX": 6.01513433,
        "scaleY": 1.0,
        "scaleZ": 6.01513433
      },
      "Nickname": "Movement Diagrams",
      "Description": "1.  Level Flight\n2.  Swoop\n3.  Turn\n4.  Snap Turn\n5.  Stall Turn\n6.  Stoop\n7.  Bank\n8.  Wing Over",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734108269481848/D7729E0A9B92D6E9B2B2F9CA9EAC0004F1176328/",
        "ImageSecondaryURL": "http://cloud-3.steamusercontent.com/ugc/780734108269481848/D7729E0A9B92D6E9B2B2F9CA9EAC0004F1176328/",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": true,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "90dc4e"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 0.0,
        "posY": -9.52,
        "posZ": 0.0,
        "rotX": 0.0,
        "rotY": -0.00190000015,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": true,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/879750610978796176/4A5A65543B98BCFBF57E910D06EC984208223D38/",
        "DiffuseURL": "",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 4,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "-- MAT obj_surface\r\nversion=2.02\r\n\r\nbtnHeight=2500\r\nbtnWidth=7000\r\nbtnXPos=32\r\nbtnYPos=11\r\nbtnZPos=9\r\ndeleteBtn={\r\n    index=1, label=\"REMOVE\\nterrain\", click_function=\"deleteTerrain\", function_owner=self,\r\n    position={btnXPos,btnYPos,-btnZPos}, scale={1,1,0.66}, rotation={0,270,0}, height=btnHeight, width=btnWidth,\r\n    font_size=800, color={0.5,0.5,0.5}, font_color={0.8,0,0}\r\n}\r\nconfirmBtn={\r\n    index=1, label=\"CONFIRM\\nterrain\", click_function=\"confirmTerrain\", function_owner=self,\r\n    position={btnXPos,btnYPos,btnZPos},scale={1,1,0.66}, rotation={0,270,0}, height=btnHeight, width=btnWidth,\r\n    font_size=800, color={0,0.6,0}, font_color={1,1,1}\r\n}\r\n\r\nterrainAreaData={\r\n        type = \"ScriptingTrigger\",\r\n        position          = {x=12, y=10, z=0},\r\n        rotation          = {x=0, y=0, z=0},\r\n        scale             = {x=96, y=40, z=48},\r\n        sound             = false,\r\n        snap_to_grid      = false,\r\n    }\r\n\r\nfunction onLoad()\r\n    flexControl = getObjectFromGUID('bd69bd')\r\n    sizeChanger= getObjectFromGUID('cff35b')\r\n    Wait.time(refresh, 0.05)\r\n    --showMenu()\r\nend\r\n\r\nfunction refresh()\r\n    flexControl.call('refreshSurface')\r\n    if sizeChanger ~= nil then\r\n        sizeChanger.call('refreshMat')\r\n    end\r\nend\r\n\r\nfunction showMenu()\r\n    showMenu2()\r\nend\r\n\r\nfunction showMenu2()\r\n    self.clearButtons()\r\n    self.createButton(confirmBtn)\r\n    self.createButton(deleteBtn)\r\nend\r\n\r\nfunction confirmTerrain()\r\n    self.clearButtons()\r\nend\r\n\r\nfunction deleteTerrain()\r\n    local customInfo = self.getCustomObject()\r\n    customInfo.diffuse = \"\"\r\n    self.setCustomObject(customInfo)\r\n    self = self.reload()\r\n    --flexControl.call('refreshSurface')\r\n    --terrainArea=spawnObject(terrainAreaData)\r\n    terrainArea= spawnObject(terrainAreaData)\r\n    Wait.frames(deleteTerrain2, 2)\r\nend\r\n\r\nfunction deleteTerrain2()\r\n    local objList=terrainArea.getObjects()\r\n    for i, obj in ipairs(objList) do\r\n        if obj.getVar(\"BCBtype\") == \"terrain\" then\r\n            obj.destroy()\r\n        end\r\n    end\r\n    terrainArea.destroy()\r\n    self.clearButtons()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "",
      "GUID": "4ee1f2"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 20.0,
        "rotX": -1.53190776E-05,
        "rotY": 180.0001,
        "rotZ": 2.40795889E-05,
        "scaleX": 0.8,
        "scaleY": 1.0,
        "scaleZ": 0.8
      },
      "Nickname": "Autonomous weapon base",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 1,
          "Thickness": 0.2,
          "Stackable": false,
          "Stretch": false
        }
      },
      "XmlUI": "",
      "LuaScript": "whatIam=\"AutonomousBase\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.2\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=5, rotOffset=0, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"5a7404\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=8, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=true\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\naltitudeBtn = {\r\n    label=flight.alt, click_function=\"onClickAltitude\", function_owner=self,\r\n    position={0.48+XbuttonOffset,0+YbuttonOffset,0.56}, rotation={0,0,0}, height=120, width=120,\r\n    font_size=100, color=\"Green\", font_color={1,1,1}, tooltip=\"ALTITUDE\\nLMB increase\\nRMB decrease\"\r\n}\r\n\r\nspeedBtn = {\r\n    label=flight.speed, click_function=\"onClickSpeed\", function_owner=self,\r\n    position={-0.48+XbuttonOffset,0+YbuttonOffset,0.56}, rotation={0,0,0}, height=120, width=120,\r\n    font_size=100, color=\"Green\", font_color={1,1,1}, tooltip=\"SPEED\\nLMB increase\\nRMB decrease\"\r\n}\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", font_color={1,1,1}\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", font_color={1,1,1}, tooltip=\"LMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowFrontArcBtn = {\r\n    label=arcLbl, click_function=\"toggleFrontArc\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.75}, rotation={0,0,0}, height=80, width=100,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"FRONT ARC\\n\"..arcTooltip\r\n}\r\nshowLeftArcBtn = {\r\n    label=arcLbl, click_function=\"toggleLeftArc\", function_owner=self,\r\n    position={-0.65,0+YbuttonOffset,-0.35}, rotation={0,-60,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"FRONT-LEFT ARC\\n\"..arcTooltip\r\n}\r\nshowRightArcBtn = {\r\n    label=arcLbl, click_function=\"toggleRightArc\", function_owner=self,\r\n    position={0.65,0+YbuttonOffset,-0.35}, rotation={0,60,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"FRONT-RIGHT ARC\\n\"..arcTooltip\r\n}\r\n\r\nshowLeftArc2Btn = {\r\n    label=arcLbl, click_function=\"toggleLeftArc2\", function_owner=self,\r\n    position={-0.75,0+YbuttonOffset,0.25}, rotation={0,-120,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"REAR-LEFT ARC\\n\"..arcTooltip\r\n}\r\nshowRightArc2Btn = {\r\n    label=arcLbl, click_function=\"toggleRightArc2\", function_owner=self,\r\n    position={0.75,0+YbuttonOffset,0.25}, rotation={0,120,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"REAR-RIGHT ARC\\n\"..arcTooltip\r\n}\r\n\r\nshowRearArcBtn = {\r\n    label=arcLbl, click_function=\"toggleRearArc\", function_owner=self,\r\n    position={0,0+YbuttonOffset,0.75}, rotation={0,180,0}, height=100, width=125,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"REAR ARC\\n\"..arcTooltip\r\n}\r\n\r\nshowTailingBtn = {\r\n    label=\"AUTO\\nTAIL\", click_function=\"toggleTailing\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.45}, rotation={0,0,0}, height=100, width=125,\r\n    font_size=30, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\nfuelBtn = {\r\n    label=\"«\", click_function=\"onClickFuel\", function_owner=self,\r\n    position={0,3,0}, rotation={0,90,0}, height=100, width=100,\r\n    font_size=100, color=\"Blue\", font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.45}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nlinkPlaneBtn = {\r\n    label=\"REFRESH\\nSTATS\", click_function=\"linkPlaneRemote\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.15}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=40, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nlinkPlaneBtn2 = {\r\n    label=\"LINK WEAPON\", click_function=\"linkPlaneRemote\", function_owner=self,\r\n    position={0,1.5+YbuttonOffset,-0.15}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=100, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nunlinkPlaneBtn = {\r\n    label=\"UNLINK\\nWEAPON\", click_function=\"unlinkPlane\", function_owner=self,\r\n    position={0,0+YbuttonOffset,0.15}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,0+YbuttonOffset,0.45}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,0+YbuttonOffset,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, font_color={1,1,1}\r\n}\r\n\r\nforwardBtn = {\r\n    label=\"↑\", click_function=\"none\", function_owner=self,\r\n    position={0,0+YbuttonOffset,-0.45}, rotation={0,0,0}, height=300, width=155, scale={3,1,1},\r\n    font_size=300, color={0.5,0.5,0.5}, font_color={1,1,1}, tooltip=\"\"\r\n}\r\n\r\n\r\n\r\nfunction onSave()\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats, svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    self.mass=100\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        planeStats=loaded_data.svplaneStats\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n    end\r\n\r\n    plane=getObjectFromGUID(plane_GUID)\r\n    if self.getPosition().y>0.3 then\r\n        linkPlane(self, planeLocalStats.owner, false, false)\r\n    end\r\n    if plane == nil then\r\n        --linkPlane(self, self.getColorTint(), false)\r\n    else\r\n        plane.interactable=true --Ric\r\n    end\r\n    getPlaneStats()\r\n    --[[\r\n    if planeStats ~= nil then\r\n            for i, val in pairs(planeLocalStats) do\r\n            --    print(i..\"  \"..val)\r\n            end\r\n    else\r\n        --print(\"No stats\")\r\n    end\r\n    --planeLocalStats={hp=5, rotOffset=180, owner=\"White\", fuel=2}\r\n    ]]\r\n    characterSheet=getObjectFromGUID(planeLocalStats.characterSheet_GUID)\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getPlaneStats()\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"defaultPlaneStats\"\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            table.insert(splitted, #splitted+1, line)\r\n        end\r\n        planeType=splitted[1]\r\n        --planeType=string.gsub(planeType, \" \", \" \")\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    if hangar ~= nil then\r\n        availables=hangar.getTable(\"AvailablePlanes\")\r\n        for i, stats in ipairs(availables) do\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultPlaneStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        planeStats= defaultPlaneStats\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        planeStats= hangar.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    --self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n    if plane== nil then\r\n        self.createButton(linkPlaneBtn)\r\n        self.createButton(linkPlaneBtn2)\r\n        self.setName(\"Unknown Flying Object\")\r\n        return\r\n    end\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0,0+YbuttonOffset,0}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(forwardBtn)\r\n    --self.createButton(statsBtn)\r\n    stats2Btn.position={0,flight.alt*0.35+1.1,0}\r\n    --self.createButton(stats2Btn)\r\n    altitudeBtn.label=flight.alt\r\n    altitudeBtn.color=\"Green\"\r\n    if planeStats.maxAlt~= nil and flight.alt > planeStats.maxAlt then\r\n        altitudeBtn.color=\"Orange\"\r\n    end\r\n    if flight.alt <= 0  then\r\n        altitudeBtn.color=\"Red\"\r\n    end\r\n--    self.createButton(altitudeBtn)\r\n    speedBtn.label=flight.speed\r\n    speedBtn.color=\"Green\"\r\n    if planeStats.maxSpeed~= nil and planeStats.minSpeed~= nil then\r\n        if flight.speed > planeStats.maxSpeed or flight.speed < planeStats.minSpeed then\r\n            speedBtn.color=\"Orange\"\r\n        end\r\n    end\r\n\r\n    --self.createButton(speedBtn)\r\n--    self.createButton(showFrontArcBtn)\r\n--    self.createButton(showLeftArcBtn)\r\n--    self.createButton(showRightArcBtn)\r\n--    self.createButton(showLeftArc2Btn)\r\n--    self.createButton(showRightArc2Btn)\r\n--    self.createButton(showRearArcBtn)\r\n--    self.createButton(showTailingBtn)\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={0.12*(-planeLocalStats.hp+1)+(i-1)*0.24, flight.alt*0.35+0.2, 0} --flight.alt-0.1\r\n        --self.createButton(hpBtn)\r\n        end\r\n    end\r\n    if planeStats.fuel ~= nil then\r\n        for i=1, planeLocalStats.fuel do\r\n            fuelBtn.position={0.12*(-planeLocalStats.fuel+1)+(i-1)*0.24, flight.alt*0.35+0.2, -0.3}\r\n            --self.createButton(fuelBtn)\r\n        end\r\n    end\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n    optionsBtn.position={0.45,0+YbuttonOffset,-0.45}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n--    self.createButton(addHpBtn)\r\n--    self.createButton(linkPlaneBtn)\r\n--    self.createButton(linkPlaneBtn2)\r\n    self.createButton(unlinkPlaneBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showFrontArcBtn.color=\"Grey\"\r\n    showRightArcBtn.color=\"Grey\"\r\n    showLeftArcBtn.color=\"Grey\"\r\n    showRearArcBtn.color=\"Grey\"\r\n    showLeftArc2Btn.color=\"Grey\"\r\n    showRightArc2Btn.color=\"Grey\"\r\n    showTailingBtn.color=\"Grey\"\r\n    showTailing=false\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 1 then\r\n        showFrontArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeFrontArcHex(_skipHex)\r\n    end\r\n    if showArcType == 2 then\r\n        showLeftArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeLeftArcHex(_skipHex)\r\n    end\r\n    if showArcType == 3 then\r\n        showRightArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeRightArcHex(_skipHex)\r\n    end\r\n    if showArcType == 4 then\r\n        showLeftArc2Btn.color=\"Green\"\r\n        writeMenu()\r\n        writeLeftArc2Hex(_skipHex)\r\n    end\r\n    if showArcType == 5 then\r\n        showRightArc2Btn.color=\"Green\"\r\n        writeMenu()\r\n        writeRightArc2Hex(_skipHex)\r\n    end\r\n    if showArcType == 6 then\r\n        showRearArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeRearArcHex(_skipHex)\r\n    end\r\nend\r\n\r\nfunction toggleFrontArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(1, skipHex)\r\n\r\nend\r\n\r\nfunction toggleLeftArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(2, skipHex)\r\n\r\nend\r\n\r\nfunction toggleRightArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(3, skipHex)\r\n\r\nend\r\n\r\nfunction toggleLeftArc2(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(4, skipHex)\r\nend\r\n\r\nfunction toggleRightArc2(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(5, skipHex)\r\nend\r\n\r\nfunction toggleRearArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(6, skipHex)\r\nend\r\n\r\nfunction toggleTailing(obj, player, alt)\r\n    if flight.alt ==0 then\r\n        printToColor(\"YOU ARE LANDED!\", player, \"Yellow\")\r\n        return\r\n    end\r\n    showFrontArcBtn.color=\"Grey\"\r\n    showRightArcBtn.color=\"Grey\"\r\n    showLeftArcBtn.color=\"Grey\"\r\n    showRightArc2Btn.color=\"Grey\"\r\n    showLeftArc2Btn.color=\"Grey\"\r\n    showRearArcBtn.color=\"Grey\"\r\n    showTailingBtn.color=\"Grey\"\r\n    showArcType=0\r\n    showTailing = not showTailing\r\n    if showTailing then\r\n        showTailingBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeTailingHex(player)\r\n    else\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\nend\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    if alt then\r\n        characterSheet=getObjectFromGUID(planeLocalStats.characterSheet_GUID)\r\n        if characterSheet ~= nil then\r\n            Player[player].lookAt({position = characterSheet.getPosition(), pitch = 90, yaw = characterSheet.getRotation().y, distance = 13,})\r\n        end\r\n        return\r\n    end\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        --position = self.getPosition(),\r\n        position = self.positionToWorld({0,0,2.5}),\r\n        pitch    = 90,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n    if plane ~= nil then\r\n        createUI(player)\r\n    end\r\nend\r\n\r\nfunction deleteXml()\r\n    if plane ~= nil then\r\n        self.UI.setXml(\"\")\r\n    end\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    if plane ~= nil then\r\n        self.UI.setXml(\"\")\r\n    end\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-220-50*flight.alt\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"0.5 0.5 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= hangar.getTable(\"AvailableUpgrades\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFrontArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\nfunction writeLeftArcHex(_skipHex)\r\n     writeFiringArc(-60,_skipHex)\r\nend\r\n\r\nfunction writeLeftArc2Hex(_skipHex)\r\n     writeFiringArc(-120,_skipHex)\r\nend\r\n\r\nfunction writeRightArcHex(_skipHex)\r\n     writeFiringArc(60,_skipHex)\r\nend\r\n\r\nfunction writeRightArc2Hex(_skipHex)\r\n     writeFiringArc(120,_skipHex)\r\nend\r\n\r\nfunction writeRearArcHex(_skipHex)\r\n     writeFiringArc(180,_skipHex)\r\nend\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n--[[\r\nfunction writeStraightHexBis(startPos , degrees ,  startI)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.cos(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.sin(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        self.createButton(hexBtn)\r\n    end\r\nend\r\n\r\nfunction writeStraightHexUp(startPos , rot ,  startI)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1],0.25,startPos[2]-fullHex*i}\r\n        self.createButton(hexBtn)\r\n    end\r\nend\r\n]]\r\n\r\nfunction writeTailingHex(player)\r\n    deleteRangeHex()\r\n    if flight.alt ==0 then\r\n        printToColor(\"YOU ARE LANDED!\", player, \"Yellow\")\r\n        return\r\n    end\r\n    local frontObjectsUnique={}\r\n    frontObjectsUnique=Physics.cast({\r\n        origin       = self.positionToWorld({0,0,-3.8-0.8*4}),\r\n        orientation  = {0,self.getRotation().y+120,0},\r\n        direction    = {0,1,0},\r\n        type         = 2,\r\n        size         = {10,10,10},\r\n        max_distance = 2,\r\n        debug        = false,\r\n    })\r\n    local foundPlanes= false\r\n    for i, hitInfo in pairs(frontObjectsUnique) do\r\n        local foundObject=hitInfo.hit_object\r\n        if foundObject.getTable(\"flight\") == nil or foundObject == self then\r\n            -- do nothing\r\n        else --it is a plane\r\n            local data = foundObject.getTable(\"flight\")\r\n            local diffAlt=  math.abs(data.alt-flight.alt)\r\n            local diffRot= math.abs(foundObject.getRotation().y-self.getRotation().y)\r\n            local objectPos = self.getPosition()\r\n            local targetPos = foundObject.getPosition()\r\n            local xDistance = math.abs(targetPos.x - objectPos.x)\r\n            local zDistance = math.abs(targetPos.z - objectPos.z)\r\n            local distance = xDistance^2 + zDistance^2\r\n\r\n            local relX = self.positionToLocal(foundObject.getPosition()).x\r\n            relX=math.abs(relX)\r\n            local relZ = self.positionToLocal(foundObject.getPosition()).z\r\n            local relAngle=math.deg(math.atan(relX/relZ))\r\n            relAngle=math.abs(relAngle)\r\n\r\n            if data.alt>0 and flight.alt>0 and diffAlt <= 1 and relAngle<32 and foundObject.getColorTint() ~= self.getColorTint() then\r\n\r\n               -- check if self is in rear arc of foundObject\r\n               local isInTargetRear=false\r\n               local relX2 = foundObject.positionToLocal(self.getPosition()).x\r\n               relX2=math.abs(relX2)\r\n               local relZ2 = foundObject.positionToLocal(self.getPosition()).z\r\n               local relAngle2=math.deg(math.atan(relX2/relZ2))\r\n               relAngle2=math.abs(relAngle2)\r\n               if relZ2>0 and relAngle2<28 then\r\n                   isInTargetRear=true\r\n               end\r\n               -- end check\r\n\r\n               if isInTargetRear then\r\n                   hexBtn.color=shortRangeColor\r\n                    if math.abs(math.sqrt(distance)) > 7.5 then\r\n                        hexBtn.color=mediumRangeColor\r\n                    end\r\n                    hexBtn.position={-self.positionToLocal(foundObject.getPosition()).x,0.25,self.positionToLocal(foundObject.getPosition()).z}\r\n                    self.createButton(hexBtn)\r\n                    foundPlanes=true\r\n                end\r\n            end\r\n        end\r\n    end\r\n    if foundPlanes == false then\r\n        printToColor(\"NO VALID TARGETS!\", player, \"Yellow\")\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt) -- reset\r\n    self.setColorTint(\"White\")\r\n    planeLocalStats.owner=\"\"\r\n    showOptions=false\r\n    writeMenu()\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)  -- set\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    writeMenu()\r\nend\r\n\r\nfunction linkPlaneRemote()\r\n    linkPlane(self, planeLocalStats.owner, false, true)\r\nend\r\n\r\nfunction linkPlane(obj, player, alt, refreshStats)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    plane=nil\r\n    local planes= Physics.cast({\r\n        origin       = self.getPosition(),\r\n        orientation  = self.getRotation(),\r\n        direction    = {0,1,0},\r\n        type         = 3,\r\n        size         = {0.1,0.3,1},\r\n        max_distance = 20,\r\n        debug        = false,\r\n    })\r\n    for i, obj in pairs(planes) do\r\n        if obj.hit_object.getPosition().y > self.getPosition().y then\r\n            if obj.hit_object.getVar(\"orderType\") == nil and obj.hit_object.getVar(\"whatIam\") ~= \"AircraftBase\" and  obj.hit_object.getVar(\"whatIam\") ~= \"AutonomousBase\" then\r\n                plane=obj.hit_object\r\n                break\r\n            end\r\n        end\r\n    end\r\n    if plane == nil then\r\n        if player == nil or player == \"\" then\r\n            return\r\n        end\r\n        if Player[player].seated == true then\r\n            printToColor(\"No plane found\", player, \"Yellow\")\r\n        end\r\n        return\r\n    end\r\n    plane_GUID=plane.getGUID()\r\n    plane.mass=0\r\n    plane.tooltip=false\r\n    setPlaneModelHeight()\r\n    setPlaneModelRotation()\r\n    plane.jointTo()\r\n    jointPlane()\r\n    plane.setLock(false)\r\n    plane.interactable=true -- Ric\r\n    showOptions=false\r\n    self.UI.setXml(\"\")\r\n    getPlaneStats()\r\n    if refreshStats then\r\n        planeLocalStats.hp=planeStats.structure\r\n        planeLocalStats.fuel=planeStats.fuel\r\n        if characterSheet ~= nil then\r\n            characterSheet.call(\"writeMenu\")\r\n        end\r\n    end\r\n\r\n    --self.setName(\"* \"..plane.getName()..\" *\")\r\n    --self.setName(plane.getName())\r\n    writeMenu()\r\nend\r\n\r\nfunction unlinkPlane(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    plane.jointTo()\r\n    self.UI.setXml(\"\")\r\n    plane.interactable=true\r\n    plane=nil\r\n    plane_GUID=\"\"\r\n    showOptions=false\r\n    self.setName(\"Unknown Flying Object\")\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickSpeed(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeSpeed(-1)\r\n    else\r\n        changeSpeed(1)\r\n    end\r\nend\r\n\r\nfunction onClickAltitude(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeAltitude(-1)\r\n    else\r\n        changeAltitude(1)\r\n    end\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction onClickFuel(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeFuel(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\n\r\nfunction changeSpeed(increment)\r\n    flight.speed=flight.speed + increment\r\n    if flight.speed < 0 then\r\n        flight.speed=0\r\n    end\r\n    if flight.speed > 20 then\r\n        flight.speed=20\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction changeFuel(increment)\r\n    planeLocalStats.fuel=planeLocalStats.fuel+ increment\r\n    if planeLocalStats.fuel > planeStats.fuel then\r\n        planeLocalStats.fuel=planeStats.fuel\r\n    end\r\n    if planeLocalStats.fuel < 0 then\r\n        planeLocalStats.fuel=0\r\n    end\r\n    if planeLocalStats.fuel == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" ran out of fuel\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    writeMenu()\r\nend\r\n\r\n\r\nfunction changeAltitude(increment)\r\n    flight.alt=flight.alt + increment\r\n    if flight.alt < 0 then\r\n        flight.alt=0\r\n    end\r\n    if flight.alt > 7 then\r\n        flight.alt=7\r\n    end\r\n    if dynamicAltitude then\r\n        plane.jointTo()\r\n        if flight.alt> 0 then\r\n            setPlaneModelHeight()\r\n        else\r\n            plane.setPosition(self.positionToWorld({0,0.5,0}))\r\n            printToAll(\"TOO LOW! PULL UP! \"..self.getName()..\" reached ground!\", \"Yellow\")\r\n            --planeLocalStats.hp=0\r\n        end\r\n        jointPlane()\r\n    end\r\n    writeMenu()\r\nend\r\n\r\nfunction setPlaneModelHeight()\r\n    if plane == nil then return end\r\n    plane.setPosition(self.positionToWorld({0,flight.alt*0.35+0.9,0}))\r\nend\r\n\r\nfunction setPlaneModelRotation()\r\n    if plane == nil then return end\r\n    plane.jointTo()\r\n    plane.setRotation({plane.getRotation().x,self.getRotation().y+planeLocalStats.rotOffset+180-180, plane.getRotation().z})\r\n    jointPlane()\r\nend\r\n\r\nfunction jointPlane()\r\nplane.jointTo(self, {\r\n    [\"type\"]        = \"Fixed\",\r\n    [\"collision\"]   = false,\r\n    [\"break_force\"]  = 10000.0,\r\n    [\"break_torgue\"] = 10000.0,\r\n    })\r\nend\r\n\r\nfunction onScriptingButtonDown(index, player) -- turns plane NOT on Y\r\n    if player ~= planeLocalStats.owner then  return end\r\n    if #Player[player].getSelectedObjects()==0 or #Player[player].getSelectedObjects()>2 then\r\n        return\r\n    end\r\n    local allow1 = false\r\n    local allow2 = false\r\n    for i, obj in pairs(Player[player].getSelectedObjects()) do\r\n        if obj== self then\r\n            allow1=true\r\n        end\r\n        if obj== plane then\r\n            allow2=true\r\n        end\r\n    end\r\n    if #Player[player].getSelectedObjects()==1 then\r\n        if not allow1 and not allow2 then -- one selected, none is base or plane\r\n            return\r\n        end\r\n    end\r\n    if #Player[player].getSelectedObjects()==2 then\r\n        if not allow1 or not allow2 then -- two selected, they are not both\r\n            return\r\n        end\r\n    end\r\n\r\n\r\n    if #Player[player].getSelectedObjects() ~= 1 or Player[player].getSelectedObjects()[1] ~= self then\r\n    --    return\r\n    end\r\n    if plane == nil then\r\n        return\r\n    end\r\n    local maxDegrees = 360\r\n    local step=5\r\n    local Xdegrees= plane.getRotation().x\r\n    local Ydegrees= plane.getRotation().y\r\n    local Zdegrees= plane.getRotation().z\r\n\r\n    if index== 10 then  -- Rotation Offset\r\n        planeLocalStats.rotOffset=planeLocalStats.rotOffset+90\r\n        if planeLocalStats.rotOffset > 270 then\r\n            planeLocalStats.rotOffset = 0\r\n        end\r\n        Ydegrees=planeLocalStats.rotOffset\r\n    end\r\n\r\n    if index== 4 then  -- Z + left\r\n        Zdegrees=Zdegrees+step\r\n        if Zdegrees > maxDegrees and Zdegrees < 180 then\r\n            --Zdegrees = maxDegrees\r\n        end\r\n        if Zdegrees>359 then\r\n            Zdegrees=0\r\n        end\r\n    end\r\n    if index== 6 then -- Z -  right\r\n        Zdegrees=Zdegrees-step\r\n        if Zdegrees < 360-maxDegrees and Zdegrees > 180+maxDegrees then\r\n            --Zdegrees = 360-maxDegrees\r\n        end\r\n        if Zdegrees<0 then\r\n            --Zdegrees=0\r\n        end\r\n    end\r\n    if index== 8 then -- X + down\r\n        Xdegrees=Xdegrees+step\r\n        if Xdegrees > maxDegrees and Xdegrees < 180 then\r\n            --Xdegrees = maxDegrees\r\n        end\r\n        if Xdegrees>359 then\r\n        --    Xdegrees=0\r\n        end\r\n\r\n    end\r\n    if index== 2 then -- X - up\r\n        Xdegrees=Xdegrees-step\r\n        if Xdegrees < 360-maxDegrees and Xdegrees > 180+maxDegrees then\r\n            --Xdegrees = 360-maxDegrees\r\n        end\r\n        if Xdegrees<0 then\r\n            --Xdegrees=0\r\n        end\r\n\r\n    end\r\n    if index == 5 then\r\n        Xdegrees=0\r\n        Zdegrees=0\r\n    end\r\n    plane.jointTo()\r\n    plane.setRotation({Xdegrees, Ydegrees, Zdegrees})\r\n    jointPlane()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":5,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"cat\":\"plane\",\"cost\":25,\"fuel\":-1,\"handling\":1,\"image\":\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\",\"manoeuvres\":[1,2,3,4,5,6,7,8],\"maxAlt\":10,\"maxSpeed\":10,\"minSpeed\":0,\"structure\":8,\"throttle\":10,\"transport\":-1,\"type\":\"defaultPlaneStats\"},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "34f590"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 117.003334,
        "posY": -3.0003624,
        "posZ": 0.00117465854,
        "rotX": 90.0,
        "rotY": 90.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "1870081203",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 150
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "879da0"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": -5.02798343E-07,
        "posY": 0.899999142,
        "posZ": 77.94228,
        "rotX": 1.59899037E-06,
        "rotY": 0.00717180362,
        "rotZ": -4.74763084E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://campaign40k.altervista.org/pdf/Aeronautica_Rulebook.pdf",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "59c097"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": 7.749711E-08,
        "posY": 0.900003552,
        "posZ": -77.94,
        "rotX": -1.57711361E-06,
        "rotY": 179.983887,
        "rotZ": 5.19184766E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://campaign40k.altervista.org/pdf/Aeronautica_Rulebook.pdf",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "23cd90"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 26.0,
        "rotX": 0.0009825394,
        "rotY": -7.077587E-05,
        "rotZ": 0.00154080242,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/780734328491726709/BFE90909E41637D1BBAEB9A8A8F6F745EB158FA5/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/775106514375297197/CDE37695D6530489112DBB8221A2030E42870EE2/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d4bd42"
    },
    {
      "Name": "ScriptingTrigger",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": 0.0,
        "rotX": -0.0002342691,
        "rotY": 0.02380871,
        "rotZ": 0.3497707,
        "scaleX": 10.0,
        "scaleY": 5.0,
        "scaleZ": 12.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0,
        "a": 0.509803951
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "038935"
    },
    {
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": -25.5,
        "posY": 1.00263429,
        "posZ": 26.0,
        "rotX": 8.57673149E-06,
        "rotY": 0.0,
        "rotZ": 4.1693275E-07,
        "scaleX": 0.55000037,
        "scaleY": 0.55000037,
        "scaleZ": 0.55000037
      },
      "Nickname": "Orange Kustom Apoc 40k Dice Roller Mk2.6",
      "Description": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/94979895601488369/894F4E9B36D9116E12A24DAAFE1B4FD26A1880D2/",
        "DiffuseURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692847708/D025E28D35B9CE97262B43205B2F5EA8AF8B886B/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 6,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "--Based off: https://steamcommunity.com/sharedfiles/filedetails/?id=726800282\r\n--Link for this mod: https://steamcommunity.com/sharedfiles/filedetails/?id=959360907\r\n\r\n--Initialize Global Variables and pRNG Seed\r\nmath.randomseed(tonumber(tostring(os.time()):reverse():sub(1,7))+tonumber(tostring(os.clock()):reverse():sub(1,7)))\r\nver = 'BCB-2018-12-16'\r\nlastHolder = {}\r\ncustomFace = {4, 6, 8, 10, 12, 20}\r\ndiceGuidFaces = {}\r\nsortedKeys = {}\r\nresultsTable = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}\r\n\r\n--Determine the person who put the dice in the box.\r\nfunction onObjectPickedUp(playerColor, obj)\r\n\tlastHolder[obj] = playerColor\r\nend\r\n\r\n--Reset the person holding the dice when no dice are held.\r\nfunction onObjectDestroyed(obj)\r\n\tlastHolder[obj] = nil\r\nend\r\n\r\n--Reset description on load if empty.\r\nfunction onLoad(save_state)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Returns description on game save.\r\nfunction onSave()\r\n\treturn self.getDescription()\r\nend\r\n\r\n--Reset description on drop if empty.\r\nfunction onDropped(player_color)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Sets default description.\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({Results = 'no', SmoothDice = 'no', Rows = 'yes', SortNoRows = 'asc', Step = 1, Version = ver}))\r\nend\r\n\r\n--Creates a table and sorts the dice guids by value.\r\nfunction sortByVal(t, type)\r\n\tlocal keys = {}\r\n\tfor key in pairs(t) do\r\n\t\ttable.insert(keys, key)\r\n\tend\r\n\tif type == 'asc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] < t[b] end)\r\n\telseif type == 'desc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] > t[b] end)\r\n\tend\r\n\treturn keys\r\nend\r\n\r\n--Checks the item dropped in the bag has a guid.\r\nfunction hasGuid(t, g)\r\n\tfor k, v in ipairs(t) do\r\n\t\tif v.guid == g then return true end\r\n\tend\r\n\r\n\treturn false\r\nend\r\n--Runs when non-dice is put into bag\r\nfunction onObjectEnterContainer(container, obj)\r\n    if container == self and obj.tag ~= \"Dice\" then\r\n        local pos = self.getPosition()\r\n        local f = self.getTransformRight()\r\n        self.takeObject({\r\n            position          = {pos.x+20,pos.y+50,pos.z+20},\r\n            smooth            = false,\r\n        })\r\n        return\r\n    end\r\nend\r\n--Runs when an object is dropped in bag.\r\nfunction onCollisionEnter(collision_info)\r\n\tplayerColor = lastHolder[collision_info.collision_object]\r\n\tif collision_info.collision_object.getGUID() == nil then return end\r\n\tdiceGuidFaces = {}\r\n\tsortedKeys = {}\r\n\r\n--Save number of faces on dice\r\n\tfor k, v in ipairs(getAllObjects()) do\r\n\t\tif v.tag == 'Dice' then\r\n\t\t\tobjType = tostring(v)\r\n\t\t\tfaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n\t\t\tif faces == nil then\r\n\t\t\t\tfaces = tonumber(customFace[v.getCustomObject().type + 1])\r\n\t\t\tend\r\n\t\tdiceGuidFaces[v.getGUID()] = faces\r\n\t\ttable.insert(sortedKeys, v.getGUID())\r\n\t\tend\r\n\tend\r\n\r\n--[[Benchmarking code\r\nif resetclock ~= 1 then\r\nclockstart = os.clock()\r\nresetclock = 1\r\nend--]]\r\n\r\n--Creates a timer to take the dice out and position them.\r\n\tWait.time(|| takeDiceOut(), 0.3)\r\nend\r\n\r\n--Function to take the dice out of the bag and position them.\r\nfunction takeDiceOut(tab)\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif data == nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tif data.Step < 1 then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - \"step\" can\\'t be lower than 1. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tdiceGuids = {}\r\n\tfor k, v in pairs(self.getObjects()) do\r\n\t\tfaces = diceGuidFaces[v.guid]\r\n\t\tif v.name ==\"BCB-D3\" then\r\n\t\t\tfaces=3\r\n\t\tend\r\n\t\tr = math.random(faces)\r\n\t\tdiceGuids[v.guid] = r\r\n\tend\r\n\r\n\tlocal objs = self.getObjects()\r\n\tlocal position = self.getPosition()\r\n\trotation = self.getRotation()\r\n\tsortedKeys = sortByVal(diceGuids, data.SortNoRows)\r\n\tRows6 = {}\r\n\tRows12 = {}\r\n\tRows=0\r\n\tn = 1\r\n\tfor _, key in pairs(sortedKeys) do\r\n\t\tif diceGuids[key] == math.floor(diceGuids[key]) then\r\n\t\t\tresultsTable[diceGuids[key]] = resultsTable[diceGuids[key]] + 1\r\n\t\tend\r\n\tif hasGuid(objs, key) then\r\n\t\tfaces = diceGuidFaces[key]\r\n\t\tif  faces >11 then\r\n\t\t\tif Rows12[diceGuids[key]] == nil then\r\n\t\t\t\tRows12[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\telse\r\n\t\t\tif Rows6[diceGuids[key]] == nil then\r\n\t\t\t\tRows6[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\tend\r\n\t\tif  faces >11 then\r\n\t\t\tRows12[diceGuids[key]] = Rows12[diceGuids[key]] + 1\r\n\t\t\tRows=Rows12[diceGuids[key]]\r\n\t\telse\r\n\t\t\tRows6[diceGuids[key]] = Rows6[diceGuids[key]] + 1\r\n\t\t\tRows=Rows6[diceGuids[key]]\r\n\t\tend\r\n\t\tparams = {}\r\n\t\tparams.guid = key\r\n\t\tlocal d12Xoffset=0\r\n\t\tlocal d12Zoffset=0\r\n\t\tif diceGuids[key]>6 and faces >11 then\r\n\t\t\t d12Xoffset=-14\r\n\t\t\t d12Zoffset=6\r\n\t\t elseif faces >11 then\r\n\t\t\t d12Xoffset=-6.5\r\n\t\t\t d12Zoffset=0\r\n\t\tend\r\n\t\tif data.Rows == 'no' then\r\n\t\t\tparams.position = { position.x + (-1) * math.sin((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step,\r\n\t\t\tposition.y + 1,\r\n\t\t\tposition.z + (-1) * math.cos((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step}\r\n\t\telse\r\n\r\n\t\t\tparams.position = {\r\n\t\t\tposition.x + d12Xoffset + (Rows * math.cos((180 + self.getRotation().y) * 0.0174532)) * data.Step - (diceGuids[key] * math.sin((180 + self.getRotation().y) * 0.0174532)) * data.Step,\r\n\t\t\tposition.y + 2,\r\n\t\t\tposition.z  + (Rows * math.sin((self.getRotation().y) * 0.0174532)) * data.Step + ((diceGuids[key]-d12Zoffset)* math.cos((0 + self.getRotation().y) * 0.0174532)) * data.Step}\r\n\t\tend\r\n--params.rotation = {rotation.x, rotation.y, rotation.z}\r\n\t\tparams.callback = 'setValueCallback'\r\n\t\tparams.params = {diceGuids[key]}\r\n\t\tparams.smooth = false\r\n\t\tif data.SmoothDice == 'yes' then params.smooth = true end\r\n\t\t\tself.takeObject(params)\r\n\t\t\tn = n + 1\r\n\t\tend\r\n\tend\r\n\tprintresultsTable()\r\n--[[Benchmarking code\r\n\tclockend = os.clock()\r\n\tresetclock=0\r\n\tprint('Runtime: ' .. clockend-clockstart .. ' seconds.')--]]\r\nend\r\n\r\n--Function to count resultsTable for printing.\r\nfunction sum(t)\r\n\tlocal sum = 0\r\n\tfor k, v in pairs(t) do\r\n\t\tsum = sum + v\r\n\tend\r\n\r\n\treturn sum\r\nend\r\n\r\n--Prints resultsTable.\r\nfunction printresultsTable()\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif sum(resultsTable) > 0 and data.Results == 'yes' then\r\n\t\tlocal description = {'Ones.', 'Twos.', 'Threes.', 'Fours.', 'Fives.', 'Sixes.', 'Sevens.', 'Eights.', 'Nines.', 'Tens.', 'Elevens.', 'Twelves.', 'Thirteens.', 'Fourteens.', 'Fifteens.', 'Sixteens.', 'Seventeens', 'Eighteens.', 'Nineteens.', 'Twenties.'}\r\n\t\tlocal msg = ''\r\n\t\tfor dieFace, numRolled in ipairs(resultsTable) do\r\n\t\t\tif numRolled > 0 then\r\n\t\t\t\tmsg = msg .. numRolled .. ' ' .. description[dieFace] .. ' '\r\n\t\t\tend\r\n\t\tend\r\n\r\n\t\tlocal time = '[' .. os.date(\"%H\") .. ':' .. os.date(\"%M\") .. ':' .. os.date(\"%S\") .. ' UTC] '\r\n\t\tif playerColor == nil then\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. '~UNKNOWN PLAYER~ rolls:\\n' .. msg .. '*******************************************************', {1, 1, 1})\r\n\t\telse\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. Player[playerColor].steam_name .. ' rolls:\\n' .. msg .. '*******************************************************', stringColorToRGB(playerColor))\r\n\t\tend\r\n\tend\r\n\r\n\tfor k,v in ipairs(resultsTable) do\r\n\t\tresultsTable[k] = 0\r\n\tend\r\nend\r\n\r\n--Sets the value of the physical dice object and reorients them if needed.\r\nfunction setValueCallback(obj, tab)\r\n    function insidef()\r\n        obj.setValue(tab[1])\r\n        if obj.tag == 'Dice' then\r\n            objType = tostring(obj)\r\n            callFaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n            if callFaces == nil then callFaces = tonumber(customFace[obj.getCustomObject().type + 1]) end\r\n            diceGuidFaces[obj.getGUID()] = callFaces\r\n        end\r\n\r\n        local waitFramesDelay = 35\r\n\r\n        RotValues_4 = {180,0,180,180}\r\n        RotValues_6 = {180,180,180,180,180,180}\r\n        RotValues_8 = {180,180,0,0,0,0,180,180}\r\n        RotValues_10 = {180,0,180,0,180,0,180,0,180,0}\r\n        RotValues_12 = {180,180,180,0,0,180,0,0,180,0,287.93,216}\r\n        RotValues_20 = {239.65,120,0,0,120,0,120,120,120,0,180,301.86,300,300,300,180,60,180,300,180}\r\n        waitFrames(waitFramesDelay)\r\n        local rot = self.getRotation()\r\n        local r = obj.getRotation()\r\n        local v = obj.getValue()\r\n\r\n        if callFaces == 4 then\r\n            obj.setRotation({r.x, rot.y + RotValues_4[v], r.z})\r\n        end\r\n\r\n        if callFaces == 6 then\r\n            obj.setRotation({r.x, rot.y + RotValues_6[v], r.z})\r\n        end\r\n\r\n        if callFaces == 8 then\r\n            obj.setRotation({r.x, rot.y + RotValues_8[v], r.z})\r\n        end\r\n\r\n        if callFaces == 10 then\r\n            obj.setRotation({r.x, rot.y + RotValues_10[v], r.z})\r\n        end\r\n\r\n        if callFaces == 12 then\r\n            obj.setRotation({r.x, rot.y + RotValues_12[v], r.z})\r\n        end\r\n\r\n        if callFaces == 20 then\r\n            obj.setRotation({r.x, rot.y + RotValues_20[v], r.z})\r\n        end\r\n\r\n        return 1\r\n    end\r\n\r\n    startLuaCoroutine(self, 'insidef')\r\nend\r\n\r\n--Coroutine to wait to allow for custom dice positional data to be altered.\r\nfunction waitFrames(frames)\r\n\twhile frames > 0 do\r\n\t\tcoroutine.yield(0)\r\n\t\tframes = frames - 1\r\n\tend\r\nend\r\n\r\n\r\n--Function to print table contents.\r\n--[[\r\nfunction printTable(tempTable)\r\n\tfor k, v in pairs(tempTable) do\r\n\t\tprint('key = ' .. k)\r\n\t\tprint('value =' .. v)\r\n\tend\r\nend\r\n--]]",
      "LuaScriptState": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GUID": "ef01b2"
    },
    {
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": 46.5,
        "posY": 1.00263429,
        "posZ": 26.0,
        "rotX": 8.57673149E-06,
        "rotY": 0.0,
        "rotZ": 4.1693275E-07,
        "scaleX": 0.55000037,
        "scaleY": 0.55000037,
        "scaleZ": 0.55000037
      },
      "Nickname": "Red Kustom Apoc 40k Dice Roller Mk2.6",
      "Description": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/94979895601488369/894F4E9B36D9116E12A24DAAFE1B4FD26A1880D2/",
        "DiffuseURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692847708/D025E28D35B9CE97262B43205B2F5EA8AF8B886B/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 6,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "--Based off: https://steamcommunity.com/sharedfiles/filedetails/?id=726800282\r\n--Link for this mod: https://steamcommunity.com/sharedfiles/filedetails/?id=959360907\r\n\r\n--Initialize Global Variables and pRNG Seed\r\nmath.randomseed(tonumber(tostring(os.time()):reverse():sub(1,7))+tonumber(tostring(os.clock()):reverse():sub(1,7)))\r\nver = 'BCB-2018-12-16'\r\nlastHolder = {}\r\ncustomFace = {4, 6, 8, 10, 12, 20}\r\ndiceGuidFaces = {}\r\nsortedKeys = {}\r\nresultsTable = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}\r\n\r\n--Determine the person who put the dice in the box.\r\nfunction onObjectPickedUp(playerColor, obj)\r\n\tlastHolder[obj] = playerColor\r\nend\r\n\r\n--Reset the person holding the dice when no dice are held.\r\nfunction onObjectDestroyed(obj)\r\n\tlastHolder[obj] = nil\r\nend\r\n\r\n--Reset description on load if empty.\r\nfunction onLoad(save_state)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Returns description on game save.\r\nfunction onSave()\r\n\treturn self.getDescription()\r\nend\r\n\r\n--Reset description on drop if empty.\r\nfunction onDropped(player_color)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Sets default description.\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({Results = 'no', SmoothDice = 'no', Rows = 'yes', SortNoRows = 'asc', Step = 1, Version = ver}))\r\nend\r\n\r\n--Creates a table and sorts the dice guids by value.\r\nfunction sortByVal(t, type)\r\n\tlocal keys = {}\r\n\tfor key in pairs(t) do\r\n\t\ttable.insert(keys, key)\r\n\tend\r\n\tif type == 'asc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] < t[b] end)\r\n\telseif type == 'desc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] > t[b] end)\r\n\tend\r\n\treturn keys\r\nend\r\n\r\n--Checks the item dropped in the bag has a guid.\r\nfunction hasGuid(t, g)\r\n\tfor k, v in ipairs(t) do\r\n\t\tif v.guid == g then return true end\r\n\tend\r\n\r\n\treturn false\r\nend\r\n--Runs when non-dice is put into bag\r\nfunction onObjectEnterContainer(container, obj)\r\n    if container == self and obj.tag ~= \"Dice\" then\r\n        local pos = self.getPosition()\r\n        local f = self.getTransformRight()\r\n        self.takeObject({\r\n            position          = {pos.x+20,pos.y+50,pos.z+20},\r\n            smooth            = false,\r\n        })\r\n        return\r\n    end\r\nend\r\n--Runs when an object is dropped in bag.\r\nfunction onCollisionEnter(collision_info)\r\n\tplayerColor = lastHolder[collision_info.collision_object]\r\n\tif collision_info.collision_object.getGUID() == nil then return end\r\n\tdiceGuidFaces = {}\r\n\tsortedKeys = {}\r\n\r\n--Save number of faces on dice\r\n\tfor k, v in ipairs(getAllObjects()) do\r\n\t\tif v.tag == 'Dice' then\r\n\t\t\tobjType = tostring(v)\r\n\t\t\tfaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n\t\t\tif faces == nil then\r\n\t\t\t\tfaces = tonumber(customFace[v.getCustomObject().type + 1])\r\n\t\t\tend\r\n\t\tdiceGuidFaces[v.getGUID()] = faces\r\n\t\ttable.insert(sortedKeys, v.getGUID())\r\n\t\tend\r\n\tend\r\n\r\n--[[Benchmarking code\r\nif resetclock ~= 1 then\r\nclockstart = os.clock()\r\nresetclock = 1\r\nend--]]\r\n\r\n--Creates a timer to take the dice out and position them.\r\n\tWait.time(|| takeDiceOut(), 0.3)\r\nend\r\n\r\n--Function to take the dice out of the bag and position them.\r\nfunction takeDiceOut(tab)\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif data == nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tif data.Step < 1 then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - \"step\" can\\'t be lower than 1. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tdiceGuids = {}\r\n\tfor k, v in pairs(self.getObjects()) do\r\n\t\tfaces = diceGuidFaces[v.guid]\r\n\t\tif v.name ==\"BCB-D3\" then\r\n\t\t\tfaces=3\r\n\t\tend\r\n\t\tr = math.random(faces)\r\n\t\tdiceGuids[v.guid] = r\r\n\tend\r\n\r\n\tlocal objs = self.getObjects()\r\n\tlocal position = self.getPosition()\r\n\trotation = self.getRotation()\r\n\tsortedKeys = sortByVal(diceGuids, data.SortNoRows)\r\n\tRows6 = {}\r\n\tRows12 = {}\r\n\tRows=0\r\n\tn = 1\r\n\tfor _, key in pairs(sortedKeys) do\r\n\t\tif diceGuids[key] == math.floor(diceGuids[key]) then\r\n\t\t\tresultsTable[diceGuids[key]] = resultsTable[diceGuids[key]] + 1\r\n\t\tend\r\n\tif hasGuid(objs, key) then\r\n\t\tfaces = diceGuidFaces[key]\r\n\t\tif  faces >11 then\r\n\t\t\tif Rows12[diceGuids[key]] == nil then\r\n\t\t\t\tRows12[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\telse\r\n\t\t\tif Rows6[diceGuids[key]] == nil then\r\n\t\t\t\tRows6[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\tend\r\n\t\tif  faces >11 then\r\n\t\t\tRows12[diceGuids[key]] = Rows12[diceGuids[key]] + 1\r\n\t\t\tRows=Rows12[diceGuids[key]]\r\n\t\telse\r\n\t\t\tRows6[diceGuids[key]] = Rows6[diceGuids[key]] + 1\r\n\t\t\tRows=Rows6[diceGuids[key]]\r\n\t\tend\r\n\t\tparams = {}\r\n\t\tparams.guid = key\r\n\t\tlocal d12Xoffset=0\r\n\t\tlocal d12Zoffset=0\r\n\t\tif diceGuids[key]>6 and faces >11 then\r\n\t\t\t d12Xoffset=-14\r\n\t\t\t d12Zoffset=6\r\n\t\t elseif faces >11 then\r\n\t\t\t d12Xoffset=-6.5\r\n\t\t\t d12Zoffset=0\r\n\t\tend\r\n\t\tif data.Rows == 'no' then\r\n\t\t\tparams.position = { position.x + (-1) * math.sin((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step,\r\n\t\t\tposition.y + 1,\r\n\t\t\tposition.z + (-1) * math.cos((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step}\r\n\t\telse\r\n\r\n\t\t\tparams.position = {\r\n\t\t\tposition.x + d12Xoffset + (Rows * math.cos((180 + self.getRotation().y) * 0.0174532)) * data.Step - (diceGuids[key] * math.sin((180 + self.getRotation().y) * 0.0174532)) * data.Step,\r\n\t\t\tposition.y + 2,\r\n\t\t\tposition.z  + (Rows * math.sin((self.getRotation().y) * 0.0174532)) * data.Step + ((diceGuids[key]-d12Zoffset)* math.cos((0 + self.getRotation().y) * 0.0174532)) * data.Step}\r\n\t\tend\r\n--params.rotation = {rotation.x, rotation.y, rotation.z}\r\n\t\tparams.callback = 'setValueCallback'\r\n\t\tparams.params = {diceGuids[key]}\r\n\t\tparams.smooth = false\r\n\t\tif data.SmoothDice == 'yes' then params.smooth = true end\r\n\t\t\tself.takeObject(params)\r\n\t\t\tn = n + 1\r\n\t\tend\r\n\tend\r\n\tprintresultsTable()\r\n--[[Benchmarking code\r\n\tclockend = os.clock()\r\n\tresetclock=0\r\n\tprint('Runtime: ' .. clockend-clockstart .. ' seconds.')--]]\r\nend\r\n\r\n--Function to count resultsTable for printing.\r\nfunction sum(t)\r\n\tlocal sum = 0\r\n\tfor k, v in pairs(t) do\r\n\t\tsum = sum + v\r\n\tend\r\n\r\n\treturn sum\r\nend\r\n\r\n--Prints resultsTable.\r\nfunction printresultsTable()\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif sum(resultsTable) > 0 and data.Results == 'yes' then\r\n\t\tlocal description = {'Ones.', 'Twos.', 'Threes.', 'Fours.', 'Fives.', 'Sixes.', 'Sevens.', 'Eights.', 'Nines.', 'Tens.', 'Elevens.', 'Twelves.', 'Thirteens.', 'Fourteens.', 'Fifteens.', 'Sixteens.', 'Seventeens', 'Eighteens.', 'Nineteens.', 'Twenties.'}\r\n\t\tlocal msg = ''\r\n\t\tfor dieFace, numRolled in ipairs(resultsTable) do\r\n\t\t\tif numRolled > 0 then\r\n\t\t\t\tmsg = msg .. numRolled .. ' ' .. description[dieFace] .. ' '\r\n\t\t\tend\r\n\t\tend\r\n\r\n\t\tlocal time = '[' .. os.date(\"%H\") .. ':' .. os.date(\"%M\") .. ':' .. os.date(\"%S\") .. ' UTC] '\r\n\t\tif playerColor == nil then\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. '~UNKNOWN PLAYER~ rolls:\\n' .. msg .. '*******************************************************', {1, 1, 1})\r\n\t\telse\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. Player[playerColor].steam_name .. ' rolls:\\n' .. msg .. '*******************************************************', stringColorToRGB(playerColor))\r\n\t\tend\r\n\tend\r\n\r\n\tfor k,v in ipairs(resultsTable) do\r\n\t\tresultsTable[k] = 0\r\n\tend\r\nend\r\n\r\n--Sets the value of the physical dice object and reorients them if needed.\r\nfunction setValueCallback(obj, tab)\r\n    function insidef()\r\n        obj.setValue(tab[1])\r\n        if obj.tag == 'Dice' then\r\n            objType = tostring(obj)\r\n            callFaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n            if callFaces == nil then callFaces = tonumber(customFace[obj.getCustomObject().type + 1]) end\r\n            diceGuidFaces[obj.getGUID()] = callFaces\r\n        end\r\n\r\n        local waitFramesDelay = 35\r\n\r\n        RotValues_4 = {180,0,180,180}\r\n        RotValues_6 = {180,180,180,180,180,180}\r\n        RotValues_8 = {180,180,0,0,0,0,180,180}\r\n        RotValues_10 = {180,0,180,0,180,0,180,0,180,0}\r\n        RotValues_12 = {180,180,180,0,0,180,0,0,180,0,287.93,216}\r\n        RotValues_20 = {239.65,120,0,0,120,0,120,120,120,0,180,301.86,300,300,300,180,60,180,300,180}\r\n        waitFrames(waitFramesDelay)\r\n        local rot = self.getRotation()\r\n        local r = obj.getRotation()\r\n        local v = obj.getValue()\r\n\r\n        if callFaces == 4 then\r\n            obj.setRotation({r.x, rot.y + RotValues_4[v], r.z})\r\n        end\r\n\r\n        if callFaces == 6 then\r\n            obj.setRotation({r.x, rot.y + RotValues_6[v], r.z})\r\n        end\r\n\r\n        if callFaces == 8 then\r\n            obj.setRotation({r.x, rot.y + RotValues_8[v], r.z})\r\n        end\r\n\r\n        if callFaces == 10 then\r\n            obj.setRotation({r.x, rot.y + RotValues_10[v], r.z})\r\n        end\r\n\r\n        if callFaces == 12 then\r\n            obj.setRotation({r.x, rot.y + RotValues_12[v], r.z})\r\n        end\r\n\r\n        if callFaces == 20 then\r\n            obj.setRotation({r.x, rot.y + RotValues_20[v], r.z})\r\n        end\r\n\r\n        return 1\r\n    end\r\n\r\n    startLuaCoroutine(self, 'insidef')\r\nend\r\n\r\n--Coroutine to wait to allow for custom dice positional data to be altered.\r\nfunction waitFrames(frames)\r\n\twhile frames > 0 do\r\n\t\tcoroutine.yield(0)\r\n\t\tframes = frames - 1\r\n\tend\r\nend\r\n\r\n\r\n--Function to print table contents.\r\n--[[\r\nfunction printTable(tempTable)\r\n\tfor k, v in pairs(tempTable) do\r\n\t\tprint('key = ' .. k)\r\n\t\tprint('value =' .. v)\r\n\tend\r\nend\r\n--]]",
      "LuaScriptState": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GUID": "55c2f4"
    },
    {
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": 25.5,
        "posY": 0.96,
        "posZ": -26.0,
        "rotX": 8.57673149E-06,
        "rotY": 180.0059,
        "rotZ": 4.1693275E-07,
        "scaleX": 0.55000037,
        "scaleY": 0.55000037,
        "scaleZ": 0.55000037
      },
      "Nickname": "Blue Kustom Apoc 40k Dice Roller Mk2.6",
      "Description": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/94979895601488369/894F4E9B36D9116E12A24DAAFE1B4FD26A1880D2/",
        "DiffuseURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692847708/D025E28D35B9CE97262B43205B2F5EA8AF8B886B/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 6,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "--Based off: https://steamcommunity.com/sharedfiles/filedetails/?id=726800282\r\n--Link for this mod: https://steamcommunity.com/sharedfiles/filedetails/?id=959360907\r\n\r\n--Initialize Global Variables and pRNG Seed\r\nmath.randomseed(tonumber(tostring(os.time()):reverse():sub(1,7))+tonumber(tostring(os.clock()):reverse():sub(1,7)))\r\nver = 'BCB-2018-12-16'\r\nlastHolder = {}\r\ncustomFace = {4, 6, 8, 10, 12, 20}\r\ndiceGuidFaces = {}\r\nsortedKeys = {}\r\nresultsTable = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}\r\n\r\n--Determine the person who put the dice in the box.\r\nfunction onObjectPickedUp(playerColor, obj)\r\n\tlastHolder[obj] = playerColor\r\nend\r\n\r\n--Reset the person holding the dice when no dice are held.\r\nfunction onObjectDestroyed(obj)\r\n\tlastHolder[obj] = nil\r\nend\r\n\r\n--Reset description on load if empty.\r\nfunction onLoad(save_state)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Returns description on game save.\r\nfunction onSave()\r\n\treturn self.getDescription()\r\nend\r\n\r\n--Reset description on drop if empty.\r\nfunction onDropped(player_color)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Sets default description.\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({Results = 'no', SmoothDice = 'no', Rows = 'yes', SortNoRows = 'asc', Step = 1, Version = ver}))\r\nend\r\n\r\n--Creates a table and sorts the dice guids by value.\r\nfunction sortByVal(t, type)\r\n\tlocal keys = {}\r\n\tfor key in pairs(t) do\r\n\t\ttable.insert(keys, key)\r\n\tend\r\n\tif type == 'asc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] < t[b] end)\r\n\telseif type == 'desc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] > t[b] end)\r\n\tend\r\n\treturn keys\r\nend\r\n\r\n--Checks the item dropped in the bag has a guid.\r\nfunction hasGuid(t, g)\r\n\tfor k, v in ipairs(t) do\r\n\t\tif v.guid == g then return true end\r\n\tend\r\n\r\n\treturn false\r\nend\r\n--Runs when non-dice is put into bag\r\nfunction onObjectEnterContainer(container, obj)\r\n    if container == self and obj.tag ~= \"Dice\" then\r\n        local pos = self.getPosition()\r\n        local f = self.getTransformRight()\r\n        self.takeObject({\r\n            position          = {pos.x+20,pos.y+50,pos.z+20},\r\n            smooth            = false,\r\n        })\r\n        return\r\n    end\r\nend\r\n--Runs when an object is dropped in bag.\r\nfunction onCollisionEnter(collision_info)\r\n\tplayerColor = lastHolder[collision_info.collision_object]\r\n\tif collision_info.collision_object.getGUID() == nil then return end\r\n\tdiceGuidFaces = {}\r\n\tsortedKeys = {}\r\n\r\n--Save number of faces on dice\r\n\tfor k, v in ipairs(getAllObjects()) do\r\n\t\tif v.tag == 'Dice' then\r\n\t\t\tobjType = tostring(v)\r\n\t\t\tfaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n\t\t\tif faces == nil then\r\n\t\t\t\tfaces = tonumber(customFace[v.getCustomObject().type + 1])\r\n\t\t\tend\r\n\t\tdiceGuidFaces[v.getGUID()] = faces\r\n\t\ttable.insert(sortedKeys, v.getGUID())\r\n\t\tend\r\n\tend\r\n\r\n--[[Benchmarking code\r\nif resetclock ~= 1 then\r\nclockstart = os.clock()\r\nresetclock = 1\r\nend--]]\r\n\r\n--Creates a timer to take the dice out and position them.\r\n\tWait.time(|| takeDiceOut(), 0.3)\r\nend\r\n\r\n--Function to take the dice out of the bag and position them.\r\nfunction takeDiceOut(tab)\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif data == nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tif data.Step < 1 then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - \"step\" can\\'t be lower than 1. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tdiceGuids = {}\r\n\tfor k, v in pairs(self.getObjects()) do\r\n\t\tfaces = diceGuidFaces[v.guid]\r\n\t\tif v.name ==\"BCB-D3\" then\r\n\t\t\tfaces=3\r\n\t\tend\r\n\t\tr = math.random(faces)\r\n\t\tdiceGuids[v.guid] = r\r\n\tend\r\n\r\n\tlocal objs = self.getObjects()\r\n\tlocal position = self.getPosition()\r\n\trotation = self.getRotation()\r\n\tsortedKeys = sortByVal(diceGuids, data.SortNoRows)\r\n\tRows6 = {}\r\n\tRows12 = {}\r\n\tRows=0\r\n\tn = 1\r\n\tfor _, key in pairs(sortedKeys) do\r\n\t\tif diceGuids[key] == math.floor(diceGuids[key]) then\r\n\t\t\tresultsTable[diceGuids[key]] = resultsTable[diceGuids[key]] + 1\r\n\t\tend\r\n\tif hasGuid(objs, key) then\r\n\t\tfaces = diceGuidFaces[key]\r\n\t\tif  faces >11 then\r\n\t\t\tif Rows12[diceGuids[key]] == nil then\r\n\t\t\t\tRows12[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\telse\r\n\t\t\tif Rows6[diceGuids[key]] == nil then\r\n\t\t\t\tRows6[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\tend\r\n\t\tif  faces >11 then\r\n\t\t\tRows12[diceGuids[key]] = Rows12[diceGuids[key]] + 1\r\n\t\t\tRows=Rows12[diceGuids[key]]\r\n\t\telse\r\n\t\t\tRows6[diceGuids[key]] = Rows6[diceGuids[key]] + 1\r\n\t\t\tRows=Rows6[diceGuids[key]]\r\n\t\tend\r\n\t\tparams = {}\r\n\t\tparams.guid = key\r\n\t\tlocal d12Xoffset=0\r\n\t\tlocal d12Zoffset=0\r\n\t\tif diceGuids[key]>6 and faces >11 then\r\n\t\t\t d12Xoffset=14\r\n\t\t\t d12Zoffset=6\r\n\t\t elseif faces >11 then\r\n\t\t\t d12Xoffset=6.5\r\n\t\t\t d12Zoffset=0\r\n\t\tend\r\n\t\tif data.Rows == 'no' then\r\n\t\t\tparams.position = { position.x + (-1) * math.sin((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step,\r\n\t\t\tposition.y + 1,\r\n\t\t\tposition.z + (-1) * math.cos((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step}\r\n\t\telse\r\n\r\n\t\t\tparams.position = {\r\n\t\t\tposition.x + d12Xoffset + (Rows * math.cos((180 + self.getRotation().y) * 0.0174532)) * data.Step - (diceGuids[key] * math.sin((180 + self.getRotation().y) * 0.0174532)) * data.Step,\r\n\t\t\tposition.y + 2,\r\n\t\t\tposition.z  + (Rows * math.sin((self.getRotation().y) * 0.0174532)) * data.Step + ((diceGuids[key]-d12Zoffset)* math.cos((0 + self.getRotation().y) * 0.0174532)) * data.Step}\r\n\t\tend\r\n--params.rotation = {rotation.x, rotation.y, rotation.z}\r\n\t\tparams.callback = 'setValueCallback'\r\n\t\tparams.params = {diceGuids[key]}\r\n\t\tparams.smooth = false\r\n\t\tif data.SmoothDice == 'yes' then params.smooth = true end\r\n\t\t\tself.takeObject(params)\r\n\t\t\tn = n + 1\r\n\t\tend\r\n\tend\r\n\tprintresultsTable()\r\n--[[Benchmarking code\r\n\tclockend = os.clock()\r\n\tresetclock=0\r\n\tprint('Runtime: ' .. clockend-clockstart .. ' seconds.')--]]\r\nend\r\n\r\n--Function to count resultsTable for printing.\r\nfunction sum(t)\r\n\tlocal sum = 0\r\n\tfor k, v in pairs(t) do\r\n\t\tsum = sum + v\r\n\tend\r\n\r\n\treturn sum\r\nend\r\n\r\n--Prints resultsTable.\r\nfunction printresultsTable()\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif sum(resultsTable) > 0 and data.Results == 'yes' then\r\n\t\tlocal description = {'Ones.', 'Twos.', 'Threes.', 'Fours.', 'Fives.', 'Sixes.', 'Sevens.', 'Eights.', 'Nines.', 'Tens.', 'Elevens.', 'Twelves.', 'Thirteens.', 'Fourteens.', 'Fifteens.', 'Sixteens.', 'Seventeens', 'Eighteens.', 'Nineteens.', 'Twenties.'}\r\n\t\tlocal msg = ''\r\n\t\tfor dieFace, numRolled in ipairs(resultsTable) do\r\n\t\t\tif numRolled > 0 then\r\n\t\t\t\tmsg = msg .. numRolled .. ' ' .. description[dieFace] .. ' '\r\n\t\t\tend\r\n\t\tend\r\n\r\n\t\tlocal time = '[' .. os.date(\"%H\") .. ':' .. os.date(\"%M\") .. ':' .. os.date(\"%S\") .. ' UTC] '\r\n\t\tif playerColor == nil then\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. '~UNKNOWN PLAYER~ rolls:\\n' .. msg .. '*******************************************************', {1, 1, 1})\r\n\t\telse\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. Player[playerColor].steam_name .. ' rolls:\\n' .. msg .. '*******************************************************', stringColorToRGB(playerColor))\r\n\t\tend\r\n\tend\r\n\r\n\tfor k,v in ipairs(resultsTable) do\r\n\t\tresultsTable[k] = 0\r\n\tend\r\nend\r\n\r\n--Sets the value of the physical dice object and reorients them if needed.\r\nfunction setValueCallback(obj, tab)\r\n    function insidef()\r\n        obj.setValue(tab[1])\r\n        if obj.tag == 'Dice' then\r\n            objType = tostring(obj)\r\n            callFaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n            if callFaces == nil then callFaces = tonumber(customFace[obj.getCustomObject().type + 1]) end\r\n            diceGuidFaces[obj.getGUID()] = callFaces\r\n        end\r\n\r\n        local waitFramesDelay = 35\r\n\r\n        RotValues_4 = {180,0,180,180}\r\n        RotValues_6 = {180,180,180,180,180,180}\r\n        RotValues_8 = {180,180,0,0,0,0,180,180}\r\n        RotValues_10 = {180,0,180,0,180,0,180,0,180,0}\r\n        RotValues_12 = {180,180,180,0,0,180,0,0,180,0,287.93,216}\r\n        RotValues_20 = {239.65,120,0,0,120,0,120,120,120,0,180,301.86,300,300,300,180,60,180,300,180}\r\n        waitFrames(waitFramesDelay)\r\n        local rot = self.getRotation()\r\n        local r = obj.getRotation()\r\n        local v = obj.getValue()\r\n\r\n        if callFaces == 4 then\r\n            obj.setRotation({r.x, rot.y + RotValues_4[v], r.z})\r\n        end\r\n\r\n        if callFaces == 6 then\r\n            obj.setRotation({r.x, rot.y + RotValues_6[v], r.z})\r\n        end\r\n\r\n        if callFaces == 8 then\r\n            obj.setRotation({r.x, rot.y + RotValues_8[v], r.z})\r\n        end\r\n\r\n        if callFaces == 10 then\r\n            obj.setRotation({r.x, rot.y + RotValues_10[v], r.z})\r\n        end\r\n\r\n        if callFaces == 12 then\r\n            obj.setRotation({r.x, rot.y + RotValues_12[v], r.z})\r\n        end\r\n\r\n        if callFaces == 20 then\r\n            obj.setRotation({r.x, rot.y + RotValues_20[v], r.z})\r\n        end\r\n\r\n        return 1\r\n    end\r\n\r\n    startLuaCoroutine(self, 'insidef')\r\nend\r\n\r\n--Coroutine to wait to allow for custom dice positional data to be altered.\r\nfunction waitFrames(frames)\r\n\twhile frames > 0 do\r\n\t\tcoroutine.yield(0)\r\n\t\tframes = frames - 1\r\n\tend\r\nend\r\n\r\n\r\n--Function to print table contents.\r\n--[[\r\nfunction printTable(tempTable)\r\n\tfor k, v in pairs(tempTable) do\r\n\t\tprint('key = ' .. k)\r\n\t\tprint('value =' .. v)\r\n\tend\r\nend\r\n--]]",
      "LuaScriptState": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GUID": "78121f"
    },
    {
      "Name": "Custom_Model_Bag",
      "Transform": {
        "posX": -46.5,
        "posY": 0.9911357,
        "posZ": -26.0,
        "rotX": 8.57673149E-06,
        "rotY": 180.0059,
        "rotZ": 4.1693275E-07,
        "scaleX": 0.55000037,
        "scaleY": 0.55000037,
        "scaleZ": 0.55000037
      },
      "Nickname": "Teal Kustom Apoc 40k Dice Roller Mk2.6",
      "Description": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": false,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "MaterialIndex": -1,
      "MeshIndex": -1,
      "Number": 0,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/94979895601488369/894F4E9B36D9116E12A24DAAFE1B4FD26A1880D2/",
        "DiffuseURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692847708/D025E28D35B9CE97262B43205B2F5EA8AF8B886B/",
        "NormalURL": "",
        "ColliderURL": "",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 6,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "--Based off: https://steamcommunity.com/sharedfiles/filedetails/?id=726800282\r\n--Link for this mod: https://steamcommunity.com/sharedfiles/filedetails/?id=959360907\r\n\r\n--Initialize Global Variables and pRNG Seed\r\nmath.randomseed(tonumber(tostring(os.time()):reverse():sub(1,7))+tonumber(tostring(os.clock()):reverse():sub(1,7)))\r\nver = 'BCB-2018-12-16'\r\nlastHolder = {}\r\ncustomFace = {4, 6, 8, 10, 12, 20}\r\ndiceGuidFaces = {}\r\nsortedKeys = {}\r\nresultsTable = {0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0}\r\n\r\n--Determine the person who put the dice in the box.\r\nfunction onObjectPickedUp(playerColor, obj)\r\n\tlastHolder[obj] = playerColor\r\nend\r\n\r\n--Reset the person holding the dice when no dice are held.\r\nfunction onObjectDestroyed(obj)\r\n\tlastHolder[obj] = nil\r\nend\r\n\r\n--Reset description on load if empty.\r\nfunction onLoad(save_state)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Returns description on game save.\r\nfunction onSave()\r\n\treturn self.getDescription()\r\nend\r\n\r\n--Reset description on drop if empty.\r\nfunction onDropped(player_color)\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\nend\r\n\r\n--Sets default description.\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({Results = 'no', SmoothDice = 'no', Rows = 'yes', SortNoRows = 'asc', Step = 1, Version = ver}))\r\nend\r\n\r\n--Creates a table and sorts the dice guids by value.\r\nfunction sortByVal(t, type)\r\n\tlocal keys = {}\r\n\tfor key in pairs(t) do\r\n\t\ttable.insert(keys, key)\r\n\tend\r\n\tif type == 'asc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] < t[b] end)\r\n\telseif type == 'desc' then\r\n\t\ttable.sort(keys, function(a, b) return t[a] > t[b] end)\r\n\tend\r\n\treturn keys\r\nend\r\n\r\n--Checks the item dropped in the bag has a guid.\r\nfunction hasGuid(t, g)\r\n\tfor k, v in ipairs(t) do\r\n\t\tif v.guid == g then return true end\r\n\tend\r\n\r\n\treturn false\r\nend\r\n--Runs when non-dice is put into bag\r\nfunction onObjectEnterContainer(container, obj)\r\n    if container == self and obj.tag ~= \"Dice\" then\r\n        local pos = self.getPosition()\r\n        local f = self.getTransformRight()\r\n        self.takeObject({\r\n            position          = {pos.x+20,pos.y+50,pos.z+20},\r\n            smooth            = false,\r\n        })\r\n        return\r\n    end\r\nend\r\n--Runs when an object is dropped in bag.\r\nfunction onCollisionEnter(collision_info)\r\n\tplayerColor = lastHolder[collision_info.collision_object]\r\n\tif collision_info.collision_object.getGUID() == nil then return end\r\n\tdiceGuidFaces = {}\r\n\tsortedKeys = {}\r\n\r\n--Save number of faces on dice\r\n\tfor k, v in ipairs(getAllObjects()) do\r\n\t\tif v.tag == 'Dice' then\r\n\t\t\tobjType = tostring(v)\r\n\t\t\tfaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n\t\t\tif faces == nil then\r\n\t\t\t\tfaces = tonumber(customFace[v.getCustomObject().type + 1])\r\n\t\t\tend\r\n\t\tdiceGuidFaces[v.getGUID()] = faces\r\n\t\ttable.insert(sortedKeys, v.getGUID())\r\n\t\tend\r\n\tend\r\n\r\n--[[Benchmarking code\r\nif resetclock ~= 1 then\r\nclockstart = os.clock()\r\nresetclock = 1\r\nend--]]\r\n\r\n--Creates a timer to take the dice out and position them.\r\n\tWait.time(|| takeDiceOut(), 0.3)\r\nend\r\n\r\n--Function to take the dice out of the bag and position them.\r\nfunction takeDiceOut(tab)\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif data == nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tif data.Step < 1 then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - \"step\" can\\'t be lower than 1. Restored default configuration.', {0.8, 0.5, 0})\r\n\tend\r\n\r\n\tdiceGuids = {}\r\n\tfor k, v in pairs(self.getObjects()) do\r\n\t\tfaces = diceGuidFaces[v.guid]\r\n\t\tif v.name ==\"BCB-D3\" then\r\n\t\t\tfaces=3\r\n\t\tend\r\n\t\tr = math.random(faces)\r\n\t\tdiceGuids[v.guid] = r\r\n\tend\r\n\r\n\tlocal objs = self.getObjects()\r\n\tlocal position = self.getPosition()\r\n\trotation = self.getRotation()\r\n\tsortedKeys = sortByVal(diceGuids, data.SortNoRows)\r\n\tRows6 = {}\r\n\tRows12 = {}\r\n\tRows=0\r\n\tn = 1\r\n\tfor _, key in pairs(sortedKeys) do\r\n\t\tif diceGuids[key] == math.floor(diceGuids[key]) then\r\n\t\t\tresultsTable[diceGuids[key]] = resultsTable[diceGuids[key]] + 1\r\n\t\tend\r\n\tif hasGuid(objs, key) then\r\n\t\tfaces = diceGuidFaces[key]\r\n\t\tif  faces >11 then\r\n\t\t\tif Rows12[diceGuids[key]] == nil then\r\n\t\t\t\tRows12[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\telse\r\n\t\t\tif Rows6[diceGuids[key]] == nil then\r\n\t\t\t\tRows6[diceGuids[key]] = 0\r\n\t\t\tend\r\n\t\tend\r\n\t\tif  faces >11 then\r\n\t\t\tRows12[diceGuids[key]] = Rows12[diceGuids[key]] + 1\r\n\t\t\tRows=Rows12[diceGuids[key]]\r\n\t\telse\r\n\t\t\tRows6[diceGuids[key]] = Rows6[diceGuids[key]] + 1\r\n\t\t\tRows=Rows6[diceGuids[key]]\r\n\t\tend\r\n\t\tparams = {}\r\n\t\tparams.guid = key\r\n\t\tlocal d12Xoffset=0\r\n\t\tlocal d12Zoffset=0\r\n\t\tif diceGuids[key]>6 and faces >11 then\r\n\t\t\t d12Xoffset=14\r\n\t\t\t d12Zoffset=6\r\n\t\t elseif faces >11 then\r\n\t\t\t d12Xoffset=6.5\r\n\t\t\t d12Zoffset=0\r\n\t\tend\r\n\t\tif data.Rows == 'no' then\r\n\t\t\tparams.position = { position.x + (-1) * math.sin((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step,\r\n\t\t\tposition.y + 1,\r\n\t\t\tposition.z + (-1) * math.cos((90 + rotation.y) * 0.0174532) * (n + 0.5) * data.Step}\r\n\t\telse\r\n\r\n\t\t\tparams.position = {\r\n\t\t\tposition.x + d12Xoffset + (Rows * math.cos((180 + self.getRotation().y) * 0.0174532)) * data.Step - (diceGuids[key] * math.sin((180 + self.getRotation().y) * 0.0174532)) * data.Step,\r\n\t\t\tposition.y + 2,\r\n\t\t\tposition.z  + (Rows * math.sin((self.getRotation().y) * 0.0174532)) * data.Step + ((diceGuids[key]-d12Zoffset)* math.cos((0 + self.getRotation().y) * 0.0174532)) * data.Step}\r\n\t\tend\r\n--params.rotation = {rotation.x, rotation.y, rotation.z}\r\n\t\tparams.callback = 'setValueCallback'\r\n\t\tparams.params = {diceGuids[key]}\r\n\t\tparams.smooth = false\r\n\t\tif data.SmoothDice == 'yes' then params.smooth = true end\r\n\t\t\tself.takeObject(params)\r\n\t\t\tn = n + 1\r\n\t\tend\r\n\tend\r\n\tprintresultsTable()\r\n--[[Benchmarking code\r\n\tclockend = os.clock()\r\n\tresetclock=0\r\n\tprint('Runtime: ' .. clockend-clockstart .. ' seconds.')--]]\r\nend\r\n\r\n--Function to count resultsTable for printing.\r\nfunction sum(t)\r\n\tlocal sum = 0\r\n\tfor k, v in pairs(t) do\r\n\t\tsum = sum + v\r\n\tend\r\n\r\n\treturn sum\r\nend\r\n\r\n--Prints resultsTable.\r\nfunction printresultsTable()\r\n\tlocal data = JSON.decode(self.getDescription())\r\n\tif sum(resultsTable) > 0 and data.Results == 'yes' then\r\n\t\tlocal description = {'Ones.', 'Twos.', 'Threes.', 'Fours.', 'Fives.', 'Sixes.', 'Sevens.', 'Eights.', 'Nines.', 'Tens.', 'Elevens.', 'Twelves.', 'Thirteens.', 'Fourteens.', 'Fifteens.', 'Sixteens.', 'Seventeens', 'Eighteens.', 'Nineteens.', 'Twenties.'}\r\n\t\tlocal msg = ''\r\n\t\tfor dieFace, numRolled in ipairs(resultsTable) do\r\n\t\t\tif numRolled > 0 then\r\n\t\t\t\tmsg = msg .. numRolled .. ' ' .. description[dieFace] .. ' '\r\n\t\t\tend\r\n\t\tend\r\n\r\n\t\tlocal time = '[' .. os.date(\"%H\") .. ':' .. os.date(\"%M\") .. ':' .. os.date(\"%S\") .. ' UTC] '\r\n\t\tif playerColor == nil then\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. '~UNKNOWN PLAYER~ rolls:\\n' .. msg .. '*******************************************************', {1, 1, 1})\r\n\t\telse\r\n\t\t\tprintToAll('*******************************************************\\n' .. time .. Player[playerColor].steam_name .. ' rolls:\\n' .. msg .. '*******************************************************', stringColorToRGB(playerColor))\r\n\t\tend\r\n\tend\r\n\r\n\tfor k,v in ipairs(resultsTable) do\r\n\t\tresultsTable[k] = 0\r\n\tend\r\nend\r\n\r\n--Sets the value of the physical dice object and reorients them if needed.\r\nfunction setValueCallback(obj, tab)\r\n    function insidef()\r\n        obj.setValue(tab[1])\r\n        if obj.tag == 'Dice' then\r\n            objType = tostring(obj)\r\n            callFaces = tonumber(string.match(objType, 'Die_(%d+).*'))\r\n            if callFaces == nil then callFaces = tonumber(customFace[obj.getCustomObject().type + 1]) end\r\n            diceGuidFaces[obj.getGUID()] = callFaces\r\n        end\r\n\r\n        local waitFramesDelay = 35\r\n\r\n        RotValues_4 = {180,0,180,180}\r\n        RotValues_6 = {180,180,180,180,180,180}\r\n        RotValues_8 = {180,180,0,0,0,0,180,180}\r\n        RotValues_10 = {180,0,180,0,180,0,180,0,180,0}\r\n        RotValues_12 = {180,180,180,0,0,180,0,0,180,0,287.93,216}\r\n        RotValues_20 = {239.65,120,0,0,120,0,120,120,120,0,180,301.86,300,300,300,180,60,180,300,180}\r\n        waitFrames(waitFramesDelay)\r\n        local rot = self.getRotation()\r\n        local r = obj.getRotation()\r\n        local v = obj.getValue()\r\n\r\n        if callFaces == 4 then\r\n            obj.setRotation({r.x, rot.y + RotValues_4[v], r.z})\r\n        end\r\n\r\n        if callFaces == 6 then\r\n            obj.setRotation({r.x, rot.y + RotValues_6[v], r.z})\r\n        end\r\n\r\n        if callFaces == 8 then\r\n            obj.setRotation({r.x, rot.y + RotValues_8[v], r.z})\r\n        end\r\n\r\n        if callFaces == 10 then\r\n            obj.setRotation({r.x, rot.y + RotValues_10[v], r.z})\r\n        end\r\n\r\n        if callFaces == 12 then\r\n            obj.setRotation({r.x, rot.y + RotValues_12[v], r.z})\r\n        end\r\n\r\n        if callFaces == 20 then\r\n            obj.setRotation({r.x, rot.y + RotValues_20[v], r.z})\r\n        end\r\n\r\n        return 1\r\n    end\r\n\r\n    startLuaCoroutine(self, 'insidef')\r\nend\r\n\r\n--Coroutine to wait to allow for custom dice positional data to be altered.\r\nfunction waitFrames(frames)\r\n\twhile frames > 0 do\r\n\t\tcoroutine.yield(0)\r\n\t\tframes = frames - 1\r\n\tend\r\nend\r\n\r\n\r\n--Function to print table contents.\r\n--[[\r\nfunction printTable(tempTable)\r\n\tfor k, v in pairs(tempTable) do\r\n\t\tprint('key = ' .. k)\r\n\t\tprint('value =' .. v)\r\n\tend\r\nend\r\n--]]",
      "LuaScriptState": "{\n  \"Results\": \"no\",\n  \"Rows\": \"yes\",\n  \"SmoothDice\": \"no\",\n  \"SortNoRows\": \"asc\",\n  \"Step\": 1.05,\n  \"Version\": \"BCB-2018-12-16\"\n}",
      "GUID": "cee7f0"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -36.0,
        "posY": 0.87,
        "posZ": 29.25,
        "rotX": 8.375675E-06,
        "rotY": 0.0,
        "rotZ": 8.3783857E-07,
        "scaleX": 4.0,
        "scaleY": 1.0,
        "scaleZ": 3.75
      },
      "Nickname": "Orange Dice Table",
      "Description": "{\n  \"Cumulative\": \"no\",\n  \"Update_Frequency\": \"0.2\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692928241/73BC0800A4F7CD7993C8EDD8DC37EB9932D348BE/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "function onload()\r\n    defaultFontSize=500\r\n    fontSize=defaultFontSize\r\n    lineCount=0\r\n    --defaultDivisionLabel=\"|\\n|\\n|\\n|\\n|\\n|\\n|\"\r\n    defaultDivisionLabel=\"|\\n|\"\r\n    --defaultDivisionLabel=\"|\"\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-3.15,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=650,\r\n    font_color={1, 1, 1},\r\n    scale={0.25, 0.25, 0.25},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-0.95,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={1.1,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\n\r\n    emptyText = ' '\r\n\tdata2 = JSON.decode(self.getDescription())\r\n  log(data2)\r\n\tWait.time(checkDice, data2.Update_Frequency*1,-1)\r\nend\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({\r\n\t\tCumulative = 'no',Update_Frequency = '0.2'\r\n\t}))\r\nend\r\n\r\nfunction checkDice ()\r\n\r\n\t--Reset description on null\r\n\tdata = JSON.decode(self.getDescription())\r\n\tif data==nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored defaut configuration.', {0.8,0.5,0})\r\n\tend\r\n\r\n    -- If the zone is moving, wait\r\n    if not self.resting then\r\n        return\r\n    end\r\n\r\n    local ownPos = self.getPosition()\r\n    local ownRotation = self.getRotation()['x']\r\n    local ownScale = self.getScale()['x']\r\n    local Rotation = self.getRotation()\r\n    -- Compute the bounds of the box.\r\n\t-- Manipulate the offset to account for tray borders.\r\n\t-- y offset will affect how above and below it will see dice.\r\n\t-- I was too lazy to split the y offset to only extend above the tray.\r\n\t-- If you want to fix do so and message me. ~(^_^;~)\r\n\r\n  local xboundOffset = 3.3 --Horizontal Offset\r\n  local yboundOffset = 2.5 --Up/Down Offset\r\n  local zboundOffset = 1 --Vertical Offset\r\n\tif Rotation.y > 89 and Rotation.y < 91 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n\tif Rotation.y > 269 and Rotation.y < 270 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n    local leftBound = ownPos['x'] - xboundOffset * ownScale\r\n    local rightBound = ownPos['x'] + xboundOffset * ownScale\r\n    local upperBound = ownPos['z'] + zboundOffset * ownScale\r\n    local lowerBound = ownPos['z'] - zboundOffset * ownScale\r\n\tlocal yupperBound = ownPos['y'] + yboundOffset --* ownScale\r\n\tlocal ylowerBound = ownPos['y'] - yboundOffset --* ownScale\r\n\r\n    local valueToCounter = {}\r\n    local valuesToSort = {}\r\n\ttotaldice=0\r\n    -- Iterate all objects in the zone\r\n    for _, obj in pairs(getAllObjects()) do\r\n        -- Fetch resting dices\r\n        if obj != nil and obj.tag == 'Dice' and obj.resting then\r\n            -- Only use objects inside the zone\r\n            local objPos = obj.getPosition()\r\n            if objPos['x'] > leftBound and objPos['x'] < rightBound and objPos['z'] > lowerBound and objPos['z'] < upperBound and objPos['y'] < yupperBound and objPos['y'] > ylowerBound then\r\n                local value = obj.getValue()\r\n                local counter = valueToCounter[value]\r\n                -- First occurrence of this value\r\n                if counter == nil then\r\n                    counter = 0\r\n                    valuesToSort[#valuesToSort + 1] = value\r\n                end\r\n                -- Increase the occurrence of this value\r\n                counter = counter + 1\r\n                totaldice=totaldice+1\r\n                valueToCounter[value] = counter\r\n            end\r\n        end\r\n    end\r\n\r\n    -- Process the tracked values, sorted and build the lines to display\r\n\tlocal textLines = {}\r\n    lineCount=0\r\n\tif data.Cumulative == 'yes' then\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor i=1,12 do\r\n\t\t\tif valueToCounter[i]==nil then\r\n\t\t\t\tvalueToCounter[i]=0\r\n\t\t\tend\r\n\t\tend\r\n\t\tvalueToCounter[11]=valueToCounter[12]+valueToCounter[11]\r\n\t\tvalueToCounter[10]=valueToCounter[11]+valueToCounter[10]\r\n\t\tvalueToCounter[9]=valueToCounter[10]+valueToCounter[9]\r\n\t\tvalueToCounter[8]=valueToCounter[9]+valueToCounter[8]\r\n\t\tvalueToCounter[7]=valueToCounter[8]+valueToCounter[7]\r\n\t\tvalueToCounter[6]=valueToCounter[7]+valueToCounter[6]\r\n\t\tvalueToCounter[5]=valueToCounter[6]+valueToCounter[5]\r\n\t\tvalueToCounter[4]=valueToCounter[5]+valueToCounter[4]\r\n\t\tvalueToCounter[3]=valueToCounter[4]+valueToCounter[3]\r\n\t\tvalueToCounter[2]=valueToCounter[3]+valueToCounter[2]\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal xxx = ''\r\n\t\t\tif value == 1 then\r\n\t\t\t\txxx = \"'s: \"\r\n\t\t\telse\r\n\t\t\t\txxx = \"+: \"\r\n\t\t\tend\r\n\t\t\tlocal line = value .. xxx .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\telse\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal line = '#' .. value .. ': ' .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\tend\r\n    if lineCount < 6 then\r\n        for i = lineCount+1, 6 do\r\n            textLines[#textLines + 1] = \" \"\r\n        end\r\n    end\r\n    -- Display the text\r\n    local text = table.concat(textLines, '\\n')\r\n    if text == '' then\r\n        -- Suppress the default text 'Type Here'\r\n        text = emptyText\r\n    end\r\n    if totaldice==0\r\n    then\r\n        totaltext = ' '\r\n\r\n    else\r\n        totaltext='\\nTot: '..totaldice\r\n\r\n    end\r\n      defaultFontSize=500\r\n      defaultDivisionLabel=\"|\\n|\"\r\n      if lineCount>11 then\r\n        fontSize=300-((lineCount-12)*17)\r\n        divisionLabel=defaultDivisionLabel\r\n      elseif lineCount>6 then\r\n        fontSize=defaultFontSize-((lineCount-6)*38)\r\n        divisionLabel=defaultDivisionLabel\r\n      else\r\n        fontSize=defaultFontSize\r\n        divisionLabel=\"\"\r\n      end\r\n\r\n      self.editButton({index=0, label=text..totaltext, font_size=fontSize})\r\n\r\n      self.editButton({index=1, label=divisionLabel})\r\n      self.editButton({index=2, label=divisionLabel})\r\nend",
      "LuaScriptState": "{\"svdiceZoneGUID\":\"7015aa\"}",
      "GUID": "e45f80",
      "AttachedSnapPoints": [
        {
          "Position": {
            "x": 2.77252316,
            "y": 0.0999389961,
            "z": -0.8509657
          }
        }
      ]
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 36.0,
        "posY": 0.8814986,
        "posZ": 29.25,
        "rotX": 8.375675E-06,
        "rotY": 0.0,
        "rotZ": 8.3783857E-07,
        "scaleX": 4.0,
        "scaleY": 1.0,
        "scaleZ": 3.75
      },
      "Nickname": "Red Dice Table",
      "Description": "{\n  \"Cumulative\": \"no\",\n  \"Update_Frequency\": \"0.2\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692928241/73BC0800A4F7CD7993C8EDD8DC37EB9932D348BE/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "function onload()\r\n    defaultFontSize=500\r\n    fontSize=defaultFontSize\r\n    lineCount=0\r\n    --defaultDivisionLabel=\"|\\n|\\n|\\n|\\n|\\n|\\n|\"\r\n    defaultDivisionLabel=\"|\\n|\"\r\n    --defaultDivisionLabel=\"|\"\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-3.15,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=650,\r\n    font_color={1, 1, 1},\r\n    scale={0.25, 0.25, 0.25},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-0.95,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={1.1,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\n\r\n    emptyText = ' '\r\n\tdata2 = JSON.decode(self.getDescription())\r\n  log(data2)\r\n\tWait.time(checkDice, data2.Update_Frequency*1,-1)\r\nend\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({\r\n\t\tCumulative = 'no',Update_Frequency = '0.2'\r\n\t}))\r\nend\r\n\r\nfunction checkDice ()\r\n\r\n\t--Reset description on null\r\n\tdata = JSON.decode(self.getDescription())\r\n\tif data==nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored defaut configuration.', {0.8,0.5,0})\r\n\tend\r\n\r\n    -- If the zone is moving, wait\r\n    if not self.resting then\r\n        return\r\n    end\r\n\r\n    local ownPos = self.getPosition()\r\n    local ownRotation = self.getRotation()['x']\r\n    local ownScale = self.getScale()['x']\r\n    local Rotation = self.getRotation()\r\n    -- Compute the bounds of the box.\r\n\t-- Manipulate the offset to account for tray borders.\r\n\t-- y offset will affect how above and below it will see dice.\r\n\t-- I was too lazy to split the y offset to only extend above the tray.\r\n\t-- If you want to fix do so and message me. ~(^_^;~)\r\n\r\n    local xboundOffset = 3.3 --Horizontal Offset\r\n    local yboundOffset = 2.5 --Up/Down Offset\r\n    local zboundOffset = 1 --Vertical Offset\r\n\tif Rotation.y > 89 and Rotation.y < 91 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n\tif Rotation.y > 269 and Rotation.y < 270 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n    local leftBound = ownPos['x'] - xboundOffset * ownScale\r\n    local rightBound = ownPos['x'] + xboundOffset * ownScale\r\n    local upperBound = ownPos['z'] + zboundOffset * ownScale\r\n    local lowerBound = ownPos['z'] - zboundOffset * ownScale\r\n\tlocal yupperBound = ownPos['y'] + yboundOffset --* ownScale\r\n\tlocal ylowerBound = ownPos['y'] - yboundOffset --* ownScale\r\n\r\n    local valueToCounter = {}\r\n    local valuesToSort = {}\r\n\ttotaldice=0\r\n    -- Iterate all objects in the zone\r\n    for _, obj in pairs(getAllObjects()) do\r\n        -- Fetch resting dices\r\n        if obj != nil and obj.tag == 'Dice' and obj.resting then\r\n            -- Only use objects inside the zone\r\n            local objPos = obj.getPosition()\r\n            if objPos['x'] > leftBound and objPos['x'] < rightBound and objPos['z'] > lowerBound and objPos['z'] < upperBound and objPos['y'] < yupperBound and objPos['y'] > ylowerBound then\r\n                local value = obj.getValue()\r\n                local counter = valueToCounter[value]\r\n                -- First occurrence of this value\r\n                if counter == nil then\r\n                    counter = 0\r\n                    valuesToSort[#valuesToSort + 1] = value\r\n                end\r\n                -- Increase the occurrence of this value\r\n                counter = counter + 1\r\n                totaldice=totaldice+1\r\n                valueToCounter[value] = counter\r\n            end\r\n        end\r\n    end\r\n\r\n    -- Process the tracked values, sorted and build the lines to display\r\n\tlocal textLines = {}\r\n    lineCount=0\r\n\tif data.Cumulative == 'yes' then\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor i=1,12 do\r\n\t\t\tif valueToCounter[i]==nil then\r\n\t\t\t\tvalueToCounter[i]=0\r\n\t\t\tend\r\n\t\tend\r\n\t\tvalueToCounter[11]=valueToCounter[12]+valueToCounter[11]\r\n\t\tvalueToCounter[10]=valueToCounter[11]+valueToCounter[10]\r\n\t\tvalueToCounter[9]=valueToCounter[10]+valueToCounter[9]\r\n\t\tvalueToCounter[8]=valueToCounter[9]+valueToCounter[8]\r\n\t\tvalueToCounter[7]=valueToCounter[8]+valueToCounter[7]\r\n\t\tvalueToCounter[6]=valueToCounter[7]+valueToCounter[6]\r\n\t\tvalueToCounter[5]=valueToCounter[6]+valueToCounter[5]\r\n\t\tvalueToCounter[4]=valueToCounter[5]+valueToCounter[4]\r\n\t\tvalueToCounter[3]=valueToCounter[4]+valueToCounter[3]\r\n\t\tvalueToCounter[2]=valueToCounter[3]+valueToCounter[2]\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal xxx = ''\r\n\t\t\tif value == 1 then\r\n\t\t\t\txxx = \"'s: \"\r\n\t\t\telse\r\n\t\t\t\txxx = \"+: \"\r\n\t\t\tend\r\n\t\t\tlocal line = value .. xxx .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\telse\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal line = '#' .. value .. ': ' .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\tend\r\n    if lineCount < 6 then\r\n        for i = lineCount+1, 6 do\r\n            textLines[#textLines + 1] = \" \"\r\n        end\r\n    end\r\n    -- Display the text\r\n    local text = table.concat(textLines, '\\n')\r\n    if text == '' then\r\n        -- Suppress the default text 'Type Here'\r\n        text = emptyText\r\n    end\r\n    if totaldice==0\r\n    then\r\n        totaltext = ' '\r\n\r\n    else\r\n        totaltext='\\nTot: '..totaldice\r\n\r\n    end\r\n      defaultFontSize=500\r\n      defaultDivisionLabel=\"|\\n|\"\r\n      if lineCount>11 then\r\n        fontSize=300-((lineCount-12)*17)\r\n        divisionLabel=defaultDivisionLabel\r\n      elseif lineCount>6 then\r\n        fontSize=defaultFontSize-((lineCount-6)*38)\r\n        divisionLabel=defaultDivisionLabel\r\n      else\r\n        fontSize=defaultFontSize\r\n        divisionLabel=\"\"\r\n      end\r\n\r\n      self.editButton({index=0, label=text..totaltext, font_size=fontSize})\r\n\r\n      self.editButton({index=1, label=divisionLabel})\r\n      self.editButton({index=2, label=divisionLabel})\r\nend",
      "LuaScriptState": "{\"svdiceZoneGUID\":\"2aa7c6\"}",
      "GUID": "b14cd6",
      "AttachedSnapPoints": [
        {
          "Position": {
            "x": 2.77252316,
            "y": 0.0999389961,
            "z": -0.8509657
          }
        }
      ]
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 88.5,
        "posY": -2.95,
        "posZ": 51.1,
        "rotX": 1.8212038E-06,
        "rotY": 0.0,
        "rotZ": -4.720183E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Red Spawning Menu",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9264706,
        "g": 0.0,
        "b": 0.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "-- RED SPAWNING MENU\r\n\r\n\r\n--hangar=getObjectFromGUID(\"5a7404\")\r\nbackImage=Global.getVar(\"backImage\")\r\ndefaultImage=backImage\r\nclonedYRot=0\r\nAvailableFactions=Global.getTable(\"AvailableFactions\")\r\nAvailablePlanes=Global.getTable(\"AvailablePlanes\")\r\nAvailableUpgrades=Global.getTable(\"AvailableUpgrades\")\r\nAvailableGroundDefences=Global.getTable(\"AvailableGroundDefences\")\r\nblankBase_GUID=Global.getVar(\"blankBase_GUID\")\r\nblankAutonomous_GUID=Global.getVar(\"blankAutonomous_GUID\")\r\nblankCharacter_GUID=Global.getVar(\"blankCharacter_GUID\")\r\nblankDataCard_GUID=Global.getVar(\"blankDataCard_GUID\")\r\n\r\navailableBtnHeight=Global.getVar(\"availableBtnHeight\")\r\navailableBtnWidth=Global.getVar(\"availableBtnWidth\")\r\nXoffset=Global.getVar(\"Xoffset\")\r\nYoffset=Global.getVar(\"Yoffset\")\r\nXoffsetSecondary=Global.getVar(\"XoffsetSecondary\")\r\nZoffset=Global.getVar(\"Zoffset\")\r\n\r\nspawnBaseBtn = Global.getTable(\"spawnBaseBtn\")\r\n\r\nspawnBaseSubtitleBtn=  Global.getTable(\"spawnBaseSubtitleBtn\")\r\nspawnCharacterBtn = Global.getTable(\"spawnCharacterBtn\")\r\n\r\nmainTitleBtn =  Global.getTable(\"mainTitleBtn\")\r\n\r\nmainTitle2Btn =  Global.getTable(\"mainTitle2Btn\")\r\nfactionBtn=Global.getTable(\"factionBtn\")\r\nsubtitleBtn=Global.getTable(\"subtitleBtn\")\r\nbackBtn=Global.getTable(\"backBtn\")\r\n--mainTitlePlanesBtn =  Global.getTable(\"mainTitlePlanesBtn\")\r\n\r\nmainTitleAvailableBtn =  Global.getTable(\"mainTitleAvailableBtn\")\r\n\r\n--mainTitleGroundDefencesBtn =  Global.getTable(\"mainTitleGroundDefencesBtn\")\r\n\r\n--availablePlaneBtn =  Global.getTable(\"availablePlaneBtn\")\r\n\r\n--availableUpgradeBtn =  Global.getTable(\"availableUpgradeBtn\")\r\n\r\n\r\nbuttonList={}\r\nplaneButtonsList={}\r\nupgradeButtonsList={}\r\ngroundDefencesButtonsList={}\r\n\r\nspawningPosition=Global.getTable(\"spawningPosition\")\r\n--spawningPosition={x=-15,y=10,z=32}\r\n--spawningPosition2={x=spawningPosition.x,y=spawningPosition.y,z=-spawningPosition.z}\r\nspawningPosition2={spawningPosition[1],spawningPosition[2],-spawningPosition[3]}\r\n\r\nselectedFaction=0\r\n\r\nfunction onLoad()\r\n    selfPos=Global.getTable(\"spawnMenuPosition\")\r\n    if self.getRotation().y>179 and self.getRotation().y<181 then\r\n        -- it is blue\r\n        self.setPosition({selfPos[1],selfPos[2],-selfPos[3]})\r\n    else\r\n        self.setPosition(selfPos)\r\n    end\r\n\r\n    self.setLock(true)\r\n    self.interactable=false\r\n    blankBase=getObjectFromGUID(blankBase_GUID)\r\n    blankAutonomous=getObjectFromGUID(blankAutonomous_GUID)\r\n    blankCharacter=getObjectFromGUID(blankCharacter_GUID)\r\n    blankDatacard=getObjectFromGUID(\"93ba66\")\r\n    spawnBaseBtn.function_owner=self\r\n    Wait.time(writeMenu, 1.0 , 1)\r\nend\r\n\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    self.createButton(mainTitleBtn)\r\n    --spawnBaseBtn.click_function=\"spawnBase\"\r\n    spawnBaseBtn.function_owner=self\r\n    self.createButton(spawnBaseBtn)\r\n    self.createButton(spawnBaseSubtitleBtn)\r\n    spawnCharacterBtn.function_owner=self\r\n    self.createButton(spawnCharacterBtn)\r\n    writeFactionMenuMAIN()\r\nend\r\n\r\nfunction writeFactionMenuMAIN()\r\n    if selectedFaction==0 then\r\n        writeCooseFactionMenu()\r\n        return\r\n    end\r\n    if selectedFaction ==  1 then writeFactionMenu( 1) return end\r\n    if selectedFaction ==  2 then writeFactionMenu(2) return end\r\n    if selectedFaction ==  3 then writeFactionMenu(3) return end\r\n    if selectedFaction ==  4 then writeFactionMenu(4) return end\r\n    if selectedFaction ==  5 then writeFactionMenu(5) return end\r\n    if selectedFaction ==  6 then writeFactionMenu(6) return end\r\n    if selectedFaction ==  7 then writeFactionMenu(7) return end\r\n    if selectedFaction ==  8 then writeFactionMenu(8) return end\r\n    if selectedFaction ==  9 then writeFactionMenu(9) return end\r\n    if selectedFaction == 10 then writeFactionMenu(10) return end\r\nend\r\n\r\nfunction writeCooseFactionMenu()\r\n    for i, faction in ipairs(AvailableFactions) do\r\n        factionBtn.click_function=\"setFaction\"..tostring(i)\r\n        factionBtn.function_owner=self\r\n        factionBtn.position={0+Xoffset,Yoffset,Zoffset+0.3+i*4}\r\n        factionBtn.label=AvailableFactions[i].name\r\n        factionBtn.height=1750\r\n        factionBtn.scale={0.75,0.75,0.75}\r\n        self.createButton(factionBtn)\r\n        if faction.fan then\r\n            subtitleBtn.position={0+Xoffset,Yoffset,Zoffset+0.3+i*4}\r\n            self.createButton(subtitleBtn)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFactionMenu(_faction)\r\n    backBtn.click_function=\"setFaction0\"\r\n    backBtn.function_owner=self\r\n    backBtn.position={0+Xoffset,Yoffset,Zoffset+0.5+1}\r\n    backBtn.label=\"<- CHANGE FACTION\"\r\n    backBtn.scale={0.5,0.5,0.5}\r\n    self.createButton(backBtn)\r\n    factionBtn.click_function=\"none\"\r\n    factionBtn.function_owner=self\r\n    factionBtn.position={0+Xoffset,Yoffset,Zoffset+4}\r\n    factionBtn.label=AvailableFactions[selectedFaction].name\r\n    factionBtn.height=1500\r\n    factionBtn.scale={1,1,1}\r\n    self.createButton(factionBtn)\r\n    if AvailableFactions[selectedFaction].fan then\r\n        subtitleBtn.position={0+Xoffset,Yoffset,Zoffset+4.2}\r\n        self.createButton(subtitleBtn)\r\n    end\r\n    writePlanesList(_faction)\r\n    writeUpgradesList(_faction)\r\n    writeGroundDefencesList(_faction)\r\nend\r\n\r\nfunction setFaction0()  selectedFaction =  0 writeMenu() end\r\nfunction setFaction1()  selectedFaction =  1 writeMenu() end\r\nfunction setFaction2()  selectedFaction =  2 writeMenu() end\r\nfunction setFaction3()  selectedFaction =  0 writeMenu() end -- DISABLED\r\nfunction setFaction4()  selectedFaction =  4 writeMenu() end\r\nfunction setFaction5()  selectedFaction =  5 writeMenu() end\r\nfunction setFaction6()  selectedFaction =  6 writeMenu() end\r\nfunction setFaction7()  selectedFaction =  7 writeMenu() end\r\nfunction setFaction8()  selectedFaction =  8 writeMenu() end\r\nfunction setFaction9()  selectedFaction =  9 writeMenu() end\r\nfunction setFaction10() selectedFaction = 10 writeMenu() end\r\n\r\n\r\nfunction writeAvailableList( _list, _type, _faction ) -- type= \"plane\", \"upgrade\", \"ground\"\r\n\r\n    availableButtonsList={}\r\n    local j=4\r\n    if _type==\"plane\"then\r\n        mainTitleAvailableBtn.label=\"PLANES\"\r\n        mainTitleAvailableBtn.position={-XoffsetSecondary+Xoffset,Yoffset,Zoffset+3+j}\r\n        j=j+1\r\n    end\r\n    if _type==\"upgrade\"then\r\n        mainTitleAvailableBtn.label=\"UPGRADES\"\r\n        mainTitleAvailableBtn.position={Xoffset,Yoffset,Zoffset+3+j}\r\n    end\r\n    if _type==\"ground\"then\r\n        mainTitleAvailableBtn.label=\"GROUND\\nDEFENCES\"\r\n        mainTitleAvailableBtn.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+3+j}\r\n    end\r\n    self.createButton(mainTitleAvailableBtn)\r\n\r\n    for i, type in ipairs(_list) do\r\n            if type.faction == AvailableFactions[_faction].tag or type.faction ==\"Blank\" then\r\n            local availableBtn2={}\r\n            if type.type ~= \"defaultPlaneStats\" then\r\n                availableBtn2.font_color=\"White\"\r\n                if type.cat==\"title\" then\r\n                    availableBtn2.height=availableBtnHeight\r\n                    availableBtn2.width=availableBtnWidth\r\n                    availableBtn2.label=string.gsub(type.type, \" \", \" \")\r\n                    availableBtn2.click_function=\"none\"\r\n                    availableBtn2.color=\"Black\"\r\n                    availableBtn2.font_color=\"White\"\r\n                else\r\n                    availableBtn2.height=availableBtnHeight\r\n                    availableBtn2.width=availableBtnWidth\r\n                    availableBtn2.label=string.gsub(type.type, \" \", \" \")..\" (\"..type.cost..\")\"\r\n                    availableBtn2.label=type.type\r\n                    availableBtn2.click_function=availableBtn2.label..i\r\n                    if type.cat == \"pilot\" or type.cat == \"scout\" then\r\n                        availableBtn2.color=\"Blue\"\r\n                    end\r\n                    if type.cat == \"crew\" or type.cat == \"fighter\" then\r\n                        availableBtn2.color=\"Green\"\r\n                    end\r\n                    if type.cat == \"weapon\" or type.cat == \"bomber\" then\r\n                        availableBtn2.color=\"Red\"\r\n                    end\r\n                    if type.cat == \"upgrade\"  then\r\n                        availableBtn2.color=\"Orange\"\r\n                    end\r\n                    -- wpn RED     Up Orange     pilot BLUE   crew GREEN\r\n                end\r\n                availableBtn2.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+2.3+(j+1)*0.75*2}\r\n                if _type==\"plane\" then\r\n\r\n                    availableBtn2.position={-XoffsetSecondary+Xoffset,Yoffset,Zoffset+2.3+j*0.75*2}\r\n                end\r\n                if _type==\"upgrade\" then\r\n\r\n                    availableBtn2.position={0+Xoffset,Yoffset,Zoffset+2.3+(j+1)*0.75*2}\r\n                end\r\n                if _type==\"ground\" then\r\n\r\n                    availableBtn2.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+2.3+(j+1)*0.75*2}\r\n                end\r\n                --availableBtn2.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+3.3+(j+1)*0.75*2}\r\n                j=j+1\r\n                availableBtn2.function_owner=self\r\n                availableBtn2.font_size=250\r\n\r\n                table.insert(availableButtonsList, availableBtn2)\r\n                --self.createButton(availableUpgradeBtn)\r\n            end\r\n        end\r\n    end\r\n    for j, btn in pairs(availableButtonsList) do\r\n        if _G[btn.click_function] == nil then\r\n            local _spawningPosition = spawningPosition\r\n            if _type==\"plane\"then\r\n\r\n                --[[ PLANE ]] _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datasheet\",  _spawningPosition, player, alt) end\r\n            end\r\n            if _type==\"upgrade\"then\r\n\r\n                --[[ UPGRADE ]] _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\", _spawningPosition, player, alt) end\r\n            end\r\n            if _type==\"ground\"then\r\n                --[[ GROUND ]] _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\", _spawningPosition, player, alt) end\r\n            end\r\n        end\r\n        self.createButton(btn)\r\n    end\r\nend\r\n\r\nfunction writePlanesList(_faction1)\r\n    writeAvailableList( AvailablePlanes, \"plane\", _faction1 ) -- type= \"plane\", \"upgrade\", \"ground\"\r\nend\r\n\r\nfunction writeUpgradesList(_faction1)\r\n    writeAvailableList( AvailableUpgrades, \"upgrade\", _faction1 ) -- type= \"plane\", \"upgrade\", \"ground\r\nend\r\n\r\nfunction writeGroundDefencesList(_faction1)\r\n    writeAvailableList( AvailableGroundDefences, \"ground\", _faction1 ) -- type= \"plane\", \"upgrade\", \"ground\"\r\nend\r\n\r\n\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction spawnBase(obj, player, alt)\r\n    cloned=nil\r\n    local _spawnPos=spawningPosition\r\n    local step=1.73\r\n    local multipier=0\r\n    clonedYRot=0\r\n    local invert= false\r\n    if Player[player].getPointerPosition().z<0 then\r\n         invert=true\r\n         clonedYRot=180\r\n    end\r\n    if not alt then\r\n        if blankBase == nil then\r\n            printToAll(\"NO BASE\", \"Red\")\r\n            return\r\n        end\r\n        if invert then\r\n            cloned= blankBase.clone({\r\n                position     = self.positionToWorld({-_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        else\r\n            cloned= blankBase.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        end\r\n    else\r\n        if blankAutonomous == nil then\r\n            printToAll(\"NO BASE\", \"Red\")\r\n            return\r\n        end\r\n        if invert then\r\n            cloned= blankAutonomous.clone({\r\n                position     = self.positionToWorld({-_spawnPos[1],_spawnPos[2],-_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        else\r\n            cloned= blankAutonomous.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        end\r\n    end\r\n    Wait.frames(function() unlockClone(\"\") end, 2)\r\nend\r\n\r\nfunction spawnCharacter(obj, player, alt)\r\n    cloned=nil\r\n    local _spawnPos=spawningPosition\r\n    local step=1.73\r\n    local multipier=5\r\n    clonedYRot=180\r\n    local invert= false\r\n    if Player[player].getPointerPosition().z<0 then\r\n         invert=true\r\n         clonedYRot=0\r\n    end\r\n    if blankCharacter == nil then\r\n        printToAll(\"NO CHARACTER SHEET\", \"Red\")\r\n        return\r\n    end\r\n    if invert then\r\n        cloned= blankCharacter.clone({\r\n            position     = self.positionToWorld({-_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n            snap_to_grid = true,\r\n        })\r\n\r\n    else\r\n        cloned= blankCharacter.clone({\r\n            position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n            snap_to_grid = true,\r\n        })\r\n\r\n    end\r\n    Wait.frames(unlockCloneCh, 2)\r\nend\r\n\r\nfunction unlockCloneCh()\r\n    cloned.setVar(\"inventoryZone\", nil)\r\n    cloned.setLock(false)\r\n    cloned.setName(\"\")\r\n    cloned.interactable=true\r\n    cloned.sticky=true\r\n    cloned.use_snap_points=false\r\n    cloned.use_grid=true\r\n    cloned.auto_raise=false\r\n    cloned.setRotation({0,clonedYRot,0})\r\n    clonedYRot=0\r\n    cloned.call(\"createInventoryZone\", {})\r\nend\r\n\r\nfunction unlockClone(_desc)\r\n    cloned.setLock(false)\r\n    cloned.interactable=true\r\n    cloned.sticky=false\r\n    cloned.use_snap_points=false\r\n    cloned.auto_raise=false\r\n    cloned.setRotation({0,clonedYRot,0})\r\n    clonedYRot=0\r\n    cloned.setDescription(_desc)\r\n    cloned.setName(\"\")\r\n\r\n    if cloned.getVar(\"fakeAltitude\") then\r\n    --print(\"GROUND DEF SPAWNED\")\r\n    --print(\"SETTING VAR TO \".._desc)\r\n\r\n    cloned.setVar(\"defenceType\", _desc)\r\n    cloned.script_state=cloned.call(\"onSave\")\r\n    --Wait.frames(function() cloned.call(\"onLoad\", cloned.script_state) end, 3)\r\n    end\r\nend\r\n\r\nfunction spawnModel(_type, list, _spawnPosition) -- list is SpawnableGUID\r\n    local myGUID= list[_type]\r\n    local master= getObjectFromGUID(myGUID)\r\n    cloned = nil\r\n    if master ~= nil then\r\n        clone= master.clone({\r\n            position     = self.positionToWorld(_spawnPosition),\r\n            snap_to_grid = true,\r\n        })\r\n    end\r\n    Wait.frames(unlockClone, 2)\r\n    return cloned  -- in other function    spawned=spawnModel(_type, list, _spawnPosition)\r\nend\r\n\r\nfunction spawnCard(card, type, _spawnPosition, player, alt)\r\n    if type==\"title\" then\r\n        return\r\n    end\r\n\r\n    clonedYRot=0\r\n    local invert=false\r\n    if Player[player].getPointerPosition().z<0 then\r\n          clonedYRot=180\r\n          invert=true\r\n    end\r\n    if invert then\r\n        _spawnPosition={-_spawnPosition[1],_spawnPosition[2],_spawnPosition[3]}\r\n    end\r\n    local items={}\r\n    for i, plane in ipairs(AvailablePlanes) do\r\n        table.insert(items, plane)\r\n    end\r\n    for i, upgrade in ipairs(AvailableUpgrades) do\r\n        table.insert(items, upgrade)\r\n    end\r\n    for i, defence in ipairs(AvailableGroundDefences) do\r\n        table.insert(items, defence)\r\n    end\r\n    for i, available in ipairs(items) do\r\n        if available.type == card  and available.faction == AvailableFactions[selectedFaction].tag then\r\n        --    local adj=5\r\n            if _spawnPosition[3]<0 then\r\n        --        adj=-5\r\n            end\r\n            if alt then --spawn model\r\n                local model=getObjectFromGUID(available.guid)\r\n                if model ~= nil then\r\n                    cloned=model.clone({\r\n                        position     = self.positionToWorld(_spawnPosition),\r\n                        snap_to_grid = true,\r\n                    })\r\n                    local desc=available.type\r\n                    Wait.frames(function() unlockClone(desc) end, 2)\r\n                    return\r\n                end\r\n                printToAll(\"No model available!\", \"Red\")\r\n                return\r\n            else -- spawn card\r\n                local img=available.image\r\n                if img==\"\" or img== nil then\r\n                    img=backImage\r\n                end\r\n                local tileDataType=\"Datacard\"\r\n                local tileDesc=\"\"\r\n                local tileScale={1.15,0.2,0.75}\r\n                if available.cat == \"scout\" or available.cat == \"fighter\" or available.cat == \"bomber\" then\r\n                    tileScale={2.3,0.2,1.5}\r\n                    tileDataType=\"Datasheet\"\r\n                end\r\n                if available.cat == \"weapon\" then\r\n                    tileDesc=\"ARC    \"..available.arc..\"\\nFPR    \"..available.fpr[1]..\" / \"..available.fpr[2]..\" / \"..available.fpr[3]..\"\\nDMG    \"..available.dmg..\"+\\nAMMO   \"..available.ammo\r\n                    tileDesc=tileDesc..\"\\nSPECIAL \"\r\n                    --local specList=available.special\r\n                    for i=1, (#available.special-1)  do\r\n                        if i==1 then\r\n                            tileDesc=tileDesc..available.special[i]..\"\\n\"\r\n                        else\r\n                            tileDesc=tileDesc..\"              \"..available.special[i]..\"\\n\"\r\n                        end\r\n                    end\r\n                        tileDesc=tileDesc..\"              \"..available.special[#available.special]\r\n                end\r\n                if available.cat == \"pilot\" or available.cat == \"crew\" or available.cat == \"upgrade\" then\r\n                    tileDesc=available.desc\r\n                end\r\n                if available.cat == \"pilot\" or available.cat == \"crew\" then\r\n                    tileScale={0.75,0.2,1.15}\r\n                end\r\n                local adj=0\r\n                if type==\"Datasheet\" then adj= 6.97 end\r\n                if type==\"Datacard\" then adj= 11.53 end\r\n                local spawned= blankDatacard.clone({\r\n                    position     = self.positionToWorld({_spawnPosition[1],_spawnPosition[2],_spawnPosition[3]+adj}),\r\n                    snap_to_grid = false,\r\n                })\r\n                spawned.setScale(tileScale)\r\n                spawned.setCustomObject( {type=0, image=img, image_bottom=backImage, thickness=0.2, stackable=false})\r\n                spawned.setName(available.type..\" \"..tileDataType)\r\n                tileDesc=\"\"\r\n                spawned.setDescription(tileDesc)\r\n                spawned.interactable=true\r\n                spawned.sticky=false\r\n                spawned.auto_raise=false\r\n                spawned.setLock(false)\r\n                spawned.setRotation({0,clonedYRot,0})\r\n                spawned.reload()\r\n                --Wait.frames(unlockClone, 2)\r\n                return\r\n            end\r\n                printToAll(\"No datasheet / datacard available!\", \"Red\")\r\n        end\r\n\r\n    end\r\n\r\n\r\nend\r\n\r\n\r\n\r\nfunction spawn1()\r\nend\r\nfunction spawn2()\r\nend\r\n\r\nfunction none()\r\nend\r\nfunction none1()\r\nend",
      "LuaScriptState": "",
      "GUID": "d1b5d9"
    },
    {
      "Name": "BlockSquare",
      "Transform": {
        "posX": 88.5,
        "posY": -2.95,
        "posZ": -51.1,
        "rotX": 1.8212038E-06,
        "rotY": 180.0,
        "rotZ": -4.720183E-07,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "Blue Spawning Menu",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.117998891,
        "g": 0.53,
        "b": 1.0
      },
      "Locked": true,
      "Grid": false,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "XmlUI": "",
      "LuaScript": "-- RED SPAWNING MENU\r\n\r\n\r\n--hangar=getObjectFromGUID(\"5a7404\")\r\nbackImage=Global.getVar(\"backImage\")\r\ndefaultImage=backImage\r\nclonedYRot=0\r\nAvailableFactions=Global.getTable(\"AvailableFactions\")\r\nAvailablePlanes=Global.getTable(\"AvailablePlanes\")\r\nAvailableUpgrades=Global.getTable(\"AvailableUpgrades\")\r\nAvailableGroundDefences=Global.getTable(\"AvailableGroundDefences\")\r\nblankBase_GUID=Global.getVar(\"blankBase_GUID\")\r\nblankAutonomous_GUID=Global.getVar(\"blankAutonomous_GUID\")\r\nblankCharacter_GUID=Global.getVar(\"blankCharacter_GUID\")\r\nblankDataCard_GUID=Global.getVar(\"blankDataCard_GUID\")\r\n\r\navailableBtnHeight=Global.getVar(\"availableBtnHeight\")\r\navailableBtnWidth=Global.getVar(\"availableBtnWidth\")\r\nXoffset=Global.getVar(\"Xoffset\")\r\nYoffset=Global.getVar(\"Yoffset\")\r\nXoffsetSecondary=Global.getVar(\"XoffsetSecondary\")\r\nZoffset=Global.getVar(\"Zoffset\")\r\n\r\nspawnBaseBtn = Global.getTable(\"spawnBaseBtn\")\r\n\r\nspawnBaseSubtitleBtn=  Global.getTable(\"spawnBaseSubtitleBtn\")\r\nspawnCharacterBtn = Global.getTable(\"spawnCharacterBtn\")\r\n\r\nmainTitleBtn =  Global.getTable(\"mainTitleBtn\")\r\n\r\nmainTitle2Btn =  Global.getTable(\"mainTitle2Btn\")\r\nfactionBtn=Global.getTable(\"factionBtn\")\r\nsubtitleBtn=Global.getTable(\"subtitleBtn\")\r\nbackBtn=Global.getTable(\"backBtn\")\r\n--mainTitlePlanesBtn =  Global.getTable(\"mainTitlePlanesBtn\")\r\n\r\nmainTitleAvailableBtn =  Global.getTable(\"mainTitleAvailableBtn\")\r\n\r\n--mainTitleGroundDefencesBtn =  Global.getTable(\"mainTitleGroundDefencesBtn\")\r\n\r\n--availablePlaneBtn =  Global.getTable(\"availablePlaneBtn\")\r\n\r\n--availableUpgradeBtn =  Global.getTable(\"availableUpgradeBtn\")\r\n\r\n\r\nbuttonList={}\r\nplaneButtonsList={}\r\nupgradeButtonsList={}\r\ngroundDefencesButtonsList={}\r\n\r\nspawningPosition=Global.getTable(\"spawningPosition\")\r\n--spawningPosition={x=-15,y=10,z=32}\r\n--spawningPosition2={x=spawningPosition.x,y=spawningPosition.y,z=-spawningPosition.z}\r\nspawningPosition2={spawningPosition[1],spawningPosition[2],-spawningPosition[3]}\r\n\r\nselectedFaction=0\r\n\r\nfunction onLoad()\r\n    selfPos=Global.getTable(\"spawnMenuPosition\")\r\n    if self.getRotation().y>179 and self.getRotation().y<181 then\r\n        -- it is blue\r\n        self.setPosition({selfPos[1],selfPos[2],-selfPos[3]})\r\n    else\r\n        self.setPosition(selfPos)\r\n    end\r\n\r\n    self.setLock(true)\r\n    self.interactable=false\r\n    blankBase=getObjectFromGUID(blankBase_GUID)\r\n    blankAutonomous=getObjectFromGUID(blankAutonomous_GUID)\r\n    blankCharacter=getObjectFromGUID(blankCharacter_GUID)\r\n    blankDatacard=getObjectFromGUID(\"93ba66\")\r\n    spawnBaseBtn.function_owner=self\r\n    Wait.time(writeMenu, 1.0 , 1)\r\nend\r\n\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    self.createButton(mainTitleBtn)\r\n    --spawnBaseBtn.click_function=\"spawnBase\"\r\n    spawnBaseBtn.function_owner=self\r\n    self.createButton(spawnBaseBtn)\r\n    self.createButton(spawnBaseSubtitleBtn)\r\n    spawnCharacterBtn.function_owner=self\r\n    self.createButton(spawnCharacterBtn)\r\n    writeFactionMenuMAIN()\r\nend\r\n\r\nfunction writeFactionMenuMAIN()\r\n    if selectedFaction==0 then\r\n        writeCooseFactionMenu()\r\n        return\r\n    end\r\n    if selectedFaction ==  1 then writeFactionMenu( 1) return end\r\n    if selectedFaction ==  2 then writeFactionMenu(2) return end\r\n    if selectedFaction ==  3 then writeFactionMenu(3) return end\r\n    if selectedFaction ==  4 then writeFactionMenu(4) return end\r\n    if selectedFaction ==  5 then writeFactionMenu(5) return end\r\n    if selectedFaction ==  6 then writeFactionMenu(6) return end\r\n    if selectedFaction ==  7 then writeFactionMenu(7) return end\r\n    if selectedFaction ==  8 then writeFactionMenu(8) return end\r\n    if selectedFaction ==  9 then writeFactionMenu(9) return end\r\n    if selectedFaction == 10 then writeFactionMenu(10) return end\r\nend\r\n\r\nfunction writeCooseFactionMenu()\r\n    for i, faction in ipairs(AvailableFactions) do\r\n        factionBtn.click_function=\"setFaction\"..tostring(i)\r\n        factionBtn.function_owner=self\r\n        factionBtn.position={0+Xoffset,Yoffset,Zoffset+0.3+i*4}\r\n        factionBtn.label=AvailableFactions[i].name\r\n        factionBtn.height=1750\r\n        factionBtn.scale={0.75,0.75,0.75}\r\n        self.createButton(factionBtn)\r\n        if faction.fan then\r\n            subtitleBtn.position={0+Xoffset,Yoffset,Zoffset+0.3+i*4}\r\n            self.createButton(subtitleBtn)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFactionMenu(_faction)\r\n    backBtn.click_function=\"setFaction0\"\r\n    backBtn.function_owner=self\r\n    backBtn.position={0+Xoffset,Yoffset,Zoffset+0.5+1}\r\n    backBtn.label=\"<- CHANGE FACTION\"\r\n    backBtn.scale={0.5,0.5,0.5}\r\n    self.createButton(backBtn)\r\n    factionBtn.click_function=\"none\"\r\n    factionBtn.function_owner=self\r\n    factionBtn.position={0+Xoffset,Yoffset,Zoffset+4}\r\n    factionBtn.label=AvailableFactions[selectedFaction].name\r\n    factionBtn.height=1500\r\n    factionBtn.scale={1,1,1}\r\n    self.createButton(factionBtn)\r\n    if AvailableFactions[selectedFaction].fan then\r\n        subtitleBtn.position={0+Xoffset,Yoffset,Zoffset+4.2}\r\n        self.createButton(subtitleBtn)\r\n    end\r\n    writePlanesList(_faction)\r\n    writeUpgradesList(_faction)\r\n    writeGroundDefencesList(_faction)\r\nend\r\n\r\nfunction setFaction0()  selectedFaction =  0 writeMenu() end\r\nfunction setFaction1()  selectedFaction =  1 writeMenu() end\r\nfunction setFaction2()  selectedFaction =  2 writeMenu() end\r\nfunction setFaction3()  selectedFaction =  0 writeMenu() end -- DISABLED\r\nfunction setFaction4()  selectedFaction =  4 writeMenu() end\r\nfunction setFaction5()  selectedFaction =  5 writeMenu() end\r\nfunction setFaction6()  selectedFaction =  6 writeMenu() end\r\nfunction setFaction7()  selectedFaction =  7 writeMenu() end\r\nfunction setFaction8()  selectedFaction =  8 writeMenu() end\r\nfunction setFaction9()  selectedFaction =  9 writeMenu() end\r\nfunction setFaction10() selectedFaction = 10 writeMenu() end\r\n\r\n\r\nfunction writeAvailableList( _list, _type, _faction ) -- type= \"plane\", \"upgrade\", \"ground\"\r\n\r\n    availableButtonsList={}\r\n    local j=4\r\n    if _type==\"plane\"then\r\n        mainTitleAvailableBtn.label=\"PLANES\"\r\n        mainTitleAvailableBtn.position={-XoffsetSecondary+Xoffset,Yoffset,Zoffset+3+j}\r\n        j=j+1\r\n    end\r\n    if _type==\"upgrade\"then\r\n        mainTitleAvailableBtn.label=\"UPGRADES\"\r\n        mainTitleAvailableBtn.position={Xoffset,Yoffset,Zoffset+3+j}\r\n    end\r\n    if _type==\"ground\"then\r\n        mainTitleAvailableBtn.label=\"GROUND\\nDEFENCES\"\r\n        mainTitleAvailableBtn.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+3+j}\r\n    end\r\n    self.createButton(mainTitleAvailableBtn)\r\n\r\n    for i, type in ipairs(_list) do\r\n            if type.faction == AvailableFactions[_faction].tag or type.faction ==\"Blank\" then\r\n            local availableBtn2={}\r\n            if type.type ~= \"defaultPlaneStats\" then\r\n                availableBtn2.font_color=\"White\"\r\n                if type.cat==\"title\" then\r\n                    availableBtn2.height=availableBtnHeight\r\n                    availableBtn2.width=availableBtnWidth\r\n                    availableBtn2.label=string.gsub(type.type, \" \", \" \")\r\n                    availableBtn2.click_function=\"none\"\r\n                    availableBtn2.color=\"Black\"\r\n                    availableBtn2.font_color=\"White\"\r\n                else\r\n                    availableBtn2.height=availableBtnHeight\r\n                    availableBtn2.width=availableBtnWidth\r\n                    availableBtn2.label=string.gsub(type.type, \" \", \" \")..\" (\"..type.cost..\")\"\r\n                    availableBtn2.label=type.type\r\n                    availableBtn2.click_function=availableBtn2.label..i\r\n                    if type.cat == \"pilot\" or type.cat == \"scout\" then\r\n                        availableBtn2.color=\"Blue\"\r\n                    end\r\n                    if type.cat == \"crew\" or type.cat == \"fighter\" then\r\n                        availableBtn2.color=\"Green\"\r\n                    end\r\n                    if type.cat == \"weapon\" or type.cat == \"bomber\" then\r\n                        availableBtn2.color=\"Red\"\r\n                    end\r\n                    if type.cat == \"upgrade\"  then\r\n                        availableBtn2.color=\"Orange\"\r\n                    end\r\n                    -- wpn RED     Up Orange     pilot BLUE   crew GREEN\r\n                end\r\n                availableBtn2.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+2.3+(j+1)*0.75*2}\r\n                if _type==\"plane\" then\r\n\r\n                    availableBtn2.position={-XoffsetSecondary+Xoffset,Yoffset,Zoffset+2.3+j*0.75*2}\r\n                end\r\n                if _type==\"upgrade\" then\r\n\r\n                    availableBtn2.position={0+Xoffset,Yoffset,Zoffset+2.3+(j+1)*0.75*2}\r\n                end\r\n                if _type==\"ground\" then\r\n\r\n                    availableBtn2.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+2.3+(j+1)*0.75*2}\r\n                end\r\n                --availableBtn2.position={XoffsetSecondary+Xoffset,Yoffset,Zoffset+3.3+(j+1)*0.75*2}\r\n                j=j+1\r\n                availableBtn2.function_owner=self\r\n                availableBtn2.font_size=250\r\n\r\n                table.insert(availableButtonsList, availableBtn2)\r\n                --self.createButton(availableUpgradeBtn)\r\n            end\r\n        end\r\n    end\r\n    for j, btn in pairs(availableButtonsList) do\r\n        if _G[btn.click_function] == nil then\r\n            local _spawningPosition = spawningPosition\r\n            if _type==\"plane\"then\r\n\r\n                --[[ PLANE ]] _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datasheet\",  _spawningPosition, player, alt) end\r\n            end\r\n            if _type==\"upgrade\"then\r\n\r\n                --[[ UPGRADE ]] _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\", _spawningPosition, player, alt) end\r\n            end\r\n            if _type==\"ground\"then\r\n                --[[ GROUND ]] _G[btn.click_function] = function(obj, player, alt)  spawnCard(btn.label, \"Datacard\", _spawningPosition, player, alt) end\r\n            end\r\n        end\r\n        self.createButton(btn)\r\n    end\r\nend\r\n\r\nfunction writePlanesList(_faction1)\r\n    writeAvailableList( AvailablePlanes, \"plane\", _faction1 ) -- type= \"plane\", \"upgrade\", \"ground\"\r\nend\r\n\r\nfunction writeUpgradesList(_faction1)\r\n    writeAvailableList( AvailableUpgrades, \"upgrade\", _faction1 ) -- type= \"plane\", \"upgrade\", \"ground\r\nend\r\n\r\nfunction writeGroundDefencesList(_faction1)\r\n    writeAvailableList( AvailableGroundDefences, \"ground\", _faction1 ) -- type= \"plane\", \"upgrade\", \"ground\"\r\nend\r\n\r\n\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction spawnBase(obj, player, alt)\r\n    cloned=nil\r\n    local _spawnPos=spawningPosition\r\n    local step=1.73\r\n    local multipier=0\r\n    clonedYRot=0\r\n    local invert= false\r\n    if Player[player].getPointerPosition().z<0 then\r\n         invert=true\r\n         clonedYRot=180\r\n    end\r\n    if not alt then\r\n        if blankBase == nil then\r\n            printToAll(\"NO BASE\", \"Red\")\r\n            return\r\n        end\r\n        if invert then\r\n            cloned= blankBase.clone({\r\n                position     = self.positionToWorld({-_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        else\r\n            cloned= blankBase.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        end\r\n    else\r\n        if blankAutonomous == nil then\r\n            printToAll(\"NO BASE\", \"Red\")\r\n            return\r\n        end\r\n        if invert then\r\n            cloned= blankAutonomous.clone({\r\n                position     = self.positionToWorld({-_spawnPos[1],_spawnPos[2],-_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        else\r\n            cloned= blankAutonomous.clone({\r\n                position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n                snap_to_grid = true,\r\n            })\r\n\r\n        end\r\n    end\r\n    Wait.frames(function() unlockClone(\"\") end, 2)\r\nend\r\n\r\nfunction spawnCharacter(obj, player, alt)\r\n    cloned=nil\r\n    local _spawnPos=spawningPosition\r\n    local step=1.73\r\n    local multipier=5\r\n    clonedYRot=180\r\n    local invert= false\r\n    if Player[player].getPointerPosition().z<0 then\r\n         invert=true\r\n         clonedYRot=0\r\n    end\r\n    if blankCharacter == nil then\r\n        printToAll(\"NO CHARACTER SHEET\", \"Red\")\r\n        return\r\n    end\r\n    if invert then\r\n        cloned= blankCharacter.clone({\r\n            position     = self.positionToWorld({-_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n            snap_to_grid = true,\r\n        })\r\n\r\n    else\r\n        cloned= blankCharacter.clone({\r\n            position     = self.positionToWorld({_spawnPos[1],_spawnPos[2],_spawnPos[3]+step*multipier}),\r\n            snap_to_grid = true,\r\n        })\r\n\r\n    end\r\n    Wait.frames(unlockCloneCh, 2)\r\nend\r\n\r\nfunction unlockCloneCh()\r\n    cloned.setVar(\"inventoryZone\", nil)\r\n    cloned.setLock(false)\r\n    cloned.setName(\"\")\r\n    cloned.interactable=true\r\n    cloned.sticky=true\r\n    cloned.use_snap_points=false\r\n    cloned.use_grid=true\r\n    cloned.auto_raise=false\r\n    cloned.setRotation({0,clonedYRot,0})\r\n    clonedYRot=0\r\n    cloned.call(\"createInventoryZone\", {})\r\nend\r\n\r\nfunction unlockClone(_desc)\r\n    cloned.setLock(false)\r\n    cloned.interactable=true\r\n    cloned.sticky=false\r\n    cloned.use_snap_points=false\r\n    cloned.auto_raise=false\r\n    cloned.setRotation({0,clonedYRot,0})\r\n    clonedYRot=0\r\n    cloned.setDescription(_desc)\r\n    cloned.setName(\"\")\r\n\r\n    if cloned.getVar(\"fakeAltitude\") then\r\n    --print(\"GROUND DEF SPAWNED\")\r\n    --print(\"SETTING VAR TO \".._desc)\r\n\r\n    cloned.setVar(\"defenceType\", _desc)\r\n    cloned.script_state=cloned.call(\"onSave\")\r\n    --Wait.frames(function() cloned.call(\"onLoad\", cloned.script_state) end, 3)\r\n    end\r\nend\r\n\r\nfunction spawnModel(_type, list, _spawnPosition) -- list is SpawnableGUID\r\n    local myGUID= list[_type]\r\n    local master= getObjectFromGUID(myGUID)\r\n    cloned = nil\r\n    if master ~= nil then\r\n        clone= master.clone({\r\n            position     = self.positionToWorld(_spawnPosition),\r\n            snap_to_grid = true,\r\n        })\r\n    end\r\n    Wait.frames(unlockClone, 2)\r\n    return cloned  -- in other function    spawned=spawnModel(_type, list, _spawnPosition)\r\nend\r\n\r\nfunction spawnCard(card, type, _spawnPosition, player, alt)\r\n    if type==\"title\" then\r\n        return\r\n    end\r\n\r\n    clonedYRot=0\r\n    local invert=false\r\n    if Player[player].getPointerPosition().z<0 then\r\n          clonedYRot=180\r\n          invert=true\r\n    end\r\n    if invert then\r\n        _spawnPosition={-_spawnPosition[1],_spawnPosition[2],_spawnPosition[3]}\r\n    end\r\n    local items={}\r\n    for i, plane in ipairs(AvailablePlanes) do\r\n        table.insert(items, plane)\r\n    end\r\n    for i, upgrade in ipairs(AvailableUpgrades) do\r\n        table.insert(items, upgrade)\r\n    end\r\n    for i, defence in ipairs(AvailableGroundDefences) do\r\n        table.insert(items, defence)\r\n    end\r\n    for i, available in ipairs(items) do\r\n        if available.type == card  and available.faction == AvailableFactions[selectedFaction].tag then\r\n        --    local adj=5\r\n            if _spawnPosition[3]<0 then\r\n        --        adj=-5\r\n            end\r\n            if alt then --spawn model\r\n                local model=getObjectFromGUID(available.guid)\r\n                if model ~= nil then\r\n                    cloned=model.clone({\r\n                        position     = self.positionToWorld(_spawnPosition),\r\n                        snap_to_grid = true,\r\n                    })\r\n                    local desc=available.type\r\n                    Wait.frames(function() unlockClone(desc) end, 2)\r\n                    return\r\n                end\r\n                printToAll(\"No model available!\", \"Red\")\r\n                return\r\n            else -- spawn card\r\n                local img=available.image\r\n                if img==\"\" or img== nil then\r\n                    img=backImage\r\n                end\r\n                local tileDataType=\"Datacard\"\r\n                local tileDesc=\"\"\r\n                local tileScale={1.15,0.2,0.75}\r\n                if available.cat == \"scout\" or available.cat == \"fighter\" or available.cat == \"bomber\" then\r\n                    tileScale={2.3,0.2,1.5}\r\n                    tileDataType=\"Datasheet\"\r\n                end\r\n                if available.cat == \"weapon\" then\r\n                    tileDesc=\"ARC    \"..available.arc..\"\\nFPR    \"..available.fpr[1]..\" / \"..available.fpr[2]..\" / \"..available.fpr[3]..\"\\nDMG    \"..available.dmg..\"+\\nAMMO   \"..available.ammo\r\n                    tileDesc=tileDesc..\"\\nSPECIAL \"\r\n                    --local specList=available.special\r\n                    for i=1, (#available.special-1)  do\r\n                        if i==1 then\r\n                            tileDesc=tileDesc..available.special[i]..\"\\n\"\r\n                        else\r\n                            tileDesc=tileDesc..\"              \"..available.special[i]..\"\\n\"\r\n                        end\r\n                    end\r\n                        tileDesc=tileDesc..\"              \"..available.special[#available.special]\r\n                end\r\n                if available.cat == \"pilot\" or available.cat == \"crew\" or available.cat == \"upgrade\" then\r\n                    tileDesc=available.desc\r\n                end\r\n                if available.cat == \"pilot\" or available.cat == \"crew\" then\r\n                    tileScale={0.75,0.2,1.15}\r\n                end\r\n                local adj=0\r\n                if type==\"Datasheet\" then adj= 6.97 end\r\n                if type==\"Datacard\" then adj= 11.53 end\r\n                local spawned= blankDatacard.clone({\r\n                    position     = self.positionToWorld({_spawnPosition[1],_spawnPosition[2],_spawnPosition[3]+adj}),\r\n                    snap_to_grid = false,\r\n                })\r\n                spawned.setScale(tileScale)\r\n                spawned.setCustomObject( {type=0, image=img, image_bottom=backImage, thickness=0.2, stackable=false})\r\n                spawned.setName(available.type..\" \"..tileDataType)\r\n                tileDesc=\"\"\r\n                spawned.setDescription(tileDesc)\r\n                spawned.interactable=true\r\n                spawned.sticky=false\r\n                spawned.auto_raise=false\r\n                spawned.setLock(false)\r\n                spawned.setRotation({0,clonedYRot,0})\r\n                spawned.reload()\r\n                --Wait.frames(unlockClone, 2)\r\n                return\r\n            end\r\n                printToAll(\"No datasheet / datacard available!\", \"Red\")\r\n        end\r\n\r\n    end\r\n\r\n\r\nend\r\n\r\n\r\n\r\nfunction spawn1()\r\nend\r\nfunction spawn2()\r\nend\r\n\r\nfunction none()\r\nend\r\nfunction none1()\r\nend",
      "LuaScriptState": "",
      "GUID": "f6dcd7"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -22.0,
        "rotX": 1.60069567E-06,
        "rotY": 0.00292901439,
        "rotZ": -6.110508E-07,
        "scaleX": 0.25,
        "scaleY": 0.25,
        "scaleZ": 0.25
      },
      "Nickname": "Hellblade",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695786968/DF16147A698F4C095A3D31CF683C308CF14A5C71/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/952982844382641659/DADAA1D532273319F50D1F661946598E4A3EA6AC/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/952982844382638796/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "99b2ff"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -46.0,
        "rotX": 1.815538E-06,
        "rotY": 0.00685933651,
        "rotZ": -7.16859233E-07,
        "scaleX": 0.3250005,
        "scaleY": 0.3250005,
        "scaleZ": 0.3250005
      },
      "Nickname": "Crimson Hunter",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921723,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695787802/5C2C1A9C71A35CDCD9C498894E98B67BB68C3715/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/954100158971589130/685E5F96B8E416E78653B912BF49083EFAD83E40/",
        "NormalURL": "",
        "ColliderURL": "https://www.dropbox.com/s/8okrl7gap0pzk5s/EpicBase40mm.obj?dl=1",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "549e98"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 20.0,
        "rotX": 2.24263977E-06,
        "rotY": 0.002960887,
        "rotZ": -5.01654938E-07,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "Firestorm",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992167056,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841697376543/05AC5D98FA147B3A89ECEEC5145BACCBB2E27923/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/787487773973308585/7CB509E7588BA35E91A9FA4630F6B5355AA631F5/",
        "NormalURL": "",
        "ColliderURL": "https://www.dropbox.com/s/7uhp2ji330fv1vh/Slottabase60mm.obj?dl=1",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"structure\":3},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "177010"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 44.0,
        "rotX": 1.34955815E-06,
        "rotY": 0.00685941475,
        "rotZ": -8.41976544E-07,
        "scaleX": 0.275000423,
        "scaleY": 0.275000423,
        "scaleZ": 0.275000423
      },
      "Nickname": "Phoenix",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921722,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695791197/2162DA6672B73970C299FB7C2FE32433DD6C3488/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/954100960630909471/FC9830079850B0ECD8963F1E88CF0C54D98A5CE4/",
        "NormalURL": "",
        "ColliderURL": "https://www.dropbox.com/s/r7ukfhdry8oftrm/SlottabaseOval120x95mmVert.obj?dl=1",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "779565"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 38.0,
        "rotX": 1.79816391E-06,
        "rotY": 0.00294722617,
        "rotZ": -5.367554E-07,
        "scaleX": 0.250000834,
        "scaleY": 0.250000834,
        "scaleZ": 0.250000834
      },
      "Nickname": "Vampire Raider",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921755,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695793134/BB3105919D42ACF0C5ED905D3514994593B15D80/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/954100960630911625/602EE8113E863C1051C81FD5698F0BDF5CFA29C5/",
        "NormalURL": "",
        "ColliderURL": "https://www.dropbox.com/s/211e9ohvj3m87l3/EpicBase60mm.obj?dl=1",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e19d01"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 32.0,
        "rotX": 1.55970918E-06,
        "rotY": 0.006860925,
        "rotZ": -5.239079E-07,
        "scaleX": 0.250000834,
        "scaleY": 0.250000834,
        "scaleZ": 0.250000834
      },
      "Nickname": "Vampire Hunter",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921755,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695793978/0A60BFE6A507B100FDABD3326B8932649B3E7CE9/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/954100960630911625/602EE8113E863C1051C81FD5698F0BDF5CFA29C5/",
        "NormalURL": "",
        "ColliderURL": "https://www.dropbox.com/s/211e9ohvj3m87l3/EpicBase60mm.obj?dl=1",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d627b1"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -28.0,
        "rotX": 9.1067443E-07,
        "rotY": 0.00315767154,
        "rotZ": -6.457309E-07,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "Hell Talon",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695648295/1D883F6FF9E92C7EFF27347A7671A84E9EAAAAB5/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/952982844382653037/2162F33EDDA7A6AF2DB1950C20C53E59EA5CDF14/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/952964455676160126/1E69621AF7CDB2D1715C25422AEFC9FA793B49D6/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "c207ad"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -40.0,
        "rotX": 1.40373834E-06,
        "rotY": 0.006859352,
        "rotZ": -1.02045158E-06,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "Nightwing",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.9921722,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695798637/EE6BB406AE0C270C08A708C657FA736E320A938C/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/954100960630919875/495FE1154B336975D7C2E54DC9405D81D9F9A283/",
        "NormalURL": "",
        "ColliderURL": "https://www.dropbox.com/s/r7ukfhdry8oftrm/SlottabaseOval120x95mmVert.obj?dl=1",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "3acd62"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 90.0,
        "posY": -5.0,
        "posZ": -34.0,
        "rotX": 2.34590016E-06,
        "rotY": 0.00672978861,
        "rotZ": -2.675319E-07,
        "scaleX": 0.4250005,
        "scaleY": 0.4250005,
        "scaleZ": 0.4250005
      },
      "Nickname": "Harbinger",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": false,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772867841695648295/1D883F6FF9E92C7EFF27347A7671A84E9EAAAAB5/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/952982844382653037/2162F33EDDA7A6AF2DB1950C20C53E59EA5CDF14/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/952964455676160126/1E69621AF7CDB2D1715C25422AEFC9FA793B49D6/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e072aa"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": -5.195261E-09,
        "posY": 0.8999982,
        "posZ": 112.5833,
        "rotX": 1.60546836E-06,
        "rotY": 0.00684726471,
        "rotZ": -5.003969E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/772868035015185800/74736CE49D117D73B0A4ECEA2D6B502F9B08A522/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "3436ae"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": 12.0,
        "posY": 0.8999981,
        "posZ": 112.5833,
        "rotX": 1.60598324E-06,
        "rotY": 0.00685057463,
        "rotZ": -4.61621141E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/772868035015189291/BBAB637F94BE693D19547C5EFD4B63A7712FD028/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "8e251e"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -3.528595E-05,
        "posY": 0.960791349,
        "posZ": 70.36113,
        "rotX": 90.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "RULEBOOK - IMPERIAL NAVY - ORKS",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "e9e0f0"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -5.054474E-05,
        "posY": 0.960823238,
        "posZ": 87.68124,
        "rotX": 90.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "OFFICIAL EXPANSIONS",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "b181fb"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": -3.7193302E-05,
        "posY": 0.960816741,
        "posZ": 105.00119,
        "rotX": 90.0,
        "rotY": 180.0,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "FANMADE EXPANSIONS",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "dbcaf4"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": -4.2873225E-09,
        "posY": 0.900004566,
        "posZ": -112.58,
        "rotX": -1.60599188E-06,
        "rotY": 180.005981,
        "rotZ": 4.59833444E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/772868035015185800/74736CE49D117D73B0A4ECEA2D6B502F9B08A522/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "245fec"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": -11.999999,
        "posY": 0.9000046,
        "posZ": -112.5833,
        "rotX": -1.587358E-06,
        "rotY": 179.999329,
        "rotZ": 5.21449465E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/772868035015189291/BBAB637F94BE693D19547C5EFD4B63A7712FD028/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "14393a"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.484985E-05,
        "posY": 0.9610042,
        "posZ": -70.35986,
        "rotX": 90.0,
        "rotY": 6.632546E-10,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "RULEBOOK - IMPERIAL NAVY - ORKS",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "b5eee3"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.389618E-05,
        "posY": 0.9610714,
        "posZ": -87.68007,
        "rotX": 90.0,
        "rotY": 6.632546E-10,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "OFFICIAL EXPANSIONS",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f30490"
    },
    {
      "Name": "3DText",
      "Transform": {
        "posX": 6.771088E-05,
        "posY": 0.9611067,
        "posZ": -105.000069,
        "rotX": 90.0,
        "rotY": 6.632546E-10,
        "rotZ": 0.0,
        "scaleX": 1.0,
        "scaleY": 1.0,
        "scaleZ": 1.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "Text": {
        "Text": "FANMADE EXPANSIONS",
        "colorstate": {
          "r": 1.0,
          "g": 1.0,
          "b": 1.0
        },
        "fontSize": 64
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d1811c"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 14.0,
        "rotX": 1.770588E-06,
        "rotY": -0.00378115429,
        "rotZ": -4.92466768E-07,
        "scaleX": 0.250000477,
        "scaleY": 0.250000477,
        "scaleZ": 0.250000477
      },
      "Nickname": "Stormraven Gunship",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772868855169042699/88CA3A58EE010F484AB30D9B1127579C693C0B7E/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/763849417567939475/79A26059C8D9E1EFF22908151028627149431675/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a69b32"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 26.0,
        "rotX": -0.00167460018,
        "rotY": 180.000534,
        "rotZ": 0.001115003,
        "scaleX": 0.400000542,
        "scaleY": 0.400000542,
        "scaleZ": 0.400000542
      },
      "Nickname": "Stormtalon Gunship",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992165,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772868855169043886/D2E81D35E8FDE61EB753C192E0A3C1479978D0CC/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/922549301959509533/C5A70EBA0F2BBB411F7E02CBC0881EB15369DB66/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/921424381011147990/4811DE59D50A4BF86AE7A8A69C6F09A43FCFA38D/",
        "Convex": false,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2f2f72"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 20.0,
        "rotX": -1.88353977E-06,
        "rotY": 180.000717,
        "rotZ": 0.004643403,
        "scaleX": 0.400000542,
        "scaleY": 0.400000542,
        "scaleZ": 0.400000542
      },
      "Nickname": "Stormhawk Interceptor",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992165,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772868855169046460/9DAEB33E50340AB539B46F693CF67691C87C776A/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/922549301959509533/C5A70EBA0F2BBB411F7E02CBC0881EB15369DB66/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/921424381011147990/4811DE59D50A4BF86AE7A8A69C6F09A43FCFA38D/",
        "Convex": false,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "cc4fc0"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 14.0,
        "rotX": 1.56843009E-06,
        "rotY": 0.000744490651,
        "rotZ": -5.740083E-07,
        "scaleX": 0.250000417,
        "scaleY": 0.250000417,
        "scaleZ": 0.250000417
      },
      "Nickname": "Hyperios",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/858360322683044018/177D16C2F7B80822D862870CF23D14BD7102FC47/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/858360322686204216/8D8844B751C67FDB602621C8FC3D99585498FD8F/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151688465/2F4C3FDE994882435A6F37D1AE11CBDA63A9CB24/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"structure\":3},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "5bda86"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 8.0,
        "rotX": -1.59132628E-06,
        "rotY": 179.996216,
        "rotZ": 4.55691463E-07,
        "scaleX": 0.250000477,
        "scaleY": 0.250000477,
        "scaleZ": 0.250000477
      },
      "Nickname": "Thunderhawk Gunship",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.9999998,
        "g": 0.992160261,
        "b": 0.9999998
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": false,
      "Sticky": false,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772868855169040955/D56544DA23E2399B0FC891522BC806A0BB3F5C82/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/785235974151691273/A2A6AF1BB405C821D90B05551BD363A0FA8041A7/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151689019/4D85B13C9441EB043D687995C69F289DE4FA3CE9/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "d34b66"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": 2.0,
        "rotX": 1.77154027E-06,
        "rotY": -0.003780992,
        "rotZ": -5.96640348E-07,
        "scaleX": 0.3750006,
        "scaleY": 0.3750006,
        "scaleZ": 0.3750006
      },
      "Nickname": "Thunderhawk Transporter",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/772868855169038320/434369358714B037BED6E4F2EE612F38B9EB19D5/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/785235974151701840/9B2E10052C6E05040E7A808F0FFE6005C56E9F8D/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/785235974151694774/F1F5B91ECF3913216084F47061AF105CAE7BDAC2/",
        "Convex": true,
        "MaterialIndex": 1,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "PhysicsMaterial": {
        "StaticFriction": 0.6,
        "DynamicFriction": 0.6,
        "Bounciness": 0.0,
        "FrictionCombine": 0,
        "BounceCombine": 0
      },
      "Rigidbody": {
        "Mass": 0.86875,
        "Drag": 0.1,
        "AngularDrag": 0.1,
        "UseGravity": true
      },
      "GUID": "8d38a0"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": -11.9999981,
        "posY": 0.899998248,
        "posZ": 112.5833,
        "rotX": 1.6040359E-06,
        "rotY": -0.00378772477,
        "rotZ": -5.398448E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/772868855169138943/3594E240623F6B83C8E35B48393CDAD33B271C69/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f51f00"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": 12.0,
        "posY": 0.900004447,
        "posZ": -112.5833,
        "rotX": -1.6128065E-06,
        "rotY": 180.005829,
        "rotZ": 5.03174647E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/772868855169138943/3594E240623F6B83C8E35B48393CDAD33B271C69/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "085352"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 8.0,
        "rotX": 1.62854076E-06,
        "rotY": 0.002185201,
        "rotZ": -3.44203045E-07,
        "scaleX": 0.15,
        "scaleY": 0.15,
        "scaleZ": 0.15
      },
      "Nickname": "Sentry Pylon",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/966472716088507846/2D53D01F74E14526797C4148C8106F7F886697AB/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/966472716088543244/6CDB22954F348EA0110106B5C17C53DC8BE1CADB/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/777280951077770359/79442968CF06D9774DB3F70CE904A26E66C6A342/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"structure\":3},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "071519"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": 2.0,
        "rotX": 1.911804E-06,
        "rotY": -0.00218137074,
        "rotZ": -6.28641033E-07,
        "scaleX": 0.2,
        "scaleY": 0.2,
        "scaleZ": 0.2
      },
      "Nickname": "Gauss Pylon",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/966472716088507846/2D53D01F74E14526797C4148C8106F7F886697AB/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/966472716088543244/6CDB22954F348EA0110106B5C17C53DC8BE1CADB/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/777280951077770359/79442968CF06D9774DB3F70CE904A26E66C6A342/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CastShadows": true
      },
      "XmlUI": "",
      "CustomUIAssets": [
        {
          "Name": "PlaneCard",
          "URL": "http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/"
        }
      ],
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"structure\":3},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "04aea9"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -4.0,
        "rotX": 1.6875631E-06,
        "rotY": 0.00218907557,
        "rotZ": -3.98515482E-07,
        "scaleX": 0.275000423,
        "scaleY": 0.275000423,
        "scaleZ": 0.275000423
      },
      "Nickname": "Nightscythe",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773995410752360028/B2A0D88EB801DFD73800BF3FEFCB17445030FB47/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/966472716088795500/306E9BDC3389CD15AEDC8BDF6AE1D9E70F8877C4/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=7e2HKDbN",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "0221a6"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -10.0,
        "rotX": -4.69835157E-07,
        "rotY": -0.005481227,
        "rotZ": 3.03713227E-06,
        "scaleX": 0.275000423,
        "scaleY": 0.275000423,
        "scaleZ": 0.275000423
      },
      "Nickname": "Doomscythe ",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773995410752359379/789AF0D8903BFBA5E66E069CF30FABA70E9AE750/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/966472716088795500/306E9BDC3389CD15AEDC8BDF6AE1D9E70F8877C4/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=7e2HKDbN",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f3b47b"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -16.0,
        "rotX": 1.76208266E-06,
        "rotY": -0.002189075,
        "rotZ": -7.09145354E-07,
        "scaleX": 0.325000435,
        "scaleY": 0.325000435,
        "scaleZ": 0.325000435
      },
      "Nickname": "Night Shroud",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773995410752359379/789AF0D8903BFBA5E66E069CF30FABA70E9AE750/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/966472716088795500/306E9BDC3389CD15AEDC8BDF6AE1D9E70F8877C4/",
        "NormalURL": "",
        "ColliderURL": "http://pastebin.com/raw.php?i=7e2HKDbN",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 0,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "a7bc32"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": -24.0,
        "posY": 0.899998367,
        "posZ": 112.5833,
        "rotX": 1.58803232E-06,
        "rotY": 0.00218470744,
        "rotZ": -5.288898E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/773995410752444708/AE0085597AF932ABAEE4646E08DC370F0E4A1D6A/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "124843"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": 24.0,
        "posY": 0.9000043,
        "posZ": -112.5833,
        "rotX": -1.61568641E-06,
        "rotY": 180.006317,
        "rotZ": 4.64529933E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/773995410752444708/AE0085597AF932ABAEE4646E08DC370F0E4A1D6A/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "03594c"
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": -36.0,
        "posY": 0.87,
        "posZ": -29.25,
        "rotX": 8.375675E-06,
        "rotY": 180.005615,
        "rotZ": 8.3783857E-07,
        "scaleX": 4.0,
        "scaleY": 1.0,
        "scaleZ": 3.75
      },
      "Nickname": "Teal Dice Table",
      "Description": "{\n  \"Cumulative\": \"no\",\n  \"Update_Frequency\": \"0.2\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692928241/73BC0800A4F7CD7993C8EDD8DC37EB9932D348BE/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "function onload()\r\n    defaultFontSize=500\r\n    fontSize=defaultFontSize\r\n    lineCount=0\r\n    --defaultDivisionLabel=\"|\\n|\\n|\\n|\\n|\\n|\\n|\"\r\n    defaultDivisionLabel=\"|\\n|\"\r\n    --defaultDivisionLabel=\"|\"\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-3.15,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=650,\r\n    font_color={1, 1, 1},\r\n    scale={0.25, 0.25, 0.25},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-0.95,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={1.1,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\n\r\n    emptyText = ' '\r\n\tdata2 = JSON.decode(self.getDescription())\r\n  log(data2)\r\n\tWait.time(checkDice, data2.Update_Frequency*1,-1)\r\nend\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({\r\n\t\tCumulative = 'no',Update_Frequency = '0.2'\r\n\t}))\r\nend\r\n\r\nfunction checkDice ()\r\n\r\n\t--Reset description on null\r\n\tdata = JSON.decode(self.getDescription())\r\n\tif data==nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored defaut configuration.', {0.8,0.5,0})\r\n\tend\r\n\r\n    -- If the zone is moving, wait\r\n    if not self.resting then\r\n        return\r\n    end\r\n\r\n    local ownPos = self.getPosition()\r\n    local ownRotation = self.getRotation()['x']\r\n    local ownScale = self.getScale()['x']\r\n    local Rotation = self.getRotation()\r\n    -- Compute the bounds of the box.\r\n\t-- Manipulate the offset to account for tray borders.\r\n\t-- y offset will affect how above and below it will see dice.\r\n\t-- I was too lazy to split the y offset to only extend above the tray.\r\n\t-- If you want to fix do so and message me. ~(^_^;~)\r\n\r\n  local xboundOffset = 3.3 --Horizontal Offset\r\n  local yboundOffset = 2.5 --Up/Down Offset\r\n  local zboundOffset = 1 --Vertical Offset\r\n\tif Rotation.y > 89 and Rotation.y < 91 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n\tif Rotation.y > 269 and Rotation.y < 270 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n    local leftBound = ownPos['x'] - xboundOffset * ownScale\r\n    local rightBound = ownPos['x'] + xboundOffset * ownScale\r\n    local upperBound = ownPos['z'] + zboundOffset * ownScale\r\n    local lowerBound = ownPos['z'] - zboundOffset * ownScale\r\n\tlocal yupperBound = ownPos['y'] + yboundOffset --* ownScale\r\n\tlocal ylowerBound = ownPos['y'] - yboundOffset --* ownScale\r\n\r\n    local valueToCounter = {}\r\n    local valuesToSort = {}\r\n\ttotaldice=0\r\n    -- Iterate all objects in the zone\r\n    for _, obj in pairs(getAllObjects()) do\r\n        -- Fetch resting dices\r\n        if obj != nil and obj.tag == 'Dice' and obj.resting then\r\n            -- Only use objects inside the zone\r\n            local objPos = obj.getPosition()\r\n            if objPos['x'] > leftBound and objPos['x'] < rightBound and objPos['z'] > lowerBound and objPos['z'] < upperBound and objPos['y'] < yupperBound and objPos['y'] > ylowerBound then\r\n                local value = obj.getValue()\r\n                local counter = valueToCounter[value]\r\n                -- First occurrence of this value\r\n                if counter == nil then\r\n                    counter = 0\r\n                    valuesToSort[#valuesToSort + 1] = value\r\n                end\r\n                -- Increase the occurrence of this value\r\n                counter = counter + 1\r\n                totaldice=totaldice+1\r\n                valueToCounter[value] = counter\r\n            end\r\n        end\r\n    end\r\n\r\n    -- Process the tracked values, sorted and build the lines to display\r\n\tlocal textLines = {}\r\n    lineCount=0\r\n\tif data.Cumulative == 'yes' then\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor i=1,12 do\r\n\t\t\tif valueToCounter[i]==nil then\r\n\t\t\t\tvalueToCounter[i]=0\r\n\t\t\tend\r\n\t\tend\r\n\t\tvalueToCounter[11]=valueToCounter[12]+valueToCounter[11]\r\n\t\tvalueToCounter[10]=valueToCounter[11]+valueToCounter[10]\r\n\t\tvalueToCounter[9]=valueToCounter[10]+valueToCounter[9]\r\n\t\tvalueToCounter[8]=valueToCounter[9]+valueToCounter[8]\r\n\t\tvalueToCounter[7]=valueToCounter[8]+valueToCounter[7]\r\n\t\tvalueToCounter[6]=valueToCounter[7]+valueToCounter[6]\r\n\t\tvalueToCounter[5]=valueToCounter[6]+valueToCounter[5]\r\n\t\tvalueToCounter[4]=valueToCounter[5]+valueToCounter[4]\r\n\t\tvalueToCounter[3]=valueToCounter[4]+valueToCounter[3]\r\n\t\tvalueToCounter[2]=valueToCounter[3]+valueToCounter[2]\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal xxx = ''\r\n\t\t\tif value == 1 then\r\n\t\t\t\txxx = \"'s: \"\r\n\t\t\telse\r\n\t\t\t\txxx = \"+: \"\r\n\t\t\tend\r\n\t\t\tlocal line = value .. xxx .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\telse\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal line = '#' .. value .. ': ' .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\tend\r\n    if lineCount < 6 then\r\n        for i = lineCount+1, 6 do\r\n            textLines[#textLines + 1] = \" \"\r\n        end\r\n    end\r\n    -- Display the text\r\n    local text = table.concat(textLines, '\\n')\r\n    if text == '' then\r\n        -- Suppress the default text 'Type Here'\r\n        text = emptyText\r\n    end\r\n    if totaldice==0\r\n    then\r\n        totaltext = ' '\r\n\r\n    else\r\n        totaltext='\\nTot: '..totaldice\r\n\r\n    end\r\n      defaultFontSize=500\r\n      defaultDivisionLabel=\"|\\n|\"\r\n      if lineCount>11 then\r\n        fontSize=300-((lineCount-12)*17)\r\n        divisionLabel=defaultDivisionLabel\r\n      elseif lineCount>6 then\r\n        fontSize=defaultFontSize-((lineCount-6)*38)\r\n        divisionLabel=defaultDivisionLabel\r\n      else\r\n        fontSize=defaultFontSize\r\n        divisionLabel=\"\"\r\n      end\r\n\r\n      self.editButton({index=0, label=text..totaltext, font_size=fontSize})\r\n\r\n      self.editButton({index=1, label=divisionLabel})\r\n      self.editButton({index=2, label=divisionLabel})\r\nend",
      "LuaScriptState": "{\"svdiceZoneGUID\":\"d3c171\"}",
      "GUID": "8aba04",
      "AttachedSnapPoints": [
        {
          "Position": {
            "x": 2.77252316,
            "y": 0.0999389961,
            "z": -0.8509657
          }
        }
      ]
    },
    {
      "Name": "Custom_Tile",
      "Transform": {
        "posX": 36.0,
        "posY": 0.87,
        "posZ": -29.25,
        "rotX": 8.375675E-06,
        "rotY": 180.005615,
        "rotZ": 8.3783857E-07,
        "scaleX": 4.0,
        "scaleY": 1.0,
        "scaleZ": 3.75
      },
      "Nickname": "Blue Dice Table",
      "Description": "{\n  \"Cumulative\": \"no\",\n  \"Update_Frequency\": \"0.2\"\n}",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": false,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomImage": {
        "ImageURL": "https://steamuserimages-a.akamaihd.net/ugc/782999865692928241/73BC0800A4F7CD7993C8EDD8DC37EB9932D348BE/",
        "ImageSecondaryURL": "",
        "ImageScalar": 1.0,
        "WidthScale": 0.0,
        "CustomTile": {
          "Type": 0,
          "Thickness": 0.1,
          "Stackable": false,
          "Stretch": true
        }
      },
      "XmlUI": "",
      "LuaScript": "function onload()\r\n    defaultFontSize=500\r\n    fontSize=defaultFontSize\r\n    lineCount=0\r\n    --defaultDivisionLabel=\"|\\n|\\n|\\n|\\n|\\n|\\n|\"\r\n    defaultDivisionLabel=\"|\\n|\"\r\n    --defaultDivisionLabel=\"|\"\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-3.15,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=650,\r\n    font_color={1, 1, 1},\r\n    scale={0.25, 0.25, 0.25},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={-0.95,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n  self.createButton({\r\n    label=\"\", click_function=\"none\", function_owner=Global,\r\n    position={1.1,0.11,0.01}, rotation={0,0,0}, height=0, width=0, font_size=500,\r\n    font_color={1, 1, 1},\r\n    --scale={0.25, 0.25, 0.25},\r\n    scale={0.25,2,1},\r\n    alignment=2\r\n  })\r\n\r\n\tif self.getDescription() == '' then\r\n\t\tsetDefaultState()\r\n\tend\r\n\r\n    emptyText = ' '\r\n\tdata2 = JSON.decode(self.getDescription())\r\n  log(data2)\r\n\tWait.time(checkDice, data2.Update_Frequency*1,-1)\r\nend\r\nfunction setDefaultState()\r\n\tself.setDescription(JSON.encode_pretty({\r\n\t\tCumulative = 'no',Update_Frequency = '0.2'\r\n\t}))\r\nend\r\n\r\nfunction checkDice ()\r\n\r\n\t--Reset description on null\r\n\tdata = JSON.decode(self.getDescription())\r\n\tif data==nil then\r\n\t\tsetDefaultState()\r\n\t\tdata = JSON.decode(self.getDescription())\r\n\t\tprintToAll('Warning - invalid description. Restored defaut configuration.', {0.8,0.5,0})\r\n\tend\r\n\r\n    -- If the zone is moving, wait\r\n    if not self.resting then\r\n        return\r\n    end\r\n\r\n    local ownPos = self.getPosition()\r\n    local ownRotation = self.getRotation()['x']\r\n    local ownScale = self.getScale()['x']\r\n    local Rotation = self.getRotation()\r\n    -- Compute the bounds of the box.\r\n\t-- Manipulate the offset to account for tray borders.\r\n\t-- y offset will affect how above and below it will see dice.\r\n\t-- I was too lazy to split the y offset to only extend above the tray.\r\n\t-- If you want to fix do so and message me. ~(^_^;~)\r\n\r\n  local xboundOffset = 3.3 --Horizontal Offset\r\n  local yboundOffset = 2.5 --Up/Down Offset\r\n  local zboundOffset = 1 --Vertical Offset\r\n\tif Rotation.y > 89 and Rotation.y < 91 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n\tif Rotation.y > 269 and Rotation.y < 270 then\r\n\t\txboundOffset = 1\r\n\t\tzboundOffset = 6.9\r\n\t\tend\r\n    local leftBound = ownPos['x'] - xboundOffset * ownScale\r\n    local rightBound = ownPos['x'] + xboundOffset * ownScale\r\n    local upperBound = ownPos['z'] + zboundOffset * ownScale\r\n    local lowerBound = ownPos['z'] - zboundOffset * ownScale\r\n\tlocal yupperBound = ownPos['y'] + yboundOffset --* ownScale\r\n\tlocal ylowerBound = ownPos['y'] - yboundOffset --* ownScale\r\n\r\n    local valueToCounter = {}\r\n    local valuesToSort = {}\r\n\ttotaldice=0\r\n    -- Iterate all objects in the zone\r\n    for _, obj in pairs(getAllObjects()) do\r\n        -- Fetch resting dices\r\n        if obj != nil and obj.tag == 'Dice' and obj.resting then\r\n            -- Only use objects inside the zone\r\n            local objPos = obj.getPosition()\r\n            if objPos['x'] > leftBound and objPos['x'] < rightBound and objPos['z'] > lowerBound and objPos['z'] < upperBound and objPos['y'] < yupperBound and objPos['y'] > ylowerBound then\r\n                local value = obj.getValue()\r\n                local counter = valueToCounter[value]\r\n                -- First occurrence of this value\r\n                if counter == nil then\r\n                    counter = 0\r\n                    valuesToSort[#valuesToSort + 1] = value\r\n                end\r\n                -- Increase the occurrence of this value\r\n                counter = counter + 1\r\n                totaldice=totaldice+1\r\n                valueToCounter[value] = counter\r\n            end\r\n        end\r\n    end\r\n\r\n    -- Process the tracked values, sorted and build the lines to display\r\n\tlocal textLines = {}\r\n    lineCount=0\r\n\tif data.Cumulative == 'yes' then\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor i=1,12 do\r\n\t\t\tif valueToCounter[i]==nil then\r\n\t\t\t\tvalueToCounter[i]=0\r\n\t\t\tend\r\n\t\tend\r\n\t\tvalueToCounter[11]=valueToCounter[12]+valueToCounter[11]\r\n\t\tvalueToCounter[10]=valueToCounter[11]+valueToCounter[10]\r\n\t\tvalueToCounter[9]=valueToCounter[10]+valueToCounter[9]\r\n\t\tvalueToCounter[8]=valueToCounter[9]+valueToCounter[8]\r\n\t\tvalueToCounter[7]=valueToCounter[8]+valueToCounter[7]\r\n\t\tvalueToCounter[6]=valueToCounter[7]+valueToCounter[6]\r\n\t\tvalueToCounter[5]=valueToCounter[6]+valueToCounter[5]\r\n\t\tvalueToCounter[4]=valueToCounter[5]+valueToCounter[4]\r\n\t\tvalueToCounter[3]=valueToCounter[4]+valueToCounter[3]\r\n\t\tvalueToCounter[2]=valueToCounter[3]+valueToCounter[2]\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal xxx = ''\r\n\t\t\tif value == 1 then\r\n\t\t\t\txxx = \"'s: \"\r\n\t\t\telse\r\n\t\t\t\txxx = \"+: \"\r\n\t\t\tend\r\n\t\t\tlocal line = value .. xxx .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\telse\r\n\t\ttable.sort(valuesToSort)\r\n\t\tfor index, value in ipairs(valuesToSort) do\r\n\t\t\tlocal counter = valueToCounter[value]\r\n\t\t\tlocal line = '#' .. value .. ': ' .. counter\r\n\t\t\ttextLines[#textLines + 1] = line\r\n            lineCount=lineCount+1\r\n\t\tend\r\n\tend\r\n    if lineCount < 6 then\r\n        for i = lineCount+1, 6 do\r\n            textLines[#textLines + 1] = \" \"\r\n        end\r\n    end\r\n    -- Display the text\r\n    local text = table.concat(textLines, '\\n')\r\n    if text == '' then\r\n        -- Suppress the default text 'Type Here'\r\n        text = emptyText\r\n    end\r\n    if totaldice==0\r\n    then\r\n        totaltext = ' '\r\n\r\n    else\r\n        totaltext='\\nTot: '..totaldice\r\n\r\n    end\r\n      defaultFontSize=500\r\n      defaultDivisionLabel=\"|\\n|\"\r\n      if lineCount>11 then\r\n        fontSize=300-((lineCount-12)*17)\r\n        divisionLabel=defaultDivisionLabel\r\n      elseif lineCount>6 then\r\n        fontSize=defaultFontSize-((lineCount-6)*38)\r\n        divisionLabel=defaultDivisionLabel\r\n      else\r\n        fontSize=defaultFontSize\r\n        divisionLabel=\"\"\r\n      end\r\n\r\n      self.editButton({index=0, label=text..totaltext, font_size=fontSize})\r\n\r\n      self.editButton({index=1, label=divisionLabel})\r\n      self.editButton({index=2, label=divisionLabel})\r\nend",
      "LuaScriptState": "{\"svdiceZoneGUID\":\"1019e3\"}",
      "GUID": "b7cd39",
      "AttachedSnapPoints": [
        {
          "Position": {
            "x": 2.77252316,
            "y": 0.0999389961,
            "z": -0.8509657
          }
        }
      ]
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -22.0,
        "rotX": 1.40077952E-06,
        "rotY": 0.017605247,
        "rotZ": -5.71185353E-07,
        "scaleX": 0.325000435,
        "scaleY": 0.325000435,
        "scaleZ": 0.325000435
      },
      "Nickname": "Hive Crone",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773996018552984852/B952B3B138B2EDC67EF5A8DC8AC33E28BA0C1761/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786374678936138926/5D312FA5209E0BB341E0A801B04FFE1DEB8EF2F2/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/786374678936129447/1700E6D93E93DE440EDC437B09DB027C863296D4/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "44a01c"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -46.0,
        "rotX": 1.682043E-06,
        "rotY": 0.0130389817,
        "rotZ": -6.24063432E-07,
        "scaleX": 0.7390308,
        "scaleY": 0.5744692,
        "scaleZ": 0.7390308
      },
      "Nickname": "Tentaclid",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773996263554041574/F0F170E8ACD044042DC0F9AAD0EEE6DC2C096FD9/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786374678936138926/5D312FA5209E0BB341E0A801B04FFE1DEB8EF2F2/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/786374678936109828/2C84DE4EB0D1401E132818075B29FD130E2A1F4F/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "75ca9d"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -28.0,
        "rotX": 1.64050152E-06,
        "rotY": 0.0176052451,
        "rotZ": -6.7985053E-07,
        "scaleX": 0.325000435,
        "scaleY": 0.325000435,
        "scaleZ": 0.325000435
      },
      "Nickname": "Harpy",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 0.0,
        "g": 0.0,
        "b": 0.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773996018552984044/7C0FE458B7452A0FCDB2BE0DB688ADE47532AA26/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786374678936138926/5D312FA5209E0BB341E0A801B04FFE1DEB8EF2F2/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/786374678936129447/1700E6D93E93DE440EDC437B09DB027C863296D4/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "dcb1bc"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 70.0,
        "posY": -5.0,
        "posZ": -4.0,
        "rotX": -1.91400818E-06,
        "rotY": 180.013031,
        "rotZ": 2.1766057E-07,
        "scaleX": 0.604009032,
        "scaleY": 0.469513029,
        "scaleZ": 0.604009032
      },
      "Nickname": "Mucolid Spore",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773996018552982377/308C05CF281FA65DBF50B60DB6D74EB759F25955/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786374678936135259/2A47EF5B20D66143F66480109FB2B4C70D78B0C0/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/786374678936109828/2C84DE4EB0D1401E132818075B29FD130E2A1F4F/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "whatIam=\"AircraftBase\"\r\ndefenceType=\"\"\r\n\r\nXbuttonOffset=0\r\nYbuttonOffset=0.05\r\nZbuttonOffset=0\r\n\r\n\r\n\r\nshortRangeValue=4\r\nmediumRangeValue=7\r\nlongRangeValue=10\r\nalpha=0.7\r\nshortRangeColor={0,1,0,alpha}\r\nmediumRangeColor={1,1,0,alpha}\r\nlongRangeColor={1,0,0,alpha}\r\nshowArcType=0\r\n\r\nfullHex=1.82*3.85\r\nhalfHex=fullHex/2\r\napo=fullHex*1.7/2\r\ndefaultskipHex=-1\r\nskipHex=-1  -- 0 target is partially inside, -1 target is totally inside\r\n\r\nflight={alt=3, speed=4}\r\nplane_GUID=\"\"\r\nplaneLocalStats={hp=2, rotOffset=180, owner=\"\", fuel=2, characterSheet_GUID=\"\"}\r\nplaneStats={structure=3}\r\nweapons={}\r\nupgrades={}\r\nowner=\"\"\r\nplane=nil\r\nhangar=nil\r\nhangar_GUID=\"2cd33b\"\r\ncharacterSheet=nil\r\n\r\ndefaultPlaneStats={structure=2, transport=-1, fuel=-1, throttle=10, manouvres={1,2,3,4,5,6,7,8,9}, handling=1, maxAlt=10, minSpeed=0, maxSpeed=10, }\r\n\r\ndynamicAltitude=false\r\n\r\nshowTailing = false\r\nshowOptions=false\r\nshowStats=false\r\n\r\n\r\n\r\n\r\noptionsLbl=\"\\u{2699}\"\r\noptionsLbl=\"OPT\"\r\noptionsBtn = {\r\n    label=optionsLbl, click_function=\"toggleOptions\", function_owner=self,\r\n    position={(0+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=150, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"OPTIONS\"\r\n}\r\n\r\nstatsBtn = {\r\n    label=\"DATA\", click_function=\"toggleStats\", function_owner=self,\r\n    position={(-0.35+XbuttonOffset)/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=150,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"SHOW DATACARD\"\r\n}\r\n\r\nstats2Btn = {\r\n    label=\"\", click_function=\"toggleStats\", function_owner=self,\r\n    position={0+XbuttonOffset,0+YbuttonOffset,0.30}, rotation={0,0,0}, height=500, width=250,\r\n    font_size=50, color={1,1,1,0.0}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}, tooltip=\"LOADOUT\\nLMB open window\\nRMB go to Sheet\"\r\n}\r\n\r\narcLbl=\"↑\"\r\narcLbl=\"▲\"\r\narcTooltip=\"LMB: partially inside\\nRMB: fully inside\"\r\nshowAllArcBtn = {\r\n    label=\"FIRING ARC\", click_function=\"toggleAllArc\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,-0.7/self.getScale().z}, rotation={0,0,0}, height=80, width=380,\r\n    font_size=50, color=\"Black\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1},\r\n}\r\n\r\nhpBtn = {\r\n    label=\"♥\", click_function=\"onClickHp\", function_owner=self,\r\n    position={0,3,0}, rotation={0,0,0}, height=100, width=100,\r\n    font_size=100, color=\"Red\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color=\"White\", tooltip=\"RMB decrease\"\r\n}\r\n\r\n\r\n\r\nhexBtn = {\r\n    label=\"\", typeBtn=\"hex\", click_function=\"hex\", function_owner=self,\r\n    position={0,0.25,1.74}, rotation={0,0,0}, height=600, width=600,\r\n    font_size=100, color=\"Green\", scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\naddHpLbl=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\naddHpBtn = {\r\n    label=addHpLbl, click_function=\"add1Hp\", function_owner=self,\r\n    position={-0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nchangeOwnerBtn = {\r\n    label=\"Reset\\nowner\", click_function=\"changeOwner\", function_owner=self,\r\n    position={0,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}, rotation={0,0,0}, height=100, width=250,\r\n    font_size=50, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\nclaimBtn = {\r\n    label=\"CLAIM\", click_function=\"changeOwner2\", function_owner=self,\r\n    position={0,(1+YbuttonOffset)/self.getScale().y,0}, rotation={0,0,0}, height=300, width=750,\r\n    font_size=150, color={0.5,0.5,0.5}, scale={1/self.getScale().x,1,1/self.getScale().z}, font_color={1,1,1}\r\n}\r\n\r\n\r\nfakeAltitude=2\r\n\r\nfunction onSave()\r\n    --print(\"SAVING DATA   \"..defenceType..\"  \"..self.getGUID())\r\n    saved_data = JSON.encode({svflight=flight, svplane_GUID= plane_GUID, svplaneLocalStats=planeLocalStats,\r\n    svplaneStats=planeStats, svweapons=weapons, svupgrades=upgrades, svdefenceType=defenceType})\r\n    --saved_data = \"\"\r\n    return saved_data\r\nend\r\n\r\nfunction onLoad(saved_data)\r\n    cycleCounter=0\r\n    --print(self.getGUID()..\" LOADED OBJECT\")\r\n    self.mass=100\r\n    getUnitStats()\r\n    if saved_data ~= \"\" then\r\n        local loaded_data = JSON.decode(saved_data)\r\n        flight=loaded_data.svflight\r\n        plane_GUID=loaded_data.svplane_GUID\r\n        planeLocalStats=loaded_data.svplaneLocalStats\r\n        if loaded_data.svplaneStats~= \"\" then\r\n            --print(\"svplaneStats struct \"..tostring(loaded_data.svplaneStats.structure))\r\n            planeStats=loaded_data.svplaneStats\r\n        end\r\n\r\n        weapons=loaded_data.svweapons\r\n        upgrades=loaded_data.svupgrades\r\n        if loaded_data.svdefenceType~= \"\" then\r\n            defenceType=loaded_data.svdefenceType\r\n            --print(\"loaded_data.svdefenceType= \"..loaded_data.svdefenceType..\"   \"..self.getGUID())\r\n            --print(\"defenceType= \"..defenceType..\"   \"..self.getGUID())\r\n        end\r\n        --defenceType=loaded_data.svdefenceType\r\n        --print(\"LOADING FROM SAVE \"..self.getGUID())\r\n    end\r\n    writeMenu()\r\n\r\nend\r\n\r\nfunction getUnitStats()\r\n    if self.getDescription()==\"\" then\r\n        if cycleCounter > 10 then\r\n            return\r\n\r\n        end\r\n        cycleCounter=cycleCounter+1\r\n        --print(\"Waiting for description\")\r\n        Wait.frames(getUnitStats, 3)\r\n        return\r\n    end\r\n    --print(\"\\n\\nGETTING STATS\\n\")\r\n    planeStats={}\r\n    local hangar=getObjectFromGUID(hangar_GUID)\r\n    local planeType=\"\" -- change to proprer type\r\n    local availables={}\r\n    local splitted={}\r\n    upgrades={}\r\n    if true or plane ~= nil then\r\n        --print(\"DESC  \"..self.getDescription())\r\n        for line in string.gmatch(self.getDescription(), \"[^\\n]+\") do\r\n            --print(\"Line \"..line)\r\n            table.insert(splitted, #splitted+1, line)\r\n\r\n        end\r\n\r\n        if splitted[1] then\r\n            planeType=splitted[1]\r\n            planeType=string.gsub(planeType, \" \", \" \")\r\n        end\r\n        --print(\"PlaneTYPE \"..planeType)\r\n        for i=2, #splitted do\r\n            table.insert(upgrades, #upgrades+1, splitted[i])\r\n        end\r\n    end\r\n    local found=false\r\n    --print(\"DEF TYPE \"..defenceType..\"  \"..self.getGUID())\r\n    --planeType=defenceType\r\n    if true or hangar ~= nil then\r\n        availables=Global.getTable(\"AvailableGroundDefences\")\r\n        --print(\"WANTED \"..planeType..\"  \"..self.getGUID()..\"\\n\")\r\n        for i, stats in ipairs(availables) do\r\n            --print(\"Checking \"..stats.type)\r\n            if stats.type==planeType then\r\n                planeStats=stats\r\n                found=true\r\n                --print(\"FOUND\")\r\n                --print(\"STATS \"..stats.structure..\"\\n\")\r\n                break\r\n            end\r\n        end\r\n        if not found then\r\n            for i, stats in ipairs(availables) do\r\n                if stats.type==\"defaultGroundDefenceStats\" then\r\n                    planeStats=stats\r\n                end\r\n            end\r\n        end\r\n        --planeStats= datasheet.getTable(planeType)\r\n    else\r\n        --planeStats= defaultPlaneStats\r\n    end\r\n    --print(\"PLANESTATS \"..planeStats.structure)\r\n    if planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    else\r\n        planeLocalStats.hp=3\r\n    end\r\n\r\n    if planeStats == nil or planeStats=={} then\r\n        --planeStats= Global.getTable(\"defaultPlaneStats\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    local image=\"http://cloud-3.steamusercontent.com/ugc/780734328496147621/EB95ED3DC0A6FAB5E7ECD24603605F95043AFE6D/\"\r\n    --print(\"IMAGE: *\"..image..\"*\")\r\n    if planeStats.image ~= nil then\r\n        image=planeStats.image\r\n        --print(\"Image found\")\r\n    end\r\n    --print(\"IMAGE2: *\"..image..\"*\")\r\n    local assets = {\r\n    {\r\n        name = \"PlaneCard\",\r\n        url  = image\r\n    },\r\n\r\n    }\r\n    self.UI.setCustomAssets(assets)\r\nend\r\n\r\nfunction writeMenu()\r\n    self.clearButtons()\r\n    if planeLocalStats.owner ==\"\" then\r\n        self.createButton(claimBtn)\r\n        return\r\n    end\r\n\r\n    if showOptions then\r\n        writeOptionsMenu()\r\n        return\r\n    end\r\n    optionsBtn.position={0.35/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,0.55/self.getScale().z}\r\n    optionsBtn.label=optionsLbl\r\n    self.createButton(optionsBtn)\r\n    self.createButton(statsBtn)\r\n    stats2Btn.position={0,(fakeAltitude*0.35+1.1)/self.getScale().y,0}\r\n    --self.createButton(stats2Btn)\r\n\r\n\r\n    self.createButton(showAllArcBtn)\r\n\r\n    if planeStats.structure ~= nil then\r\n        if planeLocalStats.hp < planeStats.structure then\r\n            --hpBtn.color=\"Red\"\r\n            hpBtn.font_color=\"Black\"\r\n        else\r\n            --hpBtn.color=\"Green\"\r\n            hpBtn.font_color=\"White\"\r\n        end\r\n\r\n        for i=1, planeLocalStats.hp do\r\n            hpBtn.position={(0.12*(-planeLocalStats.hp+1)+(i-1)*0.24)/self.getScale().x, (fakeAltitude*0.35+0.2)/self.getScale().y, 0} --fakeAltitude-0.1\r\n            self.createButton(hpBtn)\r\n        end\r\n    end\r\n\r\n    --writeRangeHex(10)\r\nend\r\n\r\nfunction writeOptionsMenu()\r\n--    optionsBtn.position={0.45/self.getScale().x,(0+YbuttonOffset)/self.getScale().y,-0.45/self.getScale().z}\r\n    optionsBtn.label=\"Back\"\r\n    self.createButton(optionsBtn)\r\n    addHpBtn.label=\"ADD 1 HP\\n# \"\r\n    if planeLocalStats.hp then\r\n        addHpBtn.label=\"ADD 1 HP\\n# \"..planeLocalStats.hp\r\n    end\r\n\r\n    self.createButton(addHpBtn)\r\n    self.createButton(changeOwnerBtn)\r\nend\r\n\r\n--showArcType=0\r\n\r\nfunction toggleFiringArc(type, _skipHex) --0 none,  1 front, 2 LeftF, 3 RigthF, 4 LeftR, 5 RightR, 6 Back\r\n    showAllArcBtn.color=\"Grey\"\r\n    if showArcType == type then\r\n        showArcType = 0\r\n        writeMenu()\r\n        deleteRangeHex()\r\n        return\r\n    else\r\n        showArcType= type\r\n    end\r\n    if showArcType == 0 then\r\n        writeMenu()\r\n        deleteRangeHex()\r\n    end\r\n    if showArcType == 7 then\r\n        showAllArcBtn.color=\"Green\"\r\n        writeMenu()\r\n        writeAllAroundArcHex()\r\n    end\r\nend\r\n\r\nfunction toggleAllArc(obj, player, alt)\r\n    if alt then\r\n        skipHex=0\r\n    else\r\n        skipHex=defaultskipHex\r\n    end\r\n    toggleFiringArc(7, skipHex)\r\n\r\nend\r\n\r\nfunction writeAllAroundArcHex()\r\n    local _skipHex=-1\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    local degrees=60\r\n    local originalButtons1=self.getButtons()\r\n    local originalButtons2=self.getButtons()\r\n    local originalButtons3=self.getButtons()\r\n    local originalButtons4=self.getButtons()\r\n    local originalButtons5=self.getButtons()\r\n    rotateFiringArc(originalButtons1, 60)\r\n    rotateFiringArc(originalButtons2, 120)\r\n    rotateFiringArc(originalButtons3, 180)\r\n    rotateFiringArc(originalButtons4, 240)\r\n    rotateFiringArc(originalButtons5, 300)\r\nend\r\n\r\nfunction rotateFiringArc(buttonList, angle)\r\n    for i, button in ipairs(buttonList) do\r\n        if button.click_function == \"hex\" then\r\n            button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, angle)\r\n            --self.removeButton(button.index)\r\n            self.createButton(button)\r\n        end\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction toggleOptions(obj, player, alt)\r\n    if player ~= planeLocalStats.owner and player ~= \"Black\" then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    showOptions = not showOptions\r\n    writeMenu()\r\nend\r\n\r\nfunction toggleStats(obj, player, alt)\r\n    showStats = not showStats\r\n    if showStats then\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 9,\r\n        })\r\n        writeXml(player)\r\n    else\r\n        Player[player].lookAt({\r\n        position = self.getPosition(),\r\n        pitch    = 75,\r\n        yaw      = self.getRotation().y+180,\r\n        distance = 1,\r\n        })\r\n        deleteXml()\r\n    end\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeXml(player)\r\n        createUI(player)\r\nend\r\n\r\nfunction deleteXml()\r\n        self.UI.setXml(\"\")\r\n    showStats=false\r\n    writeMenu()\r\nend\r\n\r\nfunction deleteXml2(xmlplayer, value, id)\r\n    self.UI.setXml(\"\")\r\n    showStats=false\r\n    xmlplayer.lookAt({\r\n    position = self.getPosition(),\r\n    pitch    = 75,\r\n    yaw      = self.getRotation().y+180,\r\n    distance = 7,\r\n    })\r\n    writeMenu()\r\nend\r\n\r\n\r\n\r\nfunction createUI(player)\r\n    local preferred_Height=\"1\"\r\n    local font_Size=\"400\"\r\n    local text_Value=\"\"\r\n    local id_element=\"\"\r\n    local isActive=\"false\"\r\n    local image_asset=\"\"\r\n    local stringXml=\"\"\r\n    local itemOffsetCounter=0\r\n    local visibility=\"\"\r\n    local color=\"#ffffff\"\r\n    panelB='<Panel position=\"0 0 -1200\" rotation=\"0.15 0 180\" scale=\"0.19 0.12 0.1\" offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelB2='<Panel position=\"0 -10 -200\" width=\"100\" height=\"50\" rotation=\"0 0 0\"  offsetXY=\"0 0\" color=\"Grey\" visibility=\"'..visibility..'\">'\r\n    panelB3='<Panel position=\"0 10 -200\" width=\"100\" height=\"50\" rotation=\"90 0 180\"  offsetXY=\"0 0\" color=\"White\" visibility=\"'..visibility..'\">'\r\n    panelE='</Panel>'\r\n    tableB1='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" cellSpacing=\"5\">'\r\n    tableB2='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 70 70 70 70 0\" cellSpacing=\"5\">'\r\n    tableB3='<TableLayout autoCalculateHeight=\"true\" rowBackgroundColor=\"Grey\" columnWidths=\"200 0\" cellSpacing=\"5\">'\r\n    tableE='</TableLayout>'\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    rowE='</Row>'\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n    cell= '<Cell><Text>'..text..'</Text></Cell>'\r\n-- UI LOADOUT\r\n\r\n    visibility=player\r\n    local panelYoffset=-120-50*(fakeAltitude+2)\r\n    local scaleX=0.5/self.getScale().x\r\n    local scaleY=0.5/self.getScale().z --yes it is Y  but reads Z\r\n    panelB='<Panel position=\"0 0 '..panelYoffset..'\" rotation=\"0.15 0 180\" width=\"800\" height=\"100\" scale=\"'..scaleX..\" \"..scaleY..' 0.1\" flexibleHeight=\"1\" offsetXY=\"0 0\" color=\"Black\" visibility=\"'..visibility..'\">'\r\n    stringXml=stringXml..panelB\r\n    stringXml=stringXml..tableB1\r\n\r\n\r\n    preferred_Height=\"40\" -- Name\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"name\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"30\"\r\n    text_Value=self.getName()\r\n    --text_Value=plane.getName()\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n\r\n    preferred_Height=\"550\" -- planeCard\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    id_element=\"planeCard\"\r\n    isActive=\"true\"\r\n    image_asset=\"PlaneCard\"\r\n    color=\"#ffffff\"\r\n    local found=false\r\n    for i, asset in ipairs(self.UI.getCustomAssets()) do -- search for image\r\n        if asset.name==\"PlaneCard\" and asset.url ~= \" \" then\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            found=true\r\n            break\r\n        end\r\n    end\r\n    if not found then  -- if the image is not found\r\n        font_Size=\"50\"\r\n        text_Value=\"NO IMAGE AVAILABLE\"\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n    end\r\n\r\n\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n\r\n\r\n    preferred_Height=\"40000\" -- Addons\r\n\r\n    id_element=\"upgrades\"\r\n    isActive=\"true\"\r\n    color=\"#ffffff\"\r\n    font_Size=\"20\"\r\n    text_Value=\"UPGRADES\\n\"\r\n    --local hangar=getObjectFromGUID(hangar_GUID)\r\n    local availableUpgrades= Global.getTable(\"AvailableGroundDefences\")\r\n    if availableUpgrades == nil or availableUpgrades == {} then  -- NO DATA\r\n        stringXml=stringXml..tableB1\r\n        preferred_Height=tostring(25*(#upgrades+2))\r\n        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n        stringXml=stringXml..rowB\r\n        for i, upgrade in ipairs(upgrades) do\r\n            text_Value=text_Value..\"\\n\"..upgrade\r\n        end\r\n        text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n        stringXml=stringXml..text\r\n        stringXml=stringXml..rowE\r\n        stringXml=stringXml..tableE\r\n\r\n    else    -- DATA AVAILABLE\r\n        for i, upgrade in ipairs(upgrades) do\r\n            for j, available in ipairs(availableUpgrades) do\r\n                if available.type==upgrade then -- upgrade found\r\n                    if available.cat==\"weapon\" then\r\n                        local prefH=30*(#available.special)\r\n                        if prefH<=30 then\r\n                            prefH=45\r\n                        end\r\n                        --print(prefH)\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB2\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n\r\n                        cell= '<Cell><Text>'..\"WEAPON\\n\"..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"ARC\\n\"..available.arc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        local fprString=\"FPR\\n\"\r\n                        for k, dice in ipairs(available.fpr) do\r\n                            if k == 1 then\r\n                                fprString=fprString..tostring(dice)\r\n                            else\r\n                                fprString=fprString..\" / \"..tostring(dice)\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..fprString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell= '<Cell><Text>'..\"DMG\\n\"..available.dmg..\"+\"..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        if available.ammo > 0 then\r\n                            cell= '<Cell><Text>'..\"AMMO\\n\"..available.ammo..'</Text></Cell>'\r\n                        else\r\n                            cell= '<Cell><Text>'..\"AMMO\\nUL\"..'</Text></Cell>'\r\n                        end\r\n                        stringXml=stringXml..cell\r\n                        local specialString=\"SPECIAL\\n\"\r\n                        for k, special in ipairs(available.special) do\r\n                            if k == 1 then\r\n                                specialString=specialString..special..\"\\n\"\r\n                            else\r\n                                specialString=specialString..special\r\n                            end\r\n                        end\r\n                        cell= '<Cell><Text>'..specialString..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                    if available.cat==\"upgrade\"  or available.cat==\"pilot\" then\r\n                        local prefH=75\r\n                        preferred_Height=tostring(prefH)\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        stringXml=stringXml..tableB3\r\n\r\n                        rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n                        stringXml=stringXml..rowB\r\n                        local cellTitle=\"\\n\"\r\n                        if available.cat==\"upgrade\" then\r\n                            cellTitle=\"UPGRADE\\n\"\r\n                        end\r\n                        if available.cat==\"pilot\" then\r\n                            cellTitle=\"PILOT\\n\"\r\n                        end\r\n                        if available.cat==\"crew\" then\r\n                            cellTitle=\"CREW\\n\"\r\n                        end\r\n                        cell='<Cell><Text>'..cellTitle..available.type..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        cell='<Cell><Text>'..available.desc..'</Text></Cell>'\r\n                        stringXml=stringXml..cell\r\n                        stringXml=stringXml..rowE\r\n                        stringXml=stringXml..tableE\r\n                        stringXml=stringXml..rowE\r\n                    end\r\n                end\r\n            end\r\n        end\r\n    end\r\n\r\n--[[  DONT DELETE\r\n    preferred_Height=\"500\"\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    font_Size=\"300\"\r\n    text_Value=\"I n v e n t o r y\"\r\n    text='<Text fontSize=\"'..font_Size..'\"  fontStyle=\"Bold\">'..text_Value..'</Text>'\r\n    stringXml=stringXml..text\r\n    stringXml=stringXml..rowE\r\n\r\n    preferred_Height=\"1125\" -- Knife\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    stringXml=stringXml..rowB\r\n    if isKnifePresent then\r\n        itemOffsetCounter=itemOffsetCounter+1\r\n        id_element=\"knife\"..owner\r\n        isActive=\"true\"\r\n        image_asset=\"Knife\"..owner\r\n        image_asset=localAssets[itemOffsetCounter].name\r\n        color=\"#ffffff\"\r\n        if itemOptions[itemOffsetCounter] ~= nil then\r\n                color=itemOptions[itemOffsetCounter]\r\n        end\r\n        image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n        stringXml=stringXml..image\r\n    end\r\n    stringXml=stringXml..rowE\r\n\r\n    if itemsNumber>0 then\r\n        for i=1, itemsNumber do\r\n            preferred_Height=tostring(itemsHeight[i]*1500) -- Item\r\n            rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n            stringXml=stringXml..rowB\r\n            id_element=\"item\"..i..owner\r\n            isActive=\"true\"\r\n            image_asset=localAssets[i+itemOffsetCounter].name\r\n            color=\"#ffffff\"\r\n            if itemOptions[i+itemOffsetCounter] ~= nil then\r\n                    color=itemOptions[i+itemOffsetCounter]\r\n            end\r\n            image='<Image id=\"'..id_element..'\" active=\"'..isActive..'\" offsetXY=\"0 0\" color=\"'..color..'\" width=\"100%\" height=\"100%\" image=\"'..image_asset..'\"></Image>'\r\n            stringXml=stringXml..image\r\n            stringXml=stringXml..rowE\r\n        end\r\n    end\r\n]]\r\n--deleteXml\r\n    --stringXml=stringXml..tableB1\r\n    preferred_Height=50\r\n    rowB='<Row preferredHeight=\"'..preferred_Height..'\">'\r\n    --rowB='<Row>'\r\n    stringXml=stringXml..rowB\r\n    stringXml=stringXml..'<Button  onClick=\"deleteXml2\"><Text fontSize=\"30\" fontStyle=\"Bold\">CLOSE</Text></Button>'\r\n    stringXml=stringXml..rowE\r\n    --stringXml=stringXml..tableE\r\n    stringXml=stringXml..tableE\r\n    stringXml=stringXml..panelE\r\n    self.UI.setXml(stringXml)\r\n    self.clearButtons()\r\n    if player ~= planeLocalStats.owner then\r\n        printToColor(\"Window will close in 10 sec\", player, \"Orange\")\r\n        Wait.time(deleteXml, 10)\r\n    end\r\n\r\nend\r\n\r\nfunction deleteRangeHex()\r\n    for i, button in ipairs(self.getButtons()) do\r\n        if button.click_function == \"hex\" then\r\n            self.removeButton(button.index)\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeFiringArc(degrees, _skipHex)\r\n    writeStraightHex({0,0}, 0, 1, 0)\r\n     -- 0 partially, -1 totally     local _skipHex1=-1      _skipHex=_skipHex1+j\r\n     local tmpskipHex=0\r\n    for j=1, longRangeValue do\r\n        tmpskipHex=_skipHex+j --ric _skipHex=j-1\r\n        writeStraightHex({j*apo, j*halfHex},  0 ,  j+1, tmpskipHex)\r\n        writeStraightHex({-j*apo, j*halfHex}, 0 , j+1, tmpskipHex)\r\n    end\r\n    if degrees ~= 0 then\r\n        for i, button in ipairs(self.getButtons()) do\r\n            if button.click_function == \"hex\" then\r\n                button.position=rotatePointXZ(button.position, {x=0,y=0,z=0}, degrees)\r\n                self.removeButton(button.index)\r\n                self.createButton(button)\r\n            end\r\n        end\r\n    end\r\nend\r\n\r\nfunction writeAllArcHex(_skipHex)\r\n     writeFiringArc(0,_skipHex)\r\nend\r\n\r\n\r\n\r\n\r\nfunction writeStraightHex(startPos , degrees ,  startI, skip)\r\n    hexBtn.color=shortRangeColor\r\n    for i=startI, longRangeValue do\r\n        if i > shortRangeValue then\r\n            hexBtn.color=mediumRangeColor\r\n        end\r\n        if i > mediumRangeValue then\r\n            hexBtn.color=longRangeColor\r\n        end\r\n        hexBtn.position={startPos[1]+i*math.sin(math.rad(degrees))*fullHex , 0.25 , startPos[2]-fullHex*i*math.cos(math.rad(degrees))}\r\n        hexBtn.rotation={0,degrees,0}\r\n        if i >= skip+startI then\r\n            self.createButton(hexBtn)\r\n        else\r\n        end\r\n\r\n    end\r\nend\r\n\r\n\r\n\r\nfunction changeOwner(obj, player, alt)\r\n    self.setColorTint(player)\r\n    planeLocalStats.owner=player\r\n    changeHp(0)\r\nend\r\n\r\nfunction changeOwner2(obj, player, alt)\r\n    changeOwner(obj, player, alt)\r\n    writeMenu()\r\nend\r\n\r\nfunction onClickHp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    if alt then\r\n        changeHp(-1)\r\n    else\r\n        --changeHp(1)\r\n    end\r\nend\r\n\r\nfunction add1Hp(obj, player, alt)\r\n    if player ~= planeLocalStats.owner then printToColor(\"You ar not the owner\", player, \"Yellow\") return end\r\n    changeHp(1)\r\n    writeMenu()\r\nend\r\n\r\nfunction changeHp(increment)\r\n    --print(\"HP \"..planeLocalStats.hp)\r\n    --print(\"STRUCT \"..planeStats.structure)\r\n    planeLocalStats.hp=planeLocalStats.hp+ increment\r\n\r\n    if planeLocalStats.hp > planeStats.structure then\r\n        planeLocalStats.hp=planeStats.structure\r\n    end\r\n    if planeLocalStats.hp < 0 then\r\n        planeLocalStats.hp=0\r\n    end\r\n    if planeLocalStats.hp == 0 then\r\n        --printToAll(self.getName()..\" was destroyed!\", \"Orange\")\r\n        printToAll(self.getName()..\" was destroyed!\", \"Yellow\")\r\n    end\r\n    if characterSheet ~= nil then\r\n        characterSheet.call(\"writeMenu\")\r\n    end\r\n    --print(\" HP   \"..tostring(planeLocalStats.hp))\r\n    writeMenu()\r\nend\r\n\r\nfunction rotatePointXZ(point, center, angleDegrees)\r\n           local angle=math.rad(angleDegrees)\r\n           local rotatedX = math.cos(angle) * (point.x - center.x) - math.sin(angle) * (point.z-center.z) + center.x;\r\n           local rotatedZ = math.sin(angle) * (point.x - center.x) + math.cos(angle) * (point.z - center.z) + center.y;\r\n           return {rotatedX,point.y,rotatedZ};\r\nend\r\n\r\nfunction onPickUp(player)\r\n    if player == \"Black\" then\r\n        return\r\n    end\r\n    if planeLocalStats.owner~=\"\" and planeLocalStats.owner ~= player then\r\n        printToColor(\"You ar not the owner\", player, \"Yellow\")\r\n        self.drop()\r\n    end\r\nend\r\n\r\nfunction onDestroy()\r\n    if plane ~= nil then\r\n        plane.destroy()\r\n    end\r\nend\r\n\r\nfunction hex()\r\nend\r\n\r\nfunction none()\r\nend",
      "LuaScriptState": "{\"svdefenceType\":\"\",\"svflight\":{\"alt\":3,\"speed\":4},\"svplane_GUID\":\"\",\"svplaneLocalStats\":{\"characterSheet_GUID\":\"\",\"fuel\":2,\"hp\":2,\"owner\":\"\",\"rotOffset\":180},\"svplaneStats\":{\"structure\":3},\"svupgrades\":[],\"svweapons\":[]}",
      "GUID": "63059b"
    },
    {
      "Name": "Custom_Model",
      "Transform": {
        "posX": 80.0,
        "posY": -5.0,
        "posZ": -34.0,
        "rotX": -2.33850787E-05,
        "rotY": 0.0176052451,
        "rotZ": 9.956095E-06,
        "scaleX": 0.350000441,
        "scaleY": 0.350000441,
        "scaleZ": 0.350000441
      },
      "Nickname": "Harridan",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": true,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomMesh": {
        "MeshURL": "http://cloud-3.steamusercontent.com/ugc/773996018552980938/949974D0DDD95D93D38F6CDB1768C36DC3FE841F/",
        "DiffuseURL": "http://cloud-3.steamusercontent.com/ugc/786374678936146641/922C553FE4FE67A1495447A1F79735948CD141E3/",
        "NormalURL": "",
        "ColliderURL": "http://cloud-3.steamusercontent.com/ugc/786374678936146869/3C9DCD000C3A6B7058F47FC71476B5C06B36EFFC/",
        "Convex": true,
        "MaterialIndex": 3,
        "TypeIndex": 1,
        "CustomShader": {
          "SpecularColor": {
            "r": 1.0,
            "g": 1.0,
            "b": 1.0
          },
          "SpecularIntensity": 0.0,
          "SpecularSharpness": 2.0,
          "FresnelStrength": 0.0
        },
        "CastShadows": true
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "2859e9"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": 24.0,
        "posY": 0.89999795,
        "posZ": 112.5833,
        "rotX": 1.60505476E-06,
        "rotY": 0.0176052433,
        "rotZ": -5.32793138E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/773996018553088246/70CA55962BF391C3A17E0EEBCB95AF23BA94E717/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "086d6b"
    },
    {
      "Name": "Custom_PDF",
      "Transform": {
        "posX": -24.0,
        "posY": 0.900004745,
        "posZ": -112.5833,
        "rotX": -1.59388867E-06,
        "rotY": 179.992554,
        "rotZ": 4.720389E-07,
        "scaleX": 3.0,
        "scaleY": 1.0,
        "scaleZ": 3.0
      },
      "Nickname": "",
      "Description": "",
      "GMNotes": "",
      "ColorDiffuse": {
        "r": 1.0,
        "g": 1.0,
        "b": 1.0
      },
      "Locked": false,
      "Grid": true,
      "Snap": true,
      "IgnoreFoW": false,
      "Autoraise": true,
      "Sticky": true,
      "Tooltip": true,
      "GridProjection": false,
      "HideWhenFaceDown": false,
      "Hands": false,
      "CustomPDF": {
        "PDFUrl": "http://cloud-3.steamusercontent.com/ugc/773996018553088246/70CA55962BF391C3A17E0EEBCB95AF23BA94E717/",
        "PDFPassword": "",
        "PDFPage": 0,
        "PDFPageOffset": 0
      },
      "XmlUI": "",
      "LuaScript": "",
      "LuaScriptState": "",
      "GUID": "f1435c"
    }
  ],
  "DecalPallet": [],
  "TabStates": {
    "1": {
      "title": "Credits",
      "body": "*******************Credits*******************\nFlex Table (id: 1169112551)\n\nKustom 40k Dice Roller\r by BaconCatBug (id: 959360907)\n\nIMPERIAL NAVY and ORKS Images and models by Mothman\n\nCHAOS, ASURYANI, ASTARTES, TYRANID and NECRON Images, models and rules by Lues",
      "color": "Grey",
      "visibleColor": {
        "r": 0.5,
        "g": 0.5,
        "b": 0.5
      },
      "id": 1
    }
  },
  "CameraStates": [
    {
      "Position": {
        "x": 0.0,
        "y": -2.5,
        "z": 0.0
      },
      "Rotation": {
        "x": 70.33131,
        "y": 89.96399,
        "z": 0.0
      },
      "Distance": 111.375061,
      "Zoomed": false,
      "AbsolutePosition": {
        "x": -37.4867134,
        "y": 102.376831,
        "z": -0.0235632528
      }
    },
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null,
    null
  ],
  "VersionNumber": "v12.2.2"
}